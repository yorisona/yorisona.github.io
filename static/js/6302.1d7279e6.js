"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[6302],{96302:function(e,a,n){n.r(a),n.d(a,{default:function(){return y}});var t,r,s=n(97434),o=n(21495),i=n(59563),m=n(70437),u=n(15681),c=n(1763),l=n(23624),_=n(44928),p=(0,s.defineComponent)({setup:()=>{const e=(0,_.t)(),a=[{align:"left",label:"考核名称",minWidth:100,prop:"assessment_management_name"},{align:"left",label:"考核周期",prop:"assessment_cycle",minWidth:100},{align:"left",label:"考评组",formatter:e=>e.evaluation_group?.name??"--"},{align:"center",label:"当前节点",formatter:e=>u.Kg.get(e.present_stage)},{align:"center",label:"待办人员",formatter:e=>e.present_person?.name??"--"},{align:"center",label:"考核结果",prop:"result"},{align:"center",label:"考核等级",prop:"level"},{label:"操作",minWidth:60,formatter:a=>h("div",[h("tg-button",{attrs:{type:"link"},on:{click:()=>{e.push({name:c.Gr.my.own.detail,params:{id:a.id}})}}},["查看"])])}],n=(0,i.h)(l.$K),t=(0,i.h)(l.Ev,{defaultParams:[{num:20,page_num:1},{search_type:1}],transform(e){return e.data.map((e=>({label:e.name,value:e.id})))}}),r=(0,i.Q)(l.bV,{defaultParams:[{num:1e6,page_num:1},{is_my_assessment:1,search_type:1}],transform:e=>e.data.map((e=>({label:e.name,value:e.id})))}),o=(0,s.ref)({}),m={reset:()=>{o.value={}}};return{columns:a,reqList:n,formData:o,config:m,groupOptions:t,reqAssess:r}},render(){const e=arguments[0],{formData:a}=this;return e(o.L,{attrs:{columns:this.columns,service:this.reqList,config:this.config},model:{value:a,callback:e=>{a=e}}},[e("el-form-item",{attrs:{label:"考核名称："}},[e(m.Z,{attrs:{placeholder:"请选择考核名称",options:this.reqAssess.data},model:{value:a.assessment_management_id,callback:e=>{this.$set(a,"assessment_management_id",e)}}})]),e("el-form-item",{attrs:{label:"考评组："}},[e(m.Z,{attrs:{placeholder:"请选择考评组",options:this.groupOptions.data,filterable:!0,remote:!0,"remote-method":e=>this.groupOptions.pagination.reQuery({name:e,search_type:1})},model:{value:a.evaluation_group_id,callback:e=>{this.$set(a,"evaluation_group_id",e)}}})]),e("el-form-item",{attrs:{label:"考核阶段："}},[e(m.Z,{attrs:{placeholder:"请选择考核阶段",options:u.Tp},model:{value:a.stage,callback:e=>{this.$set(a,"stage",e)}}})])])}}),f=p,d=n(1001),g=(0,d.Z)(f,t,r,!1,null,"68f1beca",null),y=g.exports},15681:function(e,a,n){var t;n.d(a,{F2:function(){return t},Kg:function(){return l},OF:function(){return m},Sr:function(){return o},Tp:function(){return _},__:function(){return c},fB:function(){return i},rD:function(){return r},ts:function(){return s}}),function(e){e[e["RATION"]=1]="RATION",e[e["QUALITATIVE"]=2]="QUALITATIVE",e[e["BONUS"]=3]="BONUS",e[e["DEDUCT"]=4]="DEDUCT"}(t||(t={}));const r=new Map([[t.RATION,"定量指标"],[t.QUALITATIVE,"定性指标"],[t.BONUS,"加分项"],[t.DEDUCT,"扣分项"]]),s=[{label:"定量指标",value:t.RATION},{label:"定性指标",value:t.QUALITATIVE},{label:"加分项",value:t.BONUS},{label:"扣分项",value:t.DEDUCT}];var o;(function(e){e[e["MONTHLY"]=1]="MONTHLY",e[e["QUARTERLY"]=2]="QUARTERLY",e[e["SEMIANNUA"]=3]="SEMIANNUA",e[e["ANNUAL"]=4]="ANNUAL"})(o||(o={}));const i=new Map([[o.MONTHLY,"月度"],[o.QUARTERLY,"季度"],[o.SEMIANNUA,"半年度"],[o.ANNUAL,"年度"]]),m=[{label:"月度",value:o.MONTHLY},{label:"季度",value:o.QUARTERLY},{label:"半年度",value:o.SEMIANNUA},{label:"年度",value:o.ANNUAL}];var u,c;(function(e){e[e["BY_EVALUATION_PERSON"]=1]="BY_EVALUATION_PERSON",e[e["DIRECT_MANAGER"]=2]="DIRECT_MANAGER"})(u||(u={})),function(e){e[e["TARGET_SETTING"]=1]="TARGET_SETTING",e[e["TARGET_CONFIRM"]=2]="TARGET_CONFIRM",e[e["IN_PROGRESS"]=3]="IN_PROGRESS",e[e["SELF"]=4]="SELF",e[e["SUPERIOR"]=5]="SUPERIOR",e[e["SIGNATURE"]=6]="SIGNATURE",e[e["FINISH"]=7]="FINISH"}(c||(c={}));const l=new Map([[c.TARGET_SETTING,"目标制定"],[c.TARGET_CONFIRM,"目标确认"],[c.IN_PROGRESS,"执行中"],[c.SELF,"自评"],[c.SUPERIOR,"上级评分"],[c.SIGNATURE,"签字确认"],[c.FINISH,"考核完成"]]),_=[{label:"目标制定",value:c.TARGET_SETTING},{label:"目标确认",value:c.TARGET_CONFIRM},{label:"执行中",value:c.IN_PROGRESS},{label:"自评",value:c.SELF},{label:"上级评分",value:c.SUPERIOR},{label:"签字确认",value:c.SIGNATURE},{label:"考核完成",value:c.FINISH}]},59563:function(e,a,n){n.d(a,{Q:function(){return s},h:function(){return o}});n(21703);var t=n(97434),r=n(48606);const s=(e,{manual:a,onError:n,onSuccess:s,defaultParams:o,transform:i}={})=>{const m=(0,t.ref)(),u=(0,t.ref)(),c=(0,t.ref)(!1),l=(0,t.ref)([]),_=()=>{p(...l.value)},p=(...a)=>Promise.resolve(a||o).then((()=>{c.value=!0})).then((()=>0===a.length&&o&&o.length>0?o:a)).then((e=>(l.value=e,e))).then((a=>e(...a))).then((e=>{if(!e.data.success)throw new Error(e.data.message);return m.value=i?i(e.data.data):e.data.data,s&&s(m.value,e.data),e})).then((()=>{c.value=!1})).catch((e=>{throw c.value=!1,u.value=e.message,n&&n(e),r.Message.error(e.message),e})),f=p;return a||p(...o||[]),(0,t.reactive)({data:m,error:u,loading:c,reload:_,run:p,runAsync:f,params:l})},o=(e,a={})=>{const{defaultPageSize:n=20,defaultParams:r=[],transform:o,...i}=a,m=(0,t.ref)(),u=(0,t.reactive)({total:0,page_num:1,page_size:n,onCurrentChange:e=>{const a=[..._.params];a[0]?a[0].page_num=e:a[0]={num:n,page_num:e},_.runAsync(...a).then((()=>{u.page_num=e}))},refresh:()=>u.onCurrentChange(1),reQuery(...e){const a=[];return _.params[0]?(a[0]=_.params[0],a[0].page_num=1,u.page_num=1):(a[0]={num:n,page_num:1},u.page_num=1),a.push(...e),_.runAsync(...a)}}),[c={num:n,page_num:1},...l]=r,_=s(e,{defaultParams:[c,...l],...i,onSuccess(e,n){m.value=o?o(e):e.data,u.total=e.total,a.onSuccess&&a.onSuccess(m.value,n)}}),{data:p,...f}=(0,t.toRefs)(_);return(0,t.reactive)({...f,data:m,pagination:u})}},23624:function(e,a,n){n.d(a,{$K:function(){return N},$R:function(){return R},$b:function(){return B},Cl:function(){return X},Dr:function(){return o},EB:function(){return h},Ev:function(){return d},JP:function(){return S},L5:function(){return D},Mz:function(){return j},O5:function(){return E},UX:function(){return f},Y4:function(){return i},ZM:function(){return v},Z_:function(){return L},ao:function(){return $},bV:function(){return F},bl:function(){return m},dP:function(){return P},g:function(){return A},gb:function(){return U},iC:function(){return T},iL:function(){return p},kT:function(){return y},lI:function(){return g},mS:function(){return u},n5:function(){return b},nQ:function(){return s},oY:function(){return C},o_:function(){return w},q0:function(){return M},s9:function(){return G},vL:function(){return l},vv:function(){return c},wF:function(){return I},wH:function(){return O},y3:function(){return k},yI:function(){return q},zr:function(){return _}});var t=n(76012),r=n(64236);const s=async(e,a)=>(0,t.dX)("/api/performance_management/query_indicators_library",{params:{...e,...(0,r.jG)(a)}}),o=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator",(0,r.jG)(e)),i=async e=>(0,t.HG)("/api/performance_management/delete_indicators",{data:{id_list:e}}),m=async e=>(0,t.dX)("/api/performance_management/query_indicator_tag",{params:{...(0,r.jG)(e)}}),u=async e=>(0,t.SO)("/api/performance_management/modify_move_indicator_tag",{indicator_tag_list:e}),c=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator_tag",e),l=async e=>(0,t.HG)(`/api/performance_management/delete_indicators_tag/${e}`),_=async()=>(0,t.dX)("/api/feishu/feishu_department_and_user_list"),p=async e=>(0,t.SO)("/api/performance_management/save_or_modify_evaluation_group",e),f=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group",{params:(0,r.jG)({...e,...a})}),d=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group_name",{params:(0,r.jG)({...e,...a})}),g=async e=>(0,t.HG)(`/api/performance_management/delete_evaluation_group/${e}`),y=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment",{params:(0,r.jG)({...e,...a})}),v=async e=>(0,t.SO)("/api/performance_management/save_assessment",e),h=async e=>(0,t.SO)("/api/performance_management/save_assessment_level_config",e),b=async()=>(0,t.dX)("/api/performance_management/query_assessment_level_config"),A=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail",{params:(0,r.jG)({...e,...a})}),T=async e=>(0,t.dX)("/api/performance_management/get_assessment_detail_by_my_performance",{params:(0,r.jG)(e)}),E=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_analysis",{params:(0,r.jG)({...e,...a})}),R=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_performance_record",{params:(0,r.jG)({...e,...a})}),I=async e=>(0,t.SO)("/api/performance_management/modify_start_score",e),S=async e=>(0,t.SO)("/api/performance_management/modify_assessment_result",e),N=async(e,a)=>(0,t.dX)("/api/performance_management/query_my_performance",{params:(0,r.jG)({...e,...a})}),G=async e=>(0,t.dX)("/api/performance_management/query_assessment_by_id",{params:{assessment_management_id:e}}),O=async e=>{const{assessment_dimension_list:a}=e;return a&&a.length>0&&a.forEach((e=>{e.indicator_list&&e.indicator_list?.forEach((e=>{["self_assessment_score","weight","superior_assessment_score"].forEach((a=>{(0,r.xb)(e[a])&&(e[a]=null)}))}))})),console.log("payload",e),(0,t.SO)("/api/performance_management/modify_performance_process",(0,r.jG)(e))},U=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_record",{params:(0,r.jG)({...a,...e})}),L=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_detail_record",{params:(0,r.jG)({...e,...a})}),q=async(e,a)=>(0,t.dX)("/api/performance_management/query_performance_analysis",{params:(0,r.jG)({...e,...a})}),C=async()=>(0,t.dX)("/api/performance_management/query_finish_assessment"),X=async(e,a)=>(0,t.dX)("/api/performance_management/query_with_me_performance",{params:(0,r.jG)({...e,...a})}),j=async(e,a)=>(0,t.dX)("/api/performance_management/query_subordinate_performance",{params:(0,r.jG)({...e,...a})}),M=async e=>(0,t.SO)("/api/performance_management/check_evaluation_group_user_ids",e),P=async e=>(0,t.SO)("/api/performance_management/modify_reset_process",(0,r.jG)(e)),w=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user",{params:e}),D=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_analysis",{params:e}),k=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_performance_record",{params:e}),F=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_name",{params:(0,r.jG)({...e,...a})}),$=async e=>(0,t.dX)("/api/auth/getuser_leader_by_subordinate_id",{params:{user_id:e}}),B=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_my_performance",{params:(0,r.jG)(e)})},44928:function(e,a,n){n.d(a,{t:function(){return r}});var t=n(86834);const r=()=>{const e=new Proxy({},{get(e,a){return Reflect.get(t.Z,a)}});return e}},70437:function(e,a,n){var t=n(36568),r=n.n(t);const s={functional:!0,render:(e,a)=>{const{props:n}=a,{showAll:t=!1,showAllText:s="全部",clearable:o=!0}=n,i={props:{...a.value,clearable:o},on:a.listeners,attrs:a.data.attrs};return e("el-select",r()([{},i]),[t&&e("el-option",{attrs:{label:s,value:void 0}}),n.options?.map(((a,n)=>e("el-option",{attrs:{disabled:a.disabled,label:a.label,value:a.value},key:n})))])}};a["Z"]=s},21495:function(e,a,n){n.d(a,{L:function(){return s}});var t=n(97434),r={template:"template-fe9519",searchBar:"searchBar-c522bd",formItemContainer:"formItemContainer-d53e08",formItem:"formItem-c6ff4c",bodyContainer:"bodyContainer-b06936",btnLine:"btnLine-d428fc",tableContainer:"tableContainer-dd87f4"},s=(0,t.defineComponent)({props:{columns:{type:Array,default:()=>[]},value:{type:Object},routes:{},service:{required:!0,type:Function},config:{type:Object,default:()=>{}}},setup(e,a){const n=(0,t.ref)(),{reset:r}=e.config||{},s=e.service,o=()=>{const a=s.params;return a[0]&&(a[0].page_num=1),s.runAsync(a[0],e.value)},i=()=>{r&&r(),(0,t.nextTick)(o)};return{formRef:n,onReset:i,reqData:s,search:o}},render(){const e=arguments[0];return e("div",{class:["tg-page-container",r.template]},[this.routes&&e("tg-breadcrumbs",{attrs:{routes:this.routes}}),this.$slots.default&&e("div",{class:["tg-card",r.searchBar]},[e("el-form",{attrs:{size:"small","show-message":!1,"hide-required-asterisk":!0,"label-width":"70px"},ref:"formRef"},[e("div",{class:r.formItemContainer},[this.$slots.default?.map((a=>e("div",{class:r.formItem},[a]))),this.$slots.searchBtn?this.$slots.searchBtn:e("div",[e("tg-button",{attrs:{type:"primary"},on:{click:this.search}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.onReset}},["重置"])])])])]),this.$slots.middle,e("div",{class:r.bodyContainer},[this.$slots.btnLine&&e("div",{class:r.btnLine},[this.$slots.btnLine]),e("div",{class:r.tableContainer},[e("tg-table",{attrs:{stripe:!0,columns:this.columns,height:"100%",data:this.reqData.data,pagination:this.reqData.pagination},directives:[{name:"loading",value:this.reqData.loading}],on:{"selection-change":this.config?.table?.selectionChange}},[e("div",{class:"tg-page-empty",slot:"empty"},[e("empty-common")])])])])])}})}}]);