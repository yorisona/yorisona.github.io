"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[1863],{41863:function(e,a,n){n.r(a),n.d(a,{default:function(){return E}});var r,t,s,o,i=n(36568),l=n.n(i),c=n(97434),u=n(15681),m=n(23624),p=n(64236),d=n(48606),_=(0,c.defineComponent)({setup(e,a){const n=(0,c.ref)(),r=(0,c.ref)(!1),t=(0,c.ref)([]),s=(0,c.ref)([]),o=(0,c.ref)(),i=(0,c.ref)(""),l=(0,c.ref)(0),u=(0,c.computed)((()=>0!==l.value&&t.value.length===l.value));let p=[];const _=e=>{e&&(p=e.map((e=>e.user_id)))},f=e=>{e.nodeType=1,e.nodeId=e.department_id;const a=e.sons?.map((e=>e));return e.user_list?.forEach((a=>{e.sons?.unshift({nodeType:2,nodeId:a.id,name:a.username,real_name:a.real_name})})),a?.forEach(f),e};(0,c.onMounted)((()=>{(0,m.zr)().then((e=>{if(!e.data.success)return;const a=[];let n=0;e.data.data.data.forEach((e=>{n+=e.member_count;const r=f(e);a.push(r)})),s.value=a,l.value=n})).then((()=>{p.length>0&&p.forEach((e=>{o.value?.setChecked(e,!0)}))}))}));const v=(e,a)=>{if(a)2===e.nodeType&&t.value.push(e);else{const a=t.value.findIndex((a=>a.nodeId===e.nodeId));-1!==a&&t.value.splice(a,1)}},y=()=>{t.value.forEach((e=>{o.value?.setChecked(e.nodeId,!1)})),t.value=[]},g=()=>{0!==t.value.length?(a.emit("submit",t.value.map((e=>({real_name:e.real_name,username:e.name,user_id:e.nodeId})))),a.emit("close")):d.Message.error("请选择考核人员")};return{dialogSubmit:g,show:_,formData:n,visible:r,selected:t,treeData:s,onCheck:v,treeRef:o,searchValue:i,hasCheckAll:u,AllMember:l,clearSelect:y}},render(){const e=arguments[0],{selected:a}=this;return e("div",{class:"dialog-container"},[e("div",{class:"select-box"},[e("el-input",{class:"mgb-24",attrs:{size:"small",placeholder:"请输入花名查找"},on:{input:()=>{this.treeRef?.filter(this.searchValue)}},model:{value:this.searchValue,callback:e=>{this.searchValue=e}}},[e("i",{slot:"prefix",class:"el-input__icon el-icon-search"})]),e("el-tree",l()([{ref:"treeRef",attrs:{data:this.treeData,"node-key":"nodeId","show-checkbox":!0,"render-after-expand":!1,"filter-node-method":(e,a)=>!!(0,p.xb)(e)||-1!==a.name.indexOf(e),"render-content":(e,{data:a})=>2===a.nodeType?e("span",[a.name]):e("span",[a.name," ",e("span",{class:"people-count"},["（",a.member_count,"人）"])])},on:{"check-change":this.onCheck}},{props:{props:{label:"name",children:"sons"}}}]))]),e("div",{class:"select-box"},[e("div",{class:"selected-info"},[e("span",["已选：",this.selected.length," 个考核人员"]),e("a",{on:{click:this.clearSelect}},["清空选中"])]),e("div",{class:"selected-people"},[e("div",{class:"selected-people-list"},[a.map(((a,n)=>e("span",{key:n},[a.name,e("i",{class:"el-input__icon el-icon-close",on:{click:()=>{this.selected.splice(n,1),this.treeRef?.setChecked(a.nodeId,!1)}}})])))])])])])}}),f=_,v=n(1001),y=(0,v.Z)(f,r,t,!1,null,"8fb5ec96",null),g=y.exports,b=n(43773),h=(0,c.defineComponent)({setup(){const e=(0,c.inject)("formData"),a=(0,c.ref)(),n=()=>Promise.resolve(),r=(0,c.computed)((()=>{let a="";const n=2,r=e.value.by_evaluation_person.length,t=e.value.by_evaluation_person.slice(0,n);return a=t.map((e=>e.username)).join("、"),r>n&&(a=`${a}等${r}人`),a})),t=(0,b.R)({component:g,title:"选择考核人员",width:"900px",on:{submit:a=>{e.value.by_evaluation_person=a}}});return{formData:e,formRef:a,validate:n,by_evaluation_person:r,dialogSelectPeople:t}},render(){const e=arguments[0],{formData:a}=this;return e("div",[e("el-form",l()([{ref:"formRef",attrs:{size:"small","label-width":"110px"}},{attrs:{model:this.formData}}]),[e("el-form-item",{attrs:{label:"考评组名称：",prop:"name",rules:[{required:!0,message:"请填写考评组名称"}]}},[e("el-input",{attrs:{placeholder:"请填写考评组名称"},style:"width:208px",model:{value:a.name,callback:e=>{this.$set(a,"name",e)}}})]),e("el-form-item",{attrs:{label:"周期类型：",prop:"cycle_type",rules:[{required:!0,message:"选择周期类型"}]}},[u.OF.map((a=>e("el-radio",{attrs:{size:"small",name:"cycle_type",label:a.value},model:{value:this.formData.cycle_type,callback:e=>{this.$set(this.formData,"cycle_type",e)}}},[a.label])))]),e("el-form-item",{attrs:{label:"被考核人员：",prop:"check_standard"}},[e("div",{style:"width:264px",on:{click:()=>{this.dialogSelectPeople.show(a.by_evaluation_person)}}},[e("el-input",{attrs:{value:this.by_evaluation_person,placeholder:"请选择人员",readonly:!0},style:"width:100%"},[e("i",{class:"el-icon-edit el-input__icon",slot:"suffix"})])])])])])}}),S=h,T=(0,v.Z)(S,s,o,!1,null,"2dbcb106",null),E=T.exports},15681:function(e,a,n){var r;n.d(a,{F2:function(){return r},Kg:function(){return m},OF:function(){return l},Sr:function(){return o},Tp:function(){return p},__:function(){return u},fB:function(){return i},rD:function(){return t},ts:function(){return s}}),function(e){e[e["RATION"]=1]="RATION",e[e["QUALITATIVE"]=2]="QUALITATIVE",e[e["BONUS"]=3]="BONUS",e[e["DEDUCT"]=4]="DEDUCT"}(r||(r={}));const t=new Map([[r.RATION,"定量指标"],[r.QUALITATIVE,"定性指标"],[r.BONUS,"加分项"],[r.DEDUCT,"扣分项"]]),s=[{label:"定量指标",value:r.RATION},{label:"定性指标",value:r.QUALITATIVE},{label:"加分项",value:r.BONUS},{label:"扣分项",value:r.DEDUCT}];var o;(function(e){e[e["MONTHLY"]=1]="MONTHLY",e[e["QUARTERLY"]=2]="QUARTERLY",e[e["SEMIANNUA"]=3]="SEMIANNUA",e[e["ANNUAL"]=4]="ANNUAL"})(o||(o={}));const i=new Map([[o.MONTHLY,"月度"],[o.QUARTERLY,"季度"],[o.SEMIANNUA,"半年度"],[o.ANNUAL,"年度"]]),l=[{label:"月度",value:o.MONTHLY},{label:"季度",value:o.QUARTERLY},{label:"半年度",value:o.SEMIANNUA},{label:"年度",value:o.ANNUAL}];var c,u;(function(e){e[e["BY_EVALUATION_PERSON"]=1]="BY_EVALUATION_PERSON",e[e["DIRECT_MANAGER"]=2]="DIRECT_MANAGER"})(c||(c={})),function(e){e[e["TARGET_SETTING"]=1]="TARGET_SETTING",e[e["TARGET_CONFIRM"]=2]="TARGET_CONFIRM",e[e["IN_PROGRESS"]=3]="IN_PROGRESS",e[e["SELF"]=4]="SELF",e[e["SUPERIOR"]=5]="SUPERIOR",e[e["SIGNATURE"]=6]="SIGNATURE",e[e["FINISH"]=7]="FINISH"}(u||(u={}));const m=new Map([[u.TARGET_SETTING,"目标制定"],[u.TARGET_CONFIRM,"目标确认"],[u.IN_PROGRESS,"执行中"],[u.SELF,"自评"],[u.SUPERIOR,"上级评分"],[u.SIGNATURE,"签字确认"],[u.FINISH,"考核完成"]]),p=[{label:"目标制定",value:u.TARGET_SETTING},{label:"目标确认",value:u.TARGET_CONFIRM},{label:"执行中",value:u.IN_PROGRESS},{label:"自评",value:u.SELF},{label:"上级评分",value:u.SUPERIOR},{label:"签字确认",value:u.SIGNATURE},{label:"考核完成",value:u.FINISH}]},23624:function(e,a,n){n.d(a,{$K:function(){return N},$R:function(){return R},$b:function(){return P},Cl:function(){return j},Dr:function(){return o},EB:function(){return b},Ev:function(){return f},JP:function(){return A},L5:function(){return L},Mz:function(){return D},O5:function(){return E},UX:function(){return _},Y4:function(){return i},ZM:function(){return g},Z_:function(){return w},ao:function(){return F},bV:function(){return $},bl:function(){return l},dP:function(){return X},g:function(){return S},gb:function(){return G},iC:function(){return T},iL:function(){return d},kT:function(){return y},lI:function(){return v},mS:function(){return c},n5:function(){return h},nQ:function(){return s},oY:function(){return C},o_:function(){return q},q0:function(){return x},s9:function(){return O},vL:function(){return m},vv:function(){return u},wF:function(){return I},wH:function(){return k},y3:function(){return M},yI:function(){return U},zr:function(){return p}});var r=n(76012),t=n(64236);const s=async(e,a)=>(0,r.dX)("/api/performance_management/query_indicators_library",{params:{...e,...(0,t.jG)(a)}}),o=async e=>(0,r.SO)("/api/performance_management/save_or_modify_indicator",(0,t.jG)(e)),i=async e=>(0,r.HG)("/api/performance_management/delete_indicators",{data:{id_list:e}}),l=async e=>(0,r.dX)("/api/performance_management/query_indicator_tag",{params:{...(0,t.jG)(e)}}),c=async e=>(0,r.SO)("/api/performance_management/modify_move_indicator_tag",{indicator_tag_list:e}),u=async e=>(0,r.SO)("/api/performance_management/save_or_modify_indicator_tag",e),m=async e=>(0,r.HG)(`/api/performance_management/delete_indicators_tag/${e}`),p=async()=>(0,r.dX)("/api/feishu/feishu_department_and_user_list"),d=async e=>(0,r.SO)("/api/performance_management/save_or_modify_evaluation_group",e),_=async(e,a)=>(0,r.dX)("/api/performance_management/query_evaluation_group",{params:(0,t.jG)({...e,...a})}),f=async(e,a)=>(0,r.dX)("/api/performance_management/query_evaluation_group_name",{params:(0,t.jG)({...e,...a})}),v=async e=>(0,r.HG)(`/api/performance_management/delete_evaluation_group/${e}`),y=async(e,a)=>(0,r.dX)("/api/performance_management/query_assessment",{params:(0,t.jG)({...e,...a})}),g=async e=>(0,r.SO)("/api/performance_management/save_assessment",e),b=async e=>(0,r.SO)("/api/performance_management/save_assessment_level_config",e),h=async()=>(0,r.dX)("/api/performance_management/query_assessment_level_config"),S=async(e,a)=>(0,r.dX)("/api/performance_management/query_assessment_detail",{params:(0,t.jG)({...e,...a})}),T=async e=>(0,r.dX)("/api/performance_management/get_assessment_detail_by_my_performance",{params:(0,t.jG)(e)}),E=async(e,a)=>(0,r.dX)("/api/performance_management/query_assessment_detail_by_analysis",{params:(0,t.jG)({...e,...a})}),R=async(e,a)=>(0,r.dX)("/api/performance_management/query_assessment_detail_by_performance_record",{params:(0,t.jG)({...e,...a})}),I=async e=>(0,r.SO)("/api/performance_management/modify_start_score",e),A=async e=>(0,r.SO)("/api/performance_management/modify_assessment_result",e),N=async(e,a)=>(0,r.dX)("/api/performance_management/query_my_performance",{params:(0,t.jG)({...e,...a})}),O=async e=>(0,r.dX)("/api/performance_management/query_assessment_by_id",{params:{assessment_management_id:e}}),k=async e=>{const{assessment_dimension_list:a}=e;return a&&a.length>0&&a.forEach((e=>{e.indicator_list&&e.indicator_list?.forEach((e=>{["self_assessment_score","weight","superior_assessment_score"].forEach((a=>{(0,t.xb)(e[a])&&(e[a]=null)}))}))})),console.log("payload",e),(0,r.SO)("/api/performance_management/modify_performance_process",(0,t.jG)(e))},G=async(e,a)=>(0,r.dX)("/api/performance_management/query_user_performance_record",{params:(0,t.jG)({...a,...e})}),w=async(e,a)=>(0,r.dX)("/api/performance_management/query_user_performance_detail_record",{params:(0,t.jG)({...e,...a})}),U=async(e,a)=>(0,r.dX)("/api/performance_management/query_performance_analysis",{params:(0,t.jG)({...e,...a})}),C=async()=>(0,r.dX)("/api/performance_management/query_finish_assessment"),j=async(e,a)=>(0,r.dX)("/api/performance_management/query_with_me_performance",{params:(0,t.jG)({...e,...a})}),D=async(e,a)=>(0,r.dX)("/api/performance_management/query_subordinate_performance",{params:(0,t.jG)({...e,...a})}),x=async e=>(0,r.SO)("/api/performance_management/check_evaluation_group_user_ids",e),X=async e=>(0,r.SO)("/api/performance_management/modify_reset_process",(0,t.jG)(e)),q=async e=>(0,r.dX)("/api/performance_management/query_assessment_and_user",{params:e}),L=async e=>(0,r.dX)("/api/performance_management/query_assessment_and_user_by_analysis",{params:e}),M=async e=>(0,r.dX)("/api/performance_management/query_assessment_and_user_by_performance_record",{params:e}),$=async(e,a)=>(0,r.dX)("/api/performance_management/query_assessment_name",{params:(0,t.jG)({...e,...a})}),F=async e=>(0,r.dX)("/api/auth/getuser_leader_by_subordinate_id",{params:{user_id:e}}),P=async e=>(0,r.dX)("/api/performance_management/query_assessment_and_user_by_my_performance",{params:(0,t.jG)(e)})},43773:function(e,a,n){n.d(a,{R:function(){return p},y:function(){return d}});var r=n(36568),t=n.n(r),s=n(97434),o=n(64923),i=n(77944);let l=1;const c=()=>{const e=document.createElement("div");return e.id="dialog_"+l++,document.body.appendChild(e),e},u=new Function,m=(e,a)=>{let n=e;return void 0===n&&(n={}),Object.keys(a).forEach((e=>{const r=n[e]||u,t=a[e];n[e]=(...e)=>{if(!1!==t(...e))return r(...e)}})),n},p=(e={})=>{const a=(0,s.ref)(),n=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),r=(0,s.ref)(!0),l=e=>{Object.keys(e).forEach((a=>{n.hasOwnProperty.call(n,a)&&(n[a]=e[a])}))};l(e);const u=(0,s.ref)(m(e.on,{close(){n.visible=!1},updateDialog(e={}){l(e)}})),p=()=>{const e=a.value.$refs&&a.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};a.value=new o["default"]({el:c(),store:i.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((a=>{(0,s.provide)(a,e.provide[a])}))},render(a){if(r.value&&n.visible)return a("el-dialog",t()([{class:`customer-dialog el-dialog-center-rewrite tg-body-container  ${e.class}`},{props:n},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[n.visible&&a(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value}),n.footer&&a("fragments",{slot:"footer"},[a("tg-button",{on:{click:()=>n.visible=!1}},[n.cancelText]),n.disabledOK&&a("tg-button",{attrs:{type:"primary"},on:{click:p}},[n.okText])])])}});const d=(...e)=>{n.visible||(n.visible=!0,(0,s.nextTick)((()=>{const n=a.value.$refs&&a.value.$refs.dialogRef;n?n.dialogShow?n.dialogShow(...e):n.show&&n.show(...e):console.log("未找到子组件请检查代码")})))},_=e=>(l(e),y),f=()=>{n.visible=!1},v=(e,a,n=!1)=>(!0===n?u.value[e]=a:m(u.value,{[e]:a}),y);(0,s.onUnmounted)((()=>{r.value=!1,n.visible=!1}));const y=(0,s.reactive)({show:d,update:_,on:v,close:f,config:e,data:e.data});return y},d=(e={})=>{const a=(0,s.ref)(),n=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),r=(0,s.ref)(!0),l=e=>{Object.keys(e).forEach((a=>{n.hasOwnProperty.call(n,a)&&(n[a]=e[a])}))};l(e);const u=(0,s.ref)(m(e.on,{close(){n.visible=!1},updateDialog(e={}){l(e)}})),p=()=>{const e=a.value.$refs&&a.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};a.value=new o["default"]({el:c(),store:i.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((a=>{(0,s.provide)(a,e.provide[a])}))},render(a){if(!r.value)return;if(!n.visible)return;const{width:s,...o}=n;return a("el-drawer",t()([{class:`tg-drawer-rewrite ${e.class}`},{props:{...o,size:s}},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[a("div",{class:"tg-drawer-content"},[n.visible&&a(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value})]),n.footer&&a("div",{class:"tg-drawer-footer"},[a("tg-button",{on:{click:()=>n.visible=!1}},[n.cancelText]),n.disabledOK&&a("tg-button",{class:"mgl-12",attrs:{type:"primary"},on:{click:p}},[n.okText])])])}});const d=(...e)=>{n.visible||(n.visible=!0,(0,s.nextTick)((()=>{const n=a.value.$refs&&a.value.$refs.dialogRef;n?n.dialogShow?n.dialogShow(...e):n.show&&n.show(...e):console.log("未找到子组件请检查代码")})))},_=e=>(l(e),y),f=()=>{n.visible=!1},v=(e,a,n=!1)=>(!0===n?u.value[e]=a:m(u.value,{[e]:a}),y);(0,s.onUnmounted)((()=>{r.value=!1,n.visible=!1}));const y=(0,s.reactive)({show:d,update:_,on:v,close:f,config:e});return y}}}]);