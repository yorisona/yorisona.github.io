"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5321],{71075:function(e,t,a){a.d(t,{Z:function(){return m}});var l,r,i=a(97434),n=(0,i.defineComponent)({name:"Fold",props:{show:{type:Boolean,default:!1}},setup(e,t){return{}},render(){const e=arguments[0];return e("span",{class:"folder-box"},[this.show?"收起更多筛选":"展开更多筛选",this.show?e("tgIcon",{attrs:{name:"ico-arrow-up"},style:"font-size: 17px;margin-top: 1px;margin-left: 2px"}):e("tgIcon",{attrs:{name:"ico-arrow-down"},style:"font-size: 15px;margin-top: 1px;margin-left: 2px"})])}}),o=n,s=a(1001),u=(0,s.Z)(o,l,r,!1,null,"7f2632d6",null),m=u.exports},35321:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-kol-manage tg-page-container",staticStyle:{"min-width":"1260px"}},[a("tg-card",{staticClass:"search-box",attrs:{padding:[18,18,6,18]},on:{"rect:update":e.onTopCardRectUpdate}},[a("el-form",{attrs:{size:"small","show-message":!1,"label-width":"70px"}},[a("div",{staticClass:"filter-form-div no-wrap"},[a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"达人名称："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入达人名称",clearable:""},model:{value:e.filterParams.kol_name,callback:function(t){e.$set(e.filterParams,"kol_name","string"===typeof t?t.trim():t)},expression:"filterParams.kol_name"}})],1)],1),a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"业务类型："}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.filterParams.business_type,callback:function(t){e.$set(e.filterParams,"business_type",t)},expression:"filterParams.business_type"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._l(e.businessTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1)],1),a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"达人标签："}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.filterParams.kol_tag,callback:function(t){e.$set(e.filterParams,"kol_tag",t)},expression:"filterParams.kol_tag"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._l(e.kolTagList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1)],1),a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"擅长平台："}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.filterParams.platform,callback:function(t){e.$set(e.filterParams,"platform",t)},expression:"filterParams.platform"}},e._l(e.newPlatformList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{staticClass:"filter-form-item",staticStyle:{"min-width":"250px","max-width":"250px"}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("div",{staticClass:"filter-item-btn-more"},[a("tg-button",{on:{click:e.changeShowMoreParams}},[e._v("高级筛选")]),a("tg-button",{attrs:{type:"primary"},on:{click:e.clickQueryCustomer}},[e._v("查询")]),a("tg-button",{on:{click:e.resetCustomer}},[e._v("重置")])],1)])],1)]),e.show?a("div",{staticClass:"filter-form-div no-wrap"},[a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"审核状态："}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.filterParams.verify_status,callback:function(t){e.$set(e.filterParams,"verify_status",t)},expression:"filterParams.verify_status"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._l(e.kolVerifyStatusFilter,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1)],1),a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"创建人："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入创建人",clearable:""},model:{value:e.filterParams.add_by,callback:function(t){e.$set(e.filterParams,"add_by","string"===typeof t?t.trim():t)},expression:"filterParams.add_by"}})],1)],1),a("div",{staticClass:"filter-form-item more"},[a("el-form-item",{attrs:{label:"更新日期："}},[a("el-date-picker",{staticStyle:{width:"100%","min-width":"134px"},attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy.MM.dd",size:"small",placeholder:"选择日期"},model:{value:e.filterParams.gmt_modified_gte,callback:function(t){e.$set(e.filterParams,"gmt_modified_gte",t)},expression:"filterParams.gmt_modified_gte"}})],1)],1),a("div",{staticClass:"filter-form-item more"}),a("div",{staticClass:"filter-form-item",staticStyle:{"min-width":"250px","max-width":"250px"}})]):e._e()]),e.show?a("tg-label-group",{staticStyle:{"margin-top":"5px"},attrs:{options:e.myAreaType,label:"擅长类目"},model:{value:e.filterParams.area,callback:function(t){e.$set(e.filterParams,"area",t)},expression:"filterParams.area"}}):e._e()],1),a("tg-card",e._b({staticClass:"list-center mgt-12",class:e.cardFlexClass,attrs:{padding:[12,18,0,18]},on:{"rect:update":e.onRectUpdate}},"tg-card",e.cardProps,!1),[a("tg-button-line",{staticClass:"flex-none"},[e.Permission.canCreateKol?a("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:e.addCol}},[e._v(" 新增达人 ")]):e._e()],1),e.Permission.canViewKolList?a("el-table",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"supplier-list-kol-list",class:e.Permission.canCreateKol?"mgt-12":"mgt-6",staticStyle:{cursor:"pointer"},attrs:{stripe:"",data:e.customerList},on:{"row-click":e.goDetail},scopedSlots:e._u([{key:"empty",fn:function(){return[a("empty-common",{attrs:{"detial-text":"暂无数据"}})]},proxy:!0}],null,!1,2826547353)},"el-table",e.tableProps,!1),e._l(e.kolColumn,(function(t,l){return a("el-table-column",e._b({key:l},"el-table-column",t,!1))})),1):e._e(),a("div",{staticClass:"block flex-none",staticStyle:{margin:"10px 0 6px 0"}},[e.Permission.canViewKolList&&e.customerList.length?a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,total:e.pagination.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)},"update:pageSizes":function(t){return e.$set(e.pagination,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.pagination,"pageSizes",t)},"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)}}}):e._e()],1)],1)],1)},r=[],i=a(97434),n=a(68675),o=a(78902),s=a(21757),u=a(58302),m=a(29625),c=a(52140),p=a(54433),f=a(1763),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.defClass},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.min,expression:"min"}],staticClass:"el-range-input",attrs:{maxLength:"12",autocomplete:"off"},domProps:{value:e.min},on:{focus:e.focusHandler,blur:e.blurHandler,input:[function(t){t.target.composing||(e.min=t.target.value)},function(t){return e.inputHandler(t,"min")}]}}),a("span",{staticClass:"el-range-separator"},[e._v("~")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.max,expression:"max"}],staticClass:"el-range-input",staticStyle:{"margin-left":"10px"},attrs:{maxLength:"12",autocomplete:"off"},domProps:{value:e.max},on:{focus:e.focusHandler,blur:e.blurHandler,input:[function(t){t.target.composing||(e.max=t.target.value)},function(t){return e.inputHandler(t,"max")}]}})])},g=[],v=(a(26699),a(61282)),_=(0,i.defineComponent)({name:"InputRange",props:{size:{type:String,default:"small"},value:{type:Array,default:()=>[]}},setup(e,t){const a=(0,i.ref)(["xiaojin-input-range","el-date-editor","el-range-editor","el-input__inner","el-date-editor--daterange","el-range-editor--small","el-range-input"]),l=(0,i.ref)(""),r=(0,i.ref)(""),n=()=>{a.value.includes("is-active")||a.value.push("is-active")},o=()=>{if(a.value.includes("is-active")){const e=a.value.findIndex((e=>"is-active"===e));-1!==e&&a.value.splice(e,1)}},s=(e,t)=>{const a=(0,v.nA)(e.target.value);"min"===t?l.value=a:r.value=a,e.target.value=a};return(0,i.watch)((()=>e.value),(e=>{l.value=e[0]??"",r.value=e[1]??""})),(0,i.watch)((()=>l.value),(e=>{t.emit("input",[e,r.value])})),(0,i.watch)((()=>r.value),(e=>{t.emit("input",[l.value,e])})),(0,i.onMounted)((()=>{a.value.push("el-range-editor--"+e.size),l.value=e.value[0]??"",r.value=e.value[1]??""})),{defClass:a,focusHandler:n,blurHandler:o,inputHandler:s,min:l,max:r}}}),h=_,b=a(1001),y=(0,b.Z)(h,d,g,!1,null,"8e2242b2",null),k=y.exports,K=a(5648),P=a(71075),x=a(44928),C=(0,i.defineComponent)({name:"kolManage",components:{inputRange:k,Folder:P.Z},setup(e,t){const a=(0,x.t)(),l=(0,n.s)(t),r=32,d=46,g=30,_=12,h=(0,i.ref)(""),b=(0,i.ref)(0),y=(0,i.ref)([]),k=(0,i.ref)(!1),C=(0,u.Z)({compensation:r+d+g+_,fixedBlockHeightRefs:[b],pagename:"customer_shop"}),w=(0,i.computed)((()=>{const e=(0,s.kG)(o.HN.kol_list),t=(0,s.kG)(o.HN.kol_edit),a=(0,s.kG)(o.HN.kol_create),l=(0,s.kG)(o.HN.kol_export),r=(0,s.kG)(o.HN.kol_delete),i=(0,s.kG)(o.HN.kol_approval);return{canEditKol:t,canCreateKol:a,canViewKolList:e,canExportKol:l,canDeleteKol:r,canApprovalKol:i}})),O=(0,i.ref)([]),S=(0,i.computed)((()=>[{label:"全部",value:0},...p.areaType.map((e=>({label:e.value,value:e.key})))])),L=(0,i.computed)((()=>p.mediaType.map((e=>({label:e.value,value:e.key}))))),T=e=>{b.value=e.height-40},E=()=>{l.filterParams.value.page=1,l.pagination.value.currentPage=1,l.getKolList(l.filterParams.value)},A=()=>{l.filterParams.value={kol_name:"",business_type:"",area:0,platform:"",kol_tag:"",verify_status:"",add_by:"",page:1,num:20,gmt_modified_gte:""},O.value=[],y.value=[],l.getKolList(l.filterParams.value)};"console_kol_apply"===a.currentRoute.query.source&&(l.filterParams.value.verify_status=String(p.KolVerifyStatusEnum.PENDING));const N=()=>{t.root.$router.push({name:f.bv.generate})},D=()=>{const e=l.customerList.value.map((e=>e.kol_info.kol_id));(0,K.MK)({kol_ids:JSON.stringify(e)})},z=e=>{l.importAjax(e)},$=(e,a,l)=>{"SPAN"!==l.target.nodeName&&t.root.$router.push({name:f.bv.listDetail,params:{id:`${e.kol_info.kol_id}`}})},H=e=>{l.filterParams.value.num=e,l.getKolList(l.filterParams.value)},V=e=>{l.filterParams.value.page=e,l.getKolList(l.filterParams.value)},I=[{value:m.WD.marketing,label:"整合营销"},{value:m.WD.mcn,label:"S2B2C"}],R=(0,i.ref)([{value:p.KolTagEnum.GRASS_KOL,label:"种草达人"},{value:p.KolTagEnum.LIVE_KOL,label:"直播达人"},{value:p.KolTagEnum.TAOBAO_KOL,label:"淘宝KOL"},{value:p.KolTagEnum.TAOBAO_KOC,label:"淘宝KOC"},{value:p.KolTagEnum.DOUYIN_KOL,label:"抖音KOL"},{value:p.KolTagEnum.DOUYIN_KOC,label:"抖音KOC"}]),W=(e,t)=>t.find((t=>t.value===e))?.label||"--",G=()=>{k.value=!k.value},M=(e,t)=>{const{is_folded:a,folded_text:l}=(0,v.zb)(e.kol_info.kol_company_name?e.kol_info.kol_company_name:"--",14);return t?l:a?(0,i.h)("div",{class:"company-name-line"},[(0,i.h)("el-popover",{props:{placement:"right",content:e.kol_info.kol_company_name,trigger:"hover"}},[(0,i.h)("div",{slot:"reference",class:"company-name item-hover"},[l])])]):(0,i.h)("div",{class:"company-name-line"},l)},B=(e,t)=>{const a=e.kol_info.kol_name??"--",{is_folded:l,folded_text:r}=(0,v.zb)(a,9);return t||!l?r:(0,i.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a,width:"220",openDelay:300}},[(0,i.h)("div",{slot:"reference",class:"company-name item-hover"},[r])])},U=(0,i.ref)([{label:"达人名称",minWidth:68,formatter:e=>B(e,!1)},{label:"业务类型",minWidth:68,align:"center",formatter:e=>{if(e.kol_info.business_type.length){const t=e.kol_info.business_type.filter((e=>e===m.WD.marketing||e===m.WD.mcn)),a=t.map((e=>W(e,m.Yh))),l=a.length?a.join("、"):"--";return(0,i.h)("div",{slot:"reference",class:"popover-div-ellipsis"},l)}return"--"}},{label:"达人标签",minWidth:108,align:"center",formatter:e=>(0,i.h)("div",{},W(e.kol_info.kol_tag,p.kolTagList))},{label:"所属公司",minWidth:136,align:"left",headerAlign:"left",formatter:e=>M(e,!1)},{label:"是否专票",minWidth:88,align:"center",headerAlign:"center",formatter:e=>(0,i.h)("div",{},W(e.kol_info.special_ticket,p.specialList))},{label:"擅长类目",minWidth:88,align:"left",headerAlign:"left",formatter:e=>{if(e.kol_info.areas){const t=e.kol_info.areas.split("、"),a=t.map((e=>(0,i.h)("span",{},e))),l=t.join("、");return(0,i.h)("el-popover",{props:{trigger:"hover",openDelay:300,width:270,placement:"bottom-start"}},[(0,i.h)("div",{class:"xiaojin-popover-span-area"},a),(0,i.h)("div",{slot:"reference",class:"popover-div-ellipsis"},l)])}return"--"}},{label:"创建人",minWidth:90,align:"center",headerAlign:"center",formatter:e=>(0,i.h)("div",{},e.kol_info.add_by?e.kol_info.add_by:"--")},{label:"审核状态",minWidth:90,align:"center",formatter:e=>{let t="point fail";return e.kol_info.verify_status===p.KolVerifyStatusEnum.PENDING?t="point process":e.kol_info.verify_status===p.KolVerifyStatusEnum.APPROVED?t="point success":e.kol_info.verify_status===p.KolVerifyStatusEnum.NOT_APPROVED&&(t="point block"),(0,i.h)("div",{class:"co-status",style:{width:"100%",justifyContent:"center"}},[(0,i.h)("div",{class:t},""),(0,i.h)("div",{class:"success"},W(e.kol_info.verify_status,p.kolVerifyStatus))])}},{label:"操作",width:120,align:"center",headerAlign:"center",formatter:e=>{const a=w.value.canEditKol&&e.kol_info.verify_status===p.KolVerifyStatusEnum.NOT_APPROVED?(0,i.h)("el-button",{attrs:{type:"text",style:"padding: 0"},on:{click:a=>{"SPAN"===a.target.nodeName&&t.root.$router.push({path:"/supplier/generate/generate/"+e.kol_info.kol_id})}}},"编辑"):"",l=w.value.canApprovalKol&&e.kol_info.verify_status===p.KolVerifyStatusEnum.PENDING?(0,i.h)("el-button",{attrs:{type:"text",style:"padding: 0"},on:{click:a=>{"SPAN"===a.target.nodeName&&t.root.$router.push({path:"/supplier/generate/approval/"+e.kol_info.kol_id})}}},"审核"):"";return[a,l]}}]);return(0,i.watch)((()=>t.root.$route),((e,t)=>{"SupplierGenerate"===t.name&&l.getKolList(l.filterParams.value)})),(0,i.watch)((()=>l.filterParams.value.business_type),(e=>{e===m.WD.marketing?R.value=[{value:p.KolTagEnum.GRASS_KOL,label:"种草达人"},{value:p.KolTagEnum.LIVE_KOL,label:"直播达人"}]:e===m.WD.mcn?R.value=[{value:p.KolTagEnum.TAOBAO_KOL,label:"淘宝KOL"},{value:p.KolTagEnum.TAOBAO_KOC,label:"淘宝KOC"},{value:p.KolTagEnum.DOUYIN_KOL,label:"抖音KOL"},{value:p.KolTagEnum.DOUYIN_KOC,label:"抖音KOC"}]:R.value=[{value:p.KolTagEnum.GRASS_KOL,label:"种草达人"},{value:p.KolTagEnum.LIVE_KOL,label:"直播达人"},{value:p.KolTagEnum.TAOBAO_KOL,label:"淘宝KOL"},{value:p.KolTagEnum.TAOBAO_KOC,label:"淘宝KOC"},{value:p.KolTagEnum.DOUYIN_KOL,label:"抖音KOL"},{value:p.KolTagEnum.DOUYIN_KOC,label:"抖音KOC"}],R.value.find((e=>e.value===l.filterParams.value.kol_tag))||(l.filterParams.value.kol_tag="")})),(0,i.onMounted)((()=>{l.getKolList(l.filterParams.value),l.getCategorData(),l.fetchCityData(),(0,c.S)()})),(0,i.onActivated)((()=>{l.getKolList(l.filterParams.value)})),{onTopCardRectUpdate:T,categoryIndex:h,Permission:w,clickQueryCustomer:E,resetCustomer:A,handleSizeChange:H,handleCurrentChange:V,addCol:N,importCustomers:z,exportCustomers:D,goDetail:$,kolColumn:U,newMediaType:L,newKolTagList:p.newKolTagList,newPlatformList:p.newPlatformList,myAreaType:S,salesRange:O,businessTypeOptions:I,citys:y,...l,...C,kolVerifyStatusFilter:p.kolVerifyStatusFilter,show:k,changeShowMoreParams:G,Folder:P.Z,kolTagList:p.kolTagList,currentTagList:R}}}),w=C,O=(0,b.Z)(w,l,r,!1,null,"14243580",null),S=O.exports},58302:function(e,t,a){var l=a(97434),r=a(77944),i=a(52140);const n=e=>{const t=(0,l.computed)((()=>r.Z.getters["global/scrollbarSetting"])),a=(0,l.computed)((()=>void 0!==e.pagename?!0!==t.value.find((t=>t.key===e.pagename))?.value:e.disable??!1)),n=(0,l.computed)((()=>{const t=(e.fixedBlockHeightRefs??[]).map((e=>(0,l.unref)(e))).reduce(((e,t)=>(0,l.unref)(e)+(0,l.unref)(t)),0);return a.value?"max-content":`calc(100vh - ${(0,l.unref)(t)+56+36}px)`})),o=(0,l.computed)((()=>(a.value,"flex-auto"))),s=(0,l.computed)((()=>({height:n.value,overflowInBody:!a.value}))),u=(0,l.ref)(0),m=(0,l.computed)((()=>a.value?{}:{height:Math.max(u.value-(0,l.unref)((0,l.unref)(e.compensation)),e.tableMinHeight??0)})),c=a.value?()=>{}:e=>{u.value!==e&&(u.value=e,(0,i.S)())},p=a.value?()=>{}:t=>{0===u.value?setTimeout((()=>{c(t.height)}),e.delay??1200):c(t.height)};return{cardHeight:n,tableProps:m,onRectUpdate:p,rectHeight:u,cardFlexClass:o,cardProps:s}};t["Z"]=n},44928:function(e,t,a){a.d(t,{t:function(){return r}});var l=a(86834);const r=()=>{const e=new Proxy({},{get(e,t){return Reflect.get(l.Z,t)}});return e}},52140:function(e,t,a){a.d(t,{S:function(){return l},n:function(){return r}});const l=()=>{const e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},r=()=>{const{width:e,height:t}=document.body.getBoundingClientRect();return{width:e,height:t}}}}]);