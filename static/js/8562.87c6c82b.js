"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[8562],{8562:function(e,a,n){n.r(a),n.d(a,{default:function(){return b}});var t,r,s=n(36568),o=n.n(s),i=n(97434),c=n(21495),m=n(59563),u=n(1763),l=n(23624),p=n(44928),_=n(70437),d=n(3293),f=(0,i.defineComponent)({setup:()=>{const e=(0,p.t)(),a=[{align:"left",label:"花名",minWidth:100,formatter:e=>`${e.username}(${e.real_name})`},{align:"left",label:"工号",prop:"work_id"},{align:"left",label:"部门",prop:"department_name"},{align:"left",label:"岗位",prop:"job_title"},{align:"left",label:"在职状态",formatter:e=>1===e.is_leave?"离职":"在职"},{align:"center",label:"考核次数",prop:"sum_count"},{align:"center",label:"完成考核次数",prop:"completed_count"},{label:"操作",minWidth:60,formatter:a=>h("div",[h("tg-button",{attrs:{type:"link"},on:{click:()=>{e.push({name:u.Gr.report.detail,params:{id:a.id}})}}},["查看"])])}],n=(0,m.h)(l.gb),t=(0,i.ref)({username:void 0,work_id:void 0,feishu_department_id_list:void 0,evaluation_group_id:void 0,is_leave:void 0}),r=()=>{t.value={},n.pagination.reQuery(t.value)},s=(0,m.h)(l.Ev,{transform(e){return e.data.map((e=>({label:e.name,value:e.id})))}}),o=(0,m.Q)(d.o1,{transform(e){return e.data}}),c=(0,i.ref)(),_=(e,a)=>(a.push(e.id),e.sons?.forEach((e=>_(e,a))),a.join(",")),f={reset:r};return{groupOptions:s,reqFeishuDep:o,columns:a,reqList:n,formData:t,reset:r,treeRef:c,eachDemp:_,config:f}},render(){const e=arguments[0],{formData:a}=this;return e(c.L,{attrs:{columns:this.columns,service:this.reqList,value:a,config:this.config}},[e("el-form-item",{attrs:{label:"员工花名："}},[e("el-input",{attrs:{placeholder:"请填写花名"},model:{value:a.username,callback:e=>{this.$set(a,"username",e)}}})]),e("el-form-item",{attrs:{label:"员工工号："}},[e("el-input",{attrs:{placeholder:"请填写工号"},model:{value:a.work_id,callback:e=>{this.$set(a,"work_id",e)}}})]),e("el-form-item",{attrs:{label:"员工部门："}},[e("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"marketing-department-tree-popper-class"}},[e("div",{slot:"reference",class:"repain-select",style:"display: block"},[e("el-input",{attrs:{value:this.formData.department_id_input,placeholder:"请选择所属部门",readonly:!0},style:"color: #999"},[e("i",{class:"select-icon select-icon-user-add el-icon-arrow-down",slot:"suffix"})])]),e("div",{class:"department-tree"},[e("el-tree",o()([{ref:"treeRef"},{props:{props:{label:"name",children:"sons"}}},{attrs:{"check-strictly":"true","node-key":"id",data:this.reqFeishuDep.data,"show-checkbox":!0},on:{check:e=>{this.treeRef?.setCheckedKeys([]),e.name!==a.department_id_input?(this.treeRef?.setCheckedKeys([e.id]),(0,i.set)(a,"department_id_input",e.name),(0,i.set)(a,"feishu_department_id_list",this.eachDemp(e,[]))):((0,i.set)(a,"department_id_input",""),(0,i.set)(a,"feishu_department_id_list",""))}}}]))])])]),e("el-form-item",{attrs:{label:"考评组："}},[e(_.Z,{attrs:{placeholder:"请选择考评组",options:this.groupOptions.data,filterable:!0,remote:!0,"remote-method":e=>this.groupOptions.pagination.reQuery({name:e})},model:{value:a.evaluation_group_id,callback:e=>{this.$set(a,"evaluation_group_id",e)}}})]),e("el-form-item",{attrs:{label:"在职状态："}},[e(_.Z,{attrs:{placeholder:"请选择在职状态",options:[{label:"在职",value:0},{label:"离职",value:1}]},model:{value:a.is_leave,callback:e=>{this.$set(a,"is_leave",e)}}})]),e("div",{slot:"searchBtn"},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.reqList.pagination.reQuery(a)}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.reset}},["重置"])])])}}),g=f,y=n(1001),v=(0,y.Z)(g,t,r,!1,null,"f8ca126c",null),b=v.exports},59563:function(e,a,n){n.d(a,{Q:function(){return s},h:function(){return o}});n(21703);var t=n(97434),r=n(48606);const s=(e,{manual:a,onError:n,onSuccess:s,defaultParams:o,transform:i}={})=>{const c=(0,t.ref)(),m=(0,t.ref)(),u=(0,t.ref)(!1),l=(0,t.ref)([]),p=()=>{_(...l.value)},_=(...a)=>Promise.resolve(a||o).then((()=>{u.value=!0})).then((()=>0===a.length&&o&&o.length>0?o:a)).then((e=>(l.value=e,e))).then((a=>e(...a))).then((e=>{if(!e.data.success)throw new Error(e.data.message);return c.value=i?i(e.data.data):e.data.data,s&&s(c.value,e.data),e})).then((()=>{u.value=!1})).catch((e=>{throw u.value=!1,m.value=e.message,n&&n(e),r.Message.error(e.message),e})),d=_;return a||_(...o||[]),(0,t.reactive)({data:c,error:m,loading:u,reload:p,run:_,runAsync:d,params:l})},o=(e,a={})=>{const{defaultPageSize:n=20,defaultParams:r=[],transform:o,...i}=a,c=(0,t.ref)(),m=(0,t.reactive)({total:0,page_num:1,page_size:n,onCurrentChange:e=>{const a=[...p.params];a[0]?a[0].page_num=e:a[0]={num:n,page_num:e},p.runAsync(...a).then((()=>{m.page_num=e}))},refresh:()=>m.onCurrentChange(1),reQuery(...e){const a=[];return p.params[0]?(a[0]=p.params[0],a[0].page_num=1,m.page_num=1):(a[0]={num:n,page_num:1},m.page_num=1),a.push(...e),p.runAsync(...a)}}),[u={num:n,page_num:1},...l]=r,p=s(e,{defaultParams:[u,...l],...i,onSuccess(e,n){c.value=o?o(e):e.data,m.total=e.total,a.onSuccess&&a.onSuccess(c.value,n)}}),{data:_,...d}=(0,t.toRefs)(p);return(0,t.reactive)({...d,data:c,pagination:m})}},23624:function(e,a,n){n.d(a,{$K:function(){return w},$R:function(){return j},$b:function(){return F},Cl:function(){return E},Dr:function(){return o},EB:function(){return v},Ev:function(){return f},JP:function(){return C},L5:function(){return B},Mz:function(){return x},O5:function(){return X},UX:function(){return d},Y4:function(){return i},ZM:function(){return h},Z_:function(){return L},ao:function(){return z},bV:function(){return Z},bl:function(){return c},dP:function(){return P},g:function(){return q},gb:function(){return S},iC:function(){return k},iL:function(){return _},kT:function(){return y},lI:function(){return g},mS:function(){return m},n5:function(){return b},nQ:function(){return s},oY:function(){return R},o_:function(){return A},q0:function(){return I},s9:function(){return $},vL:function(){return l},vv:function(){return u},wF:function(){return G},wH:function(){return O},y3:function(){return Q},yI:function(){return D},zr:function(){return p}});var t=n(76012),r=n(64236);const s=async(e,a)=>(0,t.dX)("/api/performance_management/query_indicators_library",{params:{...e,...(0,r.jG)(a)}}),o=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator",(0,r.jG)(e)),i=async e=>(0,t.HG)("/api/performance_management/delete_indicators",{data:{id_list:e}}),c=async e=>(0,t.dX)("/api/performance_management/query_indicator_tag",{params:{...(0,r.jG)(e)}}),m=async e=>(0,t.SO)("/api/performance_management/modify_move_indicator_tag",{indicator_tag_list:e}),u=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator_tag",e),l=async e=>(0,t.HG)(`/api/performance_management/delete_indicators_tag/${e}`),p=async()=>(0,t.dX)("/api/feishu/feishu_department_and_user_list"),_=async e=>(0,t.SO)("/api/performance_management/save_or_modify_evaluation_group",e),d=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group",{params:(0,r.jG)({...e,...a})}),f=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group_name",{params:(0,r.jG)({...e,...a})}),g=async e=>(0,t.HG)(`/api/performance_management/delete_evaluation_group/${e}`),y=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment",{params:(0,r.jG)({...e,...a})}),h=async e=>(0,t.SO)("/api/performance_management/save_assessment",e),v=async e=>(0,t.SO)("/api/performance_management/save_assessment_level_config",e),b=async()=>(0,t.dX)("/api/performance_management/query_assessment_level_config"),q=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail",{params:(0,r.jG)({...e,...a})}),k=async e=>(0,t.dX)("/api/performance_management/get_assessment_detail_by_my_performance",{params:(0,r.jG)(e)}),X=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_analysis",{params:(0,r.jG)({...e,...a})}),j=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_performance_record",{params:(0,r.jG)({...e,...a})}),G=async e=>(0,t.SO)("/api/performance_management/modify_start_score",e),C=async e=>(0,t.SO)("/api/performance_management/modify_assessment_result",e),w=async(e,a)=>(0,t.dX)("/api/performance_management/query_my_performance",{params:(0,r.jG)({...e,...a})}),$=async e=>(0,t.dX)("/api/performance_management/query_assessment_by_id",{params:{assessment_management_id:e}}),O=async e=>{const{assessment_dimension_list:a}=e;return a&&a.length>0&&a.forEach((e=>{e.indicator_list&&e.indicator_list?.forEach((e=>{["self_assessment_score","weight","superior_assessment_score"].forEach((a=>{(0,r.xb)(e[a])&&(e[a]=null)}))}))})),console.log("payload",e),(0,t.SO)("/api/performance_management/modify_performance_process",(0,r.jG)(e))},S=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_record",{params:(0,r.jG)({...a,...e})}),L=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_detail_record",{params:(0,r.jG)({...e,...a})}),D=async(e,a)=>(0,t.dX)("/api/performance_management/query_performance_analysis",{params:(0,r.jG)({...e,...a})}),R=async()=>(0,t.dX)("/api/performance_management/query_finish_assessment"),E=async(e,a)=>(0,t.dX)("/api/performance_management/query_with_me_performance",{params:(0,r.jG)({...e,...a})}),x=async(e,a)=>(0,t.dX)("/api/performance_management/query_subordinate_performance",{params:(0,r.jG)({...e,...a})}),I=async e=>(0,t.SO)("/api/performance_management/check_evaluation_group_user_ids",e),P=async e=>(0,t.SO)("/api/performance_management/modify_reset_process",(0,r.jG)(e)),A=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user",{params:e}),B=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_analysis",{params:e}),Q=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_performance_record",{params:e}),Z=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_name",{params:(0,r.jG)({...e,...a})}),z=async e=>(0,t.dX)("/api/auth/getuser_leader_by_subordinate_id",{params:{user_id:e}}),F=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_my_performance",{params:(0,r.jG)(e)})},44928:function(e,a,n){n.d(a,{t:function(){return r}});var t=n(86834);const r=()=>{const e=new Proxy({},{get(e,a){return Reflect.get(t.Z,a)}});return e}},70437:function(e,a,n){var t=n(36568),r=n.n(t);const s={functional:!0,render:(e,a)=>{const{props:n}=a,{showAll:t=!1,showAllText:s="全部",clearable:o=!0}=n,i={props:{...a.value,clearable:o},on:a.listeners,attrs:a.data.attrs};return e("el-select",r()([{},i]),[t&&e("el-option",{attrs:{label:s,value:void 0}}),n.options?.map(((a,n)=>e("el-option",{attrs:{disabled:a.disabled,label:a.label,value:a.value},key:n})))])}};a["Z"]=s},21495:function(e,a,n){n.d(a,{L:function(){return s}});var t=n(97434),r={template:"template-fe9519",searchBar:"searchBar-c522bd",formItemContainer:"formItemContainer-d53e08",formItem:"formItem-c6ff4c",bodyContainer:"bodyContainer-b06936",btnLine:"btnLine-d428fc",tableContainer:"tableContainer-dd87f4"},s=(0,t.defineComponent)({props:{columns:{type:Array,default:()=>[]},value:{type:Object},routes:{},service:{required:!0,type:Function},config:{type:Object,default:()=>{}}},setup(e,a){const n=(0,t.ref)(),{reset:r}=e.config||{},s=e.service,o=()=>{const a=s.params;return a[0]&&(a[0].page_num=1),s.runAsync(a[0],e.value)},i=()=>{r&&r(),(0,t.nextTick)(o)};return{formRef:n,onReset:i,reqData:s,search:o}},render(){const e=arguments[0];return e("div",{class:["tg-page-container",r.template]},[this.routes&&e("tg-breadcrumbs",{attrs:{routes:this.routes}}),this.$slots.default&&e("div",{class:["tg-card",r.searchBar]},[e("el-form",{attrs:{size:"small","show-message":!1,"hide-required-asterisk":!0,"label-width":"70px"},ref:"formRef"},[e("div",{class:r.formItemContainer},[this.$slots.default?.map((a=>e("div",{class:r.formItem},[a]))),this.$slots.searchBtn?this.$slots.searchBtn:e("div",[e("tg-button",{attrs:{type:"primary"},on:{click:this.search}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.onReset}},["重置"])])])])]),this.$slots.middle,e("div",{class:r.bodyContainer},[this.$slots.btnLine&&e("div",{class:r.btnLine},[this.$slots.btnLine]),e("div",{class:r.tableContainer},[e("tg-table",{attrs:{stripe:!0,columns:this.columns,height:"100%",data:this.reqData.data,pagination:this.reqData.pagination},directives:[{name:"loading",value:this.reqData.loading}],on:{"selection-change":this.config?.table?.selectionChange}},[e("div",{class:"tg-page-empty",slot:"empty"},[e("empty-common")])])])])])}})}}]);