"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[8402],{98402:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tg-page-container tg-public-advertising-page",staticStyle:{height:"100%"}},[t("tg-button",{staticStyle:{width:"166px"},attrs:{icon:"ico-btn-add",type:"primary"},on:{click:e.createHandler}},[e._v(" 新增广告主账号 ")]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"advertising-row"},e._l(e.list,(function(n){return t("div",{key:n.account+n.id,staticClass:"advertising-item"},[t("p",{staticClass:"title"},[e._v(e._s(n.account))]),t("p",{staticClass:"project"},[t("span",[e._v("项目：")]),e._v(" "+e._s(n.project_name||"--")+" ")]),t("i",{staticClass:"close-icon el-icon-circle-close",on:{click:function(t){return e.deleteItemHandler(n.id)}}})])})),0),t("create-advertise",{ref:"createAdvertiseRef",on:{submit:e.submitHandler}})],1)},i=[],r=t(97434),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-dialog",{staticClass:"customer-dialog create-advertise-dialog tg-dialog-vcenter",attrs:{visible:e.visible,width:"440px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.onCancelBtnClick},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("新增广告账号")]},proxy:!0},{key:"footer",fn:function(){return[t("tg-button",{on:{click:e.onCancelBtnClick}},[e._v("取消")]),t("tg-button",{directives:[{name:"loading",rawName:"v-loading",value:e.projectLoading,expression:"projectLoading"}],attrs:{type:"primary"},on:{click:e.onSaveBtnClick}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"advertise-body"},[t("div",[t("i",{staticStyle:{color:"#ec4141","padding-right":"3px","font-style":"normal"}},[e._v("*")]),t("span",{staticClass:"title"},[e._v("广告主账号")]),t("el-input",{attrs:{size:"small",placeholder:"广告主账号"},on:{input:function(n){return e.inputInteger(n)}},model:{value:e.account,callback:function(n){e.account=n},expression:"account"}})],1),t("div",{staticStyle:{"margin-top":"15px"}},[t("i",{staticStyle:{color:"#ec4141","padding-right":"3px","font-style":"normal"}},[e._v("*")]),t("span",{staticClass:"title"},[e._v("所属项目")]),t("br"),t("el-autocomplete",{staticStyle:{width:"100%"},attrs:{size:"small","fetch-suggestions":e.querySearchAsync,placeholder:"请输入项目名称"},on:{change:e.projectNameHandler,select:e.handleSelect},model:{value:e.projectName,callback:function(n){e.projectName=n},expression:"projectName"}})],1)])])},s=[],c=t(78066),u=t(64236),p=(0,r.defineComponent)({props:{saveLoading:{type:Boolean,default:!1}},data(){return{visible:!1,projectLoading:!1,account:"",projectName:"",projectId:"",projectgList:[]}},methods:{onCancelBtnClick(){this.visible=!1,this.account="",this.projectId="",this.projectName=""},projectNameHandler(){this.projectName.trim()||(this.projectId="")},inputInteger(e){this.account=e.replace(/[^\d]/g,"")},async onSaveBtnClick(){this.account&&this.projectId?(this.projectLoading=!0,this.$emit("submit",{account:this.account,project_id:this.projectId}),await(0,u._v)(500),this.projectLoading=!1,this.onCancelBtnClick()):this.$message.warning("请完善账号信息")},handleSelect(e){this.projectId=e.id},async querySearchAsync(e,n){if(this.projectName.trim()){const[e,{data:t}]=await Promise.all([await(0,u._v)(500),await(0,c.tF)({page_num:1,num:999,search_type:6,search_value:this.projectName})]);n(t.data.data.map((e=>({value:e.project_name,id:e.id}))))}else n([])},show(){this.visible=!0}}}),l=p,_=t(1001),d=(0,_.Z)(l,o,s,!1,null,null,null),m=d.exports,h=t(52970),v=t(82741);const g=e=>{const n=(0,r.ref)(!1),t=(0,r.ref)([]),a=async n=>{const[t,{data:a}]=await Promise.all([await(0,u._v)(500),await(0,h.mh)(n)]);return a.success?Promise.resolve():(e.root.$message({type:"warning",message:a.message??"提交失败，稍后重试",duration:2e3,showClose:!0}),Promise.reject())},i=async n=>{const[t,{data:a}]=await Promise.all([await(0,u._v)(500),await(0,h.Xq)(n)]);return a.success?Promise.resolve():(e.root.$message({type:"warning",message:a.message??"删除失败，稍后重试",duration:2e3,showClose:!0}),Promise.reject())},o=async()=>{n.value=!0;const[a,{data:i}]=await Promise.all([await(0,u._v)(500),await(0,h.wH)()]);n.value=!1,i.success?t.value=i.data:e.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return{saveItem:a,loadData:o,loading:n,deleteItem:i,list:t}};var f=(0,r.defineComponent)({name:"Advertising",setup(e,n){const t=(0,r.ref)(null),a=g(n),i=()=>{t.value?.show()},o=async e=>{await a.saveItem(e),await a.loadData()},s=async e=>{const t=await(0,v.I)(n,"确认删除该账号？");t&&(await a.deleteItem(e),await a.loadData())};return(0,r.onMounted)((()=>{a.loadData()})),{createAdvertiseRef:t,createHandler:i,submitHandler:o,deleteItemHandler:s,...a}},components:{createAdvertise:m}}),y=f,j=(0,_.Z)(y,a,i,!1,null,null,null),w=j.exports},70753:function(e,n,t){t.d(n,{EA:function(){return a},Fp:function(){return v},KH:function(){return d},Kn:function(){return _},L:function(){return i},OW:function(){return p},a0:function(){return o},a9:function(){return u},gV:function(){return s},j0:function(){return r},qe:function(){return c},rL:function(){return m},v6:function(){return h},xR:function(){return l}});const a="/api/shop_live/query_shop_live_project",i="/api/shop_live/get_shop_live_project/:id/",r="/api/shop_live/save_shop_live_project",o="/api/shop_live/query_shop_live_achievement",s="/api/common_business/query_achievement",c="/api/common_business/query_merchant_achievement",u="/api/common_business/del_achievement/{achievement_id}/",p="/api/shop_live/del_shop_live_achievement/{achievement_id}/",l="/api/shop_live/save_shop_live_achievement",_="/api/common_business/save_achievement",d="/api/shop_live/save_shop_live_merchant_achievement",m="/api/shop_live/change_shop_live_project_status",h="/api/shop_live/change_common_project_status",v="/api/shop_live/change_cooperation_status"},52970:function(e,n,t){t.d(n,{A7:function(){return X},AS:function(){return p},B1:function(){return w},Cb:function(){return h},Db:function(){return A},Eo:function(){return v},JO:function(){return b},OA:function(){return N},OR:function(){return q},V$:function(){return G},V1:function(){return C},Vk:function(){return g},Xk:function(){return f},Xq:function(){return c},Yn:function(){return d},_L:function(){return u},aS:function(){return _},c9:function(){return x},de:function(){return I},dq:function(){return O},ew:function(){return L},fA:function(){return j},mU:function(){return l},mh:function(){return o},tn:function(){return m},w5:function(){return H},wH:function(){return s},yT:function(){return k},yq:function(){return y}});t(21703);var a=t(76012),i=t(64236);const r=e=>{if(!0!==e.data.success)throw new Error(e.data.message);return e.data.data},o=async e=>(0,a.SO)("/api/advertising/douyin_accounts",{...e}),s=async()=>(0,a.dX)("/api/advertising/douyin_accounts"),c=async e=>(0,a.HG)("/api/advertising/douyin_accounts/"+e),u=async e=>(0,a.dX)("/api/oceanengine/ad/advertiser_list",{params:{keyword:e}}).then(r),p=async(e,n)=>(0,a.dX)("/api/oceanengine/ad/aweme_list",{params:{advertiser_id:e,keyword:n}}).then(r),l=async()=>(0,a.dX)("/api/oceanengine/ad_plan/get_ad_templates").then(r),_=async(e,n,t)=>(0,a.SO)("/api/oceanengine/ad_plan/save_ad_template",{advertiser_id:e,template_name:n,marketing_goal:"LIVE_PROM_GOODS",content:t}).then(r),d=async e=>(0,a.dX)("/api/oceanengine/ad_plan/get_ad_audiences",{params:e}).then(r),m=async()=>(0,a.dX)("/api/oceanengine/ad/city").then(r),h=async(e,n,t)=>(0,a.SO)("/api/oceanengine/ad/action_category",{advertiser_id:e,action_scene:n,action_days:t}).then(r),v=async(e,n,t,i)=>(0,a.SO)("/api/oceanengine/ad/action_keyword",{advertiser_id:e,action_scene:n,action_days:t,query_words:i}).then(r),g=async(e,n)=>(0,a.SO)("/api/oceanengine/ad/interest_keyword",{advertiser_id:e,query_words:n}).then(r),f=async(e,n,t,i,o)=>(0,a.dX)("/api/oceanengine/ad/keyword_suggest",{params:{id:e,action_scene:n,action_days:t,tag_type:i,targeting_type:o}}).then(r),y=async e=>(0,a.SO)("/api/oceanengine/ad/interest_category",{advertiser_id:e}).then(r),j=async e=>(0,a.SO)("/api/oceanengine/ad/id2word",e).then(r),w=async(e,n)=>(0,a.dX)("/api/oceanengine/ad/aweme_multi_level_category",{params:{advertiser_id:e,behaviors:n.filter((e=>null!==e&&"null"!==e))}}).then(r),S=e=>e.map((e=>(e.value=e.author_name,e.id=e.label_id,e.fans_num_str=e.total_fans_num_str,e.type="ACCOUNT",e))),O=async(e,n)=>(0,a.dX)("/api/oceanengine/ad/aweme_category_top_author",{params:{category_id:e,behaviors:n.filter((e=>null!==e&&"null"!==e))}}).then(r).then((e=>S(e.authors))),b=async e=>(0,a.dX)("/api/oceanengine/ad/aweme_similar_author_search",{params:{aweme_id:e}}).then(r).then((e=>S(e.list))),C=async e=>(0,a.dX)("/api/oceanengine/ad/aweme_info_search",{params:{query_word:e}}).then(r).then((e=>{const n=e.list[0];return n||{categories:[],authors:[]}})),k=async(e,n,t,i)=>(0,a.SO)("/api/oceanengine/ad_plan/save_ad_audience",{id:i,advertiser_id:e,name:n,content:t}).then(r),X=async e=>(0,a.dX)("/api/oceanengine/ad_campaign/query_camp",{params:e}).then(r),q=async e=>(0,a.SO)("/api/oceanengine/ad_plan/check_name",{list:e}).then(r),G=async e=>(0,a.SO)("/api/oceanengine/ad_plan/save_ad_plan_task",e).then(r),I=async e=>(0,a.dX)("/api/oceanengine/ad_plan/get_plan_status",{params:{batch_id:e}}).then(r),x=async e=>(0,a.SO)("/api/oceanengine/ad_plan/del_ad_audience",{id:e}).then(r),H=async e=>(0,a.SO)("/api/oceanengine/ad_campaign/save",e).then(r),A=async e=>(0,a.SO)("/api/oceanengine/ad/aweme_author_info",e).then(r),L=async e=>(0,a.dX)("/api/oceanengine/ad/get_aweme_video",{params:{...(0,i.jG)(e),count:30}}).then(r),N=async(e,n)=>{const t=new FormData;return t.append("file",e,"file.png"),(0,a.SO)(`/api/oceanengine/ad/ad_image_upload?advertiser_id=${n}`,t).then(r)}},78066:function(e,n,t){t.d(n,{A8:function(){return C},Ed:function(){return g},Eo:function(){return u},FT:function(){return G},HB:function(){return I},HR:function(){return X},I8:function(){return S},KH:function(){return j},Kn:function(){return y},LY:function(){return H},MB:function(){return _},Mv:function(){return s},R_:function(){return w},S2:function(){return P},WH:function(){return L},Wk:function(){return d},dF:function(){return q},fz:function(){return x},gO:function(){return N},hQ:function(){return b},l7:function(){return l},mP:function(){return A},oP:function(){return h},pB:function(){return c},qG:function(){return v},sB:function(){return O},sV:function(){return p},tF:function(){return o},w3:function(){return k},xR:function(){return f},yC:function(){return m}});var a=t(64236),i=t(76012),r=t(70753);const o=async e=>(0,i.dX)(r.EA,{params:{...(0,a.jG)(e)}}),s=async e=>(0,i.SO)(r.j0,{...(0,a.jG)(e)}),c=async e=>(0,i.SO)("/api/shop_live/shop_live_project_approval",{...(0,a.jG)(e)}),u=async e=>(0,i.dX)("/api/shop_live/query_shop_live_cost",{params:{...(0,a.jG)(e)}}),p=async e=>(0,i.dX)("/api/payable/query_shop_live_payables",{params:{...(0,a.jG)(e)}}),l=async e=>(0,i.dX)(r.L.replace(":id",e)),_=async e=>(0,i.dX)(r.a0,{params:{project_id:e}}),d=async(e,n,t)=>(0,i.dX)(r.gV,{params:{project_id:e,page_num:n,num:t}}),m=async(e,n,t)=>(0,i.dX)(r.qe,{params:{project_id:e,page_num:n,num:t}}),h=async e=>(0,i.SO)(r.OW.replace("{achievement_id}",e)),v=async e=>(0,i.SO)(r.a9.replace("{achievement_id}",e)),g=async e=>(0,i.SO)("/api/shop_live/del_shop_live_cost/{cost_id}/".replace("{cost_id}",e)),f=async e=>(0,i.SO)(r.xR,(0,a.jG)(e)),y=async e=>(0,i.SO)(r.Kn,(0,a.jG)(e)),j=async e=>(0,i.SO)(r.KH,(0,a.jG)(e)),w=async e=>(0,i.SO)("/api/coop/save_achievement",(0,a.jG)(e)),S=async e=>(0,i.SO)("/api/shop_live/save_shop_live_cost",e),O=(e,n,t)=>(0,i.dX)("/api/shop_live/daily_report",{params:{begin_time:e,end_time:n,project_id:t}}),b=e=>(0,i.SO)("/api/shop_live/daily_report",(0,a.jG)(e)),C=(e,n,t)=>(0,i.dX)("/api/coop/daily_report",{params:{begin_time:e,end_time:n,project_id:t}}),k=e=>(0,i.SO)("/api/coop/daily_report",(0,a.jG)(e)),X=e=>(0,i.SO)("/api/shop_live/save_net_sales_rate",(0,a.jG)(e)),q=(e,n)=>(0,i.dX)("/api/shop_live/query_project_goal_settings",{params:{year:e,project_id:n}}),G=e=>(0,i.SO)("/api/shop_live/save_project_shop_goal_settings",e),I=e=>(0,i.SO)("/api/shop_live/save_project_anchor_goal_settings",e),x=e=>(0,i.dX)("/api/shop_live/get_project_settlement_setting",{params:{project_id:e}}),H=e=>(0,i.SO)("/api/shop_live/save_project_settlement_setting",(0,a.jG)(e)),A=e=>(0,i.dX)("/api/shop_live/get_project_auth_status/"+e+"/"),L=e=>(0,i.dX)("/api/shop_live/search_expense_type",{params:{keyword:e}}),N=e=>(0,i.SO)("/api/shop_live/save_s2b2c_settlement_setting",(0,a.jG)(e)),P=e=>(0,i.dX)("/api/shop_live/get_s2b2c_settlement_setting",{params:{project_id:e}})},82741:function(e,n,t){t.d(n,{I:function(){return i},u:function(){return r}});var a=t(71340);const i=(e,n)=>{const t="string"===typeof n?{title:n}:n;return new Promise((n=>{e.root.$TDialog({...t,onConfirm:()=>n(!0),onCancel:()=>n(!1)})}))},r=e=>{const n="string"===typeof e?{title:e}:e;return new Promise(((e,t)=>{(0,a.t)({...n,onConfirm:()=>e(!0),onCancel:()=>t()})}))}}}]);