"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[8989],{49998:function(e,t,a){a.d(t,{Z:function(){return m}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"customer-dialog annex-dialog",attrs:{visible:e.visible,width:"450px",top:"0"},on:{close:e.emitClose},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0}])},[a("div",{staticStyle:{"max-height":"480px","overflow-y":"auto",padding:"18px 20px 32px"}},[a("el-table",{attrs:{stripe:"",data:e.annex}},e._l(e.columns,(function(t,s){return a("el-table-column",e._b({key:s},"el-table-column",t,!1))})),1)],1)])},l=[],n=a(97434),o=a(57325),i=a(64236),r=a(17890),c=a(74750),p=(0,n.defineComponent)({name:"AnnexDialog",props:{noStatus:{type:Boolean,default:!1},title:{type:String,default:"合同附件"}},setup(e,t){const a=(0,n.inject)("annex-dialog-visible")??(0,n.ref)(!1),s=(0,n.inject)("annex-data"),l=(0,n.ref)([{label:"附件类型",property:"type",align:"center",headerAlign:"center",width:90},{label:e.title,property:"file_name",align:"left",headerAlign:"left",minWidth:170,showOverflowTooltip:!0,formatter:(e,t,a)=>(0,n.h)("a",{on:{click:()=>{m(e.url)}}},[decodeURIComponent(a)])}]),p=(0,n.ref)([{label:"状态",property:"status_str",align:"center",headerAlign:"center",width:86,formatter:({status_str:e,status:t})=>(console.log(e,"status_str"),(0,n.h)("span",{class:[`fg-${r.Kb[t]}`.toLowerCase()]},[e]))}]),u=(0,n.ref)([{label:"操作",align:"center",headerAlign:"center",minWidth:64,formatter:e=>(0,n.h)("div",{class:"operation"},[(0,n.h)("tg-icon",{props:{name:"ico-download"},on:{click:()=>{const a={headers:{Authorization:(0,c.LP)()??""}};fetch(e.url,a).then((async a=>{const s=a.clone();try{const e=await s.json();t.root.$message.error(e.message)}catch{if(200===a.status){const t=await a.blob(),s=e.url.split("/")[e.url.split("/").length-1];(0,i.uA)(t,e.file_name?e.file_name:s)}else t.root.$message.error("下载失败")}}))}}}),(0,n.h)("tg-icon",{props:{name:"ico-preview"},on:{click:()=>{m(e.url)}}})])}]),d=(0,n.computed)((()=>[...l.value,...e.noStatus?[]:p.value,...u.value])),v=()=>{t.emit("dialog:close")},m=e=>{const t=/\.(?:doc|ppt|xls)x?$/u,a=t.test(e)?`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent((0,o.W)(e,!1))}`:(0,o.W)(e,!1);window.open(a)};return{visible:a,emitClose:v,annex:s,columns:d,preview:m}}}),u=p,d=a(1001),v=(0,d.Z)(u,s,l,!1,null,null,null),m=v.exports},8989:function(e,t,a){a.r(t),a.d(t,{UseSealApprovalStatusMap:function(){return R},UseSealScanStatusMap:function(){return W},default:function(){return O}});a(26699);var s,l,n,o,i=a(36568),r=a.n(i),c=a(61282),p=a(97434),u=a(56045),d=a(83005),v=(0,p.defineComponent)({name:"ScanFileApproval",setup(e,t){const a=()=>({id:void 0,suggestion:void 0}),s=(0,p.ref)(!1),l=(0,p.ref)(!1),n=(0,p.ref)(a()),o={show(e){n.value.id=e.id,s.value=!0}},i={onCloseHandler(){s.value=!1},onSaveHandler(){i.PostVerify_use_sea_scan(2)},onRejectHandler(){i.PostVerify_use_sea_scan(3)},async PostVerify_use_sea_scan(e){l.value=!0;const a=await(0,d.Lm)({approval_id:n.value.id,status:e,message:n.value.suggestion});l.value=!1,a.data.success?(t.root.$message.success(a.data.message??"驳回成功"),i.onCloseHandler(),t.emit("save")):t.root.$message.error(a.data.message??"请求失败，请重试")}};return{saveLoading:l,scanFileApprovalForm:n,visible:s,...o,...i}},render(){const e=arguments[0];return e("div",[e("el-dialog",{attrs:{title:"审核",width:"340px",visible:this.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},class:"tg-dialog-classic tg-dialog-vcenter-new tg-legal-scan-file-approval-container",on:{close:this.onCloseHandler}},[e("el-form",{attrs:{size:"small","label-width":"0"}},[e("el-form-item",{attrs:{label:""}},[e("el-input",{style:"width: 100%;",attrs:{type:"textarea","show-word-limit":!0,placeholder:"请填写意见，限50字",maxlength:50},model:{value:this.scanFileApprovalForm.suggestion,callback:e=>{this.$set(this.scanFileApprovalForm,"suggestion",e)}}})])]),e("template",{slot:"footer"},[e("tg-button",{attrs:{type:"primary"},on:{click:this.onSaveHandler}},["通过"]),e("tg-button",{on:{click:this.onRejectHandler}},["驳回"]),e("tg-button",{on:{click:this.onCloseHandler}},["取消"])])]),e("tg-mask-loading",{attrs:{visible:this.saveLoading,content:"正在保存，请稍候..."}})])}}),m=v,_=a(1001),f=(0,_.Z)(m,s,l,!1,null,"42836a4e",null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",[a("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new use-seal-apply-detail-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.visible,isAppendToBody:!0,isfooter:!0,width:"970px"},on:{close:e.emitClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",[e._v("用印审批")])]},proxy:!0},{key:"footer",fn:function(){return[a("tg-button",{attrs:{type:"default"},on:{click:e.emitClose}},[e._v("取消")])]},proxy:!0}],null,!1,615239247)},[a("div",{staticClass:"detail-wrapper"},[a("div",{staticClass:"left-wrapper"},[a("div",{staticClass:"left-header"},[a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[e._v("申请人：")]),a("div",{staticClass:"value"},[e._v(e._s(e.baseData.username))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[e._v("申请部门：")]),a("div",{staticClass:"value"},[e._v(e._s(e.baseData.create_department))])]),a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[e._v("发起时间：")]),a("div",{staticClass:"value"},[e._v(e._s(e.baseData.gmt_create.replace(/-/g,".")))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[e._v("审批编号：")]),a("div",{staticClass:"value",staticStyle:{"flex-shrink":"0"}},[e._v(e._s(e.baseData.approval_uid))]),1===e.baseData.approval_status?a("span",{staticClass:"status",staticStyle:{"flex-shrink":"0"}},[e._v("审批中")]):2===e.baseData.approval_status?a("span",{staticClass:"status success",staticStyle:{"flex-shrink":"0"}},[e._v("审批通过")]):3===e.baseData.approval_status?a("span",{staticClass:"status error",staticStyle:{"flex-shrink":"0"}},[e._v("审批失败")]):a("span",{staticClass:"status revoke",staticStyle:{"flex-shrink":"0"}},[e._v("已撤销")])])]),a("div",{staticClass:"left-body"},[a("div",{staticClass:"grid-two-column"},[a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("对方单位：")]),a("tg-textPopover",{attrs:{text:e.baseData.cooperation_company_name,textClass:"value",maxWidth:158}})],1),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("公司名称：")]),a("tg-textPopover",{attrs:{text:e.company_name(e.baseData),textClass:"value",maxWidth:158}})],1),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("印章名称：")]),a("div",{staticClass:"value"},[e._v(e._s(e.seal_name(e.baseData)))])]),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("涉及金额：")]),a("div",{staticClass:"value"},[e._v(e._s(e.amount(e.baseData)))])]),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("印章外带：")]),a("div",{staticClass:"value"},[e._v(e._s(e.baseData.is_take_out?"是":"否"))])]),e.baseData.is_take_out?a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("外带时间：")]),a("div",{staticClass:"value"},[e._v(e._s(e.task_out_date_str(e.baseData)))])]):e._e(),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("所属事项：")]),a("div",{staticClass:"value"},[e._v(e._s(e.matter_name(e.baseData)))])]),2===e.baseData.matter_type?a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("业务类型：")]),a("div",{staticClass:"value"},[e._v(e._s(e.business_type_name(e.baseData)))])]):e._e(),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("文件名称：")]),a("tg-textPopover",{attrs:{text:e.baseData.file_name,textClass:"value",maxWidth:158}})],1),a("div",{staticClass:"line"},[a("p",{staticClass:"label"},[e._v("盖章份数：")]),a("div",{staticClass:"value"},[e._v(e._s(e.baseData.file_number))])])]),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[e._v("使用原因：")]),a("div",{staticClass:"value line-value"},[e._v(" "+e._s(e.baseData.reason?e.baseData.reason:"--")+" ")])]),e.baseData.is_express?a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[e._v("邮寄信息：")]),a("div",{staticClass:"value line-value"},[a("div",[e._v(" "+e._s((e.baseData.addressee?e.baseData.addressee:"--")+"  "+(e.baseData.phone?e.baseData.phone:"--"))+" ")]),a("div",[e._v(" "+e._s(e.baseData.address?e.baseData.address:"--")+" ")])])]):e._e(),e.baseData.is_express?a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[e._v("寄件人：")]),a("div",{staticClass:"value line-value"},[e._v(" "+e._s(e.baseData.sender_name?e.baseData.sender_name:"--")+" ")])]):e._e(),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[e._v("附件：")]),a("div",{staticClass:"value line-value"},[e.baseData.attachment&&e.baseData.attachment.length?[a("Appendix",{attrs:{list:e.baseData.attachment}})]:a("span",[e._v("--")])],2)]),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[e._v("扫描件：")]),a("div",{staticClass:"value line-value"},[e.baseData.scan&&e.baseData.scan.length?[a("Appendix",{attrs:{list:e.baseData.scan}})]:a("span",[e._v("--")])],2)])])]),a("div",{staticClass:"right-wrapper"},[a("h5",{staticClass:"right-wrapper-title"},[e._v("审批进度")]),a("WorkbenchTimeLine",{attrs:{"step-status":e.baseData.approval_status,items:e.baseData.approval_flow_detail}})],1)])])],1):e._e()},b=[],y=a(24643),C=a(79703),w=a(17660),x=a(6933),k=a.n(x),D=a(56082),F=(0,p.defineComponent)({props:{info:{type:Object,default:()=>({})}},components:{Appendix:C.Z,WorkbenchTimeLine:w.Z},setup(e,t){const a=(0,p.ref)(!1),s=(0,p.ref)(!1),l=(0,p.ref)(void 0),n=()=>{s.value=!1,t.emit("close")},o=e=>{l.value=e,s.value=!0},i=()=>{n(),t.emit("success")},r=e=>{if(e){const t="yyyy.MM.DD",a=k()(1e3*e.take_out_start_date).format(t),s=k()(1e3*e.take_out_end_date).format(t);return`${a}~${s}`}return"--"},u=e=>{if(e){const t=e.amount_involved>=0?e.amount_involved:"--";return(0,c.FU)(t)}return"--"},d=e=>e&&e.seal_type?D.TZ.get(e.seal_type)??"--":"--",v=e=>e&&e.company_name_code?D.LD.get(e.company_name_code)??"--":"--",m=e=>e&&e.matter_type?D.dU.get(e.matter_type)??"--":"--",_=e=>e&&e.business_type?D.zi.get(e.business_type)??"--":"--";return{visible:s,emitClose:n,numberFormat:y.Y4,edit:a,baseData:l,reClose:i,show:o,moment:k(),seal_name:d,company_name:v,matter_name:m,business_type_name:_,task_out_date_str:r,amount:u}}}),S=F,A=(0,_.Z)(S,g,b,!1,null,"b4960406",null),P=A.exports,$=a(74525),q=a(64236),N=a(49998),M=a(64479),H=a(17099);(function(e){e[e["Processing"]=1]="Processing",e[e["Normal"]=2]="Normal",e[e["Failure"]=3]="Failure",e[e["Canceled"]=4]="Canceled"})(n||(n={})),function(e){e[e["Processing"]=0]="Processing",e[e["Normal"]=1]="Normal",e[e["Failure"]=2]="Failure",e[e["Canceled"]=3]="Canceled"}(o||(o={}));const R=new Map([[n.Processing,"审批中"],[n.Normal,"审批成功"],[n.Failure,"审批失败"],[n.Canceled,"已撤销"]]),W=new Map([[o.Processing,"未上传"],[o.Normal,"待审核"],[o.Failure,"通过"],[o.Canceled,"驳回"]]);var T,Z,I=(0,p.defineComponent)({name:"sealUseRecord",components:{scanFileApproval:h,useSealDetail:P,annexDialog:N.Z,workbenchTimeLine:w.Z},setup(e,t){const a=()=>({page_num:1,num:20,date:[],username:void 0,reason:void 0,approval_status:void 0,total:0}),s=(0,p.ref)(!1),l=(0,p.ref)(!1),o=(0,p.ref)(void 0),i=[n.Processing,n.Normal,n.Failure,n.Canceled].map((e=>({value:e,label:R.get(e)??""}))),r=(0,p.ref)(a()),d=(0,p.ref)([]),v=(0,p.ref)(void 0),m=(0,p.ref)(!1),_=(0,p.ref)(void 0),f=(0,p.ref)(void 0),h={async queryUseSeals(){const{date:e,total:a,...l}=r.value,[n,o]=e??[];s.value=!0;const[i]=await(0,q.Dc)(500,(0,$.s)({apply_date_begin:n,apply_date_end:o,...l}));s.value=!1,i.data.success?(r.value.total=i.data.data.total,d.value=i.data.data.data??[]):t.root.$message.error(i.data.message)},onQueryHandler(e=1){r.value.page_num=e,h.queryUseSeals()},onResetHandler(){r.value=a(),h.onQueryHandler()},onRowHandler(e){h.queryApprovalInfo(e.id,!1)},async queryApprovalInfo(e,a){a?m.value=!0:l.value=!0;const[s]=await(0,q.Dc)(500,(0,M.Z)({approval_id:e}));l.value=!1,m.value=!1,s.data.success?a?f.value=s.data.data:v.value?.show(s.data.data):a?_.value=s.data.message||"":t.root.$message.error(s.data.message??"获取用印详情失败，请稍后重试")},getAnnexList(e){if(void 0===e)return[];try{const t=e?.attachment?.map((t=>({...t,status:e.approval_status,status_str:e.approval_status?R.get(e.approval_status):"--",type:"附件"})))??[],a=e?.scan?.map((t=>({...t,status:e.scan_status,status_str:e.scan_status?W.get(e.scan_status):"--",type:"扫描件"})))??[];return[...t,...a]}catch(t){return[]}},formatAmount:c.dN},g=(0,p.ref)(!1),b=(0,p.ref)(void 0),y=(0,p.computed)((()=>h.getAnnexList(b.value)));(0,p.provide)("annex-data",y),(0,p.provide)("annex-dialog-visible",g);const C=()=>{g.value=!1,b.value=void 0},x=e=>{let t="";switch(e.approval_status){case n.Processing:t="processing";break;case n.Normal:t="normal";break;case n.Failure:t="failure";break;case n.Canceled:t="canceled";break;default:break}return`use-seal-record-status-${t}`},k=(0,p.ref)([{label:"申请日期",minWidth:80,align:"center",showOverflowTooltip:!0,formatter:e=>e.start_time?e.start_time.replace(/-/g,"."):"--"},{label:"申请人",minWidth:66,align:"center",showOverflowTooltip:!0,formatter:e=>e.username?e.username:"--"},{label:"部门",minWidth:80,align:"left",showOverflowTooltip:!0,formatter:e=>e.create_department?e.create_department:"--"},{label:"审批状态",minWidth:80,align:"center",showOverflowTooltip:!0,formatter:e=>{const t=R.get(e.approval_status)||(0,H.l)(),a=(a=!1)=>(0,p.h)("span",{class:x(e),...a?{slot:"reference"}:{}},[t]);return[n.Failure,n.Processing].includes(e.approval_status)?(0,p.h)("div",{on:{click:e=>{e.stopPropagation()}}},[(0,p.h)("el-popover",{props:{placement:"left-end",width:234,trigger:"hover",openDelay:300,popperOptions:{boundariesElement:"body",gpuAcceleration:!1}},on:{show:()=>{h.queryApprovalInfo(e.id,!0)},hide:()=>{f.value=void 0,_.value=void 0}}},[a(!0),(0,p.h)("div",{style:{maxHeight:"240px",overflow:"overlay"}},[m.value?[(0,p.h)("div",{style:{padding:"10px 20px"}},["正在查询进度..."])]:_.value?[_.value]:(0,p.h)(w.Z,{props:{"step-status":e.approval_status,items:f.value?.approval_flow_detail??[]}})])])]):(0,p.h)("div",[a(!1)," "])}},{label:"用印原因说明",minWidth:140,showOverflowTooltip:!0,formatter:e=>e.reason?e.reason:"--"},{label:"印章名称",minWidth:80,align:"center",showOverflowTooltip:!0,formatter:e=>e.seal_name?e.seal_name:"--"},{label:"涉及金额 (元)",minWidth:80,align:"right",showOverflowTooltip:!0,formatter:e=>h.formatAmount(e.amount_involved??0,"None")},{label:"所属事项",minWidth:80,align:"center",showOverflowTooltip:!0,formatter:e=>e.matter_name?e.matter_name:"--"},{label:"附件/扫描件",minWidth:70,align:"center",showOverflowTooltip:!0,formatter:e=>h.getAnnexList(e).length>0?(0,p.h)("span",{style:{color:"#2877FF"},on:{click:t=>{t.stopPropagation(),b.value=e,g.value=!0}}},["查看"]):(0,H.l)()},{label:"扫描件审批",minWidth:70,showOverflowTooltip:!0,formatter:e=>2===e.approval_status&&1===e.scan_status?(0,p.h)("tg-button",{props:{type:"link"},on:{click:t=>{o.value?.show(e),t.stopPropagation()}}},["审核"]):""}]);return(0,p.onMounted)((async()=>{h.onQueryHandler()})),{onAnnexDialogClose:C,loading:s,detailLoading:l,approvalStatusOptions:i,tableData:d,columns:k,queryForm:r,selectControlPopoverHide:u.TP,scanFileApprovalRef:o,sealRecordDetailRef:v,...h}},render(){const e=arguments[0],t={props:{title:"附件"},on:{"dialog:close":()=>{this.onAnnexDialogClose()}}};return e("div",{class:"tg-legal-seal-use-record_month-container"},[e("section",{class:"query-field"},[e("el-form",{attrs:{size:"small","label-width":"70px"}},[e("el-form-item",{attrs:{label:"申请日期："}},[e("el-date-picker",{style:"width: 210px;",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd",editable:!1},model:{value:this.queryForm.date,callback:e=>{this.$set(this.queryForm,"date",e)}}})]),e("el-form-item",{attrs:{label:"申请人："}},[e("el-input",{style:"width: 210px;",attrs:{clearable:!0,placeholder:"请输入申请人"},model:{value:this.queryForm.username,callback:e=>{this.$set(this.queryForm,"username",e)}}})]),e("el-form-item",{attrs:{label:"用印原因："}},[e("el-input",{style:"width: 210px;",attrs:{clearable:!0,placeholder:"请输入用印原因"},model:{value:this.queryForm.reason,callback:e=>{this.$set(this.queryForm,"reason",e)}}})]),e("el-form-item",{attrs:{label:"审批状态："}},[e("el-select",{style:"width: 210px;",attrs:{clearable:!0,filterable:!0,placeholder:"请选择审批状态"},on:{focus:this.selectControlPopoverHide},model:{value:this.queryForm.approval_status,callback:e=>{this.$set(this.queryForm,"approval_status",e)}}},[e("el-option",{attrs:{label:"全部",value:void 0},key:void 0}),this.approvalStatusOptions.map((t=>e("el-option",{attrs:{label:t.label,value:t.value},key:t.value})))])]),e("el-form-item",{attrs:{label:"","label-width":"0"}},[e("div",[e("tg-button",{attrs:{type:"primary"},on:{click:()=>this.onQueryHandler()}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>this.onResetHandler()}},["重置"])])])])]),e("section",{class:"table-field"},[e("div",{style:"height: 100%;"},[e("el-table",{attrs:{border:!0,height:"100%",data:this.tableData,"row-style":{cursor:"pointer"}},directives:[{name:"loading",value:this.loading}],on:{"row-click":this.onRowHandler}},[this.columns.map(((t,a)=>e("el-table-column",r()([{},{props:{...t}},{key:a}])))),e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})])])])]),this.tableData.length>0&&e("section",{class:"pagination-field"},[e("el-pagination",{style:"margin: 8px 0;",attrs:{"current-page":this.queryForm.page_num,"page-sizes":[20,30,50,100],pageSize:this.queryForm.num,total:this.queryForm.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":e=>{this.queryForm.page_num=e,this.onQueryHandler(e)},"size-change":e=>{this.queryForm.num=e,this.onQueryHandler()}}})]),e(h,{ref:"scanFileApprovalRef",on:{save:()=>this.onQueryHandler()}}),e(P,{ref:"sealRecordDetailRef"}),e(N.Z,r()([{},t])),e("tg-mask-loading",{attrs:{visible:this.detailLoading,content:"正在获取详情，请稍候..."}})])}}),L=I,j=(0,_.Z)(L,T,Z,!1,null,"2772f4c4",null),O=j.exports},79703:function(e,t,a){a.d(t,{Z:function(){return v}});var s=a(97434),l=a(64236),n=a(74750);const o={headers:{Authorization:(0,n.LP)()??""}};var i,r,c=(0,s.defineComponent)({name:"Appendix",props:{list:{type:Array,default:()=>[]},isDelete:{type:Boolean,default:!1}},setup(e,t){const a=new Map([["image/jpeg","picture"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","excel"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","word"],["application/msword","word"],["application/pdf","pdf"],["xlsx","excel"],["docx","word"],["doc","word"],["pdf","pdf"],["jpeg","picture"]]),s=()=>{const t=e.list.map((e=>{const t=e.split("/"),s=e.split(".")[e.split(".").length-1];return{fileName:t[t.length-1],link:e,icon:a.get(s)??"picture"}}));return t},n=async e=>{const a=decodeURIComponent(e.split("/")[e.split("/").length-1]);fetch(e,o).then((async e=>{const s=e.clone();try{const e=await s.json();t.root.$message.error(e.message)}catch{if(200===e.status){const t=await e.blob();(0,l.uA)(t,a)}else t.root.$message.error("下载失败")}}))},i=e=>{t.emit("deleteItem",e)};return{caseFun:s,downloadCaseBtnClick:n,deleteItem:i}},render(){const e=arguments[0],t=this.caseFun();return e("div",[t.map(((t,a)=>e("div",{key:a,class:"case-item"},[e("tg-icon",{class:"case-icon",slot:"icon",attrs:{name:`ico-${t.icon}`}}),e("p",{class:"case-name"},[decodeURI(t.fileName)]),e("a",{class:"case-down",on:{click:()=>this.downloadCaseBtnClick(t.link)}},["下载"]),this.isDelete?e("tg-icon",{attrs:{className:"icon-delete",name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.deleteItem(t)}}}):null])))])}}),p=c,u=a(1001),d=(0,u.Z)(p,i,r,!1,null,"8368843e",null),v=d.exports},17660:function(e,t,a){a.d(t,{Z:function(){return p}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-steps",{staticClass:"invoice-steps",attrs:{direction:"vertical",active:e.items.length}},[e._l(e.items,(function(t,s){return a("el-step",{key:t.nodeId+s},[3===e.stepStatus&&s===e.items.length-1?a("div",{staticClass:"my-icon error",attrs:{slot:"icon"},slot:"icon"},[a("tg-icon",{attrs:{name:"ico-cross-red"}})],1):a("div",{staticClass:"my-icon success",attrs:{slot:"icon"},slot:"icon"},[a("tg-icon",{attrs:{name:"ico-a-chenggong2x"}})],1),a("div",{staticClass:"step-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(t.nodeName))])]),a("div",{staticClass:"description",attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"operator"},[a("span",[e._v("审批人：")]),a("span",[e._v(e._s(t.operatorName))])]),t.remark?a("div",{staticClass:"remark",class:3===e.stepStatus&&e.items.length-1===s&&"error-text"},[a("span",[e._v("理由：")]),a("span",[e._v(e._s(t.remark))])]):e._e(),a("div",{staticClass:"timestamp"},[a("span",[e._v(e._s(t.approval_date))])])])])})),1===e.stepStatus&&e.items[e.items.length-1].receivedPersons?a("el-step",[a("div",{staticClass:"my-icon",attrs:{slot:"icon"},slot:"icon"},[a("span",{staticClass:"num received"},[e._v(e._s(e.items.length+1))])]),a("div",{staticClass:"step-title",attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#a4b2c2"}},[e._v(e._s(e.items[e.items.length-1].receivedPersons))])]),a("div",{staticClass:"operator received",attrs:{slot:"description"},slot:"description"},[a("span",{staticStyle:{color:"#a4b2c2"}},[e._v("待处理")])])]):e._e()],2)},l=[],n=a(97434),o=(0,n.defineComponent)({props:{items:{type:Array,default:()=>[]},stepStatus:{type:Number,default:0}}}),i=o,r=a(1001),c=(0,r.Z)(i,s,l,!1,null,null,null),p=c.exports},25702:function(e,t,a){a.d(t,{Bp:function(){return p},Hz:function(){return d},KR:function(){return c},MI:function(){return n},YB:function(){return l},YG:function(){return v},bg:function(){return r},cW:function(){return i},es:function(){return u},lX:function(){return o},s2:function(){return s}});const s="/api/approval/save_transfer_apply",l="/api/approval/query_approval_list",n="/api/approval/query_approval_info",o="/api/approval/update_approval_info",i="/api/approval/query_approval_id_list",r="/api/approval/save_invoice_apply",c="/api/approval/save_refund_apply",p="/api/approval/save_borrowing_apply",u="/api/approval/query_all_projects",d="/api/approval/delete",v="/api/approval/save_not_contract_use_seal"},74525:function(e,t,a){a.d(t,{s:function(){return o},C:function(){return i}});const s="/api/approval/query_use_seals";var l=a(64236),n=a(76012);const o=async e=>(0,n.dX)(s,{params:{...(0,l.jG)(e)}}),i=async e=>(0,n.SO)("/api/approval/update_use_seal",{...(0,l.jG)(e)})},64479:function(e,t,a){a.d(t,{Z:function(){return c},m:function(){return p}});var s=a(76012),l=a(25702),n=a(64236),o=a(74750);const i=(0,o.LP)(),r=!1,c=async e=>(0,s.dX)(l.MI,{params:e});function p(e){const t=`/api/approval/export_approval_info_pdf?approval_id=${e}&Authorization=${i}`,a=r?`${window.location.protocol}${window.location.host}${t}`:`https://data.goumee.com${t}`;(0,n.qz)(a)}},17890:function(e,t,a){var s,l;a.d(t,{Kb:function(){return s},OX:function(){return r},l7:function(){return i},yR:function(){return n}}),function(e){e[e["Pending"]=1]="Pending",e[e["Normal"]=2]="Normal",e[e["Failure"]=3]="Failure",e[e["Processing"]=4]="Processing",e[e["Invalid"]=5]="Invalid"}(s||(s={})),function(e){e[e["Yes"]=0]="Yes",e[e["No"]=1]="No",e[e["Reject"]=2]="Reject"}(l||(l={}));const n=new Map([[s.Pending,"待审批"],[s.Normal,"审批成功"],[s.Failure,"审批失败"],[s.Processing,"审批中"],[s.Invalid,"已作废"]]),o=new Map([[l.Yes,"未上传"],[l.No,"已上传"],[l.Reject,"已驳回"]]),i=[s.Normal,s.Failure,s.Processing,s.Invalid].map((e=>({value:e,label:n.get(e)??""}))),r=[l.Yes,l.No,l.Reject].map((e=>({value:e,label:o.get(e)??""})))},56082:function(e,t,a){a.d(t,{IK:function(){return s},LD:function(){return n},TZ:function(){return o},dU:function(){return i},zi:function(){return r}});const s=new Map([[1,"普通发票"],[2,"专用发票"],[3,"电子发票"],[4,"收据"]]);var l;(function(e){e[e["Marketing"]=1]="Marketing",e[e["shop_live_taobao"]=2]="shop_live_taobao",e[e["shop_live_douuyin"]=3]="shop_live_douuyin",e[e["area"]=4]="area",e[e["mcn"]=5]="mcn",e[e["yufeng_put"]=6]="yufeng_put",e[e["shop_live_douuyin_shanghai"]=7]="shop_live_douuyin_shanghai",e[e["other"]=8]="other"})(l||(l={}));const n=new Map([[1,"构美（浙江）信息科技有限公司"],[2,"杭州煜丰电子商务有限公司"],[3,"构美（浙江）信息科技有限公司上海分公司"]]),o=new Map([[1,"公章"],[2,"法人章"],[3,"财务专用章"],[4,"合同章"]]),i=new Map([[1,"个人类型"],[2,"公司类型"]]),r=new Map([[l.Marketing,"营销业务"],[l.shop_live_taobao,"淘宝店播"],[l.shop_live_douuyin,"抖音店播"],[l.area,"区域业务"],[l.mcn,"MCN业务"],[l.yufeng_put,"煜丰投放"],[l.shop_live_douuyin_shanghai,"抖音店播(上海)"],[l.other,"其他"]])},56045:function(e,t,a){a.d(t,{EG:function(){return l},TP:function(){return n},en:function(){return s}});const s=(e="select-icon")=>{document.querySelector(`.${e}`).className+=" select-icon-rotate"},l=(e="select-icon")=>{document.querySelector(`.${e}`).classList.remove("select-icon-rotate")},n=()=>{document.querySelector(".controlPopoverHide").click()}}}]);