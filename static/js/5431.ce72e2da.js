"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5431],{41532:function(t,a,s){s.d(a,{Z:function(){return C}});var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new advance-detail-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.visible,isAppendToBody:!0,isfooter:!0,width:"948px"},on:{close:t.emitClose},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",[t._v("退款申请")])]},proxy:!0},{key:"footer",fn:function(){return[s("tg-button",{attrs:{type:"default"},on:{click:t.emitClose}},[t._v("取消")]),1===t.info.approval_status?s("div",{staticClass:"div-default-btn",on:{click:t.handleSubmit}},[t._v(" 撤销 ")]):t._e(),3===t.info.approval_status&&t.info.project_id?s("div",{staticClass:"div-default-btn",on:{click:t.reSubmit}},[t._v(" 重新提交 ")]):t._e()]},proxy:!0}])},[s("div",{staticClass:"detail-wrapper"},[s("div",{staticClass:"left-wrapper"},[s("div",{staticClass:"left-header"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("申请人：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.username))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("申请部门：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.create_department))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("发起时间：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.gmt_create.replace(/-/g,".")))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("审批编号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.approval_uid))]),1===t.info.approval_status?s("span",{staticClass:"status"},[t._v("审批中")]):2===t.info.approval_status?s("span",{staticClass:"status success"},[t._v("审批通过")]):3===t.info.approval_status?s("span",{staticClass:"status error"},[t._v("审批失败")]):s("span",{staticClass:"status revoke"},[t._v("已撤销")])])]),s("div",{staticClass:"left-body"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("项目：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.project_name))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("收款编号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.achievement_uid))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("退款金额：")]),s("div",{staticClass:"value"},[t._v(t._s(t.numberFormat(t.info.refund_amount,2)))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("退款方式：")]),1===t.info.level_three_types?s("div",{staticClass:"value"},[t._v("V任务")]):2===t.info.level_three_types?s("div",{staticClass:"value"},[t._v("支付宝")]):3===t.info.level_three_types?s("div",{staticClass:"value"},[t._v("对公账户")]):s("div",{staticClass:"value"},[t._v("银行卡")])]),1===t.info.level_three_types?[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("旺旺名：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.wangwang_name))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("V任务ID：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.v_task_id))])])]:2===t.info.level_three_types?[s("div",{staticClass:"line left"},[s("p",{staticClass:"label right"},[t._v("收款人：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.name))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("支付宝账号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.account))])])]:3===t.info.level_three_types?[s("div",{staticClass:"line left"},[s("p",{staticClass:"label right"},[t._v("公司名称：")]),s("div",{staticClass:"value line-clamp-1"},[t._v(" "+t._s(t.info.refund_way_detail.company_name)+" ")])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("银行账号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.bank_card_number))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label right"},[t._v("开户支行：")]),s("div",{staticClass:"value line-clamp-1"},[t._v(" "+t._s(t.info.refund_way_detail.bank_of_deposit)+" ")])])]:[s("div",{staticClass:"line left"},[s("p",{staticClass:"label right"},[t._v("卡号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.bank_card_number))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("户名：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.bank_account))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label right"},[t._v("开户行：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.refund_way_detail.bank_of_deposit))])])],s("div",{staticClass:"line",staticStyle:{height:"auto","margin-bottom":"24px"}},[s("p",{staticClass:"label"},[t._v("退款事由：")]),s("div",{staticClass:"value line-value"},[t._v(t._s(t.info.refund_reason))])]),s("div",{staticClass:"line",staticStyle:{height:"auto"}},[s("p",{staticClass:"label"},[t._v("备注：")]),s("div",{staticClass:"value line-value"},[t._v(" "+t._s(t.info.remark?t.info.remark:"--")+" ")])]),s("div",{staticClass:"line",staticStyle:{height:"auto"}},[s("p",{staticClass:"label"},[t._v("附件：")]),s("div",{staticClass:"value line-value"},[t.info.attachment&&t.info.attachment.length>0?[s("Appendix",{attrs:{list:t.info.attachment}})]:s("span",[t._v("--")])],2)])],2)]),s("div",{staticClass:"right-wrapper"},[s("h5",{staticClass:"right-wrapper-title"},[t._v("审批进度")]),s("WorkbenchTimeLine",{attrs:{"step-status":t.info.approval_status,items:t.info.approval_flow_detail}})],1)])]),s("tg-mask-loading",{attrs:{visible:t.saveLoading,content:"  正在提交，请稍候..."}}),t.edit?s("refund-dialog",{attrs:{visible:t.edit,row:t.refundRow,edit:t.edit,info:t.info},on:{"dialog:close":function(a){t.edit=!1},"dialog:reClose":t.reClose}}):t._e()],1)},e=[],l=s(97434),n=s(79703),o=s(17660),c=s(6283),v=s(82741),_=s(24643),r=s(51351),d=s(64236),u=(0,l.defineComponent)({name:"advanceDetailDialog",props:{visible:{type:Boolean,required:!1},info:{type:Object,default:()=>({})}},components:{Appendix:n.Z,WorkbenchTimeLine:o.Z,refundDialog:c.Z},setup(t,a){const s=(0,l.ref)(!1),i=(0,l.ref)(!1),e=(0,l.ref)({achievement_id:t.info.achievement_id,achievement_uid:t.info.achievement_uid,project_name:t.info.project_name,gather_amount:t.info.gather_amount,project_id:t.info.project_id,business_type:t.info.business_type}),n=async()=>{const i=await(0,v.I)(a,"你确定撤销吗?");if(i){s.value=!0;const i={approval_id:t.info.approval_id,update_code:4},[{data:e},l]=await Promise.all([await(0,r.qL)(i),await(0,d._v)(200)]);s.value=!1,e.success?(o(),a.emit("reload:refund",!0),a.root.$message.success("撤销成功")):a.root.$message.error(e.message??"撤销失败")}},o=(t=!1)=>{a.emit("dialog:close",t)},c=async()=>{const t=await(0,v.I)(a,"你确定重新提交吗?");t&&(i.value=!0)},u=()=>{o(),a.emit("reload:refund",!0)};return{saveLoading:s,emitClose:o,handleSubmit:n,numberFormat:_.Y4,edit:i,reClose:u,reSubmit:c,refundRow:e}}}),p=u,f=s(1001),m=(0,f.Z)(p,i,e,!1,null,"c72d05b2",null),C=m.exports},5968:function(t,a,s){s.d(a,{Z:function(){return C}});var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new advance-detail-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.visible,isAppendToBody:!0,isfooter:!0,width:"948px"},on:{close:t.emitClose},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",[t._v("垫款申请")])]},proxy:!0},{key:"footer",fn:function(){return[s("tg-button",{attrs:{type:"default"},on:{click:t.emitClose}},[t._v("取消")]),1===t.info.approval_status?s("div",{staticClass:"div-default-btn",on:{click:t.handleSubmit}},[t._v(" 撤销 ")]):t._e(),3===t.info.approval_status&&t.info.project_id?s("div",{staticClass:"div-default-btn",on:{click:t.reSubmit}},[t._v(" 重新提交 ")]):t._e()]},proxy:!0}])},[s("div",{staticClass:"detail-wrapper"},[s("div",{staticClass:"left-wrapper"},[s("div",{staticClass:"left-header"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("申请人：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.username))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("申请部门：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.create_department))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("发起时间：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.gmt_create.replace(/-/g,".")))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("审批编号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.approval_uid))]),1===t.info.approval_status?s("span",{staticClass:"status"},[t._v("审批中")]):2===t.info.approval_status?s("span",{staticClass:"status success"},[t._v("审批通过")]):3===t.info.approval_status?s("span",{staticClass:"status error"},[t._v("审批失败")]):s("span",{staticClass:"status revoke"},[t._v("已撤销")])])]),s("div",{staticClass:"left-body"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("客户：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.company_name))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("项目：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.project_name))])]),5!==t.info.business_type?s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("品牌：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.brand_name))])]):t._e(),s("div",{class:["line",5===t.info.business_type?"left":"right"]},[s("p",{staticClass:"label"},[t._v("垫款金额：")]),s("div",{staticClass:"value"},[t._v(t._s(t.numberFormat(t.info.borrowing_amount,2)))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("回款销售额：")]),s("div",{staticClass:"value"},[t._v(" "+t._s(t.info.back_amount||0===t.info.back_amount?t.numberFormat(t.info.back_amount,2):"--")+" ")])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("供应商：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.collecting_company))])]),5!==t.info.business_type?s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("客户经理：")]),s("div",{staticClass:"value"},[t._v(" "+t._s(t.info.customer_manager_name?t.info.customer_manager_name:"--")+" ")])]):t._e(),s("div",{staticClass:"line",staticStyle:{height:"auto","margin-bottom":"24px"}},[s("p",{staticClass:"label"},[t._v("垫款事由：")]),s("div",{staticClass:"value line-value"},[t._v(t._s(t.info.borrowing_reason))])]),s("div",{staticClass:"line",staticStyle:{height:"auto"}},[s("p",{staticClass:"label"},[t._v("备注：")]),s("div",{staticClass:"value line-value"},[t._v(" "+t._s(t.info.remark?t.info.remark:"--")+" ")])]),s("div",{staticClass:"line",staticStyle:{height:"auto"}},[s("p",{staticClass:"label"},[t._v("附件：")]),s("div",{staticClass:"value line-value"},[t.info.attachment&&t.info.attachment.length>0?[s("Appendix",{attrs:{list:t.info.attachment}})]:s("span",[t._v("--")])],2)])])]),s("div",{staticClass:"right-wrapper"},[s("h5",{staticClass:"right-wrapper-title"},[t._v("审批进度")]),s("WorkbenchTimeLine",{attrs:{"step-status":t.info.approval_status,items:t.info.approval_flow_detail}})],1)])]),s("tg-mask-loading",{attrs:{visible:t.saveLoading,content:"  正在提交，请稍候..."}}),t.edit?s("advance-dialog",{attrs:{visible:t.edit,edit:t.edit,info:t.info},on:{"dialog:close":function(a){t.edit=!1},"dialog:reClose":t.reClose}}):t._e()],1)},e=[],l=s(97434),n=s(79703),o=s(17660),c=s(50258),v=s(82741),_=s(51351),r=s(64236),d=s(24643),u=(0,l.defineComponent)({name:"advanceDetailDialog",props:{visible:{type:Boolean,required:!1},info:{type:Object,default:()=>({})}},components:{Appendix:n.Z,WorkbenchTimeLine:o.Z,AdvanceDialog:c.Z},setup(t,a){const s=(0,l.ref)(!1),i=(0,l.ref)(!1),e=async()=>{const i=await(0,v.I)(a,"你确定撤销吗?");if(i){s.value=!0;const i={approval_id:t.info.approval_id,update_code:4},[{data:e},l]=await Promise.all([await(0,_.qL)(i),await(0,r._v)(200)]);s.value=!1,e.success?(n(),a.emit("reload:application",!0),a.root.$message.success("撤销成功")):a.root.$message.error(e.message??"撤销失败")}},n=(t=!1)=>{a.emit("dialog:close",t)},o=async()=>{const t=await(0,v.I)(a,"你确定重新提交吗?");t&&(i.value=!0)},c=()=>{n(),a.emit("reload:application",!0)};return{saveLoading:s,emitClose:n,handleSubmit:e,numberFormat:d.Y4,edit:i,reSubmit:o,reClose:c}}}),p=u,f=s(1001),m=(0,f.Z)(p,i,e,!1,null,"3e4bf314",null),C=m.exports},7629:function(t,a,s){s.d(a,{Z:function(){return k}});var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new advance-detail-dialog payment-detail-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.visible,isAppendToBody:!0,isfooter:!0,width:"948px"},on:{close:t.emitClose},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",[t._v("对外付款申请")])]},proxy:!0},{key:"footer",fn:function(){return[s("tg-button",{attrs:{type:"default"},on:{click:t.emitClose}},[t._v("取消")]),1===t.info.approval_status?s("div",{staticClass:"div-default-btn",on:{click:t.handleSubmit}},[t._v(" 撤销 ")]):t._e(),3===t.info.approval_status&&t.info.project_id?s("div",{staticClass:"div-default-btn",on:{click:t.reSubmit}},[t._v(" 重新提交 ")]):t._e()]},proxy:!0}])},[s("div",{staticClass:"detail-wrapper"},[s("div",{staticClass:"left-wrapper"},[s("div",{staticClass:"left-header"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("申请人：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.username))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("申请部门：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.create_department))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("发起时间：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.gmt_create.replace(/-/g,".")))])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("审批编号：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.approval_uid))]),1===t.info.approval_status?s("span",{staticClass:"status"},[t._v("审批中")]):2===t.info.approval_status?s("span",{staticClass:"status success"},[t._v("审批通过")]):3===t.info.approval_status?s("span",{staticClass:"status error"},[t._v("审批失败")]):s("span",{staticClass:"status revoke"},[t._v("已撤销")])])]),s("div",{staticClass:"left-body"},[s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("业务类型：")]),s("div",{staticClass:"value"},[t._v(" "+t._s(2===t.info.cooperation_type?"区域店播":t.businessType(t.info.business_type))+" ")])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("项目：")]),s("div",{staticClass:"value"},[t._v(t._s(t.info.project_name))])]),5!==t.info.business_type?s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("品牌：")]),s("div",{staticClass:"value line-clamp-1"},[t._v(t._s(t.info.brand_name))])]):t._e(),s("div",{class:["line",5===t.info.business_type?"left":"right"]},[s("p",{staticClass:"label"},[t._v("付款金额：")]),s("div",{staticClass:"value"},[t._v(t._s(t.numberFormat(t.info.transfer_amount,2)))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("供应商：")]),s("div",{staticClass:"value line-clamp-1"},[t._v(t._s(t.info.collecting_company))])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("票款方式：")]),1===t.info.pay_invoice_type?s("div",{staticClass:"value"},[t._v("先票后款")]):s("div",{staticClass:"value"},[t._v("先款后票")])]),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("是否已回款：")]),1===t.info.is_back?s("div",{staticClass:"value"},[t._v("是")]):0===t.info.is_back?s("div",{staticClass:"value"},[t._v("否")]):s("div",[t._v("--")])]),1===t.info.is_back?s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("收款编号：")]),t.info.achievement_uid?s("div",{staticClass:"value"},[t._v(t._s(t.info.achievement_uid))]):s("div",[t._v("--")])]):t._e(),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("是否已签合同：")]),1===t.info.is_contract_signed?s("div",{staticClass:"value"},[t._v("是")]):0===t.info.is_contract_signed?s("div",{staticClass:"value"},[t._v("否")]):s("div",{staticClass:"value"},[t._v("--")])]),1===t.info.is_contract_signed?s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("合同单号：")]),s("div",[t._v(t._s(t.info.contract_uid))])]):t._e(),s("div",{staticClass:"line left"},[s("p",{staticClass:"label"},[t._v("收款方式：")]),3===t.info.level_three_types?s("div",{staticClass:"value"},[t._v("对公账户")]):s("div",{staticClass:"value"},[t._v("对公支付宝")])]),s("div",{staticClass:"line right"},[s("p",{staticClass:"label"},[t._v("客户经理：")]),s("div",{staticClass:"value"},[t._v(" "+t._s(t.info.customer_manager_name?t.info.customer_manager_name:"--")+" ")])]),s("div",{staticClass:"line"},[s("p",{staticClass:"label"},[t._v("付款事由：")]),s("div",{staticClass:"value line-value"},[t._v(t._s(t.info.pay_reason))])]),0===t.info.is_back?s("div",{staticClass:"line",staticStyle:{height:"auto","margin-bottom":"24px"}},[s("p",{staticClass:"label"},[t._v("关联审批单：")]),s("div",{staticClass:"value line-value"},[t._v(" "+t._s(t.info.borrowing&&t.info.borrowing?t.info.borrowing:"--")+" ")])]):t._e(),s("div",{staticClass:"line-block"}),s("p",{staticClass:"table-title"},[t._v("结算单明细：")]),s("div",{staticClass:"settlement-wrapper"},[s("div",{staticClass:"table-header"},[s("p",{staticClass:"item settlement-num"},[t._v("结算单编号")]),s("p",{staticClass:"item"},[t._v("结算金额")]),s("p",{staticClass:"item"},[t._v("已付金额")]),s("p",{staticClass:"item"},[t._v("待付金额")]),s("p",{staticClass:"item"},[t._v("本次支付金额")])]),t._l(t.info.settlements,(function(a,i){return s("div",{key:i,staticClass:"table-body"},[s("div",{staticClass:"item settlement-num"},[t._v(t._s(a.settlement_uid))]),s("div",{staticClass:"item"},[t._v(t._s(t.numberFormat(a.settlement_amount,2)))]),s("div",{staticClass:"item"},[t._v(t._s(t.numberFormat(a.paid_amount,2)))]),s("div",{staticClass:"item"},[t._v(t._s(t.numberFormat(a.pending_amount,2)))]),s("div",{staticClass:"item"},[t._v(t._s(t.numberFormat(a.pay_amount,2)))])])}))],2),1===t.info.pay_invoice_type&&t.info.invoice_info_list.length>0?s("p",{staticClass:"table-title"},[t._v(" 发票明细： ")]):t._e(),1===t.info.pay_invoice_type&&t.info.invoice_info_list.length>0?s("div",{staticClass:"invoice-detail"},[s("div",{staticClass:"table-header"},[s("p",{staticClass:"item invoice-settle"},[t._v("关联结算单号")]),s("p",{staticClass:"item buyer"},[t._v("购买方")]),s("p",{staticClass:"item seller"},[t._v("销售方")]),s("p",{staticClass:"item invoice-no"},[t._v("发票号码")]),s("p",{staticClass:"item invoice-date"},[t._v("开票日期")]),s("p",{staticClass:"item invoice-amount"},[t._v("发票金额")]),s("p",{staticClass:"item invoice-amount"},[t._v("发票核销金额")]),s("p",{staticClass:"item invoice-point"},[t._v("税率")]),s("p",{staticClass:"item tax-amount"},[t._v("税额")]),s("p",{staticClass:"item no-tax"},[t._v("不含税金额")]),s("p",{staticClass:"item invoice-type"},[t._v("发票类型")]),s("p",{staticClass:"item invoice-attachment"},[t._v("发票附件")])]),t._l(t.info.invoice_info_list,(function(a,i){return s("div",{key:i,staticClass:"table-body"},[s("div",{staticClass:"item invoice-settle"},[t._v(t._s(a.settlement_uid))]),s("div",{staticClass:"item buyer"},[t._v(t._s(a.buyer_name))]),s("div",{staticClass:"item seller"},[t._v(t._s(a.seller_name))]),s("div",{staticClass:"item invoice-no"},[t._v(t._s(a.invoice_number))]),s("div",{staticClass:"item invoice-date"},[t._v(" "+t._s(t.moment(1e3*a.invoice_date).format("YYYY.MM.DD"))+" ")]),s("div",{staticClass:"item invoice-amount"},[t._v(t._s(t.numberFormat(a.total_amount,2)))]),s("div",{staticClass:"item invoice-amount"},[t._v(" "+t._s(t.numberFormat(a.write_amount_by_this_settlement,2))+" ")]),s("div",{staticClass:"item invoice-point"},[t._v(t._s(a.tax_rate)+"%")]),s("div",{staticClass:"item tax-amount"},[t._v(t._s(t.numberFormat(a.tax_amount,2)))]),s("div",{staticClass:"item no-tax"},[t._v(t._s(t.numberFormat(a.tax_excluded_amount,2)))]),s("div",{staticClass:"item invoice-type"},[1===a.invoice_type?s("span",[t._v("销售发票")]):s("span",[t._v("采购发票")])]),s("div",{staticClass:"item invoice-attachment"},[s("img",{staticClass:"invoice-img",attrs:{src:a.invoice_pic_url+"?Authorization="+t.Auth},on:{click:function(s){return t.downloadBtnClick(a.invoice_pic_url)}}})])])}))],2):t._e(),s("div",{staticClass:"line",staticStyle:{height:"auto","margin-bottom":"24px"}},[s("p",{staticClass:"label"},[t._v("备注：")]),s("div",{staticClass:"value line-value"},[t._v(t._s(t.info.remark?t.info.remark:"--"))])]),s("div",{staticClass:"line",staticStyle:{height:"auto"}},[s("p",{staticClass:"label"},[t._v("附件：")]),s("div",{staticClass:"value line-value"},[t.info.attachment&&t.info.attachment.length>0?[s("Appendix",{attrs:{list:t.info.attachment}})]:s("span",[t._v("--")])],2)])])]),s("div",{staticClass:"right-wrapper"},[s("h5",{staticClass:"right-wrapper-title"},[t._v("审批进度")]),s("WorkbenchTimeLine",{attrs:{"step-status":t.info.approval_status,items:t.info.approval_flow_detail}})],1)])]),s("tg-mask-loading",{attrs:{visible:t.saveLoading,content:"  正在提交，请稍候..."}}),t.edit?s("payment-dialog",{attrs:{visible:t.edit,data:t.paymentData,info:t.info,projectType:t.projectType,edit:t.edit},on:{"update:visible":function(a){t.edit=a},"dialog:reClose":t.reClose,"dialog:close":function(a){t.edit=!1}}}):t._e()],1)},e=[],l=s(97434),n=s(74750),o=s(24643),c=s(79703),v=s(17660),_=s(35049),r=s(82741),d=s(64236),u=s(51351),p=s(69706),f=s(29625),m=s(6933),C=s.n(m);const b={headers:{Authorization:(0,n.LP)()??""}};var g=(0,l.defineComponent)({name:"advanceDetailDialog",props:{visible:{type:Boolean,required:!1},info:{type:Object,default:()=>({})}},components:{Appendix:c.Z,WorkbenchTimeLine:v.Z,PaymentDialog:_.Z},setup(t,a){const s=(0,l.ref)(!1),i=(0,l.ref)(!1),e=(0,l.ref)({}),c=(0,l.computed)((()=>(0,n.LP)())),v=(t=!1)=>{a.emit("dialog:close",t)},_=a=>{if(3===a&&1===t.info.region)return"抖音店播(上海)";switch(a){case 1:return"营销业务";case 2:return"淘宝店播";case 3:return"抖音店播";case 5:return"S2B2C";case 6:return"区域店播";default:return"未知"}},m=(0,l.computed)((()=>{switch(t.info.business_type){case 1:return f.kA.marketing;case 5:return f.kA.common_business;case 2:case 3:case 6:return f.kA.live;default:return}})),g=(t,a)=>{const s=new p.Decimal(a).dividedBy(100).plus(1),i=new p.Decimal(t),e=i.dividedBy(s);return e.toFixed(2)},h=(t,a)=>{const s=new p.Decimal(a).dividedBy(100),i=new p.Decimal(t),e=i.dividedBy(s.plus(1)).times(s);return e.toFixed(2)},y=async t=>{const s=decodeURIComponent(t.split("/")[t.split("/").length-1]);fetch(t,b).then((async t=>{const i=t.clone();try{const t=await i.json();a.root.$message.error(t.message)}catch{if(200===t.status){const a=await t.blob();(0,d.uA)(a,s)}else a.root.$message.error("下载失败")}}))},w=async()=>{const i=await(0,r.I)(a,"你确定撤销吗?");if(i){s.value=!0;const i={approval_id:t.info.approval_id,update_code:4},[{data:e},l]=await Promise.all([await(0,u.qL)(i),await(0,d._v)(200)]);s.value=!1,e.success?(v(),a.emit("reload:refund",!0),a.root.$message.success("撤销成功")):a.root.$message.error(e.message??"撤销失败")}},k=async()=>{const s=await(0,r.I)(a,"你确定重新提交吗?");s&&(i.value=!0,5!==t.info.business_type?e.value={project_name:t.info.project_name,project_id:t.info.project_id,business_type:t.info.business_type,brand_name:t.info.brand_name,brand_id:t.info.brand_id,region:t.info.region||0}:e.value={project_name:t.info.project_name,project_id:t.info.id,business_type:t.info.business_type,region:t.info.region||0})},x=()=>{v(),a.emit("reload:refund",!0)};return{Auth:c,emitClose:v,businessType:_,noTaxAmount:g,taxAmount:h,numberFormat:o.Y4,downloadBtnClick:y,saveLoading:s,handleSubmit:w,edit:i,reSubmit:k,paymentData:e,reClose:x,projectType:m,moment:C()}}}),h=g,y=s(1001),w=(0,y.Z)(h,i,e,!1,null,"4bb56906",null),k=w.exports}}]);