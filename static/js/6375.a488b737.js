(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[6375],{46469:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"steps"}},[n("el-steps",{staticClass:"steps",attrs:{active:e.$props.active,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:"需求设置"}}),n("el-step",{attrs:{title:"匹配主播"}}),n("el-step",{attrs:{title:"生成方案"}})],1)],1)},r=[],s={name:"steps",props:["active"]},u=s,i=n(1001),c=(0,i.Z)(u,a,r,!1,null,"40d76154",null),o=c.exports},26375:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"generate-plan"}},[n("steps",{attrs:{active:2}}),n("div",{staticClass:"plan-wrap"},[n("div",{staticClass:"plan-header"},[e._v("生成方案")]),n("div",{staticClass:"plan-info"},[n("label",[n("span",[e._v("方案名称：")]),n("el-input",{attrs:{placeholder:"请输入方案名称",size:"small"},scopedSlots:e._u([{key:"suffix",fn:function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:""===e.planName,expression:"planName === ''"}]},[e._v("列如：双十一阿玛尼口红直播方案")])]},proxy:!0}]),model:{value:e.planName,callback:function(t){e.planName=t},expression:"planName"}})],1),n("label",[n("span",[e._v("方案生成日期："),n("em",[e._v(e._s(e.computDate))])])]),n("label",[n("span",[e._v("方案生成人："),n("em",[e._v(e._s(e.userName))])])])]),n("div",{staticClass:"anchor-list"},[n("div",{staticClass:"list-title"},[e._v(" 已选主播："),n("span",[e._v(e._s(e.anchors.length)+"人")])]),n("div",{staticClass:"list-main"},e._l(e.anchors,(function(t,a){return n("div",{key:a,staticClass:"anchor"},[n("img",{staticClass:"avatar",attrs:{src:t.pic_url}}),n("div",{staticClass:"anchor-info"},[n("p",{staticClass:"anchor-name"},[e._v(e._s(t.star_info.split("(")[0]))]),n("p",{staticClass:"anchor-id"},[e._v(e._s(t.id))]),n("p",{staticClass:"anchor-cate"},[e._v(e._s(t.star_info.split("(")[1].split(")")[0]))])])])})),0)]),n("div",{staticClass:"plan-footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.generatePlan}},[e._v(e._s(e.generateBtnText))]),n("el-button",{on:{click:e.backLastStep}},[e._v("返回上一步")])],1)])],1)},r=[],s=n(46469),u=n(8136),i=n(86223),c=n(1763),o={name:"generatePlan",components:{steps:s.Z},data(){return{planinfo:null,anchors:[],userName:"",planName:"",lastPageSavedData:null}},computed:{computDate(){return(0,u.xF)(Date.now())},generateBtnText(){return this.planinfo&&0===this.planinfo.status?"生成方案":this.planinfo&&1===this.planinfo.status?"重新生成方案":"生成方案"}},mounted(){try{const e=sessionStorage.getItem("anchors"),t=JSON.parse(e);this.anchors=t.anchors,this.lastPageSavedData=t}catch(t){return this.$message({showClose:!0,message:"本地数据获取出错",type:"error"})}this.$route.query.pid&&this.getPlanInfoById(this.$route.query.pid);const e=this.$store.getters["user/getUserInfo"];this.userName=e.username},methods:{async getPlanInfoById(e){try{const t=await(0,i.RL)({plan_id:e});200===t.status&&t.data.success?(this.planinfo=t.data.data,this.planName=this.planinfo.plan_name):this.$message({showClose:!0,message:t.data.message||"接口请求出错",type:"warning"})}catch(t){this.$message({showClose:!0,message:"请求失败，稍后重试",type:"error"})}},async generatePlan(){if(""===this.planName)return this.$message({showClose:!0,message:"请输入方案名称",type:"warning"});const e={plan_name:this.planName,requirement_id:this.lastPageSavedData.requirement.requirement_id,commit:1,star_ids:JSON.stringify(this.anchors.map((e=>e.id)))};this.$route.query.pid&&(e["plan_id"]=this.$route.query.pid);try{const t=await(0,i.HR)(e);200===t.status&&t.data.success?this.$confirm("成功生成方案","提示",{confirmButtonText:"继续新增",cancelButtonText:"查看方案",type:"success",iconClass:"success-icon",customClass:"g-plan-success"}).then((()=>{this.$router.replace({path:"/brand/match-anchor?rid="+this.lastPageSavedData.requirement.requirement_id}),sessionStorage.removeItem("anchors")})).catch((()=>{this.$router.replace({name:c.Z8.demand.demand,params:{id:this.lastPageSavedData.requirement.requirement_id}}),sessionStorage.removeItem("anchors")})):this.$message({showClose:!0,message:t.data.message||"接口请求出错",type:"warning"})}catch(t){this.$message({showClose:!0,message:"请求失败，稍后重试",type:"error"})}},backLastStep(){const e={rid:this.lastPageSavedData.requirement.requirement_id};this.$route.query.pid&&(e["pid"]=this.$route.query.pid),this.$router.replace({name:"匹配主播",query:e})}}},l=o,p=n(1001),f=(0,p.Z)(l,a,r,!1,null,"73ec715a",null),m=f.exports},86223:function(e,t,n){"use strict";n.d(t,{CP:function(){return u},GJ:function(){return r},HR:function(){return c},RL:function(){return o},pw:function(){return l},qk:function(){return i},yJ:function(){return s}});var a=n(76012);function r(e){return(0,a.ZP)({url:"/api/brand/query_requirement_product",method:"get",params:e})}function s(e){return(0,a.ZP)({url:"/api/brand2/query_requirements",method:"get",params:e})}function u(){return(0,a.ZP)({url:"/api/brand2/query_categories",method:"get"})}function i(e){return(0,a.ZP)({url:"/api/brand2/query_stars",method:"get",params:e,timeout:2e4})}function c(e){return(0,a.ZP)({url:"/api/brand2/update_requirement_plan",method:"post",data:e})}function o(e){return(0,a.ZP)({url:"/api/brand2/requirement_plan_detail",method:"get",params:e})}function l(e){return(0,a.ZP)({url:"/api/brand2/requirement_detail",method:"get",params:e})}},8136:function(e,t,n){"use strict";n.d(t,{AR:function(){return x},BG:function(){return B},Cl:function(){return g},D$:function(){return i},EI:function(){return p},Hx:function(){return s},LY:function(){return o},Nv:function(){return c},Ps:function(){return b},Rd:function(){return q},ZC:function(){return m},_t:function(){return y},bI:function(){return _},g9:function(){return v},hy:function(){return f},jh:function(){return I},mB:function(){return F},mx:function(){return P},nA:function(){return A},q0:function(){return w},sc:function(){return D},ug:function(){return C},us:function(){return d},vJ:function(){return h},wA:function(){return u},xF:function(){return l}});var a=n(20713),r=n.n(a);function s(e,t){const n=e.display_type;switch(n){case 0:return"混播";case 1:return"专场"}}const u=["综合","美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值"],i=["美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值","行政采购"];function c({category:e}){return 0===e?"无":u[e]}function o(e,t){const n=e.sales_price_period;switch(n){case 0:return"0 ~ 100";case 1:return"100 ~ 200";case 2:return"200以上"}}function l(e,t="YYYY-MM-DD"){return r()(e).format(t)}function p(e,t="YYYY-MM-DD hh:mm:ss"){return r()(e+"+0800").format(t)}function f(e,t){return r()(e+"+0800").format(t||"YYYY-MM-DD")}function m(e){let t=parseInt(e,10),n=0,a=0;t>=60&&(n=parseInt(t/60,10),t=parseInt(t%60,10),n>=60&&(a=parseInt(n/60,10),n=parseInt(n%60,10)));let r=""+(parseInt(t,10)<10?"0"+parseInt(t,10):parseInt(t,10));return r=(parseInt(n,10)<10?"0"+parseInt(n,10):parseInt(n,10))+":"+r,r=(parseInt(a,10)<10?"0"+parseInt(a,10):parseInt(a,10))+":"+r,r}function h(e){const t=e.is_presell;switch(t){case-1:return"未录入";case 1:return"预售";case 0:return"非预售";case 2:return"预热"}}function d(e){const t=e.is_display;switch(t){case-1:return"未录入";case 2:return"已出单";case 1:return"未出单"}}function v(e){const t=e.duration;switch(t){case-1:return"未录入";case 0:return"5 ~ 10分钟";case 1:return"10 ~ 15分钟";case 2:return"15 ~ 20分钟";case 3:return"0 ~ 5分钟";case 4:return"20分钟以上"}}function y(e){const t=e.display_period;switch(t){case-1:return"未录入";case 0:return"白天";case 1:return"晚上"}}function F(e){const t=e.shop_type;switch(t){case 0:return"无";case 1:return"淘宝店";case 2:return"天猫店";case 3:return"抖音店";default:return"--"}}function C(e){const t=e.company_type;switch(t){case 0:return"无";case 1:return"同行机构";case 2:return"广告公司";case 3:return"品牌TP";case 4:return"直客"}}function _(e,t){const n=/[^\x00-\xff]/g;let a;if(e.replace(n,"**").length>t){a=Math.floor(t/2);for(let r=a,s=e.length;r<s;r++)if(e.substr(0,r).replace(n,"**").length>=t)return e.substr(0,r)}return e}const g=[{type:0,value:"全部"},{type:1,value:"普通客户"},{type:2,value:"重点客户"},{type:3,value:"战略客户"},{type:4,value:"KA客户"}],D=[{value:"全部",type:0},{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13}],B=[{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13},{value:"行政采购",type:14}],w=[{value:3,text:"抖音店"},{value:1,text:"淘宝店"},{value:2,text:"天猫店"}],q=[{value:1,text:"同行机构"},{value:2,text:"广告公司"},{value:3,text:"品牌TP"},{value:4,text:"直客"}],x=[{type:0,value:"--"},{type:1,value:"同行机构"},{type:2,value:"广告公司"},{type:3,value:"品牌TP"},{type:4,value:"直客"}],A=["#D15CB4","#6090F0","#FF9C69","#59B6DF","#C673F0","#52CCC2","#F0737F","#6FCC66","#DBD26A","#9D73F0","#FAB36E","#A2D160","#D15CB4","#58B89F","#E06C9C","#8873F0","#FA9384","#C251A6","#486DB5","#C77A52","#4185A3","#9557B5","#3C968F","#B55760","#4F9149","#A19A4D","#7657B5","#BF8954","#759645","#964282","#3C7D6C","#A65073","#6556B3","#BF7065","#873874"],I=["#6090F0","#FF9C69","#52CCC2","#59B6DF","#C673F0","#D15CB4","#F0737F","#DBD26A","#FAB36E","#A2D160","#6FCC66","#58B89F","#8873F0","#FA9384","#9D73F0","#E06C9C","#C251A6"],P=["#1E8DFF","#FFBF00","#10C0D3","#9273F8","#FE9C25","#00B942","#FFCD39","#FF829D","#00A3FF","#3AD08E","#F1DC2F","#845EF7","#FF7F00","#B3DC12","#009999","#2877FF","#D977F2","#FFC073","#768FF3","#81E5B1","#BAC8FF","#E599F8","#E7E275","#FF7E7E","#F7A0B8","#49C6F1","#B197FC","#53D66F","#FF97AD","#FDD866"];function b(e){for(const t of e)if("一"<=t&&t<="龥")return t;return e[0]}},20713:function(e,t,n){e.exports=n(70680)(52703)}}]);