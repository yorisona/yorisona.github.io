"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5233],{75233:function(e,t,a){a.r(t),a.d(t,{default:function(){return va}});a(21703);var i=a(97434),l=a(1763),s=a(48606),n=a(36568),o=a.n(n),r=a(53451),c=a.n(r),d=a(52970),u=a(88721),p=a(22088);const{debounce:m}=c();var h,v,g=(0,i.defineComponent)({props:{save:{type:Function}},setup(e,t){const a=(0,i.ref)(null),l=(0,i.ref)(""),n=(0,i.ref)(!1),o=(0,i.ref)({}),r=()=>{t.emit("close"),t.root.$nextTick(c),n.value=!1},c=()=>{o.value={}},d=()=>{o.value={budget_mode:p.eY.BUDGET_MODE_DAY,status:!0},n.value=!0},u=()=>{a.value?.validate((t=>{if(!t)return!1;{const t={...o.value};t.budget&&(t.budget=Number(t.budget)),t.status=!0===t.status?"ENABLE":"DISABLE",e.save(t).then((()=>{n.value=!1})).catch((e=>{s.Message.error(e.message)}))}}))},h=m(u,200);return{show:d,title:l,visible:n,formData:o,onCloseBtnClick:r,onSaveBtnClick:h,formRef:a}},render(){const e=arguments[0],{formData:t}=this;return e("el-dialog",{class:"tg-dialog-classic el-dialog-center-rewrite",attrs:{width:"390px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},["新增广告组"]),e("div",{class:"dialog-content"},[e("el-form",o()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{size:"small","label-width":"96px"}}]),[e("div",{class:"content"},[e("el-form-item",{attrs:{label:"广告组名称：",prop:"campaign_name",rules:{required:!0,message:"请输入广告组名称",trigger:"blur"}}},[e("el-input",{attrs:{placeholder:"请输入广告组名称",maxlength:20,"show-word-limit":!0},model:{value:t.campaign_name,callback:e=>{this.$set(t,"campaign_name",e)}}})]),e("el-form-item",{attrs:{label:"广告组预算：",prop:"status2"}},[e("el-radio-group",{model:{value:t.budget_mode,callback:e=>{this.$set(t,"budget_mode",e)}}},[p.k9.map((t=>e("el-radio-button",{attrs:{label:t.value}},[t.label])))])]),t.budget_mode===p.eY.BUDGET_MODE_DAY&&e("el-form-item",{attrs:{label:"日预算：",prop:"budget",rules:[{required:!0,message:"请输入日预算",trigger:"blur"},{trigger:"blur",validator:(e,t,a)=>{Number(t)<300?a(new Error("预算必须大于300")):a()}}]}},[e("el-input",{attrs:{placeholder:"请输入日预算",value:t.budget,maxLength:9},style:"width:166px",on:{input:e=>{(0,i.set)(t,"budget",u.Z.IntergerAndDecimals(e))}}},[e("span",{slot:"append"},["元"])])]),e("el-form-item",{attrs:{label:"启用/停用：",prop:"status"}},[e("el-switch",{attrs:{value:t.status},on:{input:e=>{(0,i.set)(t,"status",e)}}})])])])]),e("template",{slot:"footer",style:"height: 50px"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])}}),_=g,f=a(1001),b=(0,f.Z)(_,h,v,!1,null,"9529ab8a",null),y=b.exports;const{debounce:E}=c();var k,C,w=(0,i.defineComponent)({components:{dialogCreateAdvertiseGroup:y},props:{save:{type:Function}},setup(e,t){const a=(0,i.ref)(null),l=(0,i.ref)(!1),s=(0,i.ref)([]),n=(0,i.ref)([]),o=(0,i.ref)({}),r=(0,i.ref)(null),c=(0,i.ref)(),u=()=>{d.A7({advertiser_id:o.value.advertiser_id,num:200,page_num:1}).then((e=>{n.value=e.data}))},p=()=>{t.emit("close"),t.root.$nextTick(m),l.value=!1},m=()=>{console.log("2")},h=(e,t,a,i)=>{o.value=e||{},o.value.advertiser_id=t,s.value=a,c.value=i,u(),l.value=!0},v=e=>d.w5({advertiser_id:o.value.advertiser_id,marketing_goal:"LIVE_PROM_GOODS",aweme_show_id:c.value,...e}),g=()=>{a.value?.validate((e=>{if(!e)return!1;t.emit("change",o.value.groupSelected),l.value=!1}))},_=E(g,200);return{query:u,show:h,visible:l,formData:o,onCloseBtnClick:p,onSaveBtnClick:_,formRef:a,advertiser_list:s,groupList:n,dialogCreateAdvertiseGroupRef:r,addCampaign:v}},render(){const e=arguments[0];return e("el-dialog",{class:"tg-dialog-classic el-dialog-center-rewrite",attrs:{width:"390px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},["选择广告组"]),e("div",{class:"dialog-content"},[e("el-form",o()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{size:"small","label-width":"86px"}}]),[e("div",{class:"content"},[e("el-form-item",{attrs:{label:"千川账户：",prop:"advertiser_id"}},[e("el-select",{attrs:{placeholder:"请输入标题",disabled:!0},on:{change:e=>{}},model:{value:this.formData.advertiser_id,callback:e=>{this.$set(this.formData,"advertiser_id",e)}}},[this.advertiser_list.map(((t,a)=>e("el-option",{attrs:{label:t.advertiser_name,value:t.advertiser_id},key:a})))])]),e("span"),e("el-form-item",{attrs:{label:"广告组：",prop:"groupId",rules:{required:!0,message:"请选择广告组",trigger:"blur"}}},[e("div",{class:"selected-column"},[e("el-select",{attrs:{placeholder:"请选择广告组","popper-class":"selected-column-popper"},on:{change:e=>{this.formData.groupSelected=this.groupList.find((t=>t.campaign_id===e))}},model:{value:this.formData.groupId,callback:e=>{this.$set(this.formData,"groupId",e)}}},[this.groupList.map((t=>e("el-option",{attrs:{value:t.campaign_id,label:t.campaign_name}},[e("span",{class:"selected-popper-item"},[t.campaign_name])])))])])]),e("a",{on:{click:this.query}},["刷新"]),e("el-form-item",[e("div",{class:"form-item-empty"},[e("tg-icon",{attrs:{name:"ico-btn-add"},style:"#287fff",on:{click:()=>{this.dialogCreateAdvertiseGroupRef?.show()}}}),e("a",{on:{click:()=>{this.dialogCreateAdvertiseGroupRef?.show()}}},["新增广告组"])])])])])]),e("template",{slot:"footer",style:"height: 50px"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])]),e("dialog-create-advertise-group",{ref:"dialogCreateAdvertiseGroupRef",attrs:{save:e=>this.addCampaign(e).then((()=>{this.query()}))}})])}}),A=w,T=(0,f.Z)(A,k,C,!1,null,"77efca98",null),O=T.exports;const S=(e,t)=>e<t?[e,t]:[t,e],x=new Array(48).fill(1),L=["一","二","三","四","五","六","日"];var I,N,R=(0,i.defineComponent)({name:"TableTimeRangeSelector",props:{value:{type:Array,default:()=>[]}},emits:["input"],setup(e,t){const a=(0,i.ref)([]),l=e=>{o.value=a.value.map(((e,t)=>{const a=[];let i=null;for(let l=0;l<e.length;l++){const t=e[l];t.selected?null===i?i=[t.start,t.end]:i[1]=t.end:null!==i&&(a.push(`${i[0]}～${i[1]}`),i=null)}return null!==i&&(a.push(`${i[0]}～${i[1]}`),i=null),{week:L[t],list:a.join(",")}})).filter((e=>""!==e.list)),!0!==e&&d()},s=()=>{a.value=L.map(((t,a)=>x.map(((i,l)=>{const s=Math.floor(l/2),n=48*a+l,o=1===e.value[n];return{start:s.toString().padStart(2,"0")+":"+(l%2===0?"00":"30"),end:(l%2===0?s:s+1).toString().padStart(2,"0")+":"+(l%2===0?"30":"00"),week:t,selected:o,row:a,column:l,index:n}})))),l(!0)};(0,i.watch)((()=>e.value),s);const n=(0,i.ref)({}),o=(0,i.ref)(),r=()=>{t.emit("input",new Array(336).fill(0))},c=(e,t,i)=>{const l=S(e.column,t.column),s=S(e.row,t.row);for(let n=s[0];n<=s[1];n++)for(let e=l[0];e<=l[1];e++)a.value[n][e].selected=i},d=()=>{const e=a.value.flat().map((e=>e.selected?1:0));t.emit("input",e)};return s(),{timeRange:a,mouseConfigurator:n,fillReact:c,initTimeRange:r,execSelectedRange:l,selectedRange:o,emitValue:d}},render(){const e=arguments[0],t=this.timeRange.map(((t,a)=>e("tr",{key:a},[e("th",["星期",L[a]]),t.map(((t,a)=>e("td",{key:a,class:t.selected?"active":"",on:{mousedown:()=>{this.mouseConfigurator.isMouseDown=!0,this.mouseConfigurator.targetSelected=!t.selected,this.mouseConfigurator.startPoint=t,this.mouseConfigurator.lastPoint=t},mousemove:()=>{if(void 0!==this.mouseConfigurator.isMouseDown){const e=this.mouseConfigurator.startPoint,a=this.mouseConfigurator.targetSelected;this.fillReact(e,this.mouseConfigurator.lastPoint,!a),this.fillReact(e,t,a),this.mouseConfigurator.lastPoint=t}}}})))])));return e("div",{class:"table-timerange-selector"},[e("table",{on:{mouseup:()=>{void 0!==this.mouseConfigurator.isMouseDown&&(this.mouseConfigurator.isMouseDown=void 0,this.mouseConfigurator.lastPoint===this.mouseConfigurator.startPoint&&this.fillReact(this.mouseConfigurator.startPoint,this.mouseConfigurator.startPoint,this.mouseConfigurator.targetSelected),this.execSelectedRange())},mouseleave:()=>{void 0!==this.mouseConfigurator.isMouseDown&&(this.mouseConfigurator.isMouseDown=void 0,this.execSelectedRange())}}},[e("colgroup",[e("col",{style:"width:70px"}),new Array(48).fill(1).map(((t,a)=>e("col",{style:"width:13px",key:a})))]),e("thead",[e("tr",[e("th",{attrs:{rowspan:2}},["星期/时间"]),e("th",{attrs:{colspan:24}},["00:00 ～ 12:00"]),e("th",{attrs:{colspan:24}},["12:00 ～ 24:00"])]),e("tr",[new Array(24).fill(1).map(((t,a)=>e("th",{attrs:{colspan:2}},[a])))])]),e("tbody",[t])]),e("div",{class:"select-time"},[e("div",{class:"line"},[0===this.selectedRange?.length&&e("div",{class:"label"},["可拖动鼠标选择时间段"]),0!==this.selectedRange?.length&&e("div",{class:"label"},["已选时间段"]),e("a",{on:{click:this.initTimeRange}},["清空选择"])]),this.selectedRange?.map(((t,a)=>e("p",{class:"select",key:a},[e("span",{class:"label"},["星期",t.week,"："]),e("span",[t.list," "])])))])])}}),D=R,M=(0,f.Z)(D,I,N,!1,null,"9113920c",null),P=M.exports,V=a(12704),B=a(6933),W=a.n(B),G=a(77795);const{debounce:Y}=c(),U=()=>({smart_bid_type:G.ET.SMART_BID_CUSTOM,flow_control_mode:G.CM.FLOW_CONTROL_MODE_FAST,external_action:G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_PAY,deep_external_action:null,live_schedule_type:G.Jy.SCHEDULE_TIME_ALLDAY,start_time:W()().format("YYYY-MM-DD"),end_time:W()().add(1,"days").format("YYYY-MM-DD"),budget_mode:"BUDGET_MODE_DAY",bindding_method:G.uP.FIXED,schedule_fixed_range:2,schedule_time:new Array(336).fill(0),image_mode:G.dU.AWEME_LIVE_ROOM}),q={[G.i6.AD_CONVERT_TYPE_LIVE_ENTER_ACTION]:"元/观看",[G.i6.AD_CONVERT_TYPE_LIVE_CLICK_PRODUCT_ACTION]:"元/点击",[G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_ACTION]:"元/下单",[G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_PAY]:"元/成交",[G.i6.AD_CONVERT_TYPE_NEW_FOLLOW_ACTION]:"元/关注",[G.i6.AD_CONVERT_TYPE_LIVE_COMMENT_ACTION]:"元/评论"};var $,z,F=(0,i.defineComponent)({components:{tableTimeRangeSelector:P},props:{save:{type:Function}},setup(e,t){const a=(0,i.ref)(),l=(0,i.ref)(null),n=(0,i.ref)(""),o=(0,i.ref)(!1),r=(0,i.ref)(U()),c=(0,i.ref)([]),u=(0,i.ref)(),p=(0,i.ref)([]),m=(0,i.ref)(),h=(0,i.ref)(!1),v=(0,i.ref)(""),g=()=>{d.mU().then((e=>{p.value=e}))},_=()=>{t.emit("close"),o.value=!1},f=()=>{r.value=U()},b=(e,t)=>{a.value=e,"smart_bid_type"in t&&void 0!==t.smart_bid_type?r.value=t:r.value=U(),o.value=!0,g()},y=()=>{l.value?.validate((e=>{if(!e)return!1;Promise.resolve().then((()=>{if(!0===h.value){if(V.Z.isEmpty(v.value))throw new Error("请填写常用模板名称");return d.aS(a.value,v.value,r.value)}})).then((()=>{t.emit("change",JSON.parse(JSON.stringify(r.value))),o.value=!1})).then((()=>{h.value=!1,v.value=""})).catch((e=>{s.Message.error(e.message)}))}))},E=(0,i.ref)(1),k=Y(y,200);return{selectTemplateValue:m,show:b,title:n,visible:o,formData:r,months:c,onCloseBtnClick:_,onSaveBtnClick:k,formRef:l,checkbox:E,resetForm:f,selectTemplate:u,selectTemplateList:p,saveTempalteCheckbox:h,saveTemplateInput:v,refreshTemplates:g}},render(){const e=arguments[0],{formData:t}=this;return e("el-drawer",{class:"tg-dialog-classic",attrs:{size:882,height:"100vh",title:"计划设置",direction:"rtl",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("div",{class:"dialog-content"},[e("el-form",o()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{size:"small","label-position":"left","label-width":"110px","hide-required-asterisk":!0}}]),[e("div",{class:"content"},[e("div",{class:"select-template"},[e("el-select",{attrs:{placeholder:"请选择常用模板",maxlength:20,size:"small"},style:"width:332px",on:{change:e=>{const t=this.selectTemplateList.find((t=>t.id===e));t&&(W()(t.content.start_time).isBefore(W()())&&(t.content.start_time=W()().format("YYYY-MM-DD"),t.content.end_time=W()().format("YYYY-MM-DD")),void 0===t.content.image_mode&&(0,i.set)(t.content,"image_mode",G.dU.AWEME_LIVE_ROOM),this.formData=t.content)}},model:{value:this.selectTemplateValue,callback:e=>{this.selectTemplateValue=e}}},[this.selectTemplateList.map(((t,a)=>e("el-option",{attrs:{value:t.id,label:t.template_name}})))])]),e("div",{class:"plan-title"},["计划设置"]),e("el-form-item",{attrs:{label:"投放方式",prop:"smart_bid_type"}},[e("el-radio-group",{model:{value:t.smart_bid_type,callback:e=>{this.$set(t,"smart_bid_type",e)}}},[e("el-radio-button",{attrs:{label:G.ET.SMART_BID_CUSTOM}},["控成本投放"]),e("el-radio-button",{attrs:{label:G.ET.SMART_BID_CONSERVATIVE}},["放量投放"])])]),t.smart_bid_type===G.ET.SMART_BID_CUSTOM&&e("el-form-item",{attrs:{label:"投放速度",prop:"flow_control_mode"}},[e("el-radio-group",{model:{value:t.flow_control_mode,callback:e=>{this.$set(t,"flow_control_mode",e)}}},[e("el-radio-button",{attrs:{label:G.CM.FLOW_CONTROL_MODE_FAST}},["尽快投放"]),e("el-radio-button",{attrs:{label:G.CM.FLOW_CONTROL_MODE_BALANCE}},["均匀投放"]),e("el-radio-button",{attrs:{label:G.CM.FLOW_CONTROL_MODE_SMOOTH}},["严格控制成本上限"])])]),e("el-form-item",{attrs:{label:"转化目标",prop:"external_action",rules:{required:!0,message:"请选择广告组",trigger:"blur"}}},[e("el-radio-group",{on:{change:e=>{switch(e){case G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_ACTION:case G.i6.AD_CONVERT_TYPE_NEW_FOLLOW_ACTION:case G.i6.AD_CONVERT_TYPE_LIVE_COMMENT_ACTION:t.deep_external_action=null;break}}},model:{value:t.external_action,callback:e=>{this.$set(t,"external_action",e)}}},[e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_PAY}},["直播间成交"]),e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_LIVE_ENTER_ACTION}},["进入直播间"]),e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_NEW_FOLLOW_ACTION}},["直播间粉丝提升"]),e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_ACTION}},["直播间下单"]),e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_LIVE_CLICK_PRODUCT_ACTION}},["商品点击"]),e("el-radio-button",{attrs:{label:G.i6.AD_CONVERT_TYPE_LIVE_COMMENT_ACTION}},["直播间评论"])])]),t.smart_bid_type===G.ET.SMART_BID_CUSTOM&&t.flow_control_mode!==G.CM.FLOW_CONTROL_MODE_SMOOTH&&e("el-form-item",{attrs:{label:"期待同时优化",prop:"deep_external_action"}},[e("el-select",{attrs:{placeholder:"请选择"},style:"width:222px",model:{value:t.deep_external_action,callback:e=>{this.$set(t,"deep_external_action",e)}}},[e("el-option",{attrs:{value:null,label:"暂无"}}),(t.external_action===G.i6.AD_CONVERT_TYPE_LIVE_ENTER_ACTION||t.external_action===G.i6.AD_CONVERT_TYPE_LIVE_CLICK_PRODUCT_ACTION)&&e("el-option",{attrs:{value:G.nv.AD_CONVERT_TYPE_LIVE_SUCCESSORDER_ACTION,label:"直播间下单"}})])]),e("el-form-item",{attrs:{label:"投放时间",prop:"live_schedule_type",rules:{required:!0,message:"请选择广告组",trigger:"blur"}}},[e("el-radio-group",{model:{value:t.live_schedule_type,callback:e=>{this.$set(t,"live_schedule_type",e)}}},[e("el-radio-button",{attrs:{label:G.Jy.SCHEDULE_TIME_ALLDAY}},["全天"]),e("el-radio-button",{attrs:{label:G.Jy.SCHEDULE_TIME_WEEKLY_SETTING}},["固定时段"]),e("el-radio-button",{attrs:{label:G.Jy.SCHEDULE_TIME_FIXEDRANGE}},["固定时长"])])]),t.live_schedule_type===G.Jy.SCHEDULE_TIME_WEEKLY_SETTING&&e("el-form-item",{attrs:{label:"投放时长",prop:"schedule_time",rules:{trigger:"blur",validator:(e,t,a)=>{-1===t.indexOf(1)?a(new Error("请选择投放时长")):a()}}}},[e("table-time-range-selector",{model:{value:t.schedule_time,callback:e=>{this.$set(t,"schedule_time",e)}}})]),t.live_schedule_type===G.Jy.SCHEDULE_TIME_FIXEDRANGE&&e("el-form-item",{attrs:{label:"投放时长",prop:"schedule_fixed_range",rules:[{required:!0,message:"请填写投放时长",trigger:"blur"},{trigger:"blur",validator:(e,t,a)=>{Number(t)%.5!==0?a(new Error("投放时长必须是0.5的倍数")):a()}}]}},[e("el-input-number",{attrs:{step:.5,min:.5,max:24},model:{value:t.schedule_fixed_range,callback:e=>{this.$set(t,"schedule_fixed_range",e)}}})]),(t.live_schedule_type===G.Jy.SCHEDULE_TIME_ALLDAY||t.live_schedule_type===G.Jy.SCHEDULE_TIME_WEEKLY_SETTING)&&e("el-form-item",{attrs:{label:"投放日期范围",prop:"start_time",rules:{trigger:"blur",validator:(e,a,i)=>{V.Z.isEmpty(t.start_time)?i(new Error("请选择开始日期")):V.Z.isEmpty(t.end_time)?i(new Error("请选择结束日期")):W()(t.start_time).isAfter(t.end_time)?i(new Error("开始时间不能大于结束日期")):i()}}}},[e("div",{class:"price-range"},[e("el-date-picker",{style:"width:172px",attrs:{placeholder:"开始日期",editable:!1,clearable:!1,format:"yyyy.MM.dd",pickerOptions:{disabledDate:e=>W()().startOf("day").isAfter(e)}},model:{value:t.start_time,callback:e=>{this.$set(t,"start_time",e)}}}),e("span",["～"]),e("el-date-picker",{style:"width:172px",attrs:{placeholder:"结束日期",editable:!1,clearable:!1,format:"yyyy.MM.dd",pickerOptions:{disabledDate:e=>W()().startOf("day").isAfter(e)}},model:{value:t.end_time,callback:e=>{this.$set(t,"end_time",e)}}})])]),e("el-form-item",{attrs:{label:(t.live_schedule_type===G.Jy.SCHEDULE_TIME_FIXEDRANGE?"总":"日")+"预算",prop:"budget",rules:[{required:!0,message:"请输入日预算",trigger:"blur"},{trigger:"blur",validator:(e,t,a)=>{Number(t)<300?a(new Error("预算不能低于300")):Number(t)>9999999.99?a(new Error("预算不能大于9999999.99")):a()}}]}},[e("div",{class:"day-budget"},[e("el-input",{attrs:{placeholder:"预算",maxlength:10},on:{input:e=>{(0,i.set)(t,"budget",u.Z.IntergerAndDecimals(e))}},model:{value:t.budget,callback:e=>{this.$set(t,"budget",e)}}},[e("fragments",{slot:"append"},["元"])]),[300,500,1e3,5e3].map(((a,l)=>e("span",{key:l,on:{click:()=>{(0,i.set)(t,"budget",a),this.formRef?.validateField("budget")}}},["￥ ",a])))])]),t.smart_bid_type!==G.ET.SMART_BID_CONSERVATIVE&&e("el-form-item",{attrs:{label:"出价方式",prop:"bindding_method"}},[e("el-radio-group",{model:{value:t.bindding_method,callback:e=>{this.$set(t,"bindding_method",e)}}},[e("el-radio-button",{attrs:{label:G.uP.FIXED}},["固定出价"]),e("el-radio-button",{attrs:{label:G.uP.RANDOM}},["随机出价"]),e("el-radio-button",{attrs:{label:G.uP.LADDER}},["阶梯出价"]),e("div",[e("div",{class:"question"},[e("el-tooltip",{attrs:{className:"item",effect:"light",content:t.bindding_method===G.uP.FIXED?"需要录入出价":t.bindding_method===G.uP.RANDOM?"需要录入出价的最小值和最大值以确定出价范围，然后在该范围内随机取值作为计划出价":"需要录入出价的最小值和最大值以确定出价范围，然后根据计划数量在该出价范围内按等差数列取值",placement:"top-start"}},[e("tg-icon",{attrs:{name:"ico-question"},style:"color:#C4CBD2"})])])])])]),t.smart_bid_type!==G.ET.SMART_BID_CONSERVATIVE&&t.bindding_method===G.uP.FIXED&&e("el-form-item",{attrs:{label:"出价",prop:"cpa_bid",rules:[{required:!0,message:"请输入出价",trigger:"blur"},{trigger:"blur",validator:(e,a,i)=>{void 0===t.budget||Number(t.cpa_bid)>t.budget?i(new Error("出价不能高于预算")):i()}}]}},[e("el-input",{style:"width:207px",attrs:{value:t.cpa_bid,placeholder:"请输入出价",maxlength:10},on:{input:e=>{(0,i.set)(t,"cpa_bid",u.Z.IntergerAndDecimals(e))}}},[e("span",{slot:"append"},[q[t.external_action]])])]),t.bindding_method!==G.uP.FIXED&&e("el-form-item",{attrs:{label:"出价范围",prop:"min_cpa_bind",rules:[{trigger:"blur",validator:(e,a,i)=>{V.Z.isEmpty(t.min_cpa_bind)?i(new Error("请填写最低出价")):void 0===t.budget||Number(t.min_cpa_bind)>t.budget?i(new Error("最低出价不能高于预算")):i()}},{trigger:"blur",validator:(e,a,i)=>{V.Z.isEmpty(t.max_cpa_bind)?i(new Error("请填写最高出价")):void 0===t.budget||Number(t.max_cpa_bind)>t.budget?i(new Error("最高出价不能高于预算")):i()}}]}},[e("div",{class:"price-range"},[e("el-input",{style:"width:92px",attrs:{placeholder:"最低出价",maxlength:10,value:t.min_cpa_bind},on:{input:e=>{(0,i.set)(t,"min_cpa_bind",u.Z.IntergerAndDecimals(e))}}}),e("span",["～"]),e("el-input",{attrs:{value:t.max_cpa_bind,placeholder:"最高出价",maxlength:10},on:{input:e=>{(0,i.set)(t,"max_cpa_bind",u.Z.IntergerAndDecimals(e))}},style:"width:92px"})])]),e("div",{class:"plan-title"},["创意设置"]),e("el-form-item",{attrs:{label:"创意形式",prop:"image_mode",rules:[{required:!0,message:"请选择创意形式",trigger:"blur"}]}},[e("el-radio-group",{model:{value:t.image_mode,callback:e=>{this.$set(t,"image_mode",e)}}},[e("el-radio-button",{attrs:{label:G.dU.AWEME_LIVE_ROOM}},["直播间画面"]),e("el-radio-button",{attrs:{label:G.dU.AWEME_VIDEO}},["视频"])])]),e("el-form-item",{attrs:{label:"计划规则名称",prop:"plan_name",rules:{required:!0,message:"请填写计划名称",trigger:"blur"}}},[e("div",{class:"plan-rule-box"},[e("el-input",{attrs:{placeholder:"请输入名称前缀",maxlength:30,"show-word-limit":!0},style:"width:382px",class:"fuck-right",model:{value:t.plan_name,callback:e=>{this.$set(t,"plan_name",e)}}}),e("span",["名称后缀：+定向包名+标签包名（示例：7.12-乐町-定向包01-标签宝02）"])])])])]),e("div",{class:"footer"},[e("el-checkbox",{model:{value:this.saveTempalteCheckbox,callback:e=>{this.saveTempalteCheckbox=e}}},["存为常用模板"]),e("el-input",{attrs:{placeholder:"请输入模板名称",maxlength:20,"show-word-limit":!0,size:"small"},style:"width:220px",class:"fuck-right",model:{value:this.saveTemplateInput,callback:e=>{this.saveTemplateInput=e}}}),e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])])])}}),K=F,Z=(0,f.Z)(K,$,z,!1,null,"86c48c7e",null),H=Z.exports,X=a(23812),Q=a(82741);const J=()=>{const e=(0,i.ref)([]),t=(0,i.ref)(0),a=(0,i.ref)(0),l=(0,i.ref)(20),s=(0,i.ref)(),n=(a=1)=>{const i={page_num:a,num:l.value,name:s.value};d.Yn(i).then((a=>{e.value=a.data,t.value=a.total}))},o=e=>d.c9(e).then((()=>{n()})),r=e=>{n(e)};return n(),(0,i.reactive)({list:e,total:t,query:n,remove:o,page_num:a,page_size:l,currentChange:r,name:s})};var j;(function(e){e["CITY"]="CITY",e["COUNTY"]="COUNTY",e["NONE"]="NONE"})(j||(j={}));const ee=[{label:"不限",value:j.NONE},{label:"按省市",value:j.COUNTY},{label:"按区县",value:j.CITY}];var te;(function(e){e["CURRENT"]="CURRENT",e["HOME"]="HOME",e["TRAVEL"]="TRAVEL",e["ALL"]="ALL"})(te||(te={}));const ae=[{label:"正在该地区的用户",value:te.CURRENT},{label:"居住在该地区的用户",value:te.HOME},{label:"到该地区旅行的用户",value:te.TRAVEL},{label:"该地区内的所有用户",value:te.ALL}];var ie;(function(e){e["GENDER_FEMALE"]="GENDER_FEMALE",e["GENDER_MALE"]="GENDER_MALE",e["NONE"]="NONE"})(ie||(ie={}));const le=[{label:"不限",value:ie.NONE},{label:"男",value:ie.GENDER_MALE},{label:"女",value:ie.GENDER_FEMALE}];var se,ne;(function(e){e["NONE"]="NONE",e["AGE_BETWEEN_18_23"]="AGE_BETWEEN_18_23",e["AGE_BETWEEN_24_30"]="AGE_BETWEEN_24_30",e["AGE_BETWEEN_31_40"]="AGE_BETWEEN_31_40",e["AGE_BETWEEN_41_49"]="AGE_BETWEEN_41_49",e["AGE_ABOVE_50"]="AGE_ABOVE_50"})(se||(se={})),function(e){e["NONE"]="NONE",e["WIFI"]="WIFI",e["N2G"]="2G",e["N3G"]="3G",e["N4G"]="4G"}(ne||(ne={}));ne.NONE,ne.WIFI,ne.N2G,ne.N3G,ne.N4G;var oe,re,ce,de;(function(e){e["NONE"]="NONE",e["IOS"]="IOS",e["ANDROID"]="ANDROID"})(oe||(oe={})),function(e){e["NONE"]="NONE",e["RECOMMEND"]="RECOMMEND",e["CUSTOM"]="CUSTOM"}(re||(re={})),function(e){e["ECOMMERCE"]="E-COMMERCE",e["NEWS"]="NEWS",e["APP"]="APP"}(ce||(ce={})),function(e){e[e["day7"]=7]="day7",e[e["day15"]=15]="day15",e[e["day30"]=30]="day30",e[e["day60"]=60]="day60",e[e["day90"]=90]="day90",e[e["day180"]=180]="day180",e[e["day365"]=365]="day365"}(de||(de={}));const ue=[{label:"7天",value:de.day7},{label:"15天",value:de.day15},{label:"30天",value:de.day30},{label:"60天",value:de.day60},{label:"90天",value:de.day90},{label:"180天",value:de.day180},{label:"365天",value:de.day365}];var pe;(function(e){e["day15"]="DAYS_15",e["day30"]="DAYS_30",e["day60"]="DAYS_60"})(pe||(pe={}));const me=[{label:"15天",value:pe.day15},{label:"30天",value:pe.day30},{label:"60天",value:pe.day60}];var he,ve;(function(e){e[e["CLOSE"]=0]="CLOSE",e[e["OPEN"]=1]="OPEN"})(he||(he={})),function(e){e["AGE"]="AGE",e["REGION"]="REGION",e["GENDER"]="GENDER",e["INTEREST_ACTION"]="INTEREST_ACTION"}(ve||(ve={}));const ge=[{label:"年龄",value:ve.AGE},{label:"地域",value:ve.REGION},{label:"性别",value:ve.GENDER},{label:"行为兴趣",value:ve.INTEREST_ACTION}];var _e;(function(e){e["FOLLOWED_USER"]="FOLLOWED_USER",e["COMMENTED_USER"]="COMMENTED_USER",e["LIKED_USER"]="LIKED_USER",e["SHARED_USER"]="SHARED_USER",e["LIVE_WATCH"]="LIVE_WATCH",e["LIVE_EFFECTIVE_WATCH"]="LIVE_EFFECTIVE_WATCH",e["LIVE_COMMENT"]="LIVE_COMMENT",e["LIVE_EXCEPTIONAL"]="LIVE_EXCEPTIONAL",e["LIVE_GOODS_CLICK"]="LIVE_GOODS_CLICK",e["LIVE_GOODS_ORDER"]="LIVE_GOODS_ORDER",e["GOODS_CARTS_CLICK"]="GOODS_CARTS_CLICK",e["GOODS_CARTS_ORDER"]="GOODS_CARTS_ORDER"})(_e||(_e={}));const fe=[{label:"关注",value:_e.FOLLOWED_USER},{label:"评论",value:_e.COMMENTED_USER},{label:"点赞",value:_e.LIKED_USER},{label:"分享",value:_e.SHARED_USER},{label:"观看",value:_e.LIVE_WATCH},{label:"有效观看",value:_e.LIVE_EFFECTIVE_WATCH},{label:"直播评论",value:_e.LIVE_COMMENT},{label:"打赏",value:_e.LIVE_EXCEPTIONAL},{label:"商品点击",value:_e.LIVE_GOODS_CLICK},{label:"商品下单",value:_e.LIVE_GOODS_ORDER},{label:"购物车点击",value:_e.GOODS_CARTS_CLICK},{label:"购物车下单",value:_e.GOODS_CARTS_ORDER}],{debounce:be}=c(),ye=(0,i.defineComponent)({props:{save:{type:Function,required:!0}},setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)({}),n=(0,i.ref)(null),o=e=>{l.value=e,a.value=!0},r=()=>{n.value?.validate((t=>{t&&Promise.resolve().then((()=>e.save({...l.value,name:l.value.name2}))).then((()=>{a.value=!1})).catch((e=>{s.Message.error(e.message)}))}))},c=()=>{a.value=!1};return{visible:a,show:o,formData:l,submit:r,formRef:n,emitClose:c}},render(){const e=arguments[0];return e("el-dialog",{class:"tg-dialog-classic tg-dialog-vcenter-new copy-dialog",attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:this.visible,width:"390px",title:"复制定向包"},on:{close:()=>{this.visible=!1}}},[e("el-form",o()([{attrs:{size:"small","label-width":"96px"},class:"copy-dialog-form",ref:"formRef"},{attrs:{model:this.formData}},{attrs:{"hide-required-asterisk":!0}}]),[e("el-form-item",{attrs:{label:"复制对象"}},[e("el-input",{attrs:{value:this.formData.name,disabled:!0}})]),e("el-form-item",{attrs:{label:"名称设置",prop:"name2",rules:{required:!0,message:"请输入定向包名称",trigger:"blur"}}},[e("el-input",{attrs:{placeholder:"请输入定向包名称",maxlength:20,"show-word-limit":!0},model:{value:this.formData.name2,callback:e=>{this.$set(this.formData,"name2",e)}}})])]),e("fragments",{slot:"footer"},[e("tg-button",{on:{click:this.emitClose}},["取消"]),e("tg-button",{attrs:{type:"primary"},on:{click:this.submit}},["保存"])])])}}),Ee=(e,t)=>{const a=t.find((t=>t.value===e));return a?a.label:""};var ke,Ce,we=(0,i.defineComponent)({components:{tableTimeRangeSelector:P,dialogCopyOriginPackage:ye},props:{save:{type:Function,required:!0},data:{type:Object,required:!0},advertiser_id:{type:Number,required:!0}},setup(e,t){const a=(0,i.ref)(),l=e.data,n=(0,i.ref)(),o=J();o.query();const r=()=>{t.emit("close")},c=()=>{Promise.resolve().then((()=>{if(0===l.value.length)throw new Error("必须选择一个定向包")})).then((()=>e.save(l.value))).catch((e=>{s.Message.error(e.message)}))},d=be(c,200),u=e=>(0,Q.I)(t,{title:e}).then((e=>{if(!e)throw new Error("");return e}));return{confirm:u,onCloseBtnClick:r,onSaveBtnClick:d,selectedList:l,dialogCopyOriginPackageRef:a,oripackage:o,name:n}},render(){const e=arguments[0],{oripackage:t}=this;return e("div",{class:"dialog-content tg-page-container"},[e("div",{class:"select-template"},[e("el-input",{style:"width:260px",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入名称",maxlength:20,size:"small"},on:{change:e=>{t.name=e,t.query(1)}},model:{value:this.name,callback:e=>{this.name=e}}})]),e("div",{class:"content"},[e("div",{class:"table-box"},[e("el-table",{attrs:{height:"100%",data:t.list,stripe:!0}},[e("el-table-column",{attrs:{width:337,"render-header":()=>e("el-popover",[e("span",{class:"table-title",slot:"reference"},["定向包名",e("span",["（鼠标悬停可快速预览）"])])])},scopedSlots:{default:({row:t})=>{const a=t.content;return e("el-popover",{attrs:{placement:"bottom-start",trigger:"hover","popper-class":"package-popover-box",width:344}},[e("span",{class:"package-popover-refer",slot:"reference"},[t.name]),e("div",[e("span",["地域："]),a.district===j.NONE&&e("span",["不限"]),a.district!==j.NONE&&e("span",[a.city.map((e=>e.name)).join("、")]),e("span",["性别："]),e("span",[Ee(a.gender,le)]),e("span",["年龄："]),e("span",[a.age?.map((e=>{switch(e){case se.NONE:return"不限";case se.AGE_BETWEEN_18_23:return"18-23";case se.AGE_BETWEEN_24_30:return"24-30";case se.AGE_BETWEEN_31_40:return"31-40";case se.AGE_BETWEEN_41_49:return"41-49";case se.AGE_ABOVE_50:return"50+"}})).join("、")]),e("span",["行为兴趣："]),a.smart_interest_action===re.CUSTOM&&e("fragments",[0===a.actionList.length&&e("span",["--"]),a.actionList.length>0&&e("span",[a.actionList.map((e=>e.name)).join("、")])]),a.smart_interest_action===re.NONE&&e("span",["不限"]),a.smart_interest_action===re.RECOMMEND&&e("span",["系统推荐"]),e("span",["抖音达人："]),"CUSTOM"===a.aweme_switch&&e("fragments",[0===a.awemeList.length&&e("span",["--"]),a.awemeList.length>0&&e("span",[a.awemeList.map((e=>e.value)).join("、")])]),"NONE"===a.aweme_switch&&e("span",["不限"]),e("span",["智能放量："]),0===a.auto_extend_enabled&&e("span",["关闭"]),0!==a.auto_extend_enabled&&e("span",[a.auto_extend_targets.map((e=>e.label)).join("、")]),e("span",["网络："]),e("span",[a?.ac.map((e=>{switch(e){case ne.NONE:return"不限";case ne.N2G:return"2g";case ne.N3G:return"3g";case ne.N4G:return"4g";case ne.WIFI:return"WIFI"}})).join("、")]),e("span",["平台："]),e("span",["NONE"===a.platform?"不限":a.platform])])])}}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:{default:({row:t})=>{const a=this.selectedList.some((e=>e.id===t.id));return e("div",{class:"operate"},[e("a",{class:a?"disabled":"",on:{click:()=>{a||(this.selectedList.length<10?this.selectedList.push(t):s.Message.warning("最多不能超过10个"))}}},["添加"]),e("a",{on:{click:()=>{this.$emit("edit",t)}}},["编辑"]),e("a",{on:{click:()=>this.dialogCopyOriginPackageRef?.show(t)}},["复制"]),e("a",{on:{click:()=>{this.confirm("确定要删除吗?").then((()=>{this.oripackage.remove(t.id)}))}}},["删除"])])}}})]),e("div",{class:"pagination"},[e("el-pagination",{attrs:{className:"contract-pagination","current-page":t.page_num,"page-size":t.page_size,layout:"total, prev, pager, next",total:t.total,"current-change":"handleCurrentChange","size-change":"handlePageSizeChange"},style:"margin-bottom: 10px",on:{"current-change":t.currentChange}})])]),e("div",{class:"selectes"},[e("div",{class:"selectes-title"},[e("span",["已选"]),e("a",{on:{click:()=>{this.selectedList=[]}}},["清空"])]),e("div",{class:"selecteds-list"},[this.selectedList.map(((t,a)=>e("div",{class:"item",key:a},[e("span",[" ",t.name]),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.selectedList.splice(a,1)}}})])))])])]),e("div",{class:"footer"},[e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])]),e("dialog-copy-origin-package",{ref:"dialogCopyOriginPackageRef",attrs:{save:e=>d.yT(this.advertiser_id,e.name,e.content).then((()=>{this.oripackage.query()}))}})])}}),Ae=we,Te=(0,f.Z)(Ae,ke,Ce,!1,null,"68e08010",null),Oe=Te.exports,Se=e=>{const t=(0,i.ref)({});let a=[];const l=(0,i.ref)(e.value.city),s=(0,i.ref)([]),n=a=>{let i=a.children.length>0;e.value.district===j.COUNTY&&a.hasMunicipality&&(i=!1);let l,s=!0,n=!1,o=!1;if(u.value===a.id&&(o=!0),n=-1!==E(a.id),i){const e=k(a.children);l=e.indeterminate}n&&(l=void 0),e.value.district===j.CITY&&(s=!1);const r=l=>{(l||a.hasMunicipality&&e.value.district===j.COUNTY)&&(n?y(a,!1):(y(a.children.map((e=>t.value[e])),!1),y(a))),i&&(u.value=a.id,g.value=void 0,_.value=void 0)};return{children:i,checkbox:s,checked:n,indeterminate:l,onClick:r,isActive:o}},o=(0,i.computed)((()=>{const e=s.value.map((e=>e.id)).flat(),{checked:a,indeterminate:i}=k(e);return{checked:a,indeterminate:i,onClick(){l.value=[],a||y(e.map((e=>t.value[e])),!0)}}})),r=(0,i.ref)(""),c=(e,i)=>{if(V.Z.isEmpty(e))return i([]);const l=a.filter((a=>{const i=t.value[a];return 3!==i.level&&-1!==i.name.indexOf(e)}));i(l.map((e=>{const a=t.value[e];return{value:a.name,city:a}})))},u=(0,i.ref)(),p=(0,i.computed)((()=>u.value?t.value[u.value].hasMunicipality?[t.value[u.value]]:Object.keys(t.value).filter((e=>t.value[Number(e)].parent===u.value)).map((e=>t.value[Number(e)])):[])),m=(0,i.computed)((()=>void 0===u.value?{}:n(t.value[u.value]))),h=a=>{let i=a.children.length>0;e.value.district===j.COUNTY&&(i=!1);let l,s=!0,n=!1;if(i){const e=k(a.children);n=e.checked,l=e.indeterminate}else n=-1!==E(a.parent),n||(n=-1!==E(a.id));e.value.district===j.CITY&&(s=!1);let o=!1;g.value===a.id&&(o=!0);const r=i=>{if(e.value.district===j.COUNTY){if(n&&-1!==E(a.parent)){y(t.value[a.parent],!1);const e=t.value[a.parent],i=e.children.filter((e=>e!==a.id)).map((e=>t.value[e]));y(i,!0)}else if(n)y(a,!1);else if(!n){const e=t.value[a.parent],i=e.children.filter((e=>e!==a.id)).map((e=>t.value[e])),l=i.some((e=>-1===E(e.id)));l?y(a,!0):(y(i,!1),y(e,!0))}g.value=a.id}else g.value=a.id};return{children:i,checkbox:s,checked:n,indeterminate:l,onClick:r,isActive:o}},v=(0,i.computed)((()=>{let e=!0,t=!1;for(let a=0;a<f.value.length;a++){const i=f.value[a];if(-1!==E(i.id)?t=!0:e=!1,!1===e&&!0===t)break}return!0===e&&(t=!1),{checked:e,indeterminate:t,onClick(){f.value.forEach((t=>{y(t,!e)}))}}})),g=(0,i.ref)(),_=(0,i.ref)(),f=(0,i.computed)((()=>g.value?Object.keys(t.value).filter((e=>t.value[Number(e)].parent===g.value)).map((e=>t.value[Number(e)])):[])),b=()=>{d.tn().then((e=>{const i=[];a=Object.keys(e).map((e=>Number(e))),a.forEach((t=>{const a=e[Number(t)];1===a.level&&(i.push(e[t]),(0===a.children.length||2!==e[a.children[0]].level)&&(a.hasMunicipality=!0))})),t.value=e,s.value=i}))},y=(e,t="Toggle")=>{e instanceof Array||(e=[e]),e.forEach((e=>{const a=E(e.id);"Toggle"===t?-1!==a?l.value.splice(a,1):l.value.push(e):!0===t&&-1===a?l.value.push(e):!1===t&&-1!==a&&l.value.splice(a,1)}))},E=e=>l.value.findIndex((t=>t.id===e)),k=e=>{let t=!0,a=!1;for(let i=0;i<e.length;i++){const s=l.value.some((t=>t.id===e[i]));if(s?a=!0:t=!1,!1===t&&!0===a)break}return a&&t&&(a=!1),{indeterminate:a,checked:t}};return b(),(0,i.reactive)({cityMap:t,countyView:u,countyList:s,cityList:p,selectedList:l,addToSelected:y,checkeAppend:E,countyCheckboxStatus:n,cityMapKeys:a,countyAllCheckboxStatus:o,cityAllCheckboxStatus:m,countiesView:g,countiesList:f,cityCheckboxStatus:h,searchCountyCity:c,searchKeyword:r,countAllCheckboxStatus:v,countieSelectedView:_})};const xe=(e,t,a)=>{const l={},n=(0,i.ref)([]),o=(0,i.ref)("category"),r=(0,i.ref)("ALL"),c=(0,i.computed)((()=>{const t=r.value,a=e.value.actionList;return"ALL"===t?a:a.filter((e=>e.type===t))})),u=(0,i.ref)(""),p=(t,a,i)=>d.Xk(t,0===e.value.action_scene.length?[ce.ECOMMERCE,ce.APP,ce.NEWS]:e.value.action_scene,e.value.action_days,a,i).then((e=>e.keywords.map((e=>(e.type="KEYWORD",e))))),m=()=>{if(h(),b.value.title=void 0,b.value.list=[],e.value.actionList.length>0){const t=e.value.actionList.filter((e=>"CATEGORY"===e.type)).map((e=>e.id)),i=e.value.actionList.filter((e=>"KEYWORD"===e.type)).map((e=>e.id));d.fA({CATEGORY:t,KEYWORD:i,action_scene:0===e.value.action_scene.length?[ce.ECOMMERCE,ce.APP,ce.NEWS]:e.value.action_scene,action_days:e.value.action_days,targeting_type:a}).then((t=>{const a=e.value.actionList;t.forEach((e=>{const t=a.find((t=>t.id===e.id));t&&(t.num=e.num)})),e.value.actionList=a}))}},h=async()=>{Promise.resolve().then((()=>"ACTION"===a?d.Cb(t.value,0===e.value.action_scene.length?[ce.ECOMMERCE,ce.APP,ce.NEWS]:e.value.action_scene,e.value.action_days):d.yq(t.value))).then((e=>{v(null,e),n.value=[{list:e,click:{name:"ACTION"===a?"行为类目词":"兴趣类目词",id:null,parent:null}}]})).catch((e=>s.Message.error(e.message)))},v=(e,t)=>{t.forEach((t=>{t.parent=e,t.type="CATEGORY",l[t.id]=t,t.children&&v(t.id,t.children)}))},g=(e,t,a=!0)=>{if(-1!==t.findIndex((t=>t.id===e.id)))return!0;if(a){let a=e.parent;while(null!==a&&void 0!==a){const e=l[a];if(-1!==t.findIndex((t=>t.id===e.id)))return!0;a=e.parent}}return!1},_=(e,t)=>{const a=[];e.children&&a.push(...e.children);while(a.length>0){const e=a.shift();if(-1!==t.findIndex((t=>t.id===e.id)))return!0;e.children&&a.push(...e.children)}return!1},f=(0,i.ref)({list:[],keyword:null}),b=(0,i.ref)({title:void 0,loading:!1,list:[]}),y=(e,t)=>{p(e.id,t,a).then((t=>{f.value.keyword=e.name,f.value.list=t}))},E=(e,t)=>{b.value.loading=!0,o.value="keyword",p(e.id,t,a).then((t=>{b.value.title=e.name,b.value.loading=!1,b.value.list=t})).catch((()=>{b.value.loading=!1}))},k=(0,i.computed)((()=>{let t=0,a=0;return e.value.actionList.forEach((e=>{"CATEGORY"===e.type?t++:a++})),{Categories:t,Word:a}})),C=(t,a,l=!1)=>{let s=g(t,e.value.actionList),o=t.children&&t.children.length>0,r=!1;if(s||(r=_(t,e.value.actionList)),l&&0===a&&t.children){s=!0;for(let a=0;a<t.children?.length;a++){const i=t.children[a];if(!e.value.actionList.some((e=>e.id===i.id))){s=!1;break}}r=e.value.actionList.some((e=>"CATEGORY"===e.type)),s&&(r=!1)}return l&&(o=!1),{checked:s,indeterminate:r,children:o,onClick(o){l&&0===a?s?e.value.actionList=e.value.actionList.filter((e=>"CATEGORY"!==e.type)):t.children?.forEach((e=>{A(e)})):(!1===l&&(n.value[a].activeId=t.id,t.children?(n.value.splice(a+1,10,{list:t.children,click:t}),(0,i.nextTick)((()=>{document.getElementById("actionBox").scrollLeft=1e3}))):n.value.splice(a+1,10)),!o&&t.children||(s?w(t):(A(t),!1===l&&y(t,"CATEGORY"))))},item:t}},w=t=>{let a=t;if("KEYWORD"!==t.type)while(a){const t=e.value.actionList.findIndex((e=>e.id===a.id));if(-1!==t)return void e.value.actionList.splice(t,1);if(null===a.parent)return;const i=l[a.parent],s=i.children.filter((e=>e.id!==a.id));e.value.actionList.push(...s),a=i}else{const t=e.value.actionList.findIndex((e=>e.id===a.id));-1!==t&&e.value.actionList.splice(t,1)}},A=t=>{if(g(t,e.value.actionList,"CATEGORY"===t.type))return;if(e.value.actionList.length>=350)return;if("KEYWORD"===t.type)return void e.value.actionList.push(t);const a=[];let i;t.children&&a.push(...t.children);while(i=a.pop()){const t=e.value.actionList.findIndex((e=>e.id===i.id));-1!==t&&e.value.actionList.splice(t),i.children&&a.push(...i.children)}let s=t;while(s){if(e.value.actionList.length>=350)return;if(null===s.parent)return void e.value.actionList.push(s);const t=l[s.parent],a=t.children;let i=1;const n=e.value.actionList.filter((e=>{const t=-1!==a.findIndex((t=>t.id===e.id));return t&&i++,!t}));if(i!==a.length)return void e.value.actionList.push(s);s=t,e.value.actionList=n}},T=()=>{e.value.actionList=[]};setTimeout((()=>{t.value=0x60d0635e6d408,h()}),20);const O=async i=>Promise.resolve().then((()=>"ACTION"===a?d.Eo(t.value,0===e.value.action_scene.length?[ce.ECOMMERCE,ce.APP,ce.NEWS]:e.value.action_scene,e.value.action_days,i):d.Vk(t.value,i))).then((e=>e.list.map((e=>(e.type="KEYWORD",e.value=e.name,e)))));return(0,i.reactive)({actionList:c,categoryTab:o,categoryMap:l,filterCategory:r,queryCategories:h,categoryOpens:n,getBehaviorItemStatus:C,reset:T,actionStatistics:k,actionKeyword:f,actionWordTabList:b,queryActionKeyword:y,queryAdKeywordSuggest:E,hasInSelected:g,appendToAction:A,removeAction:w,inputSearchWord:u,PostAdActionKeyword:O,onActionOrDaysChange:m})},Le=(e,t)=>{const a={},l=(0,i.computed)((()=>{const t=-1!==e.value.aweme_fan_behaviors.findIndex((e=>"null"===e)),a=e.value.aweme_fan_behaviors.filter((e=>"null"!==e));return t?(fe.forEach((e=>{const t=a.find((t=>t===e.value));t||a.push(e.value)})),a.push("null")):a.length===fe.length&&a.push("null"),a})),n=(0,i.computed)((()=>{const t=e.value.aweme_fan_behaviors;return 0!==t.length&&(1!==t.length||t[0]!==_e.FOLLOWED_USER)})),o=(0,i.ref)("category"),r=(0,i.ref)("ALL"),c=(0,i.computed)((()=>{let t=0,a=0;return e.value.awemeList.forEach((e=>{"CATEGORY"===e.type?t++:a++})),{Categories:t,Word:a}})),u=(0,i.computed)((()=>{const t=r.value,a=e.value.awemeList;return"ALL"===t?a:a.filter((e=>e.type===t))})),p=(0,i.ref)([]),m=(e,t)=>{t.forEach((t=>{t.parent=e,t.type="CATEGORY",a[t.id]=t,t.children&&m(t.id,t.children)}))},h=e=>{e.forEach((e=>{e.children&&0===e.children.length?delete e.children:e.children&&h(e.children)}))},v=e=>e.map((e=>{const t={label:e.value,value:e.id};return e.children&&(t.children=v(e.children)),t})),g=(0,i.ref)({list:[],keyword:null}),_=(0,i.ref)({title:void 0,loading:!1,list:[]}),f=(0,i.ref)(null),b=[],y=e=>{const t=a[e];return t?t.value:""},E=t=>{Promise.resolve().then((()=>{_.value.loading=!0})).then((()=>d.dq(t,e.value.aweme_fan_behaviors))).then((e=>{_.value.loading=!1,_.value.list=e})).catch((()=>{_.value.loading=!1}))},k=e=>{Promise.resolve().then((()=>(f.value=JSON.parse(JSON.stringify(_.value)),_.value.loading=!0,_.value.title=e.author_name,d.JO(e.aweme_id)))).then((e=>{_.value.list=e,_.value.loading=!1})).catch((()=>{_.value.loading=!1}))},C=(0,i.ref)(""),w=(0,i.ref)([]),A=(0,i.ref)([]),T=e=>{A.value=[],d.V1(e).then((t=>{const i=[];return t.categories.length>0&&i.push({label:`${e}相关达人分类`,list:t.categories.map((e=>{const t=a[e.id];return t.parent?e.parent=t.parent:e.parent=null,e.type="CATEGORY",e.children&&0===e.children.length&&delete e.children,e})).slice(0,20)}),t.authors.length>0&&(A.value=t.authors,i.push({label:`${e}相关抖音达人`,list:t.authors.map((e=>(e.value=e.author_name,e.id=e.label_id,e.fans_num_str=e.total_fans_num_str,e.type="ACCOUNT",e))).slice(0,20)})),i})).then((e=>{w.value=e}))},O=(0,i.ref)([]),S=(0,i.ref)([]),x=async()=>{d.B1(t.value,e.value.aweme_fan_behaviors).then((e=>e.categories)).then((e=>{h(e),O.value=v(e),m(null,e),p.value=[{list:e,click:{value:"达人分类",id:null,parent:null}}]})).then((()=>{e.value.awemeList=e.value.awemeList.map((e=>{if("ACCOUNT"===e.type)return e;const t=a[e.id];return t||e}))})).catch((e=>s.Message.error(e.message)))},L=()=>{const t=e.value.awemeList.filter((e=>"ACCOUNT"===e.type)).map((e=>e.id));0!==t.length&&d.Db({label_ids:t,behaviors:e.value.aweme_fan_behaviors}).then((t=>{e.value.awemeList=e.value.awemeList.map((e=>{if("CATEGORY"===e.type)return e;const a=t.find((t=>t.label_id===e.id));return a&&(e.cover_num_str=a.cover_num_str),e}))})).catch((()=>{console.log("error nothing")}))},I=(e,t,i=!0)=>{if(-1!==t.findIndex((t=>t.id===e.id)))return!0;if(i){let i=e.parent;while(null!==i){const e=a[i];if(-1!==t.findIndex((t=>t.id===e.id)))return!0;i=e.parent}}return!1},N=(e,t)=>{const a=[];e.children&&a.push(...e.children);while(a.length>0){const e=a.shift();if(-1!==t.findIndex((t=>t.id===e.id)))return!0;e.children&&a.push(...e.children)}return!1},R=(t,a,l=!1)=>{let s=I(t,e.value.awemeList),n=t.children&&t.children.length>0,o=!1;if(s||(o=N(t,e.value.awemeList)),l&&0===a&&t.children){s=!0;for(let a=0;a<t.children?.length;a++){const i=t.children[a];if(!e.value.awemeList.some((e=>e.id===i.id))){s=!1;break}}o=e.value.awemeList.some((e=>"CATEGORY"===e.type)),s&&(o=!1)}return l&&(n=!1),{checked:s,indeterminate:o,children:n,onClick(n){l&&0===a?s?e.value.awemeList=e.value.awemeList.filter((e=>"CATEGORY"!==e.type)):t.children?.forEach((e=>{M(e)})):(!1===l&&(p.value[a].activeId=t.id,t.children?(p.value.splice(a+1,10,{list:t.children,click:t}),(0,i.nextTick)((()=>{document.getElementById("awemeBox").scrollLeft=1e3}))):p.value.splice(a+1,10)),!n&&t.children||(s?D(t):(M(t),!1===l&&(g.value.keyword=t))))},item:t}},D=t=>{let i=t;if("ACCOUNT"!==t.type)while(i){const t=e.value.awemeList.findIndex((e=>e.id===i.id));if(-1!==t)return void e.value.awemeList.splice(t,1);if(null===i.parent)return;const l=a[i.parent],s=l.children.filter((e=>e.id!==i.id));e.value.awemeList.push(...s),i=l}else{const t=e.value.awemeList.findIndex((e=>e.id===i.id));-1!==t&&e.value.awemeList.splice(t,1)}},M=t=>{if(I(t,e.value.awemeList,"CATEGORY"===t.type))return;if(e.value.awemeList.length>=30)return;if("ACCOUNT"===t.type)return void e.value.awemeList.push(t);const i=[];let l;t.children&&i.push(...t.children);while(l=i.pop()){const t=e.value.awemeList.findIndex((e=>e.id===l.id));-1!==t&&e.value.awemeList.splice(t),l.children&&i.push(...l.children)}let s=t;while(s){if(e.value.awemeList.length>=30)return;if(null===s.parent)return void e.value.awemeList.push(s);const t=a[s.parent],i=t.children;let l=1;const n=e.value.awemeList.filter((e=>{const t=-1!==i.findIndex((t=>t.id===e.id));return t&&l++,!t}));if(l!==i.length)return void e.value.awemeList.push(s);s=t,e.value.awemeList=n}},P=()=>{e.value.awemeList=[]};return x(),(0,i.reactive)({queryCategories:x,updateAuthorInfo:L,searchAuthors:A,aweme_fan_behaviors:l,hasShowActionDay:n,categoryTab:o,categoryOpens:p,getBehaviorItemStatus:R,reset:P,actionList:u,removeAction:D,actionStatistics:c,actionKeyword:g,accountCalendarData:O,accountCalendar:S,actionWordTabList:_,appendToAction:M,hasInSelected:I,GetAdAwemeCategoryTopAuthor:E,actionWordTabListSave:f,getAdwemeCategoryName:y,GetAdAwemeSimilarAuthorSearch:k,searchAwemeCache:b,GetAdAwemeInfoSearch:T,inputSearchWord:C,searchGroup:w})},Ie={functional:!0,render:(e,t)=>{const{props:a}=t,i=t.scopedSlots.selectArea&&t.scopedSlots.selectArea(),l=t.scopedSlots.selectedArea&&t.scopedSlots.selectedArea();return e("div",{class:"cl-region-container",style:`height:${a?.height}px`},[e("div",{class:"cl-select-area"},[i]),e("div",{class:"cl-selected-area",style:`width:${a?.selectedWidth}px`},[l])])}},Ne={functional:!0,render:(e,t)=>{const{props:a}=t,i=!1!==a?.showTitle;return e("div",{class:"cl-area"},[i&&e("div",{class:"cl-area-title"},[e("span",[a?.title]),e("span",[a?.right])]),e("div",{class:"cl-area-content"},[t.scopedSlots?.default&&t.scopedSlots.default()])])}},Re={functional:!0,render:(e,t)=>{const{props:a,listeners:i}=t;return e("div",{class:"cl-item cl-item-checkbox "+(a.isActive?"active":"")},[!1!==a.checkbox&&e("el-checkbox",{attrs:{value:a.checked,checked:a.checked,indeterminate:a.indeterminate},on:{change:()=>i.click&&i.click(!0)}}),e("span",{class:"cl-item-checkbox-name",on:{click:()=>i.click&&i.click(!1)}},[a.label]),a.children&&e("tg-icon",{attrs:{name:"ico-arrow-right"},on:{click:()=>i.click&&i.click(!1)}})])}},De={functional:!0,render:(e,t)=>{const{props:a,listeners:i}=t;return e("div",{class:"cl-item cl-item-text"},[e("span",[a?.label]),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>i.click&&i.click()}})])}},Me={functional:!0,render:(e,t)=>{const{props:a,listeners:i}=t;return e("div",{class:"cl-item cl-item-col3"},[e("span",{class:"cl-item-col3-name"},[a?.label]),e("span"),e("span",[a?.value]),e("span"),e("i",{class:"el-input__icon el-icon-search",style:""+(!0===a?.hideSearch?"display:none":""),on:{click:()=>{i.click&&i.click("search")}}}),e("span"),e("i",{class:"el-input__icon el-icon-delete",on:{click:()=>{i.click&&i.click("delete")}}})])}},Pe={functional:!0,render:(e,t)=>{const{props:a,listeners:i}=t;return e("div",{class:"cl-item cl-item-keyword"},[e("span",[a?.label]),e("span",[a?.value]),e("a",{class:a?.added?"disabled":"",on:{click:()=>{!0!==a?.added&&i.click&&i.click("add")}}},["添加"]),e("a",{on:{click:()=>{i.click&&i.click("search")}}},["查关键词"])])}},Ve={functional:!0,render:(e,t)=>{const{props:a,listeners:i}=t;return e("div",{class:"cl-item cl-item-talent"},[e("div",[e("el-checkbox",{attrs:{value:a?.checked,checked:a?.checked},on:{change:()=>{i.click&&i.click("checkbox")}}})]),e("img",{class:"cl-talent-avatar",attrs:{src:a?.info.avatar},on:{click:()=>{i.click&&i.click("checkbox")}}}),e("div",{class:"cl-talent-talent-info",on:{click:()=>{i.click&&i.click("checkbox")}}},[e("div",[a?.info.author_name,"（ID：",a?.info.aweme_id,")"]),e("div",{class:"cl-talent-talen-info-detail"},[e("span",{class:"cl-talent-label"},["粉丝："]),e("span",[a?.info.cover_num_str]),e("span",{class:"cl-talent-label"},["分类："]),e("span",[a?.info.category_name])])]),!0===a?.showLike&&e("a",{on:{click:()=>{i.click&&i.click("like")}}},["找相似"])])}},{debounce:Be}=c(),We=()=>({district:j.NONE,gender:ie.NONE,location_type:te.CURRENT,age:[se.NONE],smart_interest_action:re.NONE,aweme_switch:"NONE",aweme_fan_behaviors:[],aweme_fan_behaviors_days:pe.day15,auto_extend_enabled:he.CLOSE,auto_extend_targets:[],ac:[ne.NONE],platform:oe.NONE,action_scene:[],action_days:de.day30,actionList:[],interestList:[],awemeList:[],city:[]}),Ge=(e,t)=>({get value(){return new Proxy({},{get(a,i){return"actionList"===i?Reflect.get(e.value,t):Reflect.get(e.value,i)},set(a,i,l){return"actionList"===i?Reflect.set(e.value,t,l):Reflect.set(e.value,i,l)}})},set value(t){e.value=t}});var Ye,Ue,qe,$e,ze=(0,i.defineComponent)({components:{tableTimeRangeSelector:P},props:{save:{type:Function,required:!0},data:{type:Object,required:!0},type:{type:String,required:!0},advertiser_id:{type:Number,required:!0}},setup(e,t){const a=(0,i.ref)(null),l=(0,i.ref)(""),n=(0,i.ref)(!1),o=e.data;void 0!==o.value&&null!==o.value||(o.value=We());const r=(0,i.ref)([]),c=Se(o),d=(0,i.ref)(e.advertiser_id),u=xe(Ge(o,"actionList"),d,"ACTION"),p=xe(Ge(o,"interestList"),d,"INTEREST"),m=Le(o,d),h=(0,i.ref)(!1),v=(0,i.ref)(""),g=(0,i.ref)(!1),_=(0,i.ref)(!1),f=()=>{t.emit("close"),t.root.$nextTick(b),n.value=!1},b=()=>{o.value=We()},y=()=>{u.queryCategories(),n.value=!0},E=()=>{a.value?.validate((t=>{if(!t)return!1;Promise.resolve().then((()=>{if("customize"===e.type&&!0===h.value&&V.Z.isEmpty(v.value))throw new Error("请填写常用模板名称")})).then((()=>e.save(o.value,!0===h.value?v.value:void 0))).then((()=>{n.value=!1})).catch((e=>{s.Message.error(e.message)}))}))},k=(0,i.ref)(1),C=Be(E,200),w=e=>(0,Q.I)(t,{title:e}).then((e=>{if(!e)throw new Error("");return e}));return{confirm:w,show:y,title:l,visible:n,formData:o,months:r,onCloseBtnClick:f,onSaveBtnClick:C,formRef:a,checkbox:k,district:c,behavior:u,awemeBehavior:m,interest:p,saveTemplateChecked:h,saveTemplateInput:v,actionFold:g,interestFold:_}},methods:{renderActionOrInterest(e){const t=this.$createElement,a="action"===e?this.behavior:this.interest,i="action"===e?this.formData.actionList:this.formData.interestList;return t("fragments",[t("div",{class:"tg-mgb--12"},[t("el-autocomplete",{ref:`${e}Ref`,attrs:{placeholder:"action"===e?"请输入行为类目词和关键词":"请输入兴趣类目词和关键词","suffix-icon":"el-icon-search",clearable:!0,"fetch-suggestions":(e,t)=>{if(""===e)return t([]);a.PostAdActionKeyword(e).then((a=>{if(0===a.length)return[];t([{name:e},...a])}))}},style:"width:382px",scopedSlots:{default:({item:i})=>void 0===i.num?t("div",{class:"custom-autocomplete-item item-title"},[t("span",['"',i.name,'"相关行为关键词'])]):t("div",{class:"custom-autocomplete-item"},[t("div",{class:"info"},[t("span",[i.name]),t("span",["覆盖人数：",i.num])]),t("span",{class:"add"},["添加"]),t("span",{class:"find",on:{click:t=>{t.stopPropagation();try{const t=this.$refs[`${e}Ref`];a.queryAdKeywordSuggest(i,i.type),t.close()}catch(l){console.log(l)}}}},["查关键字"])])},on:{select:e=>{console.log("select"),void 0===e.num?a.inputSearchWord="":a.appendToAction(e)}},model:{value:a.inputSearchWord,callback:e=>{this.$set(a,"inputSearchWord",e)}}})]),t(Ie,{attrs:{selectedWidth:294,height:420}},[t("div",{class:"select-area-extend",slot:"selectArea"},[t("div",{class:"word-classification"},[t("span",{class:"category"===a.categoryTab?"active":"",on:{click:()=>{a.categoryTab="category"}}},["类目词"]),t("span",{class:"keyword"===a.categoryTab?"active":"",on:{click:()=>{a.categoryTab="keyword"}}},["关键词"])]),"category"===a.categoryTab&&t("fragments",[t("div",{class:"select-area-extend-box",attrs:{id:"actionBox"}},[a.categoryOpens.map(((e,i)=>{const l=e.click.name,s=a.categoryOpens[i];let n;n=null!==s.click.id?s.click:{id:null,parent:null,children:e.list};const o=a.getBehaviorItemStatus(n,i,!0);return t(Ne,{attrs:{title:l}},[t(Re,{attrs:{label:"全选",checked:o.checked,children:o.children,indeterminate:o.indeterminate},on:{click:o.onClick}}),e.list.map((l=>{const s=a.getBehaviorItemStatus(l,i);return t(Re,{attrs:{label:l.name,children:s.children,indeterminate:s.indeterminate,checked:s.checked,isActive:l.id===e.activeId},on:{click:s.onClick}})}))])}))]),t("div",{class:"selector-footer footer-more"},[null===a.actionKeyword.keyword&&t("fragments",[t("span",["关键词推荐："]),t("span"),t("div",["选择类目词后, 根据相关性推荐关键词"])]),null!==a.actionKeyword.keyword&&t("fragments",[t("span",[a.actionKeyword.keyword,"相关词："]),t("a",{on:{click:()=>{a.categoryTab="keyword",a.actionWordTabList.title=a.actionKeyword.keyword,a.actionWordTabList.list=a.actionKeyword.list}}},["更多"]),t("div",{class:"list"},[a.actionKeyword.list.map((e=>{const l=a.hasInSelected(e,i,!1);return t("span",{key:e.id,class:l?"disabed":"",on:{click:()=>{l||a.appendToAction(e)}}},[t("tg-icon",{attrs:{name:"ico-btn-add"}}),e.name])}))])])])]),"keyword"===a.categoryTab&&t("fragments",[t("div",{class:"select-area-extend-box",attrs:{id:"actionBox"},directives:[{name:"loading",value:a.actionWordTabList.loading}]},[t(Ne,{attrs:{title:a.actionWordTabList.title,showTitle:void 0!==a.actionWordTabList.title}},[a.actionWordTabList.list.map((e=>t(Pe,{attrs:{label:e.name,value:e.num,added:a.hasInSelected(e,i,!1)},on:{click:t=>{"search"===t?a.queryAdKeywordSuggest(e,e.type):a.appendToAction(e)}}}))),0===a.actionWordTabList.list.length&&t("div",{class:"empty-selected"},[t("empty-common",{attrs:{"detial-text":"还没有选择项"}})])])]),void 0!==a.actionWordTabList.title&&t("div",{class:"selector-footer",on:{click:()=>{a.actionWordTabList.list.forEach((e=>a.appendToAction(e)))}}},[t("a",["添加全部",a.actionWordTabList.title,"相关关键词"])])])]),t("div",{class:"selected-area-extend",slot:"selectedArea"},[t("div",{class:"added-behavior"},[t("div",{class:"behavior-count"},[t("div",{class:"added"},[t("span",["已添加行为 ",t("b",[i.length]),"/350"]),t("a",{on:{click:a.reset}},["清空"])]),t("div",{class:"count"},[t("span",{class:"label"},["类目词：",t("b",[a.actionStatistics.Categories])]),t("span",{class:"label"},["关键词：",t("b",[a.actionStatistics.Word])])])]),t("div",{class:"filter-behavior"},[t("el-select",{style:"width:94px",attrs:{size:"small"},model:{value:a.filterCategory,callback:e=>{this.$set(a,"filterCategory",e)}}},[t("el-option",{attrs:{label:"全部",value:"ALL"}}),t("el-option",{attrs:{label:"类目词",value:"CATEGORY"}}),t("el-option",{attrs:{label:"关键词",value:"KEYWORD"}})]),t("span",["覆盖人数"])])]),t(Ne,{attrs:{showTitle:!1}},[a.actionList.map((e=>t(Me,{attrs:{label:e.name,value:e.num},key:e.id,on:{click:t=>{"delete"===t?a.removeAction(e):a.queryAdKeywordSuggest(e,e.type)}}}))),0===a.actionList.length&&t("div",{class:"empty-selected"},[t("empty-common",{attrs:{"detial-text":"还没有选择项"}})])])])])])},renderAwemeCategory(){const e=this.$createElement,t=this.awemeBehavior,a=this.formData;return e("el-form-item",{attrs:{prop:"awemeList",rules:[{trigger:"blur",validator:(e,t,i)=>{0===a.awemeList.length?i(new Error("必须选择一项")):i()}}]}},[e("div",{class:"region-selector behavior-selector"},[e("div",{class:"tg-mgb--12 weight-line"},[e("span",["定向与以下达人产生"]),e("el-select",{style:"width:160px;margin-right:6px",attrs:{value:t.aweme_fan_behaviors,placeholder:"请选择",multiple:!0,"collapse-tags":!0},on:{input:e=>{const i=t.aweme_fan_behaviors.some((e=>"null"===e)),l=e.some((e=>"null"===e));i&&!l?a.aweme_fan_behaviors=[]:!i&&l?(fe.forEach((t=>{e.some((e=>e===t.value))||e.push(t.value)})),a.aweme_fan_behaviors=e):a.aweme_fan_behaviors=i?e.filter((e=>"null"!==e)):e},change:()=>{this.awemeBehavior.queryCategories(),this.awemeBehavior.updateAuthorInfo()}}},[e("el-option",{attrs:{label:"全选",value:"null"}}),fe.map((t=>e("el-option",{attrs:{label:t.label,value:t.value},key:t.value})))]),e("span",["互动的用户"]),t.hasShowActionDay&&e("fragments",[e("span",["，时间范围取"]),e("el-select",{style:"width:102px;margin-right:6px",model:{value:a.aweme_fan_behaviors_days,callback:e=>{this.$set(a,"aweme_fan_behaviors_days",e)}}},[me.map((t=>e("el-option",{attrs:{label:t.label,value:t.value}})))])])]),e("div",{class:"tg-mgb--12"},[e("el-select",{attrs:{value:t.inputSearchWord,placeholder:"支持搜索抖音达人、昵称或达人所在分类","popper-class":"aweme-search-select",filterable:!0,remote:!0,clearable:!0,"remote-method":e=>{t.GetAdAwemeInfoSearch(e)}},style:"width:382px",class:"aweme-search-select-input",on:{input:e=>{null!==e&&(t.inputSearchWord=e)},change:e=>{null!==e?t.appendToAction(e):(t.actionWordTabList.title="",t.actionWordTabList.list=t.searchAuthors,t.categoryTab="keyword")}}},[t.searchGroup.map((t=>e("el-option-group",{key:t.label,attrs:{label:t.label}},[t.list.map((t=>e("el-option",{attrs:{label:t.value,value:t},key:t.id},[e("div",{class:"aweme-search-result"},[e("div",[t.value]),e("div",{class:"des"},["覆盖",t.cover_num_str,"粉丝"])])])))]))),t.searchGroup.length>0&&t.searchAuthors.length>20&&e("el-option",{attrs:{value:null}},[e("div",{class:"more-select"},["查看更多"])])])]),e(Ie,{attrs:{selectedWidth:264,height:420}},[e("div",{class:"select-area-extend",slot:"selectArea"},[e("div",{class:"word-classification"},[e("span",{class:"category"===t.categoryTab?"active":"",on:{click:()=>{t.categoryTab="category"}}},["添加达人分类"]),e("span",{class:"keyword"===t.categoryTab?"active":"",on:{click:()=>{t.categoryTab="keyword"}}},["添加抖音达人"])]),"keyword"===t.categoryTab&&e("fragments",[e("div",{class:"douyin-classification"},[e("el-cascader",{attrs:{placeholder:"全部抖音达人分类",size:"small",options:t.accountCalendarData},style:"width:100% ",on:{change:e=>{const a=e[e.length-1],i=t.getAdwemeCategoryName(a);t.actionWordTabList.title=i,t.actionWordTabListSave=null,t.GetAdAwemeCategoryTopAuthor(a)}},model:{value:t.accountCalendar,callback:e=>{this.$set(t,"accountCalendar",e)}}})])]),"category"===t.categoryTab&&e("fragments",[e("div",{class:"select-area-extend-box",attrs:{id:"awemeBox"}},[t.categoryOpens.map(((a,i)=>{const l=a.click.value,s=t.categoryOpens[i];let n;n=null!==s.click.id?s.click:{id:null,parent:null,children:a.list};const o=t.getBehaviorItemStatus(n,i,!0);return e(Ne,{attrs:{title:l}},[e(Re,{attrs:{label:"全选",checked:o.checked,children:o.children,indeterminate:o.indeterminate},on:{click:o.onClick}}),a.list.map((l=>{const s=t.getBehaviorItemStatus(l,i);return e("div",{class:"selector-item-talent-classification "+(l.id===a.activeId?"active":"")},[e("el-checkbox",{attrs:{value:s.checked,checked:s.checked,indeterminate:s.indeterminate},on:{change:()=>s.onClick(!0)}}),e("span",{class:"cl-item-checkbox-name",on:{click:()=>s.onClick(!1)}},[l.value]),s.children&&e("tg-icon",{attrs:{name:"ico-arrow-right"}}),e("div",{class:"fans",on:{click:()=>s.onClick(!1)}},["粉丝数",l.cover_num_str])])}))])}))]),e("div",{class:"selector-footer footer-more"},[null!==t.actionKeyword.keyword&&e("fragments",[e("a",{on:{click:()=>{const e=t.actionKeyword.keyword;t.actionWordTabList.title=e.value,t.categoryTab="keyword",t.actionWordTabListSave=null,t.GetAdAwemeCategoryTopAuthor(e.id)}}},["查看",t.actionKeyword.keyword.value,"推荐抖音达人"])])])]),"keyword"===t.categoryTab&&e("fragments",[t.actionWordTabList.title&&e("fragments",[null===t.actionWordTabListSave&&e("div",{class:"douyin-similar"},[e("span",[t.actionWordTabList.title,"类抖音达人推荐："])]),null!==t.actionWordTabListSave&&e("div",{class:"douyin-similar"},[e("a",{on:{click:()=>{t.actionWordTabList=t.actionWordTabListSave,t.actionWordTabListSave=null}}},["返回"]),e("span",["|"]),e("span",['"',t.actionWordTabList.title,'"的相似抖音达人'])])]),e("div",{class:"select-area-extend-box",attrs:{id:"actionBox"},directives:[{name:"loading",value:t.actionWordTabList.loading}]},[e(Ne,{attrs:{showTitle:!1}},[t.actionWordTabList.list.map((i=>{const l=t.hasInSelected(i,a.awemeList,!1);return e(Ve,{attrs:{info:i,checked:l,showLike:null===t.actionWordTabListSave},on:{click:e=>{"checkbox"===e?l?t.removeAction(i):t.appendToAction(i):"like"===e&&t.GetAdAwemeSimilarAuthorSearch(i)}}})})),0===t.actionWordTabList.list.length&&e("div",{class:"empty-selected"},[e("empty-common",{attrs:{"detial-text":"可筛选分类查看推荐抖音达人或直接搜索抖音达人"}})])])])])]),e("div",{class:"selected-area-extend",slot:"selectedArea"},[e("div",{class:"added-behavior"},[e("div",{class:"behavior-count"},[e("div",{class:"added"},[e("span",["已添加 ",e("b",[a.awemeList.length]),"/30"]),e("a",{on:{click:t.reset}},["清空"])]),e("div",{class:"count"},[e("span",{class:"label"},["达人分类：",e("b",[t.actionStatistics.Categories])]),e("span",{class:"label"},["抖音号：",e("b",[t.actionStatistics.Word])])])]),e("div",{class:"filter-behavior"},[e("span",["内容"]),e("span",["预估覆盖人数"])])]),e(Ne,{attrs:{showTitle:!1}},[t.actionList.map((a=>e(Me,{attrs:{hideSearch:!0,label:a.value,value:a.cover_num_str},on:{click:e=>{"delete"===e&&t.removeAction(a)}}}))),0===t.actionList.length&&e("div",{class:"empty-selected"},[e("empty-common",{attrs:{"detial-text":"还没有选择项"}})])])])])])])}},render(){const e=arguments[0],{formData:t,district:a,behavior:i}=this;return e("div",{class:"dialog-content tg-dialog-classic"},[e("el-form",o()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{size:"small","label-position":"left","label-width":"134px","hide-required-asterisk":!0}}]),[e("div",{class:"content"},[e("div",{class:"plan-title"},["定向人群"]),"quick"===this.type&&e("el-form-item",{attrs:{label:"定向包名称",prop:"name",rules:{required:!0,message:"请填写定向包名称",trigger:"blur"}}},[e("div",{class:"plan-rule-box"},[e("el-input",{attrs:{placeholder:"请输入名称前缀",maxlength:20,"show-word-limit":!0},style:"width:340px",model:{value:t.name,callback:e=>{this.$set(t,"name",e)}}})])]),e("el-form-item",{attrs:{label:"地域",prop:"district"}},[e("div",{class:"custom-radio-group"},[ee.map(((i,l)=>e("div",{class:"custom-radio-button "+(t.district===i.value?"active":""),on:{click:()=>{a.countyView=void 0,a.countiesView=void 0,a.selectedList.length>0?this.confirm("确认要切换吗？切换将清空已填写的信息").then((()=>{a.selectedList=[],t.district=i.value})):t.district=i.value}}},[i.label])))])]),(t.district===j.COUNTY||t.district===j.CITY)&&e("el-form-item",{attrs:{prop:"status",rules:[{trigger:"blur",validator:(e,t,i)=>{0===a.selectedList.length?i(new Error("必须选择一项")):i()}}]}},[e("div",{class:"region-selector"},[t.district===j.COUNTY&&e("div",{class:"tg-mgb--12"},[e("el-autocomplete",{attrs:{placeholder:"请输入省市名称","suffix-icon":"el-icon-search","fetch-suggestions":a.searchCountyCity},style:"width:382px",on:{select:e=>{a.searchKeyword="";const t=e.city;let i;i=1===t.level?a.countyCheckboxStatus(t):a.cityCheckboxStatus(t),i.checked||i.onClick(!0)}},model:{value:a.searchKeyword,callback:e=>{this.$set(a,"searchKeyword",e)}}})]),e(Ie,{attrs:{selectedWidth:157,height:324}},[e("fragments",{slot:"selectArea"},[e(Ne,{attrs:{title:"省份"}},[a.countyList.length>0&&t.district===j.COUNTY&&e(Re,{attrs:{label:"全选",checked:a.countyAllCheckboxStatus.checked,indeterminate:a.countyAllCheckboxStatus.indeterminate},on:{click:a.countyAllCheckboxStatus.onClick}}),a.countyList.map(((t,i)=>{const l=a.countyCheckboxStatus(t);return e(Re,{attrs:{label:t.name,checked:l.checked,checkbox:l.checkbox,children:l.children,indeterminate:l.indeterminate,isActive:l.isActive},on:{click:l.onClick}})}))]),e(Ne,{attrs:{title:"城市"}},[t.district===j.COUNTY&&a.cityList.length>0&&e(Re,{attrs:{label:"全选",indeterminate:a.cityAllCheckboxStatus.indeterminate,checked:a.cityAllCheckboxStatus.checked},on:{click:a.cityAllCheckboxStatus.onClick}}),a.cityList.map(((t,i)=>{const l=a.cityCheckboxStatus(t);return e(Re,{attrs:{label:t.name,value:t.id,checked:l.checked,checkbox:l.checkbox,indeterminate:l.indeterminate,children:l.children,isActive:l.isActive},on:{click:l.onClick}})}))]),t.district===j.CITY&&e(Ne,{attrs:{title:"区县"}},[a.countiesList.length>0&&e(Re,{attrs:{label:"全选",checked:a.countAllCheckboxStatus.checked,indeterminate:a.countAllCheckboxStatus.indeterminate},on:{click:a.countAllCheckboxStatus.onClick}}),a.countiesList.map((t=>{let i=!1;return t.id===a.countieSelectedView&&(i=!0),e(Re,{key:t.id,attrs:{label:t.name,isActive:i,checked:-1!==a.checkeAppend(t.id)},on:{click:()=>{a.addToSelected(t),a.countieSelectedView=t.id}}})}))])]),e("fragments",{slot:"selectedArea"},[e(Ne,{attrs:{title:"已选",right:e("a",{on:{click:()=>{a.selectedList=t.city=[]}}},["清空"])}},[a.selectedList.map((t=>e(De,{attrs:{label:t.name},key:t.id,on:{click:()=>{a.addToSelected(t)}}}))),0===a.selectedList.length&&e("div",{class:"empty-selected"},[e("empty-common",{attrs:{"detial-text":"还没有选择项"}})])])])]),e("div",{class:"radio-box"},[ae.map((a=>e("el-radio",{attrs:{name:"location_type",label:a.value,value:t.location_type},on:{change:()=>{t.location_type=a.value}}},[a.label])))])])]),e("el-form-item",{attrs:{label:"性别",prop:"gender"}},[e("el-radio-group",{model:{value:t.gender,callback:e=>{this.$set(t,"gender",e)}}},[le.map(((t,a)=>e("el-radio-button",{attrs:{label:t.value}},[t.label])))])]),e("el-form-item",{attrs:{label:"年龄（可多选）",prop:"age",rules:[{trigger:"blur",validator:(e,t,a)=>{0===t.length?a(new Error("必须选择一项")):a()}}]}},[e("el-checkbox-group",{attrs:{value:t.age},on:{input:e=>{const a=e.some((e=>"NONE"===e)),i=t.age.some((e=>"NONE"===e));t.age=i&&a?e.filter((e=>"NONE"!==e)):!i&&a?[se.NONE]:e}}},[e("el-checkbox",{attrs:{label:se.NONE,border:!0},class:"nocheck"},["不限"]),e("el-checkbox",{attrs:{label:se.AGE_BETWEEN_18_23,border:!0}},["18-23"]),e("el-checkbox",{attrs:{label:se.AGE_BETWEEN_24_30,border:!0}},["24-30"]),e("el-checkbox",{attrs:{label:se.AGE_BETWEEN_31_40,border:!0}},["31-40"]),e("el-checkbox",{attrs:{label:se.AGE_BETWEEN_41_49,border:!0}},["41-50"]),e("el-checkbox",{attrs:{label:se.AGE_ABOVE_50,border:!0}},["50+"])])]),e("el-form-item",{attrs:{label:"行为兴趣",prop:"smart_interest_action",rules:{required:!0,message:"请选择广告组",trigger:"blur"}}},[e("el-radio-group",{model:{value:t.smart_interest_action,callback:e=>{this.$set(t,"smart_interest_action",e)}}},[e("el-radio-button",{attrs:{label:re.NONE}},["不限"]),e("el-radio-button",{attrs:{label:re.RECOMMEND}},["系统推荐"]),e("el-radio-button",{attrs:{label:re.CUSTOM}},["自定义"])])]),t.smart_interest_action===re.CUSTOM&&e("el-form-item",{attrs:{prop:"status"}},[e("div",{class:"region-selector behavior-selector"},[e("div",{class:"tg-mgb--12 weight-line fold "+(this.actionFold?"fold-up":"")},[e("span",["行为"]),e("el-tooltip",{attrs:{className:"item",effect:"light",content:" 行为将根据用户近期在电商、资讯、App推广场景中的互动行为（阅读、搜索、观看等）匹配用户 ",placement:"top-start"}},[e("tg-icon",{attrs:{name:"ico-question"},style:"color:#C4CBD2"})]),e("span"),e("tg-icon",{attrs:{name:"ico-arrow-down"},class:"arrow",on:{click:()=>this.actionFold=!this.actionFold}})]),!this.actionFold&&e("fragments",[e("div",{class:"tg-mgb--12 weight-line"},[e("span",["在"]),e("el-select",{style:"width:200px;margin-right:6px",attrs:{placeholder:"所有行为推荐",multiple:!0,"collapse-tags":!0},on:{change:i.onActionOrDaysChange},model:{value:t.action_scene,callback:e=>{this.$set(t,"action_scene",e)}}},[e("el-option",{attrs:{label:"电商互动行为",value:ce.ECOMMERCE}}),e("el-option",{attrs:{label:"资讯互动行为",value:ce.NEWS}}),e("el-option",{attrs:{label:"APP推广互动行为",value:ce.APP}})]),e("span",["中，选择用户"]),e("el-select",{style:"width:84px;margin-right:6px",on:{change:i.onActionOrDaysChange},model:{value:t.action_days,callback:e=>{this.$set(t,"action_days",e)}}},[ue.map((t=>e("el-option",{attrs:{label:t.label,value:t.value},key:t.value})))]),e("span",["内发生的行为："])]),this.renderActionOrInterest("action")]),e("div",{class:"tg-mgb--12 tg-mgt--24 weight-line fold "+(this.interestFold?"fold-up":"")},[e("span",["兴趣"]),e("el-tooltip",{class:"item",attrs:{effect:"light",content:"兴趣将根据用户可能存在的兴趣寻找潜在的转化人群",placement:"top-start"}},[e("tg-icon",{attrs:{name:"ico-question"},style:"color:#C4CBD2"})]),e("span"),e("tg-icon",{attrs:{name:"ico-arrow-down"},class:"arrow",on:{click:()=>this.interestFold=!this.interestFold}})]),!this.interestFold&&this.renderActionOrInterest("interest")])]),e("el-form-item",{attrs:{label:"抖音达人",prop:"aweme_switch"}},[e("el-radio-group",{model:{value:t.aweme_switch,callback:e=>{this.$set(t,"aweme_switch",e)}}},[e("el-radio-button",{attrs:{label:"NONE"}},["不限"]),e("el-radio-button",{attrs:{label:"CUSTOM"}},["自定义"])])]),"CUSTOM"===t.aweme_switch&&this.renderAwemeCategory(),e("el-form-item",{attrs:{label:"智能放量",prop:"auto_extend_enabled"}},[e("el-radio-group",{model:{value:t.auto_extend_enabled,callback:e=>{this.$set(t,"auto_extend_enabled",e)}}},[e("el-radio-button",{attrs:{label:he.CLOSE}},["不启用"]),e("el-radio-button",{attrs:{label:he.OPEN}},["启用"])])]),t.auto_extend_enabled===he.OPEN&&e("el-form-item",{attrs:{prop:"auto_extend_targets",rules:[{trigger:"blur",validator:(e,a,i)=>{0===t.auto_extend_targets.length?i(new Error("必须选择一项")):i()}}]}},[e(Ie,{attrs:{selectedWidth:200,height:210}},[e(Ne,{attrs:{title:"可放开定向"},slot:"selectArea"},[ge.map((a=>{const i=-1!==t.auto_extend_targets.findIndex((e=>e.value===a.value));return e(Re,{key:a.value,attrs:{label:a.label,checked:i},on:{click:()=>{if(i){const e=t.auto_extend_targets.findIndex((e=>e.value===a.value));t.auto_extend_targets.splice(e,1)}else t.auto_extend_targets.push(a)}}})}))]),e(Ne,{attrs:{title:"已选"},slot:"selectedArea"},[t.auto_extend_targets.map((a=>e(De,{attrs:{label:a.label},key:a.value,on:{click:()=>{const e=t.auto_extend_targets.findIndex((e=>e.value===a.value));t.auto_extend_targets.splice(e,1)}}}))),0===t.auto_extend_targets.length&&e("div",{class:"empty-selected"},[e("empty-common",{attrs:{"detial-text":"还没有选择项"}})])])])]),e("el-form-item",{attrs:{label:"网络（可多选）",prop:"ac",rules:[{trigger:"blur",validator:(e,t,a)=>{0===t.length?a(new Error("必须选择一项")):a()}}]}},[e("el-checkbox-group",{attrs:{value:t.ac},on:{input:e=>{const a=e.some((e=>"NONE"===e)),i=t.ac.some((e=>"NONE"===e));t.ac=i&&a?e.filter((e=>"NONE"!==e)):!i&&a?[ne.NONE]:e}}},[e("el-checkbox",{attrs:{label:ne.NONE,border:!0},class:"nocheck"},["不限"]),e("el-checkbox",{attrs:{label:ne.WIFI,border:!0}},["WIFI"]),e("el-checkbox",{attrs:{label:ne.N2G,border:!0}},["2G"]),e("el-checkbox",{attrs:{label:ne.N3G,border:!0}},["3G"]),e("el-checkbox",{attrs:{label:ne.N4G,border:!0}},["4G"])])]),e("el-form-item",{attrs:{label:"平台",prop:"platform"}},[e("el-radio-group",{model:{value:t.platform,callback:e=>{this.$set(t,"platform",e)}}},[e("el-radio-button",{attrs:{label:oe.NONE}},["不限"]),e("el-radio-button",{attrs:{label:oe.IOS}},["IOS"]),e("el-radio-button",{attrs:{label:oe.ANDROID}},["Android"])])])])]),e("div",{class:"footer"},["customize"===this.type&&e("fragments",[e("el-checkbox",{attrs:{value:this.saveTemplateChecked,checked:this.saveTemplateChecked},on:{change:()=>{this.saveTemplateChecked=!this.saveTemplateChecked}}},["存为常用模板"]),e("el-input",{attrs:{placeholder:"请输入模板名称",maxlength:20,"show-word-limit":!0,size:"small"},style:"width:220px",model:{value:this.saveTemplateInput,callback:e=>{this.saveTemplateInput=e}}})]),e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])])}}),Fe=ze,Ke=(0,f.Z)(Fe,Ye,Ue,!1,null,"06b8f838",null),Ze=Ke.exports,He=(0,i.defineComponent)({components:{quick:Oe,customize:Ze},props:{},setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)(0),s=(0,i.ref)(),n=(0,i.ref)([]),o=(0,i.ref)(),r=(0,i.ref)(),c=(0,i.computed)((()=>{const e=d.checkedTab.value;return"customize"===e?s:void 0!==o.value?r:n})),d=(0,X.pK)([{label:"快速设置",value:"quick"},{label:"自定义设置",value:"customize"}],"quick"),u=()=>{t.emit("close"),a.value=!1},p=(e,t)=>{l.value=e,1===t.length&&void 0===t[0].id?(s.value=t[0].content,d.checkedTab.value="customize"):(n.value=t,d.checkedTab.value="quick"),(0,i.nextTick)((()=>{a.value=!0}))};return{show:p,advertiser_id:l,onCloseBtnClick:u,...d,visible:a,propsData:c,quickConfig:n,customizeConfig:s,editId:o,editConfig:r}},render(){const e=arguments[0];let t=this.visible,a=!1;return"quick"===this.checkedTab&&void 0!==this.editId&&(t=!1),this.visible&&"quick"===this.checkedTab&&void 0!==this.editId&&(a=!0),e("el-drawer",{attrs:{size:870,height:"100vh",title:"定向包",direction:"rtl",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("div",{class:"drawer"},[e("tg-tabs",{class:"tag-line",attrs:{tabs:this.tabs},model:{value:this.checkedTab,callback:e=>{this.checkedTab=e}}}),t&&e(this.checkedTab,{attrs:{type:this.checkedTab,data:this.propsData,advertiser_id:this.advertiser_id,save:(e,t)=>{if("customize"===this.checkedTab){if(void 0!==t)return d.yT(this.advertiser_id,t,e).then((e=>{this.quickConfig.length<10&&this.quickConfig.push(e),this.customizeConfig=void 0,this.checkedTab="quick"}));this.$emit("change",[{name:"临时包",content:e}]),this.onCloseBtnClick()}else this.$emit("change",e),this.onCloseBtnClick()}},on:{edit:e=>{e=JSON.parse(JSON.stringify(e)),e.content.name=e.name,this.editId=e.id,this.editConfig=e.content},close:()=>{this.onCloseBtnClick()}}}),a&&e(Ze,{attrs:{data:this.propsData,advertiser_id:this.advertiser_id,type:this.checkedTab,save:e=>d.yT(this.advertiser_id,e.name,e,this.editId).then((()=>{this.editId=void 0}))},on:{close:()=>{this.editId=void 0}}})])])}}),Xe=He,Qe=(0,f.Z)(Xe,qe,$e,!1,null,"4d8f8261",null),Je=Qe.exports;const je=()=>{const e=(0,i.ref)({creative_list:[]});return(0,i.reactive)({formData:e})},et=()=>{const e=(0,i.ref)([]),t=(0,i.ref)({cursor:null,has_more:1,count:0}),a=(0,i.ref)(!1);let l={};const s=e=>Promise.resolve().then((()=>{a.value=!0})).then((()=>d.ew(e))).then((t=>(t.video_list=t.video_list.filter((e=>""!==e.url)).map((e=>(e.type=1,e.image_mode=e.width>e.height?"VIDEO_LARGE":"VIDEO_VERTICAL",e))),a.value=!1,l=e,t))).catch((e=>{throw a.value=!1,e})),n=a=>s(a).then((a=>{t.value=a.page_info,e.value=a.video_list})),o=()=>{console.log("触发加载"),l.cursor=t.value.cursor,s(l).then((a=>{t.value=a.page_info,e.value.push(...a.video_list)}))};return(0,i.reactive)({list:e,query:n,page_info:t,loading:a,loadNext:o})};var tt;(function(e){e["CUSTOM_CREATIVE"]="CUSTOM_CREATIVE",e["PROGRAMMATIC_CREATIVE"]="PROGRAMMATIC_CREATIVE"})(tt||(tt={}));const at=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return`${t}:${a}`};let it;const lt=e=>{clearTimeout(it),it=setTimeout((()=>{!0!==e.isPlay&&((0,i.set)(e,"isPlay",!0),(0,i.set)(e,"loading",!0))}),500)};var st,nt,ot=(0,i.defineComponent)({props:{operation:{type:Object,required:!0},data:{type:Object,required:!0}},setup(e,t){const a=(0,i.ref)();e.operation.queryVideos();const l=e=>(0,Q.I)(t,{title:e}).then((e=>{if(!e)throw new Error("");return e}));return{confirm:l,name:a}},render(){const e=arguments[0],{awemeVideo:t}=this.operation;return e("div",{class:"dialog-content tg-page-container"},[e("div",{class:"select-template"},[e("el-input",o()([{style:"width:576px",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入名称",maxlength:20,size:"small"}},{nativeOn:{keyup:e=>{13===e.keyCode&&this.operation.queryVideos(this.name)}}},{model:{value:this.name,callback:e=>{this.name=e}}}]),[e("span",{slot:"append",on:{click:()=>{this.operation.queryVideos(this.name)}}},["搜索"])])]),e("div",{class:"content",on:{scroll:e=>{if(1!==t.page_info.has_more)return;if(t.loading)return;const a=e.target,i=a.scrollHeight-a.scrollTop-a.clientHeight;i<=200&&t.loadNext()}}},[0===t.list.length?e("span",{style:"color: #a4b2c2;font-size: 16px"},["暂无数据"]):t.list.map((t=>{const l=this.data.value.some((e=>e.video_id===t.video_id));return e("div",{class:"video"},[e("div",{class:"view-box",on:{click:()=>{this.operation.addSelect(t,"toggle")},mouseenter:()=>{lt(t)},mouseleave:()=>{(0,i.set)(t,"isPlay",!1),clearTimeout(it)}}},[!t.isPlay&&e("div",{class:"video-preview",style:`background-image:url(${t.video_cover_url})`},[e("img",{attrs:{src:a(69820),alt:""}})]),t.isPlay&&e("fragments",[e("video",{class:"",attrs:{autoplay:"",playsinline:"true","x5-playsinline":"true","webkit-playsinline":"true",mediatype:"video",loop:!0,muted:!0,src:t.url},on:{play:()=>{(0,i.set)(t,"loading",!1)}}}),t.loading&&e("div",{class:"video-loading"},[e("tg-icon",{attrs:{name:"ico-loading"}})])])]),l&&e("div",{class:"selected"},[e("tg-icon",{attrs:{name:"ico-right"}})]),!t.isPlay&&e("div",{class:"time"},[at(t.duration)]),!t.isPlay&&1!==t.is_recommend&&e("div",{class:"warning"},[e("tg-icon",{attrs:{name:"ico-warn"}}),"不推荐使用该视频"]),e("div",{class:"title"},[t.title])])})),1===t.page_info.has_more&&e("div",{class:"video video-loading-box",directives:[{name:"loading",value:!0}]})])])}}),rt=ot,ct=(0,f.Z)(rt,st,nt,!1,null,"5d8f5bac",null),dt=ct.exports,ut=a(11676),pt=a(64236);const mt=ut.Z.ValidationFileUpload({fileSize:10,image:!0}),ht=async e=>new Promise((t=>{const a=new Image;a.onload=()=>{t({width:a.width,height:a.height,proportion:(a.width/a.height).toFixed(2)})},a.src=URL.createObjectURL(e)}));var vt={beforUploadImage(e){return async t=>{const a=mt(t);if(!1===a)throw!1;const i=await ht(t);if(console.log("check",e,i),"VIDEO_LARGE"===e.image_mode&&"1.78"!==i.proportion)throw s.Message.warning("封面尺寸必须为 16:9"),!1;if("VIDEO_VERTICAL"===e.image_mode&&"0.56"!==i.proportion)throw s.Message.warning("封面尺寸必须为 9:16"),!1;return!0}}};const gt=e=>new Promise(((t,a)=>{const i=URL.createObjectURL(e),l=document.createElement("video");l.setAttribute("autoplay","autoplay"),l.setAttribute("mediatype","video"),l.setAttribute("muted","muted"),l.addEventListener("canplay",(()=>{if(console.log(l.duration,"市场",l.videoWidth,l.videoHeight,l.videoWidth/l.videoHeight),l.duration<4)return a(new Error("视频时长必须大于4s"));if(l.videoWidth>l.videoHeight){if("1.78"!==(l.videoWidth/l.videoHeight).toFixed(2))return a(new Error("横版视频宽高比必须为16:9"));if(l.videoWidth<1280)return a(new Error("视频最小宽度为 1280 * 720"));if(l.videoWidth>2560)return a(new Error("视频最大宽度为 2560 * 1440"))}else if(l.videoHeight<l.videoHeight){if("0.56"!==(l.videoWidth/l.videoHeight).toFixed(2))return a(new Error("竖版视频宽高比必须为9:16"));if(l.videoWidth<720)return a(new Error("视频最小宽度为 720 * 1280"));if(l.videoWidth>1440)return a(new Error("视频最大宽度为 1440 * 2560"))}const e=document.createElement("canvas");e.width=l.videoWidth,e.height=l.videoHeight,console.log("video宽度",l.videoWidth,l.videoHeight),e.getContext("2d")?.drawImage(l,0,0,e.width,e.height),e.toBlob((e=>{null===e?a(new Error("未加载到文件")):t(e)}),"image/png",1)})),l.src=i}));var _t,ft,bt=(0,i.defineComponent)({components:{},props:{operation:{type:Object,required:!0},data:{type:Object,required:!0},advertiser_id:{type:Number,required:!0}},setup(e,t){const a=(0,i.ref)(),l=(0,i.ref)(!1),n=(0,i.computed)((()=>e.data.value.filter((e=>0===e.type)))),o=ut.Z.ValidationFileUpload({fileSize:100,extensions:[".mp4",".mpeg",".3gp",".avi"]}),r=async t=>{const i=o(t);if(!0!==i)return Promise.reject(!1);if(console.log("基本校验完成"),e.data.value.length>=10)return s.Message.error("最多只有10个视频"),Promise.reject(!1);try{l.value=!0;const i=await gt(t),s=await d.OA(i,e.advertiser_id.toString());console.log("封面上传完成"),a.value={video_id:Date.now().toString(),type:0,video_cover_id:s.id,video_cover_url:s.url,upload:!0,percent:0,title:t.name.split(".")[0]},e.operation.addSelect(a.value)}catch(n){return l.value=!1,s.Message.error(n.message),Promise.reject(!1)}return Promise.resolve(!0)};return{uploadInfo:a,loading:l,list:n,beforeUpload:r}},render(){const e=arguments[0];return e("div",{class:"component-root tg-page-container"},[e("div",{class:"upload-box",directives:[{name:"loading",value:this.loading}]},[e("div",{class:"upload-icon"},[e("tg-upload",o()([{attrs:{action:`/api/oceanengine/ad/ad_video_upload?advertiser_id=${this.advertiser_id}`,"show-file-list":!1,"hide-loading":!0,beforeUpload:this.beforeUpload,success:e=>{if(this.loading=!1,this.uploadInfo){if(!0!==e.success)(0,i.set)(this.uploadInfo,"errmsg",e.message);else{const t=e.data;(0,i.set)(this.uploadInfo,"upload",!1),(0,i.set)(this.uploadInfo,"percent",100),(0,i.set)(this.uploadInfo,"video_id",t.video_id),(0,i.set)(this.uploadInfo,"image_mode",t.width>t.height?"VIDEO_LARGE":"VIDEO_VERTICAL")}console.log("视频上传完成",e)}}}},{attrs:{"on-progress":e=>{this.uploadInfo&&(this.uploadInfo.percent=Math.floor(Math.min(e.percent,99)),console.log("上传进度",e.percent,this.uploadInfo.percent))}}}]),[e("div",{class:"upload-icon"},[e("tg-icon",{attrs:{name:"ico-a-shangchuan2x"}}),e("span",{style:"color: #3c5269;"},["点击上传视频"])])])]),e("div",{class:"des-box",style:"color: #3c5269;"},[e("div",{class:"des"},["支持格式：MP4、MPEG、3GP、AVI；"]),e("div",{class:"des2"},["横版: 宽高比16: 9，视频码率≥516kbps, 大小≤100M, 2560*1440≥分辨率≥1280*720,300s≥时长≥4s",e("br"),"竖版: 宽高比9: 16，视频码率≥516kbps, 大小≤100M, 1440*2560≥分辨率≥720*1280,300s≥时长≥4s"])])]),e("div",{class:"table-box"},[e("tg-table",{attrs:{stripe:!0,data:this.list,height:"100%"}},[e("el-table-column",{attrs:{label:"视频",prop:"video","min-width":140},scopedSlots:{default:({row:t})=>e("div",{class:"video-box",style:`background-image:url(${t.video_cover_url})`},[e("img",{attrs:{src:a(69820),alt:""}})])}}),e("el-table-column",{attrs:{label:"封面",prop:"video","min-width":140,"class-name":"padding-left-none"},scopedSlots:{default:({row:t})=>!0===t.upload?"":e("tg-upload",{attrs:{action:`/api/oceanengine/ad/ad_image_upload?advertiser_id=${this.advertiser_id}`,"show-file-list":!1,"hide-loading":!0,beforeUpload:vt.beforUploadImage(t),success:e=>{if(!0!==e.success)s.Message.error(e.message);else{const a=e.data;(0,i.set)(t,"video_cover_url",a.url),(0,i.set)(t,"video_cover_id",a.id)}console.log("图片替换完成",e)}}},[e("div",{class:"video-box cover-box"},[e("tg-icon",{attrs:{name:"ico-add-thin"},style:"color: #6A7B92;"}),"替换封面"])])}}),e("el-table-column",{attrs:{label:"创意标题",prop:"video","min-width":342},scopedSlots:{default:({row:t})=>{if(!0!==t.upload)return e("el-form",[e("el-form-item",{attrs:{error:t.title_msg}},[e("el-input",{attrs:{type:"textarea",maxlength:55,placeholder:"请输入标题","auto-size":!0,"show-word-limit":!0,rows:3,resize:"none"},on:{blur:()=>{(0,pt.xb)(t.title)?(0,i.set)(t,"title_msg","请输入标题"):(0,i.set)(t,"title_msg","")}},model:{value:t.title,callback:e=>{this.$set(t,"title",e)}}})])])}}}),e("el-table-column",{attrs:{label:"上传状态",prop:"video","min-width":200},scopedSlots:{default:({row:t})=>!0===t.upload&&t.errmsg?e("div",{class:"process-box"},[e("span",{class:"error"},[t.errmsg])]):e("div",{class:"process-box"},[e("div",{class:"process"},[e("div",{class:"process-bar",style:`width:${t.percent}%`})]),e("div",{class:"process-text "+(100===t.percent?"success":"")},["已上传",t.percent,"%"])])}}),e("el-table-column",{attrs:{label:"操作",prop:"video","min-width":88},scopedSlots:{default:({row:t})=>{if(!0!==t.upload||t.errmsg)return e("div",{class:"operator"},[e("a",{on:{click:()=>{this.operation.addSelect(t,"remove")}}},["移除"])])}}})])])])}}),yt=bt,Et=(0,f.Z)(yt,_t,ft,!1,null,"44b8a462",null),kt=Et.exports,Ct=(0,i.defineComponent)({components:{quick:dt,customize:kt},props:{},setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)(),s=(0,i.ref)(),n=(0,i.ref)([]),o=et(),r=(0,X.pK)([{label:"我的视频(0)",value:"quick"},{label:"上传视频(0)",value:"customize"}],"quick"),c=(0,i.computed)((()=>n.value.filter((e=>!0!==e.upload))));(0,i.watch)((()=>n.value),(()=>{let e=0,t=0;n.value.forEach((a=>{1===a.type?e++:0===a.type&&!0!==a.upload&&t++})),r.tabs.value=[{label:`我的视频(${e})`,value:"quick"},{label:`上传视频(${t})`,value:"customize"}]}));const d=()=>{t.emit("close"),a.value=!1},u=()=>{let e=!0;n.value.forEach((t=>{0===t.type&&((0,pt.xb)(t.title)?(e=!1,(0,i.set)(t,"title_msg","请输入创意标题")):t.title.length<5&&(e=!1,(0,i.set)(t,"title_msg","最少输入5个字")))})),e?(t.emit("submit",JSON.parse(JSON.stringify(n.value.filter((e=>!0!==e.upload))))),a.value=!1):r.checkedTab.value="customize"},p=(e,t,o)=>{l.value=e,s.value=t,n.value=o,(0,i.nextTick)((()=>{a.value=!0}))},m=(0,i.computed)((()=>n)),h={awemeVideo:o,async queryVideos(e){return o.query({advertiser_id:l.value,aweme_id:s.value,query_word:e})},addSelect(e,t="add"){const a=n.value.findIndex((t=>t.video_id===e.video_id));if("toggle"===t&&(t=-1!==a?"remove":"add"),"add"===t){if(-1!==a)return;if(n.value.length>=10)return;n.value.push(e)}else if("remove"===t){if(-1===a)return;n.value.splice(a,1)}}};return{show:p,data:n,onCloseBtnClick:d,onSubmitClick:u,...r,visible:a,propsData:m,advertiser_id:l,aweme_id:s,awemeVideo:o,operation:h,takeData:c}},render(){const e=arguments[0];return e("el-drawer",{attrs:{size:1028,height:"100vh",title:"上传视频",direction:"rtl",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("div",{class:"drawer"},[e("tg-tabs",{class:"tag-line",attrs:{tabs:this.tabs},model:{value:this.checkedTab,callback:e=>{this.checkedTab=e}}}),this.visible&&e(this.checkedTab,{attrs:{data:this.propsData,operation:this.operation,advertiser_id:this.advertiser_id,save:e=>{console.log("value",e)}},on:{close:()=>{this.onCloseBtnClick()}}}),e("div",{class:"footer"},[e("div",{class:"selected"},[e("span",["已选 ",this.takeData.length,"/10"]),this.takeData.map((t=>e("div",{class:"video",style:`background-image:url(${t.video_cover_url})`},[e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.operation.addSelect(t,"remove")}}}),e("img",{attrs:{src:a(69820),alt:""}})])))]),e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{disabled:0===this.takeData.length,size:"small",type:"primary"},on:{click:this.onSubmitClick}},["提交"])])])])])}});const wt=document.createElement("meta");wt.name="referrer",wt.content="never",document.head.appendChild(wt);var At,Tt,Ot,St,xt=Ct,Lt=(0,f.Z)(xt,At,Tt,!1,null,"f94b57b2",null),It=Lt.exports,Nt=(0,i.defineComponent)({components:{dialogVideo:It},props:{},setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)(0),s=(0,i.ref)(),n=(0,i.ref)(null),o=(0,i.ref)(),r=je(),c=()=>{t.emit("close"),a.value=!1},d=()=>{n.value?.validate((e=>{if(!e)return!1;t.emit("change",r.formData),c()}))},u=(e,t,n)=>{r.formData=n,l.value=e,s.value=t,(0,i.nextTick)((()=>{a.value=!0}))};return{dialogVideoRef:o,show:u,advertiser_id:l,onCloseBtnClick:c,visible:a,form:r,aweme_id:s,onSaveBtnClick:d,formRef:n}},render(){const e=arguments[0],t=this.form,{formData:a}=t;return e("el-drawer",{attrs:{size:672,height:"100vh",title:"创建素材",direction:"rtl",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("div",{class:"drawer"},[e("div",{class:"tg-form"},[e("el-form",o()([{},{attrs:{model:t.formData}},{ref:"formRef",attrs:{size:"small","label-position":"left","label-width":"134px","hide-required-asterisk":!0}}]),[e("el-form-item",{attrs:{label:"创意类型",prop:"creative_material_mode",rules:{required:!0,message:"请选择广告组",trigger:"blur"}}},[e("div",{class:"smart_interest_action"},[e("el-radio-group",{model:{value:a.creative_material_mode,callback:e=>{this.$set(a,"creative_material_mode",e)}}},[e("el-radio-button",{attrs:{label:tt.CUSTOM_CREATIVE}},["自定义创意"]),e("el-radio-button",{attrs:{disabled:!0,label:tt.PROGRAMMATIC_CREATIVE}},["程序化创意"])]),e("span",{class:"tip"},["暂不支持程序化创意"])])]),e("el-form-item",{attrs:{label:"添加创意内容"}},[e("div",{class:"video-container"},[e("div",{class:"header"},[e("tg-button",{attrs:{size:"small",type:"primary",icon:"ico-btn-add"},on:{click:()=>{this.dialogVideoRef?.show(this.advertiser_id,this.aweme_id,JSON.parse(JSON.stringify(a.creative_list)))}}},["添加视频"]),e("div",{class:"selected"},["已选",e("span",{class:"b"},[a.creative_list.length]),"/",e("span",["10"])])]),a.creative_list.length>0&&e("div",{class:"video-list"},[a.creative_list.map(((t,l)=>e("div",{class:"video-box"},[e("tg-icon",{attrs:{name:"ico-frm-delete"},class:"close",on:{click:()=>{a.creative_list.splice(l,1)}}}),e("div",{class:"side",style:`background-image:url(${t.video_cover_url})`}),e("div",{class:"content"},[e("span",["创意标题"]),1===t.type&&e("fragments",[e("el-popover",{attrs:{trigger:"hover",content:"抖音号下的视频不允许修改标题",placement:"top"}},[e("el-input",{attrs:{value:t.title,maxlength:55,"show-word-limit":!0,disabled:!0},slot:"reference"})]),e("el-popover",{attrs:{trigger:"hover",content:"抖音号下的视频不允许换封面",placement:"top"}},[e("div",{slot:"reference",class:"el-button el-button--default el-button--mini is-disabled"},["换封面"])])]),0===t.type&&e("fragments",[e("el-form-item",{attrs:{prop:"creative_list",rules:[{required:!0,message:"请添加创意内容",trigger:"blur"},{trigger:"blur",validator:(e,t,i)=>{for(let l=0;l<a.creative_list.length;l++){const e=a.creative_list[l];if((0,pt.xb)(e.title)){i(new Error("请填写创意标题"));break}if(e.title.length<5){i(new Error("标题最少输入5个字"));break}}i()}}]}},[e("el-input",{attrs:{maxlength:"55","show-word-limit":!0},model:{value:t.title,callback:e=>{this.$set(t,"title",e)}}})]),e("tg-upload",{attrs:{action:`/api/oceanengine/ad/ad_image_upload?advertiser_id=${this.advertiser_id}`,"show-file-list":!1,"hide-loading":!0,beforeUpload:vt.beforUploadImage(t),success:e=>{if(!0!==e.success)s.Message.error(e.message);else{const a=e.data;(0,i.set)(t,"video_cover_url",a.url),(0,i.set)(t,"video_cover_id",a.id)}}}},[e("el-button",{attrs:{size:"mini"}},["换封面"])])])])])))])])]),e("el-form-item",{attrs:{label:"抖音主页隐藏视频",prop:"is_homepage_hide"}},[e("el-radio-group",{model:{value:a.is_homepage_hide,callback:e=>{this.$set(a,"is_homepage_hide",e)}}},[e("el-radio-button",{attrs:{label:1}},["隐藏"]),e("el-radio-button",{attrs:{label:0}},["不隐藏"])])])])]),e("div",{class:"footer"},[e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])]),e(It,{ref:"dialogVideoRef",on:{submit:e=>{a.creative_list=e,this.formRef?.validateField("creative_list")}}})])}}),Rt=Nt,Dt=(0,f.Z)(Rt,Ot,St,!1,null,"0c0a89df",null),Mt=Dt.exports,Pt=a(98386);const{debounce:Vt}=c(),Bt=(0,i.defineComponent)({setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)(""),n=(0,i.ref)(""),o=(0,i.ref)({}),r=e=>{l.value=e.name,o.value=e,a.value=!0},c=()=>{Promise.resolve().then((()=>{if(V.Z.isEmpty(n.value))throw new Error("标签包名不能为空！");return(0,Pt.AH)({name:n.value,ad_keywords:o.value.ad_keywords,third_industry_ids:o.value.third_industry_ids})})).then((e=>{if(console.log("复制标签包结果：",e),!0!==e.data.success||0!==e.data.error_code)throw new Error("标签包保存失败！");s.Message.success("保存标签包成功！"),a.value=!1,t.emit("saveQuery")})).catch((e=>{s.Message.error(e.message)}))};return{ctx:t,submit:c,visible:a,show:r,disabled_name:l,copy_new_name:n}},render(){const e=arguments[0];return e("el-dialog",{class:"tg-dialog-classic tg-dialog-vcenter-new copy-dialog",attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:this.visible,width:"390px",title:"复制标签包"},on:{close:()=>{this.visible=!1}}},[e("el-form",{attrs:{size:"small","label-width":"96px"},class:"copy-dialog-form"},[e("el-form-item",{attrs:{label:"复制对象"}},[e("el-input",{attrs:{disabled:!0},model:{value:this.disabled_name,callback:e=>{this.disabled_name=e}}})]),e("el-form-item",{attrs:{label:"名称设置"}},[e("el-input",{attrs:{placeholder:"请输入标签包名称",maxlength:20,"show-word-limit":!0},model:{value:this.copy_new_name,callback:e=>{this.copy_new_name=e}}})])]),e("fragments",{slot:"footer"},[e("tg-button",{on:{click:()=>{this.visible=!1}}},["取消"]),e("tg-button",{attrs:{type:"primary"},on:{click:()=>{V.Z.isEmpty(this.copy_new_name)?s.Message.error("标签包名不能为空!"):this.submit()}}},["保存"])])])}});var Wt,Gt,Yt=(0,i.defineComponent)({components:{tableTimeRangeSelector:P,dialogCopyTagPackage:Bt},props:{save:{type:Function},parentTagList:{type:Object,required:!0}},setup(e,t){const a=(0,i.ref)(),l=(0,i.ref)(""),n=(0,i.ref)(!1),o=e.parentTagList;console.log("props.parentTagList",e.parentTagList),console.log("checked_tag_list",o.value);const r=(0,i.ref)({status:1,total:0,page_num:0}),c=(0,i.ref)(""),d=(0,i.ref)([]),u=(e=!1)=>{e||(r.value.page_num=1),(0,Pt.wZ)({name:c.value,page_num:r.value.page_num}).then((e=>{d.value=e.data.data.data,r.value.total=e.data.data.total}))};u();const p=e=>{(0,Pt.hD)({id:e}).then((e=>{console.log(e.data)})).then((()=>{u()}))},m=e=>{r.value.page_num=e,u(!0)},h=e=>{o.value.find((t=>t.id===e.id))||(o.value.length<10?(o.value.push({id:e.id,name:e.name,ad_keywords:e.ad_keywords,third_industry_ids:e.third_industry_ids}),console.log("添加选中",o.value)):s.Message.error("标签包最多选择10个！"))},v=()=>{o.value=[]},g=()=>{t.emit("close"),n.value=!1},_=e=>{console.log("data:",e),n.value=!0},f=()=>{Promise.resolve().then((()=>{if(!(o.value.length>0))throw new Error("请选择标签包！");console.log("回传参数",o.value),t.emit("change",o.value),n.value=!1})).then((()=>g())).catch((e=>{s.Message.error(e.message)}))},b=Vt(f,200),y=e=>{const a={third_industry_ids:e.third_industry_ids,ad_keywords:e.ad_keywords,name:e.name,id:e.id};console.log("准备编辑",a),t.emit("edit",JSON.parse(JSON.stringify(a)))},E=e=>(0,Q.I)(t,{title:e}).then((e=>{if(!e)throw new Error("");return e}));return{confirm:E,show:_,title:l,visible:n,formData:r,onCloseBtnClick:g,onSaveBtnClick:b,dialogCopyTagPackageRef:a,tagQueryInput:c,tagQuery:u,tag_list:d,handleCurrentChange:m,onAddClick:h,onClearTagClick:v,tagDel:p,edit:y,checked_tag_list:o}},render(){const e=arguments[0];return e("div",{class:"dialog-content"},[e("div",{class:"select-template"},[e("el-input",{style:"width:260px",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入名称",maxlength:20,size:"small"},on:{change:()=>{this.tagQuery()}},model:{value:this.tagQueryInput,callback:e=>{this.tagQueryInput=e}}})]),e("div",{class:"content"},[e("div",{class:"table-box"},[e("el-table",{attrs:{height:"100%",stripe:!0,data:this.tag_list}},[e("el-table-column",{attrs:{width:93,label:"标签包名"},scopedSlots:{default:({row:e})=>e.name}}),e("el-table-column",{attrs:{width:154,label:"创意分类"},scopedSlots:{default:({row:e})=>e.third_industry_name}}),e("el-table-column",{attrs:{width:80,label:"创意标签"},scopedSlots:{default:({row:e})=>e.ad_keywords&&e.ad_keywords.join(",")}}),e("el-table-column",{attrs:{width:178,label:"操作"},scopedSlots:{default:({row:t})=>e("div",{class:"operate"},[e("a",{class:this.checked_tag_list.find((e=>e.id===t.id))?"disabled":"",on:{click:()=>this.onAddClick(t)}},["添加"]),e("a",{on:{click:()=>this.edit(t)}},["编辑"]),e("a",{on:{click:()=>this.dialogCopyTagPackageRef?.show(t)}},["复制"]),e("a",{on:{click:()=>{this.confirm("确定要删除吗?").then((()=>{this.tagDel(t.id)}))}}},["删除"])])}})]),e("div",{class:"pagination",style:"width:506px;"},[e("el-pagination",{attrs:{className:"contract-pagination","current-page":this.formData.page_num,"page-size":10,layout:"total, prev, pager, next",total:this.formData.total},style:"margin-bottom: 10px",on:{"current-change":this.handleCurrentChange}})])]),e("div",{class:"selectes"},[e("div",{class:"selectes-title"},[e("span",["已选"]),e("a",{on:{click:this.onClearTagClick}},["清空"])]),e("div",{class:"selecteds-list"},[this.checked_tag_list.map(((t,a)=>e("div",{class:"item",key:a},[e("span",{style:"color: #3c5269;"},[t.name]),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{console.log("key:",a),this.checked_tag_list.splice(a,1)}}})])))])])]),e("div",{class:"footer"},[e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["保存"])])]),e("dialog-copy-tag-package",{ref:"dialogCopyTagPackageRef",on:{saveQuery:()=>{this.tagQuery()}}})])}}),Ut=Yt,qt=(0,f.Z)(Ut,Wt,Gt,!1,null,"dfab0e76",null),$t=qt.exports;const{debounce:zt}=c(),Ft=()=>(console.log("自定义初始化initData"),{id:void 0,name:"",third_industry_ids:[],ad_keywords:[]});var Kt,Zt,Ht,Xt,Qt=(0,i.defineComponent)({components:{tableTimeRangeSelector:P},props:{save:{type:Function},parentTagList:{type:Object,required:!0},initType:{type:String}},setup(e,t){const a=(0,i.ref)(null),l=(0,i.ref)(!1),n=e.parentTagList,o=(0,i.ref)(""),r=(0,i.ref)(!1),c=(0,i.ref)(""),d=(0,i.ref)([]);void 0===n.value||null===n.value?(n.value=Ft(),console.log("formData：",n.value)):console.log("不初始化initData"),void 0!==n.value.ad_keywords&&null!==n.value.ad_keywords||(n.value.ad_keywords=[]);const u=e=>{console.log("已选择的三级id列表",n.value.third_industry_ids)};(0,Pt.BY)().then((e=>{d.value=e.data.data}));const p=()=>{let e=[];const t=[];e=o.value.split(" "),console.log("temp_tag_list",e);for(const a of e){if(a.length>10)return void s.Message.error("标签不能超过10个字！");if(""===a||t.find((e=>e===a))||t.push(a),n.value?.ad_keywords?.find((e=>e===a)))return void s.Message.error("标签已添加！")}if(console.log("temp_tag_list_strim",t),(n.value?.ad_keywords?.length??0)+t.length>20)s.Message.error("标签不能超过20个！");else{for(const e of t)n.value?.ad_keywords?.push(e);console.log("formData.value.ad_keywords",n.value.ad_keywords),o.value=""}},m=e=>{n.value?.ad_keywords?.splice(e,1)},h=e=>{n.value.ad_keywords=[]},v=()=>{t.emit("close"),t.root.$nextTick(g),l.value=!1},g=()=>{n.value=Ft(),o.value=""},_=e=>{console.log("data:",e),l.value=!0},f=()=>{a.value?.validate((a=>{if(!a)return!1;Promise.resolve().then((()=>{if(!n.value?.third_industry_ids?.length)throw new Error("请选择创意分类！");if(!0===r.value||n.value.id){if(V.Z.isEmpty(c.value)&&void 0===e.initType)throw new Error("请填写常用模板名称");return(0,Pt.AH)(n.value.id?{id:n.value.id,name:n.value.name,ad_keywords:n.value.ad_keywords,third_industry_ids:n.value.third_industry_ids}:{name:c.value,ad_keywords:n.value.ad_keywords,third_industry_ids:n.value.third_industry_ids})}{const e={third_industry_ids:n.value.third_industry_ids,ad_keywords:n.value.ad_keywords,name:"临时标签"};t.emit("change",[e]),l.value=!1}})).then((a=>{if(console.log(a),a){if(!0!==a.data.success||0!==a.data.error_code)throw a.data.message?new Error(a.data.message):new Error("标签包保存失败！");s.Message.success("保存标签包成功！"),"edit"===e.initType?t.emit("close"):t.emit("quickChecked"),t.root.$nextTick(g),l.value=!1}})).catch((e=>{s.Message.error(e.message)}))}))},b=zt(f,200);return{show:_,visible:l,formData:n,tag_input:o,onCloseBtnClick:v,onSaveBtnClick:b,formRef:a,saveTempalteCheckbox:r,saveTemplateInput:c,advertise_industry_list:d,ca_change:u,addTagBtnClick:p,rmTagBtnClick:m,clearTagBtnClick:h}},render(){const e=arguments[0];return e("div",{class:"dialog-content tg-dialog-classic"},[e("el-form",o()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{size:"small","label-position":"left","label-width":"76px","hide-required-asterisk":!0}}]),[e("div",{class:"content"},["edit"===this.initType&&e("el-form-item",{attrs:{label:"标签包名称",prop:"name",rules:{required:!0,message:"请填写标签包名称",trigger:"blur"}}},[e("div",{class:"plan-rule-box"},[e("el-input",{attrs:{placeholder:"请输入标签包名称",maxlength:20,"show-word-limit":!0},model:{value:this.formData.name,callback:e=>{this.$set(this.formData,"name",e)}}})])]),e("el-form-item",{attrs:{label:"创意分类"}},[e("div",{class:"block"},[e("el-cascader",{style:"width:280px;",attrs:{placeholder:"请选择创意分类",options:this.advertise_industry_list,props:{value:"industry_id",label:"industry_name"}},on:{change:this.ca_change},model:{value:this.formData.third_industry_ids,callback:e=>{this.$set(this.formData,"third_industry_ids",e)}}})])]),e("el-form-item",{attrs:{label:"创意标签"}},[e("div",[e("el-input",{style:"width:280px;",attrs:{placeholder:"空格分割，标签不超过10个字"},model:{value:this.tag_input,callback:e=>{this.tag_input=e}}},[e("el-button",{attrs:{type:"text"},slot:"append",on:{click:this.addTagBtnClick},style:"color: #2877ff; font-weight:600;"},["添加"])])]),e("div",{class:"selected-tags-header"},[e("span",["已添加标签（",e("span",{class:"tags-cnt"},[this.formData?.ad_keywords?.length??0]),"/20）"]),e("el-button",{attrs:{type:"text"},on:{click:this.clearTagBtnClick},style:"padding: 0; color: #2877ff; font-size: 12px;"},["清空"])]),e("div",{class:"selected-tags"},[this.formData?.ad_keywords?.map(((t,a)=>e("div",{class:"custom-tag"},[t,e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.rmTagBtnClick(a)}}})])))])])])]),e("div",{class:"footer"},[void 0===this.initType&&e("fragments",[e("el-checkbox",{model:{value:this.saveTempalteCheckbox,callback:e=>{this.saveTempalteCheckbox=e}}},["存为常用模板"]),e("el-input",{attrs:{placeholder:"请输入模板名称",maxlength:20,"show-word-limit":!0,size:"small"},style:"width:220px",model:{value:this.saveTemplateInput,callback:e=>{this.saveTemplateInput=e}}})]),e("div",{class:"buttons"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["保存"])])])])}}),Jt=Qt,jt=(0,f.Z)(Jt,Kt,Zt,!1,null,"390bccec",null),ea=jt.exports,ta=(0,i.defineComponent)({components:{quick:$t,customize:ea},props:{save:{type:Function}},setup(e,t){const a=(0,i.ref)(!1),l=(0,i.ref)(),s=(0,i.ref)([]),n=(0,i.ref)([]),o=(0,i.ref)(),r=(0,i.ref)(),c=(0,i.computed)((()=>{const e=d.checkedTab.value;return"customize"===e?(console.log("使用自定义Config！"),l):(console.log("initType.value",r.value),void 0!==r.value?(console.log("使用editConfig",o),o):(console.log("使用快速Config！"),s))})),d=(0,X.pK)([{label:"快速设置",value:"quick"},{label:"自定义设置",value:"customize"}],"quick"),u=()=>{t.emit("close"),p(),a.value=!1},p=()=>{n.value=[],o.value={},r.value=void 0},m=e=>{console.log("最外层父组件数据：",e),console.log("tabs-parentTagList.value",n.value),1===e.length&&V.Z.isEmpty(e[0].id)?(l.value=e[0],d.checkedTab.value="customize"):(s.value=e,d.checkedTab.value="quick"),(0,i.nextTick)((()=>{a.value=!0}))};return{show:m,onCloseBtnClick:u,...d,visible:a,ctx:t,parentTagList:n,editConfig:o,initType:r,propsData:c}},render(e){let t=this.visible,a=!1;return console.log("this.initType",this.initType),"quick"===this.checkedTab&&void 0!==this.initType&&(t=!1),this.visible&&"quick"===this.checkedTab&&void 0!==this.initType&&(a=!0),e("el-drawer",{class:"tg-page-container",attrs:{size:812,height:"100vh",title:"标签包",direction:"rtl",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("div",{class:"drawer"},[e("tg-tabs",{class:"tag-line",attrs:{className:"flex-none",tabs:this.tabs},on:{change:e=>{console.log("val",e)}},model:{value:this.checkedTab,callback:e=>{this.checkedTab=e}}}),t&&e(this.checkedTab,{attrs:{parentTagList:this.propsData,editConfig:this.editConfig,initType:this.initType},on:{close:()=>{this.onCloseBtnClick()},change:e=>{console.log("子组件回传",e),this.ctx.emit("change",JSON.parse(JSON.stringify(e))),this.onCloseBtnClick()},edit:e=>{this.editConfig=e,this.initType="edit"},quickChecked:()=>{this.checkedTab="quick",this.initType=void 0}}}),a&&e(ea,{attrs:{parentTagList:this.propsData,initType:this.initType},on:{close:()=>{this.initType=void 0}}})])])}}),aa=ta,ia=(0,f.Z)(aa,Ht,Xt,!1,null,"6d9923d7",null),la=ia.exports;const sa=()=>{const e=(0,i.ref)(null),t=(0,i.ref)([]),a=e=>{d._L(e).then((e=>{t.value=e.data}))},l=(0,i.ref)(null),s=(0,i.ref)([]),n=(0,i.computed)((()=>{const e=s.value.find((e=>e.aweme_id===l.value));return e?e.aweme_show_id:""})),o=(t,a)=>{a&&(s.value=[]),d.AS(e.value,t).then((e=>{s.value=e.data,a&&s.value.length>0&&(l.value=s.value[0].aweme_id)}))};return(0,i.reactive)({advertiser_id:e,advertiser_list:t,search:a,aweme_id:l,aweme_list:s,aweme_show_id:n,search_aweme:o})};var na=a(45781);const oa=[{name:l.GT.plan,title:"广告计划"},{title:"批量创建计划"}],ra=e=>{const t={...e};return t.start_time=W()(t.start_time).format("YYYY-MM-DD"),t.end_time=W()(t.end_time).format("YYYY-MM-DD"),t.smart_bid_type===G.ET.SMART_BID_CONSERVATIVE&&(delete t.flow_control_mode,delete t.deep_external_action),t.flow_control_mode===G.CM.FLOW_CONTROL_MODE_SMOOTH&&delete t.deep_external_action,null===t.deep_external_action&&delete t.deep_external_action,t.live_schedule_type===G.Jy.SCHEDULE_TIME_ALLDAY?(delete t.schedule_fixed_range,delete t.schedule_time):t.live_schedule_type===G.Jy.SCHEDULE_TIME_FIXEDRANGE?(delete t.start_time,delete t.end_time,delete t.schedule_time,t.schedule_fixed_range=3600*Number(t.schedule_fixed_range),t.budget_mode="BUDGET_MODE_TOTAL"):t.live_schedule_type===G.Jy.SCHEDULE_TIME_WEEKLY_SETTING&&(t.schedule_time=t.schedule_time?.join(""),delete t.schedule_fixed_range),null===t.deep_external_action&&delete t.deep_external_action,t},ca=e=>{const t={...e};return t.ac=t.ac.filter((e=>"NONE"!==e)),t.age=t.age.filter((e=>"NONE"!==e)),t.platform=[t.platform].filter((e=>"NONE"!==e)),t.district===j.NONE?delete t.city:t.city=t.city.map((e=>e.id)),"NONE"===t.smart_interest_action&&delete t.smart_interest_action,t.smart_interest_action===re.CUSTOM&&(console.log(t.ac.length),0===t.action_scene.length&&(t.action_scene=[ce.NEWS,ce.APP,ce.ECOMMERCE])),t.smart_interest_action!==re.CUSTOM?(delete t.action_scene,delete t.action_days):(t.action_categories=t.actionList.filter((e=>"CATEGORY"===e.type)).map((e=>e.id)),t.action_words=t.actionList.filter((e=>"KEYWORD"===e.type)).map((e=>e.id)),t.interest_categories=t.interestList.filter((e=>"CATEGORY"===e.type)).map((e=>e.id)),t.interest_words=t.interestList.filter((e=>"KEYWORD"===e.type)).map((e=>e.id))),t.aweme_fan_behaviors&&(t.aweme_fan_behaviors=t.aweme_fan_behaviors.filter((e=>"null"!==e&&null!==e)),0===t.aweme_fan_behaviors.length&&(t.aweme_fan_behaviors=fe.map((e=>e.value)))),t.auto_extend_enabled===he.CLOSE?delete t.auto_extend_targets:t.auto_extend_targets=t.auto_extend_targets.map((e=>e.value)),"CUSTOM"===t.aweme_switch&&(t.aweme_fan_categories=t.awemeList.filter((e=>"CATEGORY"===e.type)).map((e=>e.id)),t.aweme_fan_accounts=t.awemeList.filter((e=>"ACCOUNT"===e.type)).map((e=>e.id))),t};var da,ua,pa=(0,i.defineComponent)({components:{dialogSelectAdvertiseGroup:O,dialogPlanSetting:H,orientationPackage:Je,dialogCreativeList:Mt,tagPackage:la},setup(){const e=(0,i.ref)(null),t=(0,i.ref)(null),a=(0,i.ref)(null),l=(0,i.ref)(null),n=(0,i.ref)(null),o=(0,i.ref)();let r=null;const c=(0,i.ref)({}),u=(0,i.ref)(),p=(0,i.ref)(),m=(0,i.ref)(!1),h=(0,i.ref)([0,1]),v=(0,i.ref)([]),g=(0,i.ref)(),_=(0,i.ref)([]),f=(0,i.ref)(),b=(0,i.ref)({creative_list:[],is_homepage_hide:1,creative_material_mode:tt.CUSTOM_CREATIVE}),y=(0,i.computed)((()=>b.value.creative_list)),E=(0,i.ref)([]),k=(0,i.computed)((()=>{const e=g.value,t=f.value,a=E.value.filter((a=>{const i=_.value[a.tag],l=v.value[a.audience];return(void 0===t||i.name===t)&&(void 0===e||l.name===e)}));return a})),C=(0,i.computed)((()=>{const e=void 0===c.value.smart_bid_type,t=v.value.length>0,a=_.value.length>0,i=y.value.length>0,l=c.value.image_mode===G.dU.AWEME_VIDEO;return!!e||(!t||(!a||!(!l||i)))})),w=(0,i.computed)((()=>{const e=v.value.length,t=_.value.length,a=y.value.length,i=c.value.image_mode;let l=e*t;return i===G.dU.AWEME_VIDEO&&(l*=a),l})),A=()=>{const e=[];let t=0,a=0;const i=v.value.length*_.value.length-1;v.value.forEach(((l,s)=>{_.value.forEach(((n,o)=>{const r=l.name,d=n.name;let u;if(c.value.smart_bid_type!==G.ET.SMART_BID_CONSERVATIVE){const{min_cpa_bind:e,max_cpa_bind:t}=c.value;c.value.bindding_method===G.uP.RANDOM?(u=Math.random()*(t-e)+Number(e),u=u.toFixed(2)):c.value.bindding_method===G.uP.LADDER?(u=a>0?a/i*(t-e)+Number(e):Number(e),u=u.toFixed(2)):c.value.bindding_method===G.uP.FIXED&&(u=c.value.cpa_bid)}const p=(i,l)=>{const n=(a+1+"").padStart(2,"0"),p=`${c.value.plan_name}-${r}-${d}-${n}`,m={name:p,audience:s,tag:o,budget:c.value.budget,cpa_bid:u,status:0,unique_fk:t++,creative_list:i,creative_material_mode:b.value.creative_material_mode};void 0!==l&&(m.is_homepage_hide=l),e.push(m),a++};if(c.value.image_mode===G.dU.AWEME_LIVE_ROOM)p([{image_mode:"AWEME_LIVE_ROOM"}]);else for(let e=0;e<b.value.creative_list.length;e++){const t=b.value.creative_list[e];console.log("tmp",t),1===t.type?p([{image_mode:"VIDEO_VERTICAL",video_material:{aweme_item_id:t.aweme_item_id},title_material:{title:t.title}}],1):0===t.type&&p([{image_mode:t.image_mode,video_material:{video_id:t.video_id,video_cover_id:t.video_cover_id},title_material:{title:t.title}}],b.value.is_homepage_hide)}}))})),E.value=e},T=sa(),O=(0,i.computed)((()=>{const e=void 0!==p.value,t=E.value.length>0;return!e||!t}));let S="";const x=()=>new Promise((e=>{const t=()=>{d.de(S).then((a=>{let l=!0,s=0;a.forEach((e=>{null===e.status?l=!1:s++;const t=E.value.find((t=>e.name===t.name));t?null===e.status?t.status=0:1===e.status?t.status=1:(t.status=2,(0,i.set)(t,"errMessage",e.dy_message)):console.log("找不到",e)})),h.value=[s,E.value.length],l?e():setTimeout(t,1e3)})).catch((()=>{setTimeout(t,1e3)}))};r=setTimeout(t,1e3)})),L=()=>{Promise.resolve().then((()=>{m.value=!0,h.value=[0,E.value.length]})).then((()=>{d.OR(E.value.map((e=>({advertiser_id:T.advertiser_id,name:e.name,unique_fk:e.unique_fk})))).then((e=>{if(e.length>0)throw e.forEach((e=>{const t=E.value.find((t=>e.unique_fk===t.unique_fk));t&&(t.status=2,t.errMessage="名称重复")})),new Error("检测到有名字重复")})).then((()=>{const e={advertiser_id:T.advertiser_id,aweme_id:T.aweme_id,campaign_id:p.value.campaign_id,marketing_goal:"LIVE_PROM_GOODS",promotion_way:"STANDARD",delivery_setting:ra(c.value),audiences:v.value.map((e=>ca(e.content))),tags:_.value,plan_info:E.value.map((e=>(void 0!==e.cpa_bid&&(e.cpa_bid=Number(e.cpa_bid)),e.budget=Number(e.budget),e)))};return d.V$(e).then((e=>{S=e.batch_id}))})).then((()=>x())).then((()=>{E.value=E.value.filter((e=>1!==e.status)),m.value=!1})).catch((e=>{s.Message.error(e.message),m.value=!1}))}))};return{showSubmitProcess:h,showSubmitLoading:m,lastOpenpopper:o,planOrientationFilter:g,planTagsFilter:f,routes:oa,dialogPlanSettingRef:e,orientationPackageRef:t,tagPackageRef:a,dialogSelectAdvertiseGroupRef:l,planSettingConfig:c,planOrientationPackageConfig:v,Account:T,planTagsConfig:_,disabledPreviewPlan:C,createPlanList:A,planInfo:E,campaign_id:u,campaign_selected:p,hasCommitPlan:O,submitPlan:L,timer:r,planInfoFilter:k,planCreativeList:y,planPredLength:w,dialogCreativeListRef:n,planCreativeConfig:b}},methods:{configArea(){const e=this.$createElement,{planSettingConfig:t}=this;return e("fragments",[e("div",{class:"func-header"},[e("div",{class:"title"},["配置区"]),e("div",{class:"info"},[e("span",{class:"number"},[this.planOrientationPackageConfig.length]),e("span",["定向包"]),e("span",{class:"symbol"},["x"]),e("span",{class:"number"},[this.planTagsConfig.length]),e("span",["标签包"]),this.planSettingConfig.image_mode===G.dU.AWEME_VIDEO&&e("fragments",[e("span",{class:"symbol"},["x"]),e("span",{class:"number"},[this.planCreativeList.length]),e("span",["创意素材"])]),e("span",{class:"symbol"},["="]),e("span",{class:"number prominent"},[this.planPredLength]),e("span",["广告计划"])])]),e("div",{class:"func-area"},[e("div",{class:"filter-header"},[e("div",{class:"filter-item"},[e("div",{class:"label"},["千川账号："]),e("el-select",{attrs:{size:"small",filterable:!0,remote:!0,"remote-method":this.Account.search,placeholder:"请输入并选择账户"},class:"remote-search",on:{change:()=>{this.Account.search_aweme(void 0,!0),this.campaign_selected=void 0}},model:{value:this.Account.advertiser_id,callback:e=>{this.$set(this.Account,"advertiser_id",e)}}},[this.Account.advertiser_list.map(((t,a)=>e("el-option",{attrs:{label:t.advertiser_name,value:t.advertiser_id},key:a})))])]),e("div",{class:"filter-item"},[e("div",{class:"label"},["抖音号："]),e("el-select",{attrs:{size:"small",disabled:null===this.Account.advertiser_id},model:{value:this.Account.aweme_id,callback:e=>{this.$set(this.Account,"aweme_id",e)}}},[this.Account.aweme_list.map(((t,a)=>e("el-option",{attrs:{label:t.aweme_name,value:t.aweme_id},key:a})))])]),e("span",{class:"flex-fill"}),e("el-button",{attrs:{size:"small",type:"primary",disabled:this.disabledPreviewPlan},on:{click:this.createPlanList}},["预览广告计划"])]),e("div",{class:"plan-setting-box"},[e("div",["计划设置"]),e("div",["定向包",e("span",{class:"des"},["已选：",this.planOrientationPackageConfig.length])]),e("div",["创意标签",e("span",{class:"des"},["已选：",this.planTagsConfig.length])]),e("div",["创意素材"]),e("div",["创意标题"]),e("div",{class:"edit-box template-box"},[e("div",{class:"edit-content"},[e("div",{class:"template"},[e("span",["投放方式："]),e("span",[na.Z.formatEmpty(G.Iu(t.smart_bid_type,G.k8))]),t.smart_bid_type!==G.ET.SMART_BID_CONSERVATIVE&&e("fragments",[e("span",["投放速度："]),e("span",[na.Z.formatEmpty(G.Iu(t.flow_control_mode,G.tE))])]),e("span",["转化目标："]),e("span",[na.Z.formatEmpty(G.Iu(t.external_action,G.af))]),t.smart_bid_type!==G.ET.SMART_BID_CONSERVATIVE&&t.flow_control_mode!==G.CM.FLOW_CONTROL_MODE_SMOOTH&&e("fragments",[e("span",["期待同时优化："]),e("span",[na.Z.formatEmpty(G.Iu(t.deep_external_action,G.Zc))])]),e("fragments",[e("span",["预算："]),e("span",[na.Z.formatEmpty(t.budget,"元")])]),t.bindding_method===G.uP.FIXED&&e("fragments",[e("span",["出价："]),e("span",[t.cpa_bid])]),(t.bindding_method===G.uP.RANDOM||t.bindding_method===G.uP.LADDER)&&e("fragments",[e("span",["阶梯出价："]),e("span",[t.min_cpa_bind," ~ ",t.max_cpa_bind])]),(t.live_schedule_type===G.Jy.SCHEDULE_TIME_ALLDAY||t.live_schedule_type===G.Jy.SCHEDULE_TIME_WEEKLY_SETTING)&&e("fragments",[e("span",["投放时间："]),e("span",[W()(t.start_time).format("YYYY.MM.DD")," ~",W()(t.end_time).format("YYYY.MM.DD")])]),e("span",["创意形式："]),e("span",[V.Z.isEmpty(t.smart_bid_type)?"--":t.image_mode===G.dU.AWEME_LIVE_ROOM?"直播间画面":"视频"])])]),e("div",{class:"edit-operation"},[e("span"),e("span",{class:`edit ${V.Z.isEmpty(this.Account.aweme_id)&&"disabled"}`,on:{click:()=>{V.Z.isEmpty(this.Account.aweme_id)||this.dialogPlanSettingRef?.show(this.Account.advertiser_id,JSON.parse(JSON.stringify(this.planSettingConfig)))}}},[V.Z.isEmpty(this.Account.aweme_id)&&e("el-popover",{attrs:{trigger:"hover",content:"请先选择千川账户和抖音号",placement:"top"}},[e("span",{slot:"reference"},["编辑"])]),!V.Z.isEmpty(this.Account.aweme_id)&&e("span",["编辑"])])])]),e("div",{class:"edit-box"},[e("div",{class:"tag-list edit-content"},[this.planOrientationPackageConfig.map(((t,a)=>e("div",{class:"item",key:a},[e("div",{class:"text"},[t.name?t.name:"临时包"]),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.planOrientationPackageConfig.splice(a,1),this.planInfo=[]}}})]))),0===this.planOrientationPackageConfig.length&&e("div",{class:"empty"},["暂无定向包"])]),e("div",{class:"edit-operation"},[e("span"),e("span",{class:`edit ${V.Z.isEmpty(this.planSettingConfig.smart_bid_type)&&"disabled"}`,on:{click:()=>{V.Z.isEmpty(this.planSettingConfig.smart_bid_type)||this.orientationPackageRef?.show(this.Account.advertiser_id,JSON.parse(JSON.stringify(this.planOrientationPackageConfig)))}}},[V.Z.isEmpty(this.planSettingConfig.smart_bid_type)&&e("el-popover",{attrs:{trigger:"hover",content:V.Z.isEmpty(this.Account.aweme_id)?"请先选择千川账户和抖音号":"请先选择计划设置",placement:"top"}},[e("span",{slot:"reference"},["添加"])]),!V.Z.isEmpty(this.planSettingConfig.smart_bid_type)&&e("span",["添加"])]),e("span",{class:"clear",on:{click:()=>{this.planOrientationPackageConfig=[],this.planInfo=[]}}},["清空"])])]),e("div",{class:"edit-box"},[e("div",{class:"tag-list edit-content"},[this.planTagsConfig.map(((t,a)=>e("div",{class:"item",key:a},[e("div",{class:"text"},[t.name?t.name:"临时标签"]),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.planTagsConfig.splice(a,1),this.planInfo=[]}}})]))),0===this.planTagsConfig.length&&e("div",{class:"empty"},["暂无创意标签"])]),e("div",{class:"edit-operation "},[e("span"),e("span",{class:"edit "+(0===this.planOrientationPackageConfig.length?"disabled":""),on:{click:()=>{0!==this.planOrientationPackageConfig.length&&this.tagPackageRef?.show(JSON.parse(JSON.stringify(this.planTagsConfig)))}}},[0===this.planOrientationPackageConfig.length&&e("el-popover",{attrs:{"popper-class":"el-popover-auto",trigger:"hover",content:V.Z.isEmpty(this.Account.aweme_id)?"请先选择千川账户和抖音号":V.Z.isEmpty(this.planSettingConfig.smart_bid_type)?"请先选择计划设置":"请先选定向包",placement:"top"}},[e("span",{slot:"reference"},["添加"])]),0!==this.planOrientationPackageConfig.length&&e("span",["添加"])]),e("span",{class:"clear",on:{click:()=>{this.planTagsConfig=[],this.planInfo=[]}}},["清空"])])]),e("div",{class:"edit-box"},[this.planSettingConfig.image_mode===G.dU.AWEME_LIVE_ROOM?e("fragments",[e("div",{class:"tag-list edit-content"},[e("div",{class:"empty"},["直播间画面无需选择素材"])]),e("div",{class:"edit-operation edit-operation-empty "})]):e("fragments",[0===this.planCreativeList.length&&e("div",{class:"empty"},["暂无创意素材"]),this.planCreativeList.length>0&&e("div",{class:"edit-content"},[e("div",{class:"template template_creative"},[e("span",["创意素材："]),e("span",[this.planCreativeList.length])])]),e("div",{class:"edit-operation "},[e("span"),e("span",{class:"edit "+(V.Z.isEmpty(this.planSettingConfig.smart_bid_type)?"disabled":""),on:{click:()=>{V.Z.isEmpty(this.planSettingConfig.smart_bid_type)||this.dialogCreativeListRef?.show(this.Account.advertiser_id,this.Account.aweme_id,JSON.parse(JSON.stringify(this.planCreativeConfig)))}}},[V.Z.isEmpty(this.planSettingConfig.smart_bid_type)&&e("el-popover",{attrs:{"popper-class":"el-popover-auto",trigger:"hover",content:V.Z.isEmpty(this.Account.aweme_id)?"请先选择千川账户和抖音号":V.Z.isEmpty(this.planSettingConfig.smart_bid_type)?"请先选择计划设置":"",placement:"top"}},[e("span",{slot:"reference"},["添加"])]),!V.Z.isEmpty(this.planSettingConfig.smart_bid_type)&&e("span",["添加"])]),e("span",{class:"clear",on:{click:()=>{this.planCreativeConfig.creative_list=[],this.planInfo=[]}}},["清空"])])])]),e("div",{class:"edit-box"},[e("div",{class:"tag-list edit-content"},[e("div",{class:"empty"},["暂不支持添加创意标题"])]),e("div",{class:"edit-operation edit-operation-empty "})])])])])},previewArea(){const e=this.$createElement;return e("fragments",[e("div",{class:"func-header tg-mgt--12"},[e("div",{class:"title"},["预览区"]),e("div",{class:"info"},[e("span",["广告计划数："]),e("span",{class:"number prominent"},[this.planInfo.length])])]),this.planInfo.length>0&&e("div",{class:"func-area",style:"flex:1"},[e("div",{class:"filter-header"},[e("div",{class:"filter-item"},[e("div",{class:"label"},["定向包："]),e("el-select",{attrs:{size:"small"},model:{value:this.planOrientationFilter,callback:e=>{this.planOrientationFilter=e}}},[e("el-option",{attrs:{label:"全部",value:void 0}}),this.planOrientationPackageConfig.map((t=>e("el-option",{attrs:{label:t.name,value:t.name},key:t.name})))])]),e("div",{class:"filter-item"},[e("div",{class:"label"},["创意标签："]),e("el-select",{attrs:{size:"small"},model:{value:this.planTagsFilter,callback:e=>{this.planTagsFilter=e}}},[e("el-option",{attrs:{label:"全部",value:void 0}}),this.planTagsConfig.map((t=>e("el-option",{attrs:{label:t.name,value:t.name},key:t.name})))])]),e("span",{class:"flex-fill"}),e("el-button",{attrs:{size:"small",type:"primary",disabled:this.hasCommitPlan},on:{click:this.submitPlan}},["全部提交审批"])]),e("div",{class:"select-advertise-group"},[e("el-button",{attrs:{type:"primary",size:"small",disabled:null===this.Account.advertiser_id},on:{click:()=>{this.dialogSelectAdvertiseGroupRef?.show(this.campaign_selected,this.Account.advertiser_id,this.Account.advertiser_list,this.Account.aweme_show_id)}}},["选择广告组"]),void 0===this.campaign_selected&&e("span",{class:"no-select"},["未选"]),void 0!==this.campaign_selected&&e("fragments",[e("span",{class:"label"},["名称："]),e("span",{class:"text"},[this.campaign_selected.campaign_name]),e("span",{class:"label"},["预算："]),"BUDGET_MODE_DAY"===this.campaign_selected.budget_mode&&e("span",{class:"text"},[this.campaign_selected.budget,"元"]),"BUDGET_MODE_DAY"!==this.campaign_selected.budget_mode&&e("span",{class:"text"},["不限"])])]),e("el-table",{attrs:{data:this.planInfoFilter,stripe:!0}},[e("el-table-column",{attrs:{label:"广告计划名称","min-width":300},scopedSlots:{default:({row:t,$index:a})=>{const l=`tablePopperName${a}`;return e("div",{class:"table-plan-name-box"},[e("span",[t.name]),e("span",{class:"edit"},[e("el-popover",{attrs:{width:342,trigger:"click"},ref:l,on:{show:()=>{(0,i.set)(t,"editTitleInput",t.name)}}},[e("tg-icon",{attrs:{name:"ico-edit"},slot:"reference"}),e("div",{class:"table-popover-edit"},[e("span",["广告计划名称："]),e("el-input",{attrs:{placeholder:"请输入广告计划名称",maxlength:50,"show-word-limit":!0,size:"small"},class:"fuck-right",model:{value:t.editTitleInput,callback:e=>{this.$set(t,"editTitleInput",e)}}}),e("div",{class:"operatioin"},[e("a",{class:"cancel",on:{click:()=>{this.$refs[l].doClose()}}},["取消"]),e("a",{class:"confirm",on:{click:()=>{V.Z.isEmpty(t.editTitleInput)||(t.name=t.editTitleInput,this.$refs[l].doClose())}}},["确认"])])])])])])}}}),e("el-table-column",{attrs:{label:"转化目标","min-width":94},scopedSlots:{default:({row:e})=>{const t=G.af.find((e=>e.value===this.planSettingConfig.external_action))||{label:"未知错误"};return t.label}}}),e("el-table-column",{attrs:{label:"预算","min-width":144,align:"right","render-header":()=>e("span",{style:"padding-right:24px"},["预算"])},scopedSlots:{default:({row:t,$index:a})=>{const l=`tablePopperBudget${a}`;return e("div",{class:"table-plan-price-edit"},[e("span",["￥ ",t.budget]),e("span",{class:"edit"},[e("el-popover",{attrs:{width:268,trigger:"click"},ref:l,on:{show:()=>{(0,i.set)(t,"editBudgetInput",t.budget)}}},[e("tg-icon",{attrs:{name:"ico-edit"},slot:"reference"}),e("div",{class:"table-popover-edit"},[e("span",["预算："]),e("el-input",{attrs:{placeholder:"请输入预算金额",maxlength:50,size:"small",value:t.editBudgetInput},on:{input:e=>{(0,i.set)(t,"editBudgetInput",u.Z.IntergerAndDecimals(e))}}},[e("span",{slot:"append"},["元"])]),e("div",{class:"operatioin"},[e("a",{class:"cancel",on:{click:()=>{this.$refs[l].doClose()}}},["取消"]),e("a",{class:"confirm",on:{click:()=>{V.Z.isEmpty(t.editBudgetInput)||(t.budget=t.editBudgetInput,this.$refs[l].doClose())}}},["确认"])])])])])])}}}),e("el-table-column",{attrs:{label:"出价","min-width":126,align:"right","render-header":()=>e("span",{style:"padding-right:24px"},["出价"])},scopedSlots:{default:({row:t,$index:a})=>{const l=`tablePopperCpaBid${a}`;return void 0===t.cpa_bid?"--":e("div",{class:"table-plan-price-edit"},[e("span",["￥ ",t.cpa_bid]),e("span",{class:"edit"},[e("el-popover",{attrs:{width:268,trigger:"click"},ref:l,on:{show:()=>{(0,i.set)(t,"editCpabidInput",t.cpa_bid)}}},[e("tg-icon",{attrs:{name:"ico-edit"},slot:"reference"}),e("div",{class:"table-popover-edit"},[e("span",["出价："]),e("el-input",{attrs:{placeholder:"请输入出价金额",maxlength:50,size:"small",value:t.editCpabidInput},on:{input:e=>{(0,i.set)(t,"editCpabidInput",u.Z.IntergerAndDecimals(e))}}},[e("span",{slot:"append"},["元"])]),e("div",{class:"operatioin"},[e("a",{class:"cancel",on:{click:()=>{this.$refs[l].doClose()}}},["取消"]),e("a",{class:"confirm",on:{click:()=>{V.Z.isEmpty(t.editCpabidInput)||(t.cpa_bid=t.editCpabidInput,this.$refs[l].doClose())}}},["确认"])])])])])])}}}),e("el-table-column",{attrs:{label:"定向包","min-width":194},scopedSlots:{default:({row:e})=>this.planOrientationPackageConfig[e.audience]?.name}}),e("el-table-column",{attrs:{label:"创意标签","min-width":194},scopedSlots:{default:({row:e})=>this.planTagsConfig[e.tag]?.name}}),e("el-table-column",{attrs:{label:"提交状态","min-width":194},scopedSlots:{default:({row:t})=>{switch(t.status){case 0:return e("span",{class:"table-status-yellow"},["待提交"]);case 2:return e("span",{class:"table-status-red"},["不通过: ",t.errMessage]);case 1:return e("span",{class:"table-status-green"},["通过"])}}}}),e("el-table-column",{attrs:{label:"操作","min-width":70},scopedSlots:{default:({row:t})=>e("span",{style:"cursor: pointer;",on:{click:()=>{const e=this.planInfo.findIndex((e=>e.name===t.name));this.planInfo.splice(e,1)}}},["删除"])}}),e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"请完成模块配置后再预览广告计划"}})])])]),0===this.planInfo.length&&e("div",{class:"func-area func-area-emtpy",style:"flex:1"},[e("empty-common",{attrs:{"detial-text":"请完成模块配置后再预览广告计划"}})])])}},render(){const e=arguments[0];return e("div",{class:"plan-create-container tg-page-container"},[e("tg-breadcrumbs",{attrs:{routes:this.routes}}),this.configArea(),this.previewArea(),e("dialog-select-advertise-group",{ref:"dialogSelectAdvertiseGroupRef",on:{change:e=>{this.campaign_selected=e}}}),e("dialog-plan-setting",{ref:"dialogPlanSettingRef",on:{change:e=>{console.log("计划设置",e),this.planSettingConfig=e,this.planInfo=[]}}}),e("orientation-package",{ref:"orientationPackageRef",on:{change:e=>{console.log("定向包",e),this.planOrientationPackageConfig=e,this.planInfo=[]}}}),e("tag-package",{ref:"tagPackageRef",on:{change:e=>{this.planTagsConfig=e,this.planInfo=[]}}}),e("dialog-creative-list",{ref:"dialogCreativeListRef",on:{change:e=>{this.planCreativeConfig=e,this.planInfo=[]}}}),e("el-dialog",{class:"el-dialog-center-rewrite",attrs:{"custom-class":"dialog-process-popper","close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1,width:"400px",visible:this.showSubmitLoading}},[e("div",{class:"dialog-process"},[e("el-progress",{attrs:{type:"circle",color:"#2877FF",percentage:Math.floor(this.showSubmitProcess[0]/this.showSubmitProcess[1]*100),format:()=>`${this.showSubmitProcess[0]}/${this.showSubmitProcess[1]}`}}),e("span",{class:"text"},["提交中"])])])])}}),ma=pa,ha=(0,f.Z)(ma,da,ua,!1,null,"764fdee0",null),va=ha.exports},11676:function(e,t,a){a.d(t,{K:function(){return u}});a(26699);var i=a(48606);const l=[".pdf",".doc",".docx",".ppt",".pptx"],s=[".mp4"],n=[".png",".jpg",".jpeg"],o=[".xls",".xlsx",".csv"],r=[".doc",".docx"],c=[".pdf"],d=[".csv"],u=e=>t=>{const a=/(\.[^.]+)$/.exec(t.name);let u="";a&&(u=a[1]);const p=[];if(e.image&&p.push(...n),e.file&&p.push(...l),e.video&&p.push(...s),e.excel&&p.push(...o),e.pdf&&p.push(...c),e.doc&&p.push(...r),e.csv&&p.push(...d),e.extensions&&p.push(...e.extensions),p.length>0&&!p.includes(u))return i.Message.warning(`文件格式不正确，请使用 ${p.join(";")}`),!1;if(void 0!==e.fileSize){const a=t.size/1024/1024<e.fileSize;if(!a)return i.Message.warning(`文件不能超过${e.fileSize}MB!`),!1}return!0};t["Z"]={ValidationFileUpload:u}},52970:function(e,t,a){a.d(t,{A7:function(){return O},AS:function(){return d},B1:function(){return E},Cb:function(){return v},Db:function(){return R},Eo:function(){return g},JO:function(){return w},OA:function(){return M},OR:function(){return S},V$:function(){return x},V1:function(){return A},Vk:function(){return _},Xk:function(){return f},Xq:function(){return r},Yn:function(){return m},_L:function(){return c},aS:function(){return p},c9:function(){return I},de:function(){return L},dq:function(){return C},ew:function(){return D},fA:function(){return y},mU:function(){return u},mh:function(){return n},tn:function(){return h},w5:function(){return N},wH:function(){return o},yT:function(){return T},yq:function(){return b}});a(21703);var i=a(76012),l=a(64236);const s=e=>{if(!0!==e.data.success)throw new Error(e.data.message);return e.data.data},n=async e=>(0,i.SO)("/api/advertising/douyin_accounts",{...e}),o=async()=>(0,i.dX)("/api/advertising/douyin_accounts"),r=async e=>(0,i.HG)("/api/advertising/douyin_accounts/"+e),c=async e=>(0,i.dX)("/api/oceanengine/ad/advertiser_list",{params:{keyword:e}}).then(s),d=async(e,t)=>(0,i.dX)("/api/oceanengine/ad/aweme_list",{params:{advertiser_id:e,keyword:t}}).then(s),u=async()=>(0,i.dX)("/api/oceanengine/ad_plan/get_ad_templates").then(s),p=async(e,t,a)=>(0,i.SO)("/api/oceanengine/ad_plan/save_ad_template",{advertiser_id:e,template_name:t,marketing_goal:"LIVE_PROM_GOODS",content:a}).then(s),m=async e=>(0,i.dX)("/api/oceanengine/ad_plan/get_ad_audiences",{params:e}).then(s),h=async()=>(0,i.dX)("/api/oceanengine/ad/city").then(s),v=async(e,t,a)=>(0,i.SO)("/api/oceanengine/ad/action_category",{advertiser_id:e,action_scene:t,action_days:a}).then(s),g=async(e,t,a,l)=>(0,i.SO)("/api/oceanengine/ad/action_keyword",{advertiser_id:e,action_scene:t,action_days:a,query_words:l}).then(s),_=async(e,t)=>(0,i.SO)("/api/oceanengine/ad/interest_keyword",{advertiser_id:e,query_words:t}).then(s),f=async(e,t,a,l,n)=>(0,i.dX)("/api/oceanengine/ad/keyword_suggest",{params:{id:e,action_scene:t,action_days:a,tag_type:l,targeting_type:n}}).then(s),b=async e=>(0,i.SO)("/api/oceanengine/ad/interest_category",{advertiser_id:e}).then(s),y=async e=>(0,i.SO)("/api/oceanengine/ad/id2word",e).then(s),E=async(e,t)=>(0,i.dX)("/api/oceanengine/ad/aweme_multi_level_category",{params:{advertiser_id:e,behaviors:t.filter((e=>null!==e&&"null"!==e))}}).then(s),k=e=>e.map((e=>(e.value=e.author_name,e.id=e.label_id,e.fans_num_str=e.total_fans_num_str,e.type="ACCOUNT",e))),C=async(e,t)=>(0,i.dX)("/api/oceanengine/ad/aweme_category_top_author",{params:{category_id:e,behaviors:t.filter((e=>null!==e&&"null"!==e))}}).then(s).then((e=>k(e.authors))),w=async e=>(0,i.dX)("/api/oceanengine/ad/aweme_similar_author_search",{params:{aweme_id:e}}).then(s).then((e=>k(e.list))),A=async e=>(0,i.dX)("/api/oceanengine/ad/aweme_info_search",{params:{query_word:e}}).then(s).then((e=>{const t=e.list[0];return t||{categories:[],authors:[]}})),T=async(e,t,a,l)=>(0,i.SO)("/api/oceanengine/ad_plan/save_ad_audience",{id:l,advertiser_id:e,name:t,content:a}).then(s),O=async e=>(0,i.dX)("/api/oceanengine/ad_campaign/query_camp",{params:e}).then(s),S=async e=>(0,i.SO)("/api/oceanengine/ad_plan/check_name",{list:e}).then(s),x=async e=>(0,i.SO)("/api/oceanengine/ad_plan/save_ad_plan_task",e).then(s),L=async e=>(0,i.dX)("/api/oceanengine/ad_plan/get_plan_status",{params:{batch_id:e}}).then(s),I=async e=>(0,i.SO)("/api/oceanengine/ad_plan/del_ad_audience",{id:e}).then(s),N=async e=>(0,i.SO)("/api/oceanengine/ad_campaign/save",e).then(s),R=async e=>(0,i.SO)("/api/oceanengine/ad/aweme_author_info",e).then(s),D=async e=>(0,i.dX)("/api/oceanengine/ad/get_aweme_video",{params:{...(0,l.jG)(e),count:30}}).then(s),M=async(e,t)=>{const a=new FormData;return a.append("file",e,"file.png"),(0,i.SO)(`/api/oceanengine/ad/ad_image_upload?advertiser_id=${t}`,a).then(s)}},82741:function(e,t,a){a.d(t,{I:function(){return l},u:function(){return s}});var i=a(71340);const l=(e,t)=>{const a="string"===typeof t?{title:t}:t;return new Promise((t=>{e.root.$TDialog({...a,onConfirm:()=>t(!0),onCancel:()=>t(!1)})}))},s=e=>{const t="string"===typeof e?{title:e}:e;return new Promise(((e,a)=>{(0,i.t)({...t,onConfirm:()=>e(!0),onCancel:()=>a()})}))}},23812:function(e,t,a){a.d(t,{GQ:function(){return o},YE:function(){return s},cY:function(){return r},pK:function(){return n}});var i=a(97434),l=a(44928);const s=(e,t)=>({tabs:(0,i.reactive)([...e]),checkedTab:(0,i.ref)(t??(e.length<1?"":e[0].value))}),n=(e,t)=>{const a=(0,i.isRef)(e)?e:(0,i.ref)(e),l=(0,i.isRef)(t)?(0,i.unref)(t):t,s=a.value.length<1?"":a.value[0].value,n=(0,i.ref)(l??s);return{tabs:a,checkedTab:n}},o=(e,t,a)=>{const l=(0,i.reactive)([...t]),s=(0,i.ref)(a??(t.length<1?"":`${t[0].value}`)),n=t=>{e.root.$router.push({path:e.root.$route.path,query:{tab:`${t.value}`}})};return(0,i.onBeforeMount)((()=>{const i=e.root.$route.query.tab;s.value="string"===typeof i?i:a??(t.length<1?"":`${t[0].value}`)})),{tabs:l,checkedTab:s,onTabChange:n}},r=(e,t)=>{const a=(0,i.reactive)([...e]),s=(0,i.ref)(t??(e.length<1?"":`${e[0].value}`)),n=(0,l.t)(),o=e=>{const t=n.currentRoute,a={...t.params,tab:e.value};n.push({name:t.name,params:a})};return s.value=n.currentRoute.params.tab||t||s.value,{tabs:a,checkedTab:s,onTabChange:o}}},44928:function(e,t,a){a.d(t,{t:function(){return l}});var i=a(86834);const l=()=>{const e=new Proxy({},{get(e,t){return Reflect.get(i.Z,t)}});return e}},69820:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAeKADAAQAAAABAAAAeAAAAAAI4lXuAAAEGklEQVR4Ae2cPWgUQRiG74wRNAgSECvtbFQQAgo2YqmVoL1/iGJS+tMasRD8KdVSTe1fp6XYWAiCEG2soo0REYOihcj5vsWRXNy729vbTXZmnoGPu52dmdw8T769vfuMjQYNAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCBQBoFWqzWuaJaxFmvUhICEjiqmFfMKtwXFdcXGmrxEXsYwBCTyviKrzanz4DBrM3eVCUjgRJbZZX0PdDy+yi+VH1+EgMRNLZPZ7fCzThwt8jNimrMmwM1szvmat2jcQ0l2+HmSLUTBg4pyFr+X5GODToxhfAqC7cnvx35ffqbYGoO4vHtIRXCbh++w30nyOUUSn51TE2zR/qx8R/FCkre7I+aWouC2z/168laSLyhG2p2xPaYs2C7XK24oXknyLnfE1lIX3Pa5R0/eSPJlxWi7M4ZHBC9atNhphUVbeBQNwf9r9KXal2wXL3wJD7ohOFufb7ouKnwT5puxYBuCe6vzxyh/nLqtCLIUieDegn3WX4hMKmYlObhSJIKtMF/bpmH+qjOoUiSC88ldOspFCxcvgihFInipuvzPgylFIji/1KyRtS9FIjhL22B9S0uRfp+uVUNweTp8h+077VqVIhFcnmCv1C5FPpHodeUuXWw1BBfj1m/WYQ241W/QSpxHcHWUTyqLN1S3fL6VEZyPU5FRY5q0qcjEMucguEyanWv91OH3zq6VP0JwdczvNZvNX9Utn29lBOfjNOiop5pwftBJVYxHcLlUf2i5KcURZe+fcpcuttraYtOYlUHgufrOSuzHjHOr1kUGD4/+m5Y4IbGH6ibXWyODhxP8WNMnJXZ+uGWqm43gYmwtdEpiHxWbvnKzuEQPznpGU3aEINdbI4PzC/6koWck1jdTwTQyuL+qlobcVewMTa63RgabQvf2QadOS+zL7kPqfYYMzvbzV903FbtDluutkcGm0NlmdXhKYl93dod5RAYvevNXi1cUE7HI9dbIYFNoNJytzlpnb1Qt9Qz+LZuXFPtilOvf1JQz2HfGvkP2nXK0LcUMbpf0DsQu17+1qWVwLUt6VV4+Uslgl/SOK2NrWdKrUnAKGeyKjys/tS3pIbiTwELnYdejYEp6XXeQ4gn9Y/K9in4tqD/STtFjzz3LrgVmtTl1BvffLPTcbIonJXFEcVXxVeH2RXFN4T/+osVCQEItesyPseyJfUAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAAC6RL4B9iTsWMvTK1aAAAAAElFTkSuQmCC"}}]);