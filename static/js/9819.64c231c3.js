"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[9819],{97457:function(e,t,a){a.d(t,{Z:function(){return _}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CardLayout",{staticClass:"tg-adjust-account-container",attrs:{padding:[18,0,0,0]},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0},"company"===e.ExtendItem||"anchor"===e.ExtendItem||"livedouyinself"===e.ExtendItem?{key:"desc",fn:function(){return[a("div",{staticClass:"topBar"},[a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px"},attrs:{label:"","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"+("company"===e.ExtendItem?"机构":"customer"===e.ExtendItem?"客户":"livedouyinself"===e.ExtendItem?"主播或公司":"主播"),size:"small","popper-class":"tg-adjust-component-top-select"},model:{value:e.filterOption,callback:function(t){e.filterOption=t},expression:"filterOption"}},[a("el-option",{attrs:{value:"",label:"company"===e.ExtendItem?"全部机构":"customer"===e.ExtendItem?"全部客户":"livedouyinself"===e.ExtendItem?"全部主播或公司":"全部主播"}},[a("span",[e._v(e._s("company"===e.ExtendItem?"全部机构":"customer"===e.ExtendItem?"全部客户":"livedouyinself"===e.ExtendItem?"全部主播或公司":"全部主播"))])]),e._l(e.allSelectData,(function(t,n){return a("el-option",{key:n,staticStyle:{width:"158px"},attrs:{label:t.real_name||t.name,value:t.real_name||t.name}},[a("span",[e._v(e._s(t.real_name||t.name))])])}))],2)],1)],1)]},proxy:!0}:null],null,!0)},[a("div",{staticClass:"adjust-account-content",style:"grid-template-rows: 44px "+(e.total_height-102)+"px;"},[a("div",{staticClass:"pdl-18 pdr-18"},[e.AdjustInfoList.length<e.MaxAdjustSize?a("tg-ghost-button",{staticClass:"flex-none",on:{click:e.addItemHandler}},[a("a",[e._v("点击添加")])]):a("el-tooltip",{attrs:{content:"最多上传"+e.MaxAdjustSize+"条手工调账",placement:"top",effect:"light"}},[a("tg-ghost-button",{staticClass:"flex-none disabled-tg-ghost-button"},[a("a",[e._v("点击添加")])])],1)],1),a("div",{staticClass:"item-container"},[a("div",{staticClass:"item-list",style:"height: "+(134*e.DisplayAdjustInfoList.length-18)+"px;grid-template-rows: repeat("+e.DisplayAdjustInfoList.length+", 116px)"},e._l(e.DisplayAdjustInfoList,(function(t,n){return a("div",{key:n,staticClass:"one-item-block"},[e.AdjustInfoList.length>1?a("tg-icon",{staticClass:"form-item-remove-btn",attrs:{name:"ico-frm-delete","hover-name":"ico-frm-delete-active"},on:{click:function(t){return e.removeItemHandler(n)}}}):e._e(),e.Showlivedouyinself||e.ShowlivedouyinselfAfter?a("el-form-item",{staticClass:"inline-form-item",style:{marginBottom:e.ShowlivedouyinselfAfter?"12px":"0px"},attrs:{label:"结算方式","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"small","popper-class":"tg-adjust-component-select"},on:{change:function(a){return e.handlerSelectWayChange(t,n)}},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},e._l(e.costOptions,(function(t,n){return a("el-option",{key:n,attrs:{label:t.label,value:t.value,disabled:e.itemTyepDisabled(t.value)}},[a("span",[e._v(e._s(t.label))])])})),1)],1):e._e(),e.ShowCompany?a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px"},attrs:{label:"company"===e.ExtendItem?"选择机构":"supplier"===e.ExtendItem?"供应商":"客户","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"company"===e.ExtendItem?"请选择机构":"supplier"===e.ExtendItem?"请选择供应商":"请选择客户",size:"small","popper-class":"tg-adjust-component-select"},on:{change:function(a){return e.handlerSelectChange(t.company_name,n)}},model:{value:t.company_name,callback:function(a){e.$set(t,"company_name",a)},expression:"item.company_name"}},e._l(e.allSelectData,(function(t,n){return a("el-option",{key:n,attrs:{label:t.name,value:t.name}},[a("span",[e._v(e._s(t.name))])])})),1)],1):e._e(),!e.Showlivedouyinself||t.type!==e.SettlementIncomeType.put&&t.type!==e.SettlementIncomeType.other?e._e():a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px","margin-top":"12px"},attrs:{label:"选择公司","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择公司",size:"small","popper-class":"tg-adjust-component-select"},on:{change:function(a){return e.handlerSelectChange(t.company_name,n)}},model:{value:t.company_name,callback:function(a){e.$set(t,"company_name",a)},expression:"item.company_name"}},e._l(t.type===e.SettlementIncomeType.put?e.allCompanySelectData:e.allOtherSelectData,(function(n,l){return a("el-option",{key:l,attrs:{label:n.name,value:n.name,disabled:e.itemDisabled(t.type,n.name)}},[a("span",[e._v(e._s(n.name))])])})),1)],1),e.ShowAnchor||e.Showlivedouyinself&&t.type===e.SettlementIncomeType.anchor?a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px"},style:{marginTop:t.type===e.SettlementIncomeType.anchor?"12px":"0px"},attrs:{label:"选择主播","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择主播",size:"small","popper-class":"tg-adjust-component-select"},on:{change:function(a){return e.handlerSelectChange(t.real_name,n)}},model:{value:t.real_name,callback:function(a){e.$set(t,"real_name",a)},expression:"item.real_name"}},e._l(e.allKolSelectData,(function(t,n){return a("el-option",{key:n,attrs:{label:t.real_name||t.name,value:t.real_name||t.name,disabled:e.itemDisabled(9,t.real_name||t.name)}},[a("span",[e._v(e._s(t.real_name||t.name))])])})),1)],1):e._e(),e.ShowProject?a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px"},attrs:{label:"调整项目","label-width":"68px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择调整项目",size:"small","popper-class":"tg-adjust-component-select"},on:{change:function(a){return e.handlerSelectChange(t.project_name,n)}},model:{value:t.project_name,callback:function(a){e.$set(t,"project_name",a)},expression:"item.project_name"}},e._l(e.allSelectData,(function(t,n){return a("el-option",{key:n,attrs:{label:t.name,value:t.name}},[a("span",[e._v(e._s(t.name))])])})),1)],1):e._e(),e.Showlivedouyinself&&t.type||!e.Showlivedouyinself?a("el-form-item",{staticClass:"inline-form-item",staticStyle:{"margin-bottom":"12px"},attrs:{label:"调整金额","label-width":"68px"}},[a("el-input",{attrs:{placeholder:"0.00",maxlength:"13"},on:{input:function(t){return e.getAdjustAmountNumber(t,n)}},scopedSlots:e._u([{key:"append",fn:function(){return[e._v("元")]},proxy:!0}],null,!0),model:{value:t.adjust_amount,callback:function(a){e.$set(t,"adjust_amount","string"===typeof a?a.trim():a)},expression:"item.adjust_amount"}})],1):e._e(),e.Showlivedouyinself&&t.type||!e.Showlivedouyinself?a("el-form-item",{staticClass:"inline-form-item",attrs:{label:"调整原因","label-width":"68px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入调整原因",maxlength:"50",rows:"6"},model:{value:t.adjust_reason,callback:function(a){e.$set(t,"adjust_reason","string"===typeof a?a.trim():a)},expression:"item.adjust_reason"}})],1):e._e()],1)})),0)])])])},l=[],o=a(97434),s=a(28348),i=a(99048),m=a(64236),r=a(41572),p=a(53451),u=a.n(p);const{debounce:c}=u();var d;(function(e){e["company"]="company",e["anchor"]="anchor",e["customer"]="customer",e["supplier"]="supplier",e["project"]="project",e["livedouyinself"]="livedouyinself",e["livedouyinselfAfter"]="livedouyinselfAfter"})(d||(d={}));var h=(0,o.defineComponent)({name:"TgAdjustAccountForm",components:{CardLayout:i.Z},props:{height:{type:Number,default:320},ExtendItem:{type:String,default:""},ExtendItemSelectOptions:{type:Array,required:!1},adjust_info:{type:Array,required:!1},ExtendItemkolSelectOptions:{type:Array,required:!1,default:()=>[]},ExtendItemcompanySelectOptions:{type:Array,required:!1,default:()=>[]},ExtendItemOtherSelectOptions:{type:Array,required:!1,default:()=>[]}},setup(e,t){const a=(0,o.computed)((()=>e.height)),n=(0,o.computed)((()=>e.ExtendItem===d.company||e.ExtendItem===d.customer||e.ExtendItem===d.supplier)),l=(0,o.computed)((()=>e.ExtendItem===d.anchor)),i=(0,o.computed)((()=>e.ExtendItem===d.project)),p=(0,o.computed)((()=>e.ExtendItem===d.livedouyinself)),u=(0,o.computed)((()=>e.ExtendItem===d.livedouyinselfAfter)),h=(0,o.computed)((()=>e.ExtendItem&&""!==e.ExtendItem?100:10)),v=(0,o.ref)(""),f="手工调账",y=(0,o.computed)((()=>e.ExtendItem===d.company||e.ExtendItem===d.customer||e.ExtendItem===d.supplier?{adjust_amount:"",adjust_reason:"",company_id:"",company_name:"",hidden_name:void 0}:e.ExtendItem===d.anchor?{adjust_amount:"",adjust_reason:"",kol_id:"",kol_name:"",real_name:void 0,hidden_name:void 0}:e.ExtendItem===d.project?{adjust_amount:"",adjust_reason:"",company_id:void 0,company_name:void 0,type:void 0,hidden_name:void 0}:e.ExtendItem===d.livedouyinself?{adjust_amount:"",adjust_reason:"",kol_id:"",kol_name:"",real_name:void 0,company_id:"",company_name:"",type:void 0,hidden_name:void 0}:{adjust_amount:"",adjust_reason:""})),_=(e.adjust_info??[]).length?e.adjust_info:[(0,m.Qc)(y.value)],x=e=>(e.forEach((e=>{l.value?e.hidden_name=e.real_name||e.kol_name:n.value?e.hidden_name=e.company_name:i.value?e.hidden_name=e.project_name:p.value||u.value?9===e.type?(e.hidden_name=e.real_name||e.kol_name,e.company_name=void 0):(e.hidden_name=e.company_name||e.hidden_name,e.kol_name=void 0):e.hidden_name=e.hidden_name||void 0})),e),b=e=>x(e),I=(0,o.ref)(b([..._])),g=e=>{const t=[];return e.map((e=>{const{hidden_name:a,...n}=e;t.push(n)})),t},S=()=>g(I.value),j=()=>{t.emit("DataChange",S())},E=c(j,200);(0,o.watch)((()=>JSON.stringify(I.value)),(e=>{e&&E()})),(0,o.watch)((()=>v.value),(e=>{(e||""===e)&&(I.value=x(I.value))}));const k=()=>{const e=(0,m.Qc)(y.value);v.value&&(e.hidden_name=v.value),I.value.unshift(e),E()},w=e=>{I.value.length>1&&I.value.splice(e,1),E()},C=e=>(/-?(?:(?:0|[1-9]\d{0,7})(?:\.\d{0,2})?)?/u.exec(e.replace(/[^-.\d]+/gu,"").replace(r.Pj,""))??[""])[0],A=(e,t)=>{const a=C(e);I.value[t].adjust_amount=a},O=(0,o.computed)((()=>e.ExtendItemSelectOptions)),$=(0,o.computed)((()=>p.value&&e.ExtendItemkolSelectOptions?e.ExtendItemkolSelectOptions:e.ExtendItemSelectOptions)),D=(0,o.computed)((()=>p.value&&e.ExtendItemcompanySelectOptions?e.ExtendItemcompanySelectOptions:e.ExtendItemSelectOptions)),T=(0,o.computed)((()=>p.value&&e.ExtendItemOtherSelectOptions?e.ExtendItemOtherSelectOptions:e.ExtendItemSelectOptions)),z=(0,o.computed)((()=>{if(""!==v.value){if(n.value)return I.value.filter((e=>e.company_name===v.value||e.hidden_name===v.value));if(l.value)return I.value.filter((e=>e.kol_name===v.value||e.hidden_name===v.value));if(p.value||u.value){const e=I.value.filter((e=>e.company_name===v.value||e.kol_name===v.value||e.hidden_name===v.value));return e||[]}if(i.value)return I.value.filter((e=>e.project_name===v.value||e.hidden_name===v.value))}return I.value})),L=(e,t)=>{if(""===v.value){const a=O.value?.find((t=>t.real_name===e||t.name===e));n.value?I.value[t].company_id=a?.id:l.value?(I.value[t].kol_id=a?.id,I.value[t].kol_name=a?.name,I.value[t].real_name=a?.real_name):p.value||u.value?9===I.value[t].type?(I.value[t].kol_id=a?.id,I.value[t].kol_name=a?.name,I.value[t].real_name=a?.real_name):I.value[t].company_id=a?.id:i.value&&(I.value[t].type=a?.type),I.value[t].hidden_name=e}},W=(0,o.computed)((()=>{const e=[];return s.mR.forEach(((t,a)=>{e.push({label:t,value:a})})),e})),q=(e,t)=>{e.company_name="",e.kol_name="",I.value[t]=e},H=(e,t)=>{if(p.value||u.value){let a=!1;return I.value.map((n=>{n.type!==e||n.real_name!==t&&n.kol_name!==t&&n.company_name!==t||(a=!0)})),a}{let e=!1;return I.value.map((a=>{a.real_name!==t&&a.kol_name!==t&&a.company_name!==t||(e=!0)})),e}},N=e=>{if(u.value){let t=!1;return I.value.map((a=>{a.type===e&&(t=!0)})),t}return!1};return{itemTyepDisabled:N,itemDisabled:H,allOtherSelectData:T,allCompanySelectData:D,allKolSelectData:$,handlerSelectWayChange:q,ShowlivedouyinselfAfter:u,Showlivedouyinself:p,SettlementIncomeType:s.eY,costOptions:W,total_height:a,title:f,ShowCompany:n,ShowAnchor:l,ShowProject:i,DisplayAdjustInfoList:z,filterOption:v,allSelectData:O,MaxAdjustSize:h,handlerSelectChange:L,getAdjustAmountNumber:A,AdjustInfoList:I,addItemHandler:k,removeItemHandler:w}}}),v=h,f=a(1001),y=(0,f.Z)(v,n,l,!1,null,null,null),_=y.exports},32851:function(e,t,a){var n=a(97434),l=a(85937),o=a.n(l),s=a(61282);const i=(0,n.defineComponent)({props:{amount:{type:[String,Object]},incomeType:{type:Number,defalut:2,required:!1},topHeightType:{type:String,default:"value1"},leftItemExpand:{type:Boolean,default:!1},leftItemWidth:{type:Number}},setup(e){const t=(0,n.computed)((()=>"string"===typeof e.amount?e.amount:(0,s.SJ)(e.amount??new(o())(0)))),a=(0,n.computed)((()=>e.incomeType||2));return{final_amount:t,newincomeType:a}},render(){const e=arguments[0],t=void 0!==this.$slots.center,a=[];let n,l=0,o=0,s=0,i=0;void 0!==this.$slots.top&&a.push(e("div",{class:"step2-layout-content-top"},this.$slots.top)),void 0!==this.$slots.left&&(a.push(e("div",{class:"step2-layout-content-left"},this.$slots.left)),i+=1),t&&(a.push(e("div",{class:"step2-layout-content-center"},this.$slots.center)),i+=1),void 0!==this.$slots.right&&(a.push(e("div",{class:"step2-layout-content-right"},this.$slots.right)),i+=1),void 0!==this.$slots.bottom&&a.push(e("div",{class:"step2-layout-content-bottom"},this.$slots.bottom)),"default"===this.$props.topHeightType?(l=24,o=414,s=50):(l=118,o=320,s=50),1===i?n=this.leftItemExpand?"1fr 0":this.leftItemWidth?`${this.leftItemWidth}px 0`:"286px 0":2===i?n=this.leftItemExpand?"1fr 286px":this.leftItemWidth?`${this.leftItemWidth}px 286px`:"repeat(2, 286px)":3===i&&(n=this.leftItemExpand?"1fr repeat(2, 286px)":this.leftItemWidth?`${this.leftItemWidth}px repeat(2, 286px)`:"repeat(3, 286px)");const m={gridTemplateRows:`${l}px ${o}px ${s}px`,gridTemplateColumns:n,justifyContent:this.leftItemExpand?void 0:"center",columnGap:1===i?"0":"18px"};return e("div",{class:"step2-layout"},[e("div",{class:["step2-layout-content",t?"col-3":"col-2",1===this.newincomeType?"step2-content-one":2===this.newincomeType?"step2-content-two":"step2-content-three"],style:m},[a]),e("div",{class:"bottom-button-line "},[this.$slots.button]),this.$slots.mask])}});t["Z"]=i}}]);