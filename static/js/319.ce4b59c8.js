"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[319],{50258:function(e,a,t){t.d(a,{Z:function(){return v}});var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new advance-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.visible,isAppendToBody:!0,isfooter:!0,width:"930px"},on:{close:e.emitClose},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",[e._v("垫款申请")])]},proxy:!0},{key:"footer",fn:function(){return[t("tg-button",{attrs:{type:"default"},on:{click:e.handleDialogCancel}},[e._v("取消")]),t("tg-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleDialogSubmit()}}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"form-wrapper"},[t("el-form",{ref:"advanceFormRef",attrs:{rules:e.advanceFormRules,model:e.advanceForm,inline:"","label-width":"106px"}},[t("el-form-item",{attrs:{label:"部门：",prop:"department"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:"",size:"small",placeholder:"请输入部门"},model:{value:e.advanceForm.department,callback:function(a){e.$set(e.advanceForm,"department","string"===typeof a?a.trim():a)},expression:"advanceForm.department"}})],1),t("el-form-item",{attrs:{label:"需垫款客户：",prop:"customer_id"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"请输入并选择","remote-method":e.getAllCustomerName},on:{change:e.onCustomerIdChange},model:{value:e.advanceForm.customer_id,callback:function(a){e.$set(e.advanceForm,"customer_id",a)},expression:"advanceForm.customer_id"}},e._l(e.allCustomerName,(function(a,i){return t("el-option",{key:i,attrs:{label:a.name,value:a.id}},[t("span",[e._v(e._s(a.name))])])})),1)],1),t("el-form-item",{attrs:{label:"项目：",prop:"project_id"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",clearable:"",placeholder:"请选择项目"},on:{change:e.onProjectIdChange},model:{value:e.advanceForm.project_id,callback:function(a){e.$set(e.advanceForm,"project_id",a)},expression:"advanceForm.project_id"}},e._l(e.allProjectName,(function(a,i){return t("el-option",{key:i,attrs:{label:a.name,value:a.project_id}},[t("span",[e._v(e._s(a.name))])])})),1)],1),5!==e.advanceForm.business_type?t("el-form-item",{attrs:{label:"品牌：",prop:"brand_name"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:"",size:"small",placeholder:"请输入品牌"},model:{value:e.advanceForm.brand_name,callback:function(a){e.$set(e.advanceForm,"brand_name","string"===typeof a?a.trim():a)},expression:"advanceForm.brand_name"}})],1):e._e(),t("el-form-item",{attrs:{label:"垫款金额：",prop:"borrowing_amount"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请输入垫款金额"},on:{input:function(a){return e.inputAmount(a,"borrowing_amount")}},model:{value:e.advanceForm.borrowing_amount,callback:function(a){e.$set(e.advanceForm,"borrowing_amount","string"===typeof a?a.trim():a)},expression:"advanceForm.borrowing_amount"}})],1),t("el-form-item",{attrs:{label:"回款销售额：",prop:"pay_back_amount"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请输入回款销售额"},on:{input:function(a){return e.inputAmount(a,"pay_back_amount")}},model:{value:e.advanceForm.pay_back_amount,callback:function(a){e.$set(e.advanceForm,"pay_back_amount","string"===typeof a?a.trim():a)},expression:"advanceForm.pay_back_amount"}})],1),t("el-form-item",{attrs:{label:"供应商：",prop:"supplier_id"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"请输入并选择","remote-method":e.getAllSupplierName},on:{change:e.onSupplierIdChange},model:{value:e.advanceForm.supplier_id,callback:function(a){e.$set(e.advanceForm,"supplier_id",a)},expression:"advanceForm.supplier_id"}},e._l(e.allSupplierName,(function(a,i){return t("el-option",{key:i,attrs:{label:a.name,value:a.id}},[t("span",[e._v(e._s(a.name))])])})),1)],1),t("el-form-item",{attrs:{label:"银行账号：",prop:"bank_account"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请选择银行账号"},on:{change:e.chooseBankAccount},model:{value:e.advanceForm.bank_account,callback:function(a){e.$set(e.advanceForm,"bank_account",a)},expression:"advanceForm.bank_account"}},e._l(e.bankAccount,(function(e,a){return t("el-option",{key:a,attrs:{label:e.bank_card_number,value:e.bank_card_number}})})),1)],1),t("el-form-item",{attrs:{label:"开户行：",prop:"bank"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:"",size:"small",placeholder:"请输入开户行"},model:{value:e.advanceForm.bank,callback:function(a){e.$set(e.advanceForm,"bank","string"===typeof a?a.trim():a)},expression:"advanceForm.bank"}})],1),t("div",[t("el-form-item",{attrs:{label:"客户经理："}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:"",size:"small",placeholder:"客户经理"},model:{value:e.advanceForm.customer_manager_name,callback:function(a){e.$set(e.advanceForm,"customer_manager_name","string"===typeof a?a.trim():a)},expression:"advanceForm.customer_manager_name"}})],1)],1),t("el-form-item",{attrs:{label:"垫款事由：",prop:"borrowing_reason"}},[t("el-input",{staticStyle:{width:"476px","padding-bottom":"6px"},attrs:{type:"textarea",rows:3,size:"small",placeholder:"请输入垫款事由",maxlength:"100","show-word-limit":""},model:{value:e.advanceForm.borrowing_reason,callback:function(a){e.$set(e.advanceForm,"borrowing_reason","string"===typeof a?a.trim():a)},expression:"advanceForm.borrowing_reason"}})],1),t("el-form-item",{attrs:{label:"备注："}},[t("el-input",{staticStyle:{width:"476px","padding-bottom":"6px"},attrs:{type:"textarea",rows:3,size:"small",placeholder:"请输入备注",maxlength:"100","show-word-limit":""},model:{value:e.advanceForm.remark,callback:function(a){e.$set(e.advanceForm,"remark","string"===typeof a?a.trim():a)},expression:"advanceForm.remark"}})],1),t("el-form-item",{attrs:{label:"附件："}},[t("div",{staticClass:"upload-box"},[t("tg-upload",{attrs:{disabled:e.advanceForm.attachment.length>=5,action:"/api/approval/upload_approval_attachment","show-file-list":!1,beforeUpload:e.beforeUpload,success:e.successHandle}},[t("tg-button",{attrs:{disabled:e.advanceForm.attachment.length>=5,icon:"ico-upload-lite"}},[e._v("上传附件")])],1),t("span",{staticClass:"file-tips"},[e._v(" 支持扩展名：.docx .doc .pdf .jpg .png；最多上传5个文件（单个文件大小不超过30M） ")])],1),t("div",{staticClass:"file-list-box"},[t("upload-file-list",{attrs:{two:""},model:{value:e.advanceForm.attachment,callback:function(a){e.$set(e.advanceForm,"attachment",a)},expression:"advanceForm.attachment"}})],1)])],1)],1)]),t("tg-mask-loading",{attrs:{visible:e.saveLoading,content:"  正在提交，请稍候..."}})],1)},s=[],l=(t(21703),t(97434)),n=t(11676),o=t(79433),r=t(51351),c=t(64236),u=(0,l.defineComponent)({name:"advanceDialog",props:{visible:{type:Boolean,required:!1},approval:{type:Object},edit:{type:Boolean,required:!1,default:!1},info:{type:Object,required:!1,default:()=>({})}},components:{},setup(e,a){const t=(0,l.ref)(!1),i=(0,l.computed)((()=>a.root.$store.getters["user/getUserInfo"].department_name)),s=(0,l.ref)({department:i,borrowing_amount:"",pay_back_amount:"",collecting_company:"",bank:"",bank_account:"",customer_id:"",project_id:"",brand_id:"",customer_manager_name:"",brand_name:"",business_type:"",supplier_id:"",borrowing_reason:"",remark:"",attachment:[]}),u=(0,l.ref)({department:[{required:!0,message:"请输入部门名称",trigger:"blur"}],customer_id:[{required:!0,message:"请输入并选择垫款客户",trigger:["blur","change"]}],project_id:[{required:!0,message:"请选择项目",trigger:["blur","change"]}],brand_name:[{required:!0,message:"请选择品牌",trigger:"blur"}],borrowing_amount:[{required:!0,message:"请输入垫款金额",trigger:["blur","change"]},{validator:(e,a,t)=>{"0"===a?t(new Error("垫款金额必须大于0")):t()},trigger:["blur","change"]}],pay_back_amount:[{required:!1,message:"请输入回款销售额",trigger:["blur","change"]},{validator:(e,a,t)=>{"0"===a?t(new Error("回款销售额必须大于0")):t()},trigger:["blur","change"]}],supplier_id:[{required:!0,message:"请输入并选择供应商",trigger:["blur","change"]}],bank:[{required:!0,message:"请至供应商管理功能完善信息",trigger:["blur","change"]}],bank_account:[{required:!0,message:"请至供应商管理功能完善信息",trigger:["blur","change"]}],borrowing_reason:[{required:!0,message:"请输入垫款事由",trigger:"blur"}]}),d=(0,l.ref)([]),m=(0,l.ref)([]),p=(0,l.ref)([]),v=()=>{s.value.department="",s.value.customer_id="",s.value.project_id="",s.value.brand_id="",s.value.brand_name="",s.value.customer_manager_name="",s.value.business_type="",s.value.borrowing_amount="",s.value.pay_back_amount="",s.value.supplier_id="",s.value.collecting_company="",s.value.bank="",s.value.bank_account="",s.value.borrowing_reason="",s.value.remark="",s.value.attachment=[],d.value=[],m.value=[],p.value=[]},_=(e,a)=>{const t=e.replace(/[^\d.]+/gu,"").replace(/^0+(?=\d)/gu,"")??"",i=/\d+(?:\.\d{0,2})?/gu.exec(t)??[""];"borrowing_amount"===a?s.value.borrowing_amount=i[0]:"pay_back_amount"===a&&(s.value.pay_back_amount=i[0])},b=async a=>{const{data:t}=await(0,o.FC)({keyword:a});d.value=t.success?t.data:[],e.edit&&g(e.info.customer_id)},g=e=>{s.value.customer_id=e,s.value.project_id="",s.value.brand_id="",s.value.brand_name="",s.value.customer_manager_name="",s.value.business_type="",f(e)},f=async a=>{const t=d.value.filter((e=>{if(e.id===a)return e}));m.value=t[0]?.projects?t[0]?.projects:[],e.edit&&h(e.info.project_id)},h=e=>{const a=m.value.filter((a=>{if(a.project_id===e)return a}));s.value.project_id=e,s.value.brand_id=a[0]?.brand_id,s.value.brand_name=a[0]?.brand_name,s.value.customer_manager_name=a[0]?.customer_manager_name,s.value.business_type=a[0]?.business_type},y=(0,l.ref)([]),k=e=>{const t=p.value.filter((a=>{if(a.id===e)return a}));if(s.value.supplier_id=e,s.value.collecting_company=t[0].name,s.value.bank_account="",s.value.bank="",t[0].gather_account_list&&t[0].gather_account_list.length>0){const e=t[0].gather_account_list.filter((e=>{if(1===e.account_type)return e}));e.length>0?(y.value=e,s.value.bank_account=e[0].bank_card_number,s.value.bank=e[0].bank_of_deposit):a.root.$message.warning("请至供应商管理功能完善信息")}else a.root.$message.warning("请至供应商管理功能完善信息")},D=e=>{const a=y.value.filter((a=>{if(a.bank_card_number===e)return a}));s.value.bank=a[0].bank_of_deposit},w=async a=>{const{data:t}=await(0,o.Q0)({keyword:a});p.value=t.success?t.data:[],e.edit&&k(e.info.company_id)},V=(e=!1)=>a.emit("dialog:close",e),F=()=>{V()},S=async()=>{const i=await new Promise((e=>a.refs.advanceFormRef.validate((a=>e(a)))));if(!i)return;t.value=!0;const l={approval_type:3,company_id:s.value.supplier_id,customer_id:s.value.customer_id,borrowing_amount:s.value.borrowing_amount+"",back_amount:s.value.pay_back_amount+"",borrowing_reason:s.value.borrowing_reason,remark:s.value.remark,collecting_company:s.value.collecting_company,bank_card_number:s.value.bank_account,bank_of_deposit:s.value.bank,attachment:s.value.attachment,project_id:s.value.project_id,business_type:s.value.business_type,brand_id:5!==s.value.business_type?s.value.brand_id:""},[{data:n},o]=await Promise.all([await(0,r.Qv)(l),await(0,c._v)(200)]);t.value=!1,n.success?(a.root.$message.success(n.message),V(),e.edit&&a.emit("dialog:reClose")):a.root.$message.error(n.message??"保存失败")},I=e=>(0,n.K)({file:!0,image:!0,fileSize:30})(e),x=e=>{s.value.attachment.push(e.data.source)};return(0,l.onBeforeMount)((()=>{e.edit&&(b(e.info.company_name),w(e.info.collecting_company),s.value.customer_id=e.info.customer_id,s.value.borrowing_amount=e.info.borrowing_amount,s.value.pay_back_amount=e.info.back_amount,s.value.bank_account=e.info.bank_card_number,s.value.bank=e.info.bank_of_deposit,s.value.supplier_id=e.info.company_id,s.value.borrowing_reason=e.info.borrowing_reason,s.value.remark=e.info.remark,e.info.attachment&&e.info.attachment.length>0&&(s.value.attachment=e.info.attachment))})),{saveLoading:t,emitClose:V,handleDialogCancel:F,handleDialogSubmit:S,advanceForm:s,resetForm:v,advanceFormRules:u,allCustomerName:d,getAllCustomerName:b,onCustomerIdChange:g,allProjectName:m,onProjectIdChange:h,beforeUpload:I,successHandle:x,allSupplierName:p,getAllSupplierName:w,onSupplierIdChange:k,inputAmount:_,bankAccount:y,chooseBankAccount:D}}}),d=u,m=t(1001),p=(0,m.Z)(d,i,s,!1,null,"20a509b2",null),v=p.exports},17660:function(e,a,t){t.d(a,{Z:function(){return u}});var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-steps",{staticClass:"invoice-steps",attrs:{direction:"vertical",active:e.items.length}},[e._l(e.items,(function(a,i){return t("el-step",{key:a.nodeId+i},[3===e.stepStatus&&i===e.items.length-1?t("div",{staticClass:"my-icon error",attrs:{slot:"icon"},slot:"icon"},[t("tg-icon",{attrs:{name:"ico-cross-red"}})],1):t("div",{staticClass:"my-icon success",attrs:{slot:"icon"},slot:"icon"},[t("tg-icon",{attrs:{name:"ico-a-chenggong2x"}})],1),t("div",{staticClass:"step-title",attrs:{slot:"title"},slot:"title"},[t("span",[e._v(e._s(a.nodeName))])]),t("div",{staticClass:"description",attrs:{slot:"description"},slot:"description"},[t("div",{staticClass:"operator"},[t("span",[e._v("审批人：")]),t("span",[e._v(e._s(a.operatorName))])]),a.remark?t("div",{staticClass:"remark",class:3===e.stepStatus&&e.items.length-1===i&&"error-text"},[t("span",[e._v("理由：")]),t("span",[e._v(e._s(a.remark))])]):e._e(),t("div",{staticClass:"timestamp"},[t("span",[e._v(e._s(a.approval_date))])])])])})),1===e.stepStatus&&e.items[e.items.length-1].receivedPersons?t("el-step",[t("div",{staticClass:"my-icon",attrs:{slot:"icon"},slot:"icon"},[t("span",{staticClass:"num received"},[e._v(e._s(e.items.length+1))])]),t("div",{staticClass:"step-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticStyle:{color:"#a4b2c2"}},[e._v(e._s(e.items[e.items.length-1].receivedPersons))])]),t("div",{staticClass:"operator received",attrs:{slot:"description"},slot:"description"},[t("span",{staticStyle:{color:"#a4b2c2"}},[e._v("待处理")])])]):e._e()],2)},s=[],l=t(97434),n=(0,l.defineComponent)({props:{items:{type:Array,default:()=>[]},stepStatus:{type:Number,default:0}}}),o=n,r=t(1001),c=(0,r.Z)(o,i,s,!1,null,null,null),u=c.exports},33018:function(e,a,t){t.d(a,{Z:function(){return k}});var i=t(97434),s=t(61282),l=t(17660),n=t(17496),o=t(64236),r=t(82741),c=t(74750),u=t(51351),d=t(79703),m=t(80972);const p=new Map([[1,"审批中"],[2,"审批成功"],[3,"审批失败"],[4,"已撤销"]]),v=e=>{const a=(0,i.ref)(!1);return{revokeLoading:a}};var _,b,g=(0,i.defineComponent)({components:{Appendix:d.Z,workbenchTimeLine:l.Z,invoiceDialog:m.Z},setup(e,a){const t=(0,i.ref)(null),l=(0,i.ref)(!1),d=(0,i.ref)(!1),m=v(a),_=(0,i.ref)({}),b=(0,i.computed)((()=>a.root.$store.getters["user/getUserInfo"])),g=()=>{a.emit("close"),d.value=!1},f=e=>{_.value=e,d.value=!0},h=e=>(0,u.qL)(e).then((e=>e&&e.data&&e.data.success?(a.root.$message.success("保存成功"),g(),a.emit("reload:invoices"),e):(a.root.$message.error("保存失败"),e.data.message))),y=async()=>{const e=await(0,r.I)(a,"你确定撤销吗?");if(e){const e={approval_id:_.value.approval_id,update_code:4};h(e)}},k=e=>{if(!e)return!1;const t={headers:{Authorization:(0,c.LP)()??""}};fetch(e,t).then((async t=>{const i=t.clone();try{const e=await i.json();a.root.$message.error(e.message)}catch{if(200===t.status){const a=await t.blob(),i=decodeURIComponent(e.split("/")[e.split("/").length-1]);(0,o.uA)(a,i)}else a.root.$message.error("下载失败")}}))},D=e=>{if(!e)return"ico-picture";switch(e.toLowerCase()){case"docx":case"doc":return"ico-word";case"xlsx":case"xls":return"ico-excel";case"pdf":return"ico-pdf";case"mp4":return"ico-picture2";default:return"ico-picture"}},w=()=>{if(_.value.attachment){const e=_.value.attachment.map((e=>{const a=e.split("/"),t=a[a.length-1],s=t.split("."),l=s[s.length-1];return(0,i.h)("span",{class:"value",on:{click(){k(e)}}},[(0,i.h)("tg-icon",{attrs:{name:D(l)}},l),t])}));return(0,i.h)("div",{class:"load"},[e])}return(0,i.h)("span",{class:"value"},"--")},V=(0,i.computed)((()=>b&&b.value.id===_.value.now_id)),F=(0,i.computed)((()=>b&&b.value.id===_.value.add_by)),S=()=>{t.value?.show()},I=async()=>{const e=await(0,r.I)(a,"你确定重新提交吗?");e&&Promise.resolve().then((()=>{l.value=!0})).then((()=>{S()}))},x=()=>{l.value=!1,g(),a.emit("reload:invoices")};return{show:f,hide:g,revoke:y,visible:d,btnVisiable:V,invoiceDetail:_,contractStatus:p,Decimal2String:s.SJ,...m,renderAttachment:w,enumLevelTwoTypes:n.rw,revocationVisiable:F,reApply:I,invoiceDialogRef:t,confirmInvoiceDialog:x,invoiceDialogVisible:l}},render(){const e=arguments[0];return e("div",[e("el-dialog",{class:"tg-dialog-classic tg-dialog-vcenter-new new-invoice-detail-dialog",attrs:{width:"948px",visible:this.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.hide}},[e("template",{slot:"title"},["开票申请详情"]),e("div",{class:"new-invoice-detail"},[e("div",{class:"invoice-detail"},[e("div",{class:"invoice-detail-info"},[e("div",{class:"detail-row"},[e("span",{class:"label"},["申请人："]),e("span",{class:"value"},[this.invoiceDetail.username])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["申请部门："]),e("span",{class:"value"},[this.invoiceDetail.create_department])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["发起时间："]),e("span",{class:"value"},[this.invoiceDetail.gmt_create])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["审批编号："]),e("span",{class:"value"},[this.invoiceDetail.approval_uid]),e("span",{class:"contract-status status-"+this.invoiceDetail.approval_status},[this.contractStatus.get(this.invoiceDetail.approval_status)])]),e("div",{class:"line"}),e("div",{class:"detail-row",style:"margin-top: 22px"},[e("span",{class:"label"},["开票金额："]),e("span",{class:"value"},[this.invoiceDetail.invoice_amount_str])]),e("div",{class:"detail-row",style:"margin-top: 22px"},[e("span",{class:"label"},["开票类型："]),e("span",{class:"value"},[this.enumLevelTwoTypes(this.invoiceDetail.level_two_types)])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["寄送方式："]),e("span",{class:"value"},[1===this.invoiceDetail.invoice_send_type?"快递寄送":"自行送达"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["是否收到款项："]),e("span",{class:"value"},[this.invoiceDetail.is_received?"是":"否"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},[this.invoiceDetail.is_received?"":"预计","收款时间："]),e("span",{class:"value"},[this.invoiceDetail.received_date])]),1===this.invoiceDetail.is_received&&e("div",{class:"detail-row"},[e("span",{class:"label"},["收款编号："]),e("span",{class:"value"},[this.invoiceDetail.achievement_uid])])]),e("div",{class:"invoice-detail-table"},[e("div",{class:"detail-table-head"},[e("span",{class:"table-head-td"},["项目"]),e("span",{class:"table-head-td"},["结算单编号"]),e("span",{class:"table-head-td text-r"},["结算金额 (元)"]),e("span",{class:"table-head-td text-r"},["本次开票金额 (元)"])]),e("div",{class:"detail-table-body"},[this.invoiceDetail.details&&this.invoiceDetail.details.map((a=>e("div",{class:"table-body-tr"},[e("span",{class:"table-body-td"},[a.project_name]),e("span",{class:"table-body-td"},[a.settlement_no]),e("span",{class:"table-body-td text-r"},[this.Decimal2String(a.settlement_amount)]),e("span",{class:"table-body-td text-r"},[this.Decimal2String(a.invoice_amount)])])))])]),e("div",{class:"line2",style:"margin-top: 32px;"}),e("div",{class:"invoice-detail-info"},[e("div",{class:"detail-row"},[e("span",{class:"label"},["公司名称："]),e("span",{class:"value"},[this.invoiceDetail.collecting_company||"--"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["纳税人识别号："]),e("span",{class:"value"},[this.invoiceDetail.tax_number||"--"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["地址|电话："]),e("span",{class:"value block"},[this.invoiceDetail.address||"--"," ",this.invoiceDetail.phone||"--"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["开户行|账号："]),e("span",{class:"value block"},[this.invoiceDetail.bank_of_deposit||"--","  ",this.invoiceDetail.bank_card_number||"--"])])]),e("div",{class:"line2"}),e("div",{class:"invoice-detail-info"},[e("div",{class:"detail-row"},[e("span",{class:"label"},["备注："]),e("span",{class:"value block"},[this.invoiceDetail.remark||"--"])]),e("div",{class:"detail-row"},[e("span",{class:"label"},["附件："]),this.invoiceDetail?.attachment?.length?e("appendix",{attrs:{list:this.invoiceDetail.attachment}}):e("span",{class:"value"},["--"])])])]),e("div",{class:"invoice-press"},[e("h5",{class:"title"},["审批进度"]),e(l.Z,{attrs:{"step-status":this.invoiceDetail.approval_status,items:this.invoiceDetail.approval_flow_detail}})])]),e("template",{slot:"footer"},[e("tg-button",{on:{click:this.hide}},["取消"]),1===this.invoiceDetail.approval_status&&this.revocationVisiable&&e("div",{class:"div-default-btn",on:{click:this.revoke},directives:[{name:"loading",value:this.saveLoading}]},["撤销"]),3===this.invoiceDetail.approval_status&&e("div",{class:"div-default-btn",on:{click:this.reApply},directives:[{name:"loading",value:this.saveLoading}]},["重新编辑提交"])])]),this.invoiceDialogVisible&&e(m.Z,{ref:"invoiceDialogRef",attrs:{confirm:this.confirmInvoiceDialog,data:this.invoiceDetail,edit:!0}})])}}),f=g,h=t(1001),y=(0,h.Z)(f,_,b,!1,null,null,null),k=y.exports},17809:function(e,a,t){t.d(a,{T:function(){return Y}});var i={};t.r(i),t.d(i,{setAdvanceDetailVisible:function(){return $},setAdvanceFormDialogVisible:function(){return j},setAdvanceFormVisible:function(){return R},setApproval:function(){return I},setCustomerDetailVisible:function(){return L},setInvoicingDetailVisible:function(){return B},setInvoicingFormVisible:function(){return N},setLoanDetailVisible:function(){return E},setLoanFormVisible:function(){return x},setProjectApprovalVisible:function(){return z},setRedDetailVisible:function(){return P},setRefundDetailVisible:function(){return C},setRefundFormVisible:function(){return A},setSupplierDetailVisible:function(){return T},setUseSealApplyDetailVisible:function(){return q},setVoidDetailVisible:function(){return O}});var s={};t.r(s),t.d(s,{advanceDetailVisible:function(){return K},advanceFormDialogVisible:function(){return H},advanceFormVisible:function(){return J},approval:function(){return U},customerDetailVisible:function(){return W},loanDetailVisible:function(){return M},loanFormVisible:function(){return Z},refundDetailVisible:function(){return Q},refundFormVisible:function(){return G},supplierDetailVisible:function(){return X}});const l={approval:void 0,loanFormVisible:!1,loanDetailVisible:!1,refundFormVisible:!1,refundDetailVisible:!1,advanceFormDialogVisible:!1,advanceFormVisible:!1,advanceDetailVisible:!1,invoicingFormVisible:!1,invoicingDetailVisible:!1,customerDetailVisible:!1,supplierDetailVisible:!1,redDetailVisible:!1,voidDetailVisible:!1,useSealApplyDetailVisible:!1,projectApprovalVisible:!1};var n=l;const o="SET_APPROVAL",r="CLEAR_APPROVAL",c="SET_LOAN_FORM_VISIBLE",u="SET_LOAN_DETAIL_VISIBLE",d="SET_REFUND_FORM_VISIBLE",m="SET_REFUND_DETAIL_VISIBLE",p="SET_ADVANCE_FORM_DIALOG_VISIBLE",v="SET_ADVANCE_FORM_VISIBLE",_="SET_ADVANCE_DETAIL_VISIBLE",b="SET_INVOICING_FORM_VISIBLE",g="SET_INVOICING_DETAIL_VISIBLE",f="SET_CUSTOMER_DETAIL_VISIBLE",h="SET_SUPPLIER_DETAIL_VISIBLE",y="SET_RED_DETAIL_VISIBLE",k="SET_VOID_DETAIL_VISIBLE",D="SET_USE_SEAL_DETAIL_VISIBLE",w="SET_PROJECT_APPROVAL_VISIBLE";var V=t(64236);const F={[o]:(e,a)=>{e.approval=(0,V.Qc)(a)},[r]:e=>{e.approval=void 0},[c]:(e,a)=>{e.loanFormVisible=a},[u]:(e,a)=>{e.loanDetailVisible=a},[d]:(e,a)=>{e.refundFormVisible=a},[m]:(e,a)=>{e.refundDetailVisible=a},[f]:(e,a)=>{e.customerDetailVisible=a},[h]:(e,a)=>{e.supplierDetailVisible=a},[p]:(e,a)=>{e.advanceFormDialogVisible=a},[v]:(e,a)=>{e.advanceFormVisible=a},[_]:(e,a)=>{e.advanceDetailVisible=a},[b]:(e,a)=>{e.invoicingFormVisible=a},[g]:(e,a)=>{e.invoicingDetailVisible=a},[y]:(e,a)=>{e.redDetailVisible=a},[k]:(e,a)=>{e.voidDetailVisible=a},[D]:(e,a)=>{e.useSealApplyDetailVisible=a},[w]:(e,a)=>{e.projectApprovalVisible=a}};var S=F;const I=({commit:e},a)=>{e(o,a)},x=({commit:e},a)=>{e(c,a)},E=({commit:e},a)=>{e(u,a)},A=({commit:e},a)=>{e(d,a)},C=({commit:e},a)=>{e(m,a)},L=({commit:e},a)=>{e(f,a)},T=({commit:e},a)=>{e(h,a)},j=({commit:e},a)=>{e(p,a)},R=({commit:e},a)=>{e(v,a)},$=({commit:e},a)=>{e(_,a)},N=({commit:e},a)=>{e(b,a)},B=({commit:e},a)=>{e(g,a)},P=({commit:e},a)=>{e(y,a)},O=({commit:e},a)=>{e(k,a)},q=({commit:e},a)=>{e(D,a)},z=({commit:e},a)=>{e(w,a)},U=e=>e.approval,Z=e=>e.loanFormVisible,M=e=>e.loanDetailVisible,G=e=>e.refundFormVisible,Q=e=>e.refundDetailVisible,H=e=>e.advanceFormDialogVisible,J=e=>e.advanceFormVisible,K=e=>e.advanceDetailVisible,W=e=>e.customerDetailVisible,X=e=>e.supplierDetailVisible,Y={namespaced:!0,state:n,mutations:S,actions:i,getters:s}}}]);