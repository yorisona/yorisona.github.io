"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[4206],{24206:function(e,a,n){n.r(a),n.d(a,{default:function(){return v}});var t,r,s=n(36568),i=n.n(s),o=n(97434),l=n(15681),c=n(23624),m=n(59563),u=n(48606),_=n(70437),p=n(88721),d=n(64236),f=(0,o.defineComponent)({props:{disabledSubmit:{type:Boolean}},setup(e,a){const n=(0,o.ref)({indicator_type:l.F2.RATION}),t=(0,o.ref)(),r=(0,o.ref)([]),s=(0,m.Q)(c.Dr,{manual:!0}),i=(0,m.Q)(c.bl,{manual:e.disabledSubmit,transform(e){return e.map((e=>({label:e.name,value:e.tag_id})))}}),_=(e,a=[])=>{r.value=a,e?n.value=e:a.length>0&&(n.value.indicator_type=a[0])},p=()=>{t.value?.validate((async t=>{if(!t)return;const r={...n.value};r.indicator_type===l.F2.RATION?(r.is_target=!0,r.is_result=!0):r.indicator_type!==l.F2.BONUS&&r.indicator_type!==l.F2.DEDUCT||(r.weight=void 0),(0,d.xb)(r.weight)&&(r.weight=null),(0,d.xb)(r.increase_limit)&&(r.increase_limit=null),(0,d.xb)(r.decrease_limit)&&(r.decrease_limit=null),e.disabledSubmit?a.emit("submit",r):s.runAsync(r).then((()=>{u.Message.success("新增成功 "),a.emit("submit"),a.emit("close")}))}))};return{formData:n,formRef:t,reqTag:i,reqSaveIndicator:s,onSaveBtnClick:p,show:_,dismension_type_list:r}},render(){const e=arguments[0],{formData:a}=this;return e("div",{class:"tg-page-container page-content-container"},[e("div",{class:"content"},[e("el-form",i()([{ref:"formRef",attrs:{size:"small"}},{attrs:{model:this.formData}}]),[!this.disabledSubmit&&e("el-form-item",{attrs:{label:"指标标签："}},[e(_.Z,{style:"width:100%",attrs:{options:this.reqTag.data,filterable:!0,clearable:!0},model:{value:a.tag_id,callback:e=>{this.$set(a,"tag_id",e)}}})]),e("el-form-item",{attrs:{label:"指标类型",prop:"indicator_type","label-position":"top"}},[e("el-radio-group",{style:"width:100%;height:24px; display: flex;align-items: center;",model:{value:this.formData.indicator_type,callback:e=>{this.$set(this.formData,"indicator_type",e)}}},[l.ts.map((a=>{let n=!1;return this.dismension_type_list.length>0&&(n=!this.dismension_type_list.some((e=>e===a.value))),e("el-radio",{attrs:{size:"small",disabled:n,name:"indiactor_type",label:a.value}},[a.label])}))])]),e("el-form-item",{attrs:{label:"指标名称",prop:"name","label-position":"top",rules:[{required:!0,message:"请输入指标名称"}]}},[e("el-input",{attrs:{maxlength:100,placeholder:"请输入指标名称"},model:{value:this.formData.name,callback:e=>{this.$set(this.formData,"name",e)}}})]),e("el-form-item",{attrs:{label:"指标定义","label-position":"top"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入指标定义",maxlength:350,"show-word-limit":!0},model:{value:a.remark,callback:e=>{this.$set(a,"remark",e)}}})]),e("el-form-item",{attrs:{label:"考核标准",prop:"check_standard","label-position":"top",rules:[{required:!0,message:"请输入考核标准"}]}},[e("el-input",{attrs:{placeholder:"请输入考核标准",type:"textarea",maxlength:350,"show-word-limit":!0},model:{value:a.check_standard,callback:e=>{this.$set(a,"check_standard",e)}}})]),a.indicator_type===l.F2.RATION&&e("el-form-item",{attrs:{label:"目标值：",prop:"increase_limit"},class:"content-flex"},[e("el-switch",{attrs:{value:!0,disabled:!0}})]),a.indicator_type===l.F2.RATION&&e("el-form-item",{attrs:{label:"结果值：",prop:"increase_limit"},class:"content-flex"},[e("el-switch",{attrs:{value:!0,disabled:!0}})]),a.indicator_type===l.F2.BONUS&&e("el-form-item",{attrs:{label:"加分上限","label-position":"top",prop:"increase_limit"}},[e("el-input",{model:{value:a.increase_limit,callback:e=>{this.$set(a,"increase_limit",e)}}})]),a.indicator_type===l.F2.DEDUCT&&e("el-form-item",{attrs:{label:"扣分上限","label-position":"top",prop:"decrease_limit"}},[e("el-input",{model:{value:a.decrease_limit,callback:e=>{this.$set(a,"decrease_limit",e)}}})]),a.indicator_type!==l.F2.DEDUCT&&a.indicator_type!==l.F2.BONUS&&e("el-form-item",{attrs:{label:"权重",prop:"check_standard","label-position":"top"}},[e("el-input",{attrs:{maxlength:"3",placeholder:"请输入权重"},on:{input:e=>{a.weight=p.Z.Interger(e)}},model:{value:a.weight,callback:e=>{this.$set(a,"weight",e)}}},[e("span",{slot:"append"},["%"])])]),e("el-form-item",{attrs:{label:"评分方式："}},[e("div",{class:"sheng"},["直接输入分数 "])]),e("el-form-item",{attrs:{label:"指定评分人："}},[e("el-switch",{style:"position: relative; top: -2px;",model:{value:a.is_assign_scorer,callback:e=>{this.$set(a,"is_assign_scorer",e)}}}),e("div",{class:"sheng"},["开启后，该指标如被引用，则被考核人需在考核表设置指定评分人。 "])])])])])}}),g=f,y=n(1001),b=(0,y.Z)(g,t,r,!1,null,"21bc63a9",null),v=b.exports},15681:function(e,a,n){var t;n.d(a,{F2:function(){return t},Kg:function(){return u},OF:function(){return l},Sr:function(){return i},Tp:function(){return _},__:function(){return m},fB:function(){return o},rD:function(){return r},ts:function(){return s}}),function(e){e[e["RATION"]=1]="RATION",e[e["QUALITATIVE"]=2]="QUALITATIVE",e[e["BONUS"]=3]="BONUS",e[e["DEDUCT"]=4]="DEDUCT"}(t||(t={}));const r=new Map([[t.RATION,"定量指标"],[t.QUALITATIVE,"定性指标"],[t.BONUS,"加分项"],[t.DEDUCT,"扣分项"]]),s=[{label:"定量指标",value:t.RATION},{label:"定性指标",value:t.QUALITATIVE},{label:"加分项",value:t.BONUS},{label:"扣分项",value:t.DEDUCT}];var i;(function(e){e[e["MONTHLY"]=1]="MONTHLY",e[e["QUARTERLY"]=2]="QUARTERLY",e[e["SEMIANNUA"]=3]="SEMIANNUA",e[e["ANNUAL"]=4]="ANNUAL"})(i||(i={}));const o=new Map([[i.MONTHLY,"月度"],[i.QUARTERLY,"季度"],[i.SEMIANNUA,"半年度"],[i.ANNUAL,"年度"]]),l=[{label:"月度",value:i.MONTHLY},{label:"季度",value:i.QUARTERLY},{label:"半年度",value:i.SEMIANNUA},{label:"年度",value:i.ANNUAL}];var c,m;(function(e){e[e["BY_EVALUATION_PERSON"]=1]="BY_EVALUATION_PERSON",e[e["DIRECT_MANAGER"]=2]="DIRECT_MANAGER"})(c||(c={})),function(e){e[e["TARGET_SETTING"]=1]="TARGET_SETTING",e[e["TARGET_CONFIRM"]=2]="TARGET_CONFIRM",e[e["IN_PROGRESS"]=3]="IN_PROGRESS",e[e["SELF"]=4]="SELF",e[e["SUPERIOR"]=5]="SUPERIOR",e[e["SIGNATURE"]=6]="SIGNATURE",e[e["FINISH"]=7]="FINISH"}(m||(m={}));const u=new Map([[m.TARGET_SETTING,"目标制定"],[m.TARGET_CONFIRM,"目标确认"],[m.IN_PROGRESS,"执行中"],[m.SELF,"自评"],[m.SUPERIOR,"上级评分"],[m.SIGNATURE,"签字确认"],[m.FINISH,"考核完成"]]),_=[{label:"目标制定",value:m.TARGET_SETTING},{label:"目标确认",value:m.TARGET_CONFIRM},{label:"执行中",value:m.IN_PROGRESS},{label:"自评",value:m.SELF},{label:"上级评分",value:m.SUPERIOR},{label:"签字确认",value:m.SIGNATURE},{label:"考核完成",value:m.FINISH}]},59563:function(e,a,n){n.d(a,{Q:function(){return s},h:function(){return i}});n(21703);var t=n(97434),r=n(48606);const s=(e,{manual:a,onError:n,onSuccess:s,defaultParams:i,transform:o}={})=>{const l=(0,t.ref)(),c=(0,t.ref)(),m=(0,t.ref)(!1),u=(0,t.ref)([]),_=()=>{p(...u.value)},p=(...a)=>Promise.resolve(a||i).then((()=>{m.value=!0})).then((()=>0===a.length&&i&&i.length>0?i:a)).then((e=>(u.value=e,e))).then((a=>e(...a))).then((e=>{if(!e.data.success)throw new Error(e.data.message);return l.value=o?o(e.data.data):e.data.data,s&&s(l.value,e.data),e})).then((()=>{m.value=!1})).catch((e=>{throw m.value=!1,c.value=e.message,n&&n(e),r.Message.error(e.message),e})),d=p;return a||p(...i||[]),(0,t.reactive)({data:l,error:c,loading:m,reload:_,run:p,runAsync:d,params:u})},i=(e,a={})=>{const{defaultPageSize:n=20,defaultParams:r=[],transform:i,...o}=a,l=(0,t.ref)(),c=(0,t.reactive)({total:0,page_num:1,page_size:n,onCurrentChange:e=>{const a=[..._.params];a[0]?a[0].page_num=e:a[0]={num:n,page_num:e},_.runAsync(...a).then((()=>{c.page_num=e}))},refresh:()=>c.onCurrentChange(1),reQuery(...e){const a=[];return _.params[0]?(a[0]=_.params[0],a[0].page_num=1,c.page_num=1):(a[0]={num:n,page_num:1},c.page_num=1),a.push(...e),_.runAsync(...a)}}),[m={num:n,page_num:1},...u]=r,_=s(e,{defaultParams:[m,...u],...o,onSuccess(e,n){l.value=i?i(e):e.data,c.total=e.total,a.onSuccess&&a.onSuccess(l.value,n)}}),{data:p,...d}=(0,t.toRefs)(_);return(0,t.reactive)({...d,data:l,pagination:c})}},23624:function(e,a,n){n.d(a,{$K:function(){return R},$R:function(){return N},$b:function(){return P},Cl:function(){return X},Dr:function(){return i},EB:function(){return v},Ev:function(){return f},JP:function(){return I},L5:function(){return j},Mz:function(){return F},O5:function(){return S},UX:function(){return d},Y4:function(){return o},ZM:function(){return b},Z_:function(){return w},ao:function(){return x},bV:function(){return $},bl:function(){return l},dP:function(){return k},g:function(){return T},gb:function(){return U},iC:function(){return A},iL:function(){return p},kT:function(){return y},lI:function(){return g},mS:function(){return c},n5:function(){return h},nQ:function(){return s},oY:function(){return q},o_:function(){return C},q0:function(){return L},s9:function(){return O},vL:function(){return u},vv:function(){return m},wF:function(){return E},wH:function(){return G},y3:function(){return M},yI:function(){return D},zr:function(){return _}});var t=n(76012),r=n(64236);const s=async(e,a)=>(0,t.dX)("/api/performance_management/query_indicators_library",{params:{...e,...(0,r.jG)(a)}}),i=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator",(0,r.jG)(e)),o=async e=>(0,t.HG)("/api/performance_management/delete_indicators",{data:{id_list:e}}),l=async e=>(0,t.dX)("/api/performance_management/query_indicator_tag",{params:{...(0,r.jG)(e)}}),c=async e=>(0,t.SO)("/api/performance_management/modify_move_indicator_tag",{indicator_tag_list:e}),m=async e=>(0,t.SO)("/api/performance_management/save_or_modify_indicator_tag",e),u=async e=>(0,t.HG)(`/api/performance_management/delete_indicators_tag/${e}`),_=async()=>(0,t.dX)("/api/feishu/feishu_department_and_user_list"),p=async e=>(0,t.SO)("/api/performance_management/save_or_modify_evaluation_group",e),d=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group",{params:(0,r.jG)({...e,...a})}),f=async(e,a)=>(0,t.dX)("/api/performance_management/query_evaluation_group_name",{params:(0,r.jG)({...e,...a})}),g=async e=>(0,t.HG)(`/api/performance_management/delete_evaluation_group/${e}`),y=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment",{params:(0,r.jG)({...e,...a})}),b=async e=>(0,t.SO)("/api/performance_management/save_assessment",e),v=async e=>(0,t.SO)("/api/performance_management/save_assessment_level_config",e),h=async()=>(0,t.dX)("/api/performance_management/query_assessment_level_config"),T=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail",{params:(0,r.jG)({...e,...a})}),A=async e=>(0,t.dX)("/api/performance_management/get_assessment_detail_by_my_performance",{params:(0,r.jG)(e)}),S=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_analysis",{params:(0,r.jG)({...e,...a})}),N=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_detail_by_performance_record",{params:(0,r.jG)({...e,...a})}),E=async e=>(0,t.SO)("/api/performance_management/modify_start_score",e),I=async e=>(0,t.SO)("/api/performance_management/modify_assessment_result",e),R=async(e,a)=>(0,t.dX)("/api/performance_management/query_my_performance",{params:(0,r.jG)({...e,...a})}),O=async e=>(0,t.dX)("/api/performance_management/query_assessment_by_id",{params:{assessment_management_id:e}}),G=async e=>{const{assessment_dimension_list:a}=e;return a&&a.length>0&&a.forEach((e=>{e.indicator_list&&e.indicator_list?.forEach((e=>{["self_assessment_score","weight","superior_assessment_score"].forEach((a=>{(0,r.xb)(e[a])&&(e[a]=null)}))}))})),console.log("payload",e),(0,t.SO)("/api/performance_management/modify_performance_process",(0,r.jG)(e))},U=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_record",{params:(0,r.jG)({...a,...e})}),w=async(e,a)=>(0,t.dX)("/api/performance_management/query_user_performance_detail_record",{params:(0,r.jG)({...e,...a})}),D=async(e,a)=>(0,t.dX)("/api/performance_management/query_performance_analysis",{params:(0,r.jG)({...e,...a})}),q=async()=>(0,t.dX)("/api/performance_management/query_finish_assessment"),X=async(e,a)=>(0,t.dX)("/api/performance_management/query_with_me_performance",{params:(0,r.jG)({...e,...a})}),F=async(e,a)=>(0,t.dX)("/api/performance_management/query_subordinate_performance",{params:(0,r.jG)({...e,...a})}),L=async e=>(0,t.SO)("/api/performance_management/check_evaluation_group_user_ids",e),k=async e=>(0,t.SO)("/api/performance_management/modify_reset_process",(0,r.jG)(e)),C=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user",{params:e}),j=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_analysis",{params:e}),M=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_performance_record",{params:e}),$=async(e,a)=>(0,t.dX)("/api/performance_management/query_assessment_name",{params:(0,r.jG)({...e,...a})}),x=async e=>(0,t.dX)("/api/auth/getuser_leader_by_subordinate_id",{params:{user_id:e}}),P=async e=>(0,t.dX)("/api/performance_management/query_assessment_and_user_by_my_performance",{params:(0,r.jG)(e)})},88721:function(e,a,n){var t=n(41572);n(97434);const r={IntergerAndDecimals(e){const a=/(\d+)$|\d+\.?\d{0,2}/.exec(e);return a?a[0]:""},Interger(e){return e.replace(/[^\d]/g,"")},NumberRange(e,a){return n=>{const t=this.IntergerAndDecimals(n);if(""===t)return t;const r=Number(t);return r<e?e+"":r>a?a+"":t}},Thousands(e){if(null===e||void 0===e||""===e)return e;e+="";const a=/^(\d+)(\.\d+$)?$/.exec(e+"");if(!a)return e;const n=a[1],t=a[2];let r=n.replace(/(\d{1,3})(?=(\d{3})+$)/g,(e=>`${e},`));return void 0!==t&&(r=`${r}${t}`),r},NineIntergerAndDecimals(e){const a=(/(?:0|[1-9]\d{0,8})(?:\.\d{0,2})?/u.exec(e.replace(/[^.\d]+/gu,"").replace(t.Pj,""))??[""])[0];return a}};a["Z"]=r},70437:function(e,a,n){var t=n(36568),r=n.n(t);const s={functional:!0,render:(e,a)=>{const{props:n}=a,{showAll:t=!1,showAllText:s="全部",clearable:i=!0}=n,o={props:{...a.value,clearable:i},on:a.listeners,attrs:a.data.attrs};return e("el-select",r()([{},o]),[t&&e("el-option",{attrs:{label:s,value:void 0}}),n.options?.map(((a,n)=>e("el-option",{attrs:{disabled:a.disabled,label:a.label,value:a.value},key:n})))])}};a["Z"]=s}}]);