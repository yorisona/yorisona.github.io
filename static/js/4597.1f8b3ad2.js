"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[4597],{94597:function(e,t,a){a.r(t),a.d(t,{default:function(){return ze}});var l,n,s,i,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-invoice-page"},[a("tg-block",{staticClass:"flex-none",staticStyle:{height:"48px"},attrs:{bodyStyle:{padding:"0"}}},[a("tg-tabs",{attrs:{tabs:e.tabs,bottom:""},on:{change:e.onTabChange},model:{value:e.checkedTab,callback:function(t){e.checkedTab=t},expression:"checkedTab"}})],1),a(e.tabPane,{tag:"component",staticClass:"flex-auto"})],1)},o=[],c=a(97434),u=a(36568),d=a.n(u),m=(a(21703),a(11676)),p=a(71963),g=(0,c.defineComponent)({props:{is_estimate:{type:String,default:"1"},settlement_kind:{type:String,default:"1"}},setup(e,t){const a=(0,c.reactive)({visible:!1,saveLoading:!1}),l=(0,c.ref)([]),n=(0,c.ref)({settlement_date:"",order_file:"",is_estimate:e.is_estimate,settlement_kind:e.settlement_kind}),s=()=>{l.value=[],n.value.settlement_date="",n.value.order_file="",a.visible=!1},i=async()=>{const e={...n.value};if(e.order_file=l.value.toString(),e.order_file&&e.settlement_date){a.saveLoading=!0;try{const{data:l}=await(0,p.Eo)(e);if(!l.success)throw new Error(l.message);t.root.$message.success("提交成功"),s(),t.emit("success",l.data)}catch(i){t.root.$message({type:"warning",message:i||"提交失败，稍后重试",duration:2e3,showClose:!0})}finally{a.saveLoading=!1}}else t.root.$message.warning("请完善资料")},r=()=>{a.visible=!0},o=e=>(0,m.K)({csv:!0,fileSize:2048})(e),u=e=>{e&&e.success?l.value.push(e.data.source):t.root.$message.error(e.message)};return{...(0,c.toRefs)(a),closeHandler:s,show:r,saveHandler:i,orderList:l,queryParams:n,successMerchantUpload:u,beforeMerchantUpload:o}},render(){const e=arguments[0];return e("div",[e("el-dialog",{class:"customer-dialog tg-dialog-vcenter-new",attrs:{visible:this.visible,width:"724px",title:"手工统一结算","close-on-click-modal":!1},on:{close:()=>{this.closeHandler()}}},[e("tg-card",{attrs:{padding:18},style:"height: 356px;overflow-y: auto;"},[e("el-form",{class:"flex-form",attrs:{size:"small","show-message":!1,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"请选择结算周期："}},[e("el-date-picker",{attrs:{type:"month",placeholder:"选择请选择结算周期","value-format":"yyyy-MM-01"},style:"width: 250px",model:{value:this.queryParams.settlement_date,callback:e=>{this.$set(this.queryParams,"settlement_date",e)}}})]),e("el-form-item",{attrs:{label:"上传结算文件："}},[e("tg-upload",{attrs:{"show-file-list":!1,action:"/api/medium/upload_file",beforeUpload:this.beforeMerchantUpload,success:this.successMerchantUpload}},[e("tg-button",{attrs:{icon:"ico-upload-lite"}},["上传附件"])]),e("upload-file-list",{class:"invoice-upload-list",model:{value:this.orderList,callback:e=>{this.orderList=e}}})])])]),e("template",{slot:"footer"},[e("tg-button",{on:{click:()=>{this.closeHandler()}}},["取消"]),e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.saveHandler()}}},["保存"])])]),e("tg-mask-loading",{attrs:{visible:this.saveLoading,content:"  正在提交，请稍候..."}})])}}),v=a(6933),f=a.n(v),b=a(24643),y=a(74750),_=(0,c.defineComponent)({props:{is_estimate:{type:String,default:"1"}},setup(e,t){const a=(0,c.reactive)({visible:!1,saveLoading:!1,hideFooter:!0,tableLoading:!1}),l=(0,c.ref)({project_details:[]}),n=(0,c.computed)((()=>{if(!l.value.order_file)return[];const e=l.value.order_file.split(",");return e.map((e=>{const t=e.split("/");return{url:e,name:t[t.length-1]}}))})),s=()=>{a.visible=!1,a.tableLoading=!1,t.emit("success")},i=async()=>{a.saveLoading=!0;try{const{data:e}=await(0,p.uc)(l.value.id);if(!e.success)return Promise.reject();t.root.$message.success("提交成功"),s()}catch(e){t.root.$message({type:"warning",message:"提交失败，稍后重试",duration:2e3,showClose:!0})}finally{a.saveLoading=!1}},r=(0,c.computed)((()=>f()(l.value.settlement_date).endOf("month").format(" ~ MM.DD"))),o=(0,c.computed)((()=>{const e=2===l.value?.project_details[0]?.version;return[{label:"项目名称",prop:"project_name",minWidth:198,align:"center",headerAlign:"center"},{label:"GMV (元)",minWidth:162,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.total_gmv,2,".",",")},e&&{label:"预估总佣金 (元)",minWidth:162,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.shop_commission_amount,2,".",",")},{label:e?"预估机构佣金 (元)":"预估佣金金额 (元)",minWidth:162,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")},{label:"平均佣金比例",minWidth:152,align:"right",headerAlign:"right",formatter:e=>isNaN(e.commission_rate)?"--":e.commission_rate+"%"}].filter(Boolean)})),u=(0,c.computed)((()=>[{label:"项目名称",prop:"project_name",minWidth:198,align:"center",headerAlign:"center"},{label:"佣金 (元)",minWidth:162,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")},{label:"技术服务费 (元)",minWidth:162,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.settled_tech_service_fee,2,".",",")}])),d=(0,c.computed)((()=>{const e=[{label:"项目名称",prop:"project_name",minWidth:198,align:"center",headerAlign:"center"},{label:"机构佣金 (元)",minWidth:152,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.institution_commission_amount,2,".",",")}];return 0!==l.value.is_estimate&&e.push({label:"退货率",minWidth:82,align:"right",headerAlign:"right",formatter:e=>null!==e.pay_rate?(0,b.Y4)(Number(e.refund_rate),2)+"%":"--"}),e.push({label:"达人分成比例",minWidth:100,align:"right",headerAlign:"right",formatter:e=>null!==e.pay_rate?(0,b.Y4)(Number(e.kol_divide),2)+"%":"--"},{label:"预估达人佣金 (元)",minWidth:152,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")}),e})),m=(e,t)=>{l.value=e,a.visible=!0,a.hideFooter=t},h=e=>{window.open(e+`?Authorization=${(0,y.LP)()}`)},g=async()=>{try{const{data:e}=await(0,p.R3)(l.value.id);e.success&&(t.root.$message({type:"success",message:e.message,duration:3e3,showClose:!0}),a.tableLoading=!0)}catch(e){t.root.$message({type:"warning",message:"刷新失败，稍后重试",duration:2e3,showClose:!0})}};return{...(0,c.toRefs)(a),closeHandler:s,refreshHandler:g,autoColumns:u,costColumns:d,show:m,saveHandler:i,downFile:h,filesList:n,detailData:l,columns:o,lastDay:r}},render(){const e=arguments[0];return e("div",[e("el-dialog",{class:"customer-dialog tg-dialog-vcenter-new unite-detail-dialog",attrs:{visible:this.visible,width:"884px","close-on-click-modal":!1,title:"结算明细"},on:{close:()=>{this.closeHandler()}}},[e("tg-card",{attrs:{padding:18},style:"height: 450px;overflow-y: auto;"},[e("div",{class:"detail-item"},[e("span",{class:"label"},["结算周期："]),e("span",{class:"value"},[this.detailData.settlement_date?.replace(/-/gi,"."),this.lastDay])]),"1"===this.is_estimate?e("div",{class:"detail-description"},[e("span",{class:"label"},["GMV"]),e("span",{class:"value"},["￥",(0,b.Y4)(this.detailData.total_gmv,2,".",",")]),e("span",{class:"label"},["预估佣金金额"]),e("span",{class:"value"},["￥",(0,b.Y4)(this.detailData.commission_amount,2,".",",")])]):"0"===this.is_estimate?e("div",{class:"detail-description"},[e("span",{class:"label"},["佣金"]),e("span",{class:"value"},["￥",(0,b.Y4)(this.detailData.commission_amount,2,".",",")]),!(2===this.detailData.status||4===this.detailData.status)&&e("el-button",{class:"refresh-btn",attrs:{type:"text",icon:"el-icon-refresh",disabled:this.tableLoading},on:{click:this.refreshHandler}},[this.tableLoading?"请稍后查看":"刷新数据"])]):e("div",{class:"detail-description"},[e("span",{class:"label"},["预估达人佣金"]),e("span",{class:"value"},["￥",(0,b.Y4)(this.detailData.commission_amount,2,".",",")]),!(2===this.detailData.status||4===this.detailData.status)&&e("el-button",{class:"refresh-btn",attrs:{type:"text",icon:"el-icon-refresh",disabled:this.tableLoading},on:{click:this.refreshHandler}},[this.tableLoading?"请稍后查看":"刷新数据"])]),e("div",{class:"detail-table"},[e("tg-table",{attrs:{border:!0,height:"290",width:"100%",data:this.detailData.project_details},class:"mgt-12 investment-unite-table-content"},["1"===this.is_estimate?this.columns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))):"0"===this.is_estimate?this.autoColumns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))):this.costColumns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))),0===this.detailData.project_details.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无项目"}})])])]),e("div",{class:"detail-item down-file",style:"margin-top: 18px; margin-bottom: 0px"},[e("span",{class:"label"},["账单文件："]),e("div",{class:"file-row"},[this.filesList.map((t=>e("div",[e("span",{class:"file-item"},[decodeURI(t.name)]),e("tg-icon",{attrs:{name:"ico-xiazai"},class:"down-icon",on:{click:()=>{this.downFile(t.url)}}})])))])])]),e("template",{slot:"footer"},[e("tg-button",{on:{click:()=>{this.visible=!1}}},["退出"]),(1===this.detailData.status||5===this.detailData.status)&&!this.hideFooter&&e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.saveHandler()}}},["财务确认"])])]),e("tg-mask-loading",{attrs:{visible:this.saveLoading,content:"  正在提交，请稍候..."}})])}}),w=a(64236),k=(a(26699),(0,c.defineComponent)({props:{list:{default:()=>[],type:Array}},setup(){},render(){const e=arguments[0];return e("div",{class:"status-detail"},[this.list.map((t=>e("div",{class:"item"},[e("span",{class:"project-name"},[t.project_name,"："]),[4].includes(t.status)&&e("span",{class:"project-status wait-confirm"},["未确认"]),[1,2].includes(t.status)&&e("span",{class:"project-status confirmed"},["已确认"])])))])}})),x=k,D=a(1001),C=(0,D.Z)(x,l,n,!1,null,null,null),P=C.exports,S=(0,c.defineComponent)({props:{list:{default:()=>[],type:Array}},setup(){},render(){const e=arguments[0];return e("div",{class:"backed-detail"},[this.list.filter((e=>3===e.status)).map((t=>e("div",{class:"item"},[e("div",{class:"project-name"},[t.project_name]),e("span",["不通过原因："]),e("span",[t.refuse_reason])])))])}}),$=S,R=(0,D.Z)($,s,i,!1,null,null,null),j=R.exports;const M=new Map([[0,"未提交"],[1,"待财务确认"],[4,"待项目确认"],[2,"已确认"],[3,"已退回"],[5,"项目不通过"]]),H=new Map([[0,"rgba(60,82,105,0.60);"],[1,"#FF955F"],[2,"#33BA5D"],[3,"#F04B4B"],[4,"#FF955F"],[5,"#F04B4B"]]),q=e=>{const t=(0,c.ref)({settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"1",page_num:1,num:20}),a=(0,c.reactive)({loading:!1,uniteData:[],total:0}),l=(0,c.ref)([{label:"结算周期",minWidth:168,align:"center",headerAlign:"center",formatter:e=>e.settlement_date.replace(/-/gi,".")},{label:"订单总GMV (元)",minWidth:168,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.total_gmv,2,".",",")},{label:"结算项目数",prop:"project_num",align:"center",headerAlign:"center",minWidth:150},{label:"预估佣金金额 (元)",minWidth:168,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")},{label:"状态",prop:"project_num",align:"center",headerAlign:"center",minWidth:133,formatter:e=>{const{status:t}=e,a=H.get(t),l=`display: inline-block; border-radius: 50%; width: 6px;margin-top:7px;height: 6px;background: ${a};`,n=M.get(t)??"--";return(0,c.h)("div",{style:"display: flex;justify-content: center;padding-left:25px;"},[(0,c.h)("div",{style:l}),(0,c.h)("div",{style:"padding-left:5px; display: inline-block;width:80px;text-align:left"},[n])])}},{label:"财务确认人",align:"center",headerAlign:"center",minWidth:128,formatter:e=>e.confirm_by??"--"},{label:"财务确认时间",align:"center",headerAlign:"center",minWidth:142,formatter:e=>e.confirm_date?e.confirm_date.replace(/-/gi,"."):"--"}]),n=async t=>{a.loading=!0;const[l,{data:n}]=await Promise.all([await(0,w._v)(500),await(0,p.YH)(t)]);a.loading=!1,n.success?(a.uniteData=n.data.data,a.total=n.data.total):e.root.$message({type:"warning",message:n.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},s=async l=>{a.loading=!0;const[s,{data:i}]=await Promise.all([await(0,w._v)(500),await(0,p.B0)(l)]);a.loading=!1,i.success?(n(t.value),e.root.$message.success("删除成功！")):e.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return{...(0,c.toRefs)(a),getUniteData:n,deleteUnite:s,queryParams:t,columns:l}},A=e=>{const t=(0,c.ref)({settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"0",page_num:1,num:10}),a=(0,c.reactive)({loading:!1,uniteData:[],total:0}),l=(0,c.ref)([{label:"结算周期",minWidth:168,align:"center",headerAlign:"center",formatter:e=>e.settlement_date.replace(/-/gi,".")},{label:"佣金 (元)",minWidth:168,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")},{label:"技术服务费  ",minWidth:168,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.settled_tech_service_fee,2,".",",")},{label:"结算项目数",prop:"project_num",align:"center",headerAlign:"center",minWidth:150},{label:"状态",prop:"project_num",align:"center",headerAlign:"center",minWidth:133,formatter:e=>{const{status:t,project_details:a}=e,l=H.get(t),n=`display: inline-block;margin-top:6px; border-radius: 50%; width: 6px;height: 6px;background: ${l};`,s=M.get(t)??"--",i=(0,c.h)("div",{style:"display: flex;justify-content: center;padding-left:25px;",slot:"reference"},[(0,c.h)("div",{style:n}),(0,c.h)("div",{style:"padding-left:5px; display: inline-block;width:80px;text-align:left"},[s])]),r=(0,c.h)("el-popover",{attrs:{placement:"bottom-start",width:200,trigger:"hover",popperClass:"unit-popover"}},[(0,c.h)("div",{},[(0,c.h)(5===t?j:P,{attrs:{list:a}})]),i]);let o;return o=4===t||5===t?r:i,o}},{label:"财务确认人",align:"center",headerAlign:"center",minWidth:128,formatter:e=>e.confirm_by??"--"},{label:"财务确认时间",align:"center",headerAlign:"center",minWidth:142,formatter:e=>e.confirm_date?e.confirm_date.replace(/-/gi,"."):"--"}]),n=async t=>{a.loading=!0;const[l,{data:n}]=await Promise.all([await(0,w._v)(500),await(0,p.YH)(t)]);a.loading=!1,n.success?(a.uniteData=n.data.data,a.total=n.data.total):e.root.$message({type:"warning",message:n.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},s=async l=>{a.loading=!0;const[s,{data:i}]=await Promise.all([await(0,w._v)(500),await(0,p.B0)(l)]);a.loading=!1,i.success?(n(t.value),e.root.$message.success("删除成功！")):e.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return{...(0,c.toRefs)(a),getUniteData:n,deleteUnite:s,queryParams:t,columns:l}},T=e=>{const t=(0,c.ref)({settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"1",page_num:1,num:10,settlement_kind:2}),a=(0,c.reactive)({loading:!1,uniteData:[],total:0}),l=(0,c.ref)([{label:"结算周期",minWidth:168,align:"center",headerAlign:"center",formatter:e=>e.settlement_date.replace(/-/gi,".")},{label:"主播佣金 (元)",minWidth:168,align:"right",headerAlign:"right",formatter:e=>(0,b.Y4)(e.commission_amount,2,".",",")},{label:"结算项目数",prop:"project_num",align:"center",headerAlign:"center",minWidth:150},{label:"状态",prop:"project_num",align:"center",headerAlign:"center",minWidth:133,formatter:e=>{const{status:t,project_details:a}=e,l=H.get(t),n=`display: inline-block;margin-top:6px; border-radius: 50%; width: 6px;height: 6px;background: ${l};`,s=M.get(t)??"--",i=(0,c.h)("div",{style:"display: flex;justify-content: center;padding-left:25px;",slot:"reference"},[(0,c.h)("div",{style:n}),(0,c.h)("div",{style:"padding-left:5px; display: inline-block;width:80px;text-align:left"},[s])]),r=(0,c.h)("el-popover",{attrs:{placement:"bottom-start",width:200,trigger:"hover",popperClass:"unit-popover"}},[(0,c.h)("div",{},[(0,c.h)(5===t?j:P,{attrs:{list:a}})]),i]);let o;return o=4===t||5===t?r:i,o}},{label:"财务确认人",align:"center",headerAlign:"center",minWidth:128,formatter:e=>e.confirm_by??"--"},{label:"财务确认时间",align:"center",headerAlign:"center",minWidth:142,formatter:e=>e.confirm_date?e.confirm_date.replace(/-/gi,"."):"--"}]),n=async t=>{a.loading=!0;const[l,{data:n}]=await Promise.all([await(0,w._v)(500),await(0,p.YH)(t)]);a.loading=!1,n.success?(a.uniteData=n.data.data,a.total=n.data.total):e.root.$message({type:"warning",message:n.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},s=async l=>{a.loading=!0;const[s,{data:i}]=await Promise.all([await(0,w._v)(500),await(0,p.B0)(l)]);a.loading=!1,i.success?(n(t.value),e.root.$message.success("删除成功！")):e.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return{...(0,c.toRefs)(a),getUniteData:n,deleteUnite:s,queryParams:t,columns:l}};var W=a(82741);const z=[{label:"全部",value:void 0},{label:"待财务确认",value:"1"},{label:"已确认",value:"2"}];var Y,O,F=(0,c.defineComponent)({components:{createDialog:g,detailDialog:_},setup(e,t){const{getUniteData:a,queryParams:l,uniteData:n,loading:s,columns:i,deleteUnite:r,total:o}=q(t),u=[],d=(0,c.ref)(null),m=(0,c.ref)(null),p=()=>{d.value?.show()},h=(0,c.ref)([]),g=async(e,a)=>{const l=await(0,W.I)(t,a);l&&r(e)};i.value.push({label:"操作",align:"center",headerAlign:"center",minWidth:120,formatter:e=>{const t=[];return t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{t.stopPropagation(),m.value?.show(e)}}},["查看"])),t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{g(e.id,"是否删除该结算单"),t.stopPropagation()}}},["删除"])),t}});const v=()=>{a(l.value)},f=()=>{l.value={settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"1",page_num:1,num:20},v()},b=()=>{a(l.value)},y=e=>{l.value.page_num=e,v()},_=e=>{l.value.num=e,v()},w=e=>{e?(l.value.settlement_date_start=e[0],l.value.settlement_date_end=e[1]):(l.value.settlement_date_start=void 0,l.value.settlement_date_end=void 0)};return(0,c.onMounted)((()=>{a(l.value)})),{queryParams:l,createUnite:p,list:u,loading:s,columns:i,handleCurrentChange:y,handlePageSizeChange:_,queryHandler:v,uniteData:n,resetHandler:f,unityTotal:o,createHandler:b,monthHandle:w,createDialogRef:d,detailDialogRef:m,monthRange:h}},render(){const e=arguments[0];return e("div",{class:"investment-unite"},[e("tg-card",{attrs:{padding:18},class:"investment-unite-filter"},[e("el-form",{class:"flex-form",attrs:{inline:!0,size:"small","show-message":!1,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"结算周期："}},[e("el-date-picker",{attrs:{type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","range-separator":"~",format:"yyyy.MM","value-format":"yyyy-MM-01"},style:"width: 250px",on:{change:this.monthHandle},model:{value:this.monthRange,callback:e=>{this.monthRange=e}}})]),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{attrs:{clearable:!0,placeholder:"全部"},style:"width: 250px",model:{value:this.queryParams.status,callback:e=>{this.$set(this.queryParams,"status",e)}}},[z.map((t=>e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})))])]),e("el-form-item",{attrs:{label:" ","label-width":"20px"}},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.queryHandler()}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>{this.resetHandler()}}},["重置"])])])]),e("tg-card",{class:"mgt-12 investment-unite-table"},[e("tg-button-line",{class:"mgt-12"},[e("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:()=>{this.createUnite()}}},["发起统一结算"])]),e("tg-table",{attrs:{border:!0,stripe:!0,data:this.uniteData,height:"calc(100vh - 302px)"},directives:[{name:"loading",value:this.loading}],class:"mgt-12 investment-unite-table-content"},[this.columns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))),0===this.uniteData.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无项目"}})])]),this.uniteData.length>0&&e("el-pagination",{style:"margin: 8px 0",class:"flex-none",attrs:{"current-page":this.queryParams.page_num,"page-sizes":[10,20,50,100],"page-size":this.queryParams.num,total:this.unityTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.handlePageSizeChange}})]),e("create-dialog",{ref:"createDialogRef",attrs:{is_estimate:"1"},on:{success:e=>{this.detailDialogRef?.show(e,!1),this.createHandler()}}}),e("detail-dialog",{attrs:{is_estimate:"1"},ref:"detailDialogRef",on:{success:()=>{this.createHandler()}}})])}}),U=F,G=(0,D.Z)(U,Y,O,!1,null,"d6fdecb8",null),B=G.exports;const L=[{label:"全部",value:void 0},{label:"待财务确认",value:"1"},{label:"待项目确认",value:"4"},{label:"项目不通过",value:"5"},{label:"已确认",value:"2"}];var E,N,X=(0,c.defineComponent)({components:{createDialog:g,detailDialog:_},setup(e,t){const{getUniteData:a,queryParams:l,uniteData:n,loading:s,columns:i,deleteUnite:r,total:o}=A(t),u=[],d=(0,c.ref)(null),m=(0,c.ref)(null),p=()=>{d.value?.show()},h=(0,c.ref)([]),g=async(e,a)=>{const l=await(0,W.I)(t,a);l&&r(e)};i.value.push({label:"操作",align:"center",headerAlign:"center",minWidth:120,formatter:e=>{const t=[];return t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{t.stopPropagation(),m.value?.show(e)}}},["查看"])),t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{g(e.id,"是否删除该结算单"),t.stopPropagation()}}},["删除"])),t}});const v=()=>{a(l.value)},f=()=>{l.value={settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"0",page_num:1,num:10},v()},b=()=>{a(l.value)},y=e=>{l.value.page_num=e,v()},_=e=>{l.value.num=e,v()},w=e=>{e?(l.value.settlement_date_start=e[0],l.value.settlement_date_end=e[1]):(l.value.settlement_date_start=void 0,l.value.settlement_date_end=void 0)};return(0,c.onMounted)((()=>{a(l.value)})),{queryParams:l,createUnite:p,list:u,loading:s,columns:i,handleCurrentChange:y,handlePageSizeChange:_,queryHandler:v,uniteData:n,resetHandler:f,unityTotal:o,createHandler:b,monthHandle:w,createDialogRef:d,detailDialogRef:m,monthRange:h}},render(){const e=arguments[0];return e("div",{class:"investment-automatic"},[e("tg-card",{attrs:{padding:18},class:"investment-automatic-filter"},[e("el-form",{class:"flex-form",attrs:{inline:!0,size:"small","show-message":!1,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"结算周期："}},[e("el-date-picker",{attrs:{type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","range-separator":"~",format:"yyyy.MM","value-format":"yyyy-MM-01"},style:"width: 250px",on:{change:this.monthHandle},model:{value:this.monthRange,callback:e=>{this.monthRange=e}}})]),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{attrs:{clearable:!0,placeholder:"全部"},style:"width: 250px",model:{value:this.queryParams.status,callback:e=>{this.$set(this.queryParams,"status",e)}}},[L.map((t=>e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})))])]),e("el-form-item",{attrs:{label:" ","label-width":"20px"}},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.queryHandler()}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>{this.resetHandler()}}},["重置"])])])]),e("tg-card",{class:"mgt-12 investment-automatic-table"},[e("tg-button-line",{class:"mgt-12"},[e("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:()=>{this.createUnite()}}},["发起统一结算"])]),e("tg-table",{attrs:{border:!0,stripe:!0,data:this.uniteData,height:"calc(100vh - 302px)"},directives:[{name:"loading",value:this.loading}],class:"mgt-12 investment-automatic-table-content"},[this.columns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))),0===this.uniteData.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无项目"}})])]),this.uniteData.length>0&&e("el-pagination",{style:"margin: 8px 0",class:"flex-none",attrs:{"current-page":this.queryParams.page_num,"page-sizes":[10,20,50,100],"page-size":this.queryParams.num,total:this.unityTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.handlePageSizeChange}})]),e("create-dialog",{ref:"createDialogRef",attrs:{is_estimate:"0"},on:{success:e=>{this.detailDialogRef?.show(e,!0),this.createHandler()}}}),e("detail-dialog",{attrs:{is_estimate:"0"},ref:"detailDialogRef",on:{success:()=>{this.createHandler()}}})])}}),I=X,Z=(0,D.Z)(I,E,N,!1,null,"8e17555a",null),K=Z.exports,V=a(89935),Q=a(64519),J=a(57325);new Map([[0,"未提交"],[1,"待财务确认"],[4,"待项目确认"],[2,"已确认"],[3,"已退回"],[5,"项目不通过"]]),new Map([[2,"rgba(0,169,53,0.60);"],[1,"rgba(255,122,54,0.60);"],[4,"rgba(255,122,54,0.60);"],[5,"#ed3434"],[3,"#ed3434"]]);const ee=e=>{const t=(0,c.ref)({start_time:void 0,end_time:void 0,write_off_status:void 0,page_num:1,num:10}),a=(0,c.reactive)({loading:!1,uniteData:[],total:0}),l=(0,c.ref)({}),n=(0,c.ref)([{label:"提现编号",prop:"withdraw_uid",minWidth:188,align:"center"},{label:"提现公司",prop:"company_name",minWidth:208,align:"left"},{label:"到账时间",prop:"arrival_date_str",minWidth:110,align:"center",formatter:e=>f()(e.arrival_date_str).format("YYYY.MM.DD")},{label:"提现金额（元）",prop:"withdraw_amount",minWidth:156,align:"right",formatter:e=>(0,b.Y4)(Number(e.withdraw_amount||0),2,".",",")},{label:"收款凭证",prop:"withdraw_uid",minWidth:88,align:"center",formatter:e=>h("a",{on:{click:()=>{Q.Z.showDetail((0,J.W)(e.certificate_pic,!1))}}},["查看"])},{label:"核销状态",prop:"write_off_status",minWidth:118,align:"center",formatter:e=>{let t,a=h("tg-icon",{attrs:{name:"ico-a-yulaneye2x"}});const l=h("div",{style:"margin-top: 2px;line-height: 12px;",class:"svg"}),n=h("span",{style:"margin-top: 2px;line-height: 12px;"},[" ",h("el-popover",{attrs:{placement:"bottom","popper-class":"tg-body-container",trigger:"hover",width:"600","open-delay":500}},[h("tg-icon",{attrs:{name:"ico-a-yulaneye2x"},slot:"reference"}),h("tg-table",{attrs:{className:"popper-table-unite",data:e.achievement_list,border:!0,stripe:!0}},[h("el-table-column",{attrs:{label:"项目名称",prop:"project_name",width:"136",align:"left","header-align":"center","show-overflow-tooltip":!0}}),h("el-table-column",{attrs:{label:"结算单号",prop:"settlement_uid",align:"left","header-align":"center","show-overflow-tooltip":!0}}),h("el-table-column",{attrs:{label:"应收单号",prop:"receivable_uid",align:"left","header-align":"center","show-overflow-tooltip":!0}}),h("el-table-column",{attrs:{label:"核销金额 (元)",prop:"write_off_amount",width:"120",align:"right","header-align":"center","show-overflow-tooltip":!0},scopedSlots:{default:({row:e})=>{const t=e.write_off_amount<0?"color:#ff7a36;text-align:right":"text-align:right";return h("div",{style:t},[(0,b.Y4)(Number(e.write_off_amount||0),2,".",",")])}}})])])]);switch(e.write_off_status){case V.Sx.writeoff_no:t=h("span",{class:"status status-part"},["未核销"]),a=l;break;case V.Sx.writeoff_partial:t=h("span",{class:"status status-part"},["部分核销"]),a=n;break;case V.Sx.writeoff_yes:t=h("span",{class:"status"},["已核销"]),a=n;break;default:t=h("span",["未知状态"]),a=l}return h("div",{class:"status-box"},[t,a])}},{label:"登记时间",prop:"gmt_create_str",minWidth:110,align:"center",formatter:e=>f()(e.gmt_create_str).format("YYYY.MM.DD")},{label:"登录人",prop:"add_by_name",minWidth:110,align:"center"}]),s=async t=>{a.loading=!0;const{data:n}=await(0,p.b$)(t);a.loading=!1,n.success?(a.uniteData=n.data.withdraw_infos,a.total=n.data.total,l.value=n.data.statistics_data):e.root.$message({type:"warning",message:n.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},i=async l=>{a.loading=!0;const[n,{data:i}]=await Promise.all([await(0,w._v)(500),await(0,p.II)(l)]);a.loading=!1,i.success?(s(t.value),e.root.$message.success("删除成功！")):e.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},r=async t=>{const{data:a}=await(0,p.ln)(t);a.success?e.root.$message.success("核销成功！"):e.root.$message({type:"warning",message:a.message??"核销失败，稍后重试",duration:2e3,showClose:!0})};return{...(0,c.toRefs)(a),statistics_data:l,getUniteData:s,deleteUnite:i,queryParams:t,columns:n,writeOff:r}};var te,ae,le=a(43773),ne=a(3346),se=(0,c.defineComponent)({setup(e,t){const a=(0,c.ref)({certificate_pic:[]}),l=(0,c.ref)(null),n=(0,c.ref)([]),s=()=>{l.value?.validate((async e=>{if(!e)return e;await(0,ne._F)({company_id:a.value.company_id,arrival_date:f()(a.value.arrival_date).format("YYYY-MM-DD"),withdraw_amount:a.value.withdraw_amount,certificate_pic:a.value.certificate_pic[0]}),t.emit("close"),t.emit("submit")}))},i=()=>{a.value={certificate_pic:[]}},r=e=>{a.value.certificate_pic=[e.data.source]},o=async e=>{const t=await(0,ne.kg)({company_name:e,num:10});n.value=t.data.data.data};return{form:a,show:i,dialogSubmit:s,formRef:l,successHandle:r,remoteMethod:o,companyList:n}},render(){const e=arguments[0],t=this.form;return e("div",{class:"dialog-content"},[e("el-form",d()([{ref:"formRef"},{attrs:{model:t}},{attrs:{"label-width":"42px",size:"small","label-position":"top","hide-required-asterisk":!0}}]),[e("el-form-item",{attrs:{label:"提现公司",prop:"company_id",rules:{required:!0,message:"请选择公司",trigger:["blur"]}}},[e("el-select",{attrs:{placeholder:"请选择公司",remote:!0,filterable:!0,"remote-method":this.remoteMethod},style:"width: 100%",model:{value:t.company_id,callback:e=>{this.$set(t,"company_id",e)}}},[this.companyList.map(((t,a)=>e("el-option",{key:a,attrs:{label:t.company_name,value:t.id}})))])]),e("el-form-item",{attrs:{label:"到账时间",prop:"arrival_date",rules:{required:!0,message:"请选择时间",trigger:["blur"]}}},[e("el-date-picker",{attrs:{placeholder:"选择时间"},style:"width: 100%",model:{value:t.arrival_date,callback:e=>{this.$set(t,"arrival_date",e)}}})]),e("el-form-item",{attrs:{label:"提现金额",prop:"withdraw_amount",rules:{required:!0,message:"请提现金额",trigger:["blur"]}}},[e("el-input",{attrs:{placeholder:"请输入提现金额"},style:"width: 100%",model:{value:t.withdraw_amount,callback:e=>{this.$set(t,"withdraw_amount",e)}}})]),e("el-form-item",{attrs:{label:"请上传附件",prop:"certificate_pic",rules:{required:!0,message:"请上传附件",trigger:["blur"]}},class:"upload-box"},[e("div",{class:"upload-form"},[e("tg-upload",{attrs:{placeholder:"请选择公司",prop:"company_id",action:"/api/shop_live/upload_photo","show-file-list":!1,success:this.successHandle},model:{value:t.company_id,callback:e=>{this.$set(t,"company_id",e)}}},[e("tg-button",{attrs:{icon:"ico-upload-lite"}},["上传文件"])]),e("span",{class:"file-tips"},["支持扩展名：.jpg .jpeg .png"])]),e("upload-file-list",{model:{value:t.certificate_pic,callback:e=>{this.$set(t,"certificate_pic",e)}}})])])])}}),ie=se,re=(0,D.Z)(ie,te,ae,!1,null,"2bf5b3fa",null),oe=re.exports,ce=a(61282);const ue=[{label:"全部",value:void 0},...V.L8];var de,me,pe=(0,c.defineComponent)({setup(e,t){const{getUniteData:a,queryParams:l,uniteData:n,loading:s,columns:i,statistics_data:r,deleteUnite:o,total:u,writeOff:d}=ee(t),m=[],p=(0,c.ref)({monthRange:[],status:void 0}),h=async(e,a)=>{const l=await(0,W.I)(t,a);l&&o(e)},g=async e=>{const n=await(0,W.I)(t,"是否核销该提现记录");n&&(await d(e),await a(l.value))};i.value.push({label:"操作",align:"center",headerAlign:"center",minWidth:120,formatter:e=>{const t=[];return e.write_off_status===V.Sx.writeoff_no||e.write_off_status===V.Sx.writeoff_partial?t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{t.stopPropagation(),g(e.id)}}},["核销"])):t.push((0,c.h)("tg-button",{props:{type:"link"},attrs:{style:"visibility: hidden"},class:"mgr-12"},["核销"])),t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{h(e.id,"是否删除该提现记录"),t.stopPropagation()}}},["删除"])),t}});const v=()=>{l.value={start_time:p.value.monthRange[0],end_time:p.value.monthRange[1],write_off_status:p.value.status,page_num:1,num:l.value.num},a(l.value)},f=()=>{p.value={monthRange:[],status:void 0},v()},b=()=>{a(l.value)},y=e=>{l.value.page_num=e,v()},_=e=>{l.value.num=e,v()},w=()=>{a(l.value)};(0,c.onMounted)((()=>{a(l.value)}));const k=(0,le.R)({width:"440px",component:oe,title:"提现登记",on:{submit(){w()}}});return{statistics_data:r,queryParams:l,list:m,loading:s,columns:i,handleCurrentChange:y,handlePageSizeChange:_,queryHandler:v,uniteData:n,resetHandler:f,unityTotal:u,createHandler:b,formModel:p,dialogEnter:k,reload:w}},render(){const e=arguments[0];return e("div",{class:"withdrawal-unite"},[e("tg-card",{attrs:{padding:18},class:"withdrawal-filter"},[e("el-form",{class:"flex-form",attrs:{inline:!0,size:"small","show-message":!1,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"提现时间："}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",format:"yyyy.MM.DD"},style:"width: 240px",model:{value:this.formModel.monthRange,callback:e=>{this.$set(this.formModel,"monthRange",e)}}})]),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{attrs:{clearable:!0,placeholder:"全部"},style:"width: 250px",model:{value:this.formModel.status,callback:e=>{this.$set(this.formModel,"status",e)}}},[ue.map((t=>e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})))])]),e("el-form-item",{attrs:{label:" ","label-width":"20px"}},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.queryHandler()}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>{this.resetHandler()}}},["重置"])])])]),e("tg-card",{class:"mgt-12 withdrawal-table"},[e("div",{class:"total-box mgt-12"},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.dialogEnter.show()}}},["提现登记"]),e("div",{class:"total-num"},[e("div",{class:"label-value"},[e("span",{class:"label"},["已提现笔数："]),e("span",{class:"value"},[this.statistics_data.count_withdraw])]),e("div",{class:"label-value"},[e("span",{class:"label"},["提现金额："]),e("span",{class:"value"},[(0,ce.dN)(this.statistics_data.sum_withdraw_amount)])]),e("div",{class:"label-value"},[e("span",{class:"label"},["核销金额："]),e("span",{class:"value"},[(0,ce.dN)(this.statistics_data.sum_write_off_amount)])]),e("div",{class:"label-value"},[e("span",{class:"label"},["未核销金额："]),e("span",{class:"value orange"},[(0,ce.dN)(this.statistics_data.sum_not_write_off_amount)])])])]),e("div",{class:"table-full mgt-12"},[e("tg-table",{attrs:{border:!0,stripe:!0,data:this.uniteData,columns:this.columns,height:"100%"},directives:[{name:"loading",value:this.loading}]},[0===this.uniteData.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无记录"}})])])]),this.uniteData.length>0&&e("el-pagination",{style:"margin: 8px 0",class:"flex-none",attrs:{"current-page":this.queryParams.page_num,"page-sizes":[10,20,50,100],"page-size":this.queryParams.num,total:this.unityTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.handlePageSizeChange}})])])}}),he=pe,ge=(0,D.Z)(he,de,me,!1,null,"078fbf92",null),ve=ge.exports;const fe=[{label:"全部",value:void 0},{label:"待财务确认",value:"1"},{label:"待项目确认",value:"4"},{label:"项目不通过",value:"5"},{label:"已确认",value:"2"}];var be,ye,_e=(0,c.defineComponent)({components:{createDialog:g,detailDialog:_},setup(e,t){const{getUniteData:a,queryParams:l,uniteData:n,loading:s,columns:i,deleteUnite:r,total:o}=T(t),u=[],d=(0,c.ref)(null),m=(0,c.ref)(null),p=()=>{d.value?.show()},h=(0,c.ref)([]),g=async(e,a)=>{const l=await(0,W.I)(t,a);l&&r(e)};i.value.push({label:"操作",align:"center",headerAlign:"center",minWidth:120,formatter:e=>{const t=[];return t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{t.stopPropagation(),m.value?.show(e)}}},["查看"])),t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{g(e.id,"是否删除该结算单"),t.stopPropagation()}}},["删除"])),t}});const v=()=>{a(l.value)},f=()=>{l.value={settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"1",page_num:1,num:10,settlement_kind:2},v()},b=()=>{a(l.value)},y=e=>{l.value.page_num=e,v()},_=e=>{l.value.num=e,v()},w=e=>{e?(l.value.settlement_date_start=e[0],l.value.settlement_date_end=e[1]):(l.value.settlement_date_start=void 0,l.value.settlement_date_end=void 0)};return(0,c.onMounted)((()=>{v()})),{queryParams:l,createUnite:p,list:u,loading:s,columns:i,handleCurrentChange:y,handlePageSizeChange:_,queryHandler:v,uniteData:n,resetHandler:f,unityTotal:o,createHandler:b,monthHandle:w,createDialogRef:d,detailDialogRef:m,monthRange:h}},render(){const e=arguments[0];return e("div",{class:"investment-automatic"},[e("tg-card",{attrs:{padding:18},class:"investment-automatic-filter"},[e("el-form",{class:"flex-form",attrs:{inline:!0,size:"small","show-message":!1,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"结算周期："}},[e("el-date-picker",{attrs:{type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","range-separator":"~",format:"yyyy.MM","value-format":"yyyy-MM-01"},style:"width: 250px",on:{change:this.monthHandle},model:{value:this.monthRange,callback:e=>{this.monthRange=e}}})]),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{attrs:{clearable:!0,placeholder:"全部"},style:"width: 250px",model:{value:this.queryParams.status,callback:e=>{this.$set(this.queryParams,"status",e)}}},[fe.map((t=>e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})))])]),e("el-form-item",{attrs:{label:" ","label-width":"20px"}},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.queryHandler()}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>{this.resetHandler()}}},["重置"])])])]),e("tg-card",{class:"mgt-12 investment-automatic-table"},[e("tg-button-line",{class:"mgt-12"},[e("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:()=>{this.createUnite()}}},["发起统一结算"])]),e("tg-table",{attrs:{border:!0,stripe:!0,data:this.uniteData,height:"calc(100vh - 302px)"},directives:[{name:"loading",value:this.loading}],class:"mgt-12 investment-automatic-table-content"},[this.columns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))),0===this.uniteData.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无项目"}})])]),this.uniteData.length>0&&e("el-pagination",{style:"margin: 8px 0",class:"flex-none",attrs:{"current-page":this.queryParams.page_num,"page-sizes":[10,20,50,100],"page-size":this.queryParams.num,total:this.unityTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.handlePageSizeChange}})]),e("create-dialog",{ref:"createDialogRef",attrs:{is_estimate:"1",settlement_kind:"2"},on:{success:e=>{this.detailDialogRef?.show(e),this.createHandler()}}}),e("detail-dialog",{attrs:{is_estimate:"2",settlement_kind:"2"},ref:"detailDialogRef",on:{success:()=>{this.createHandler()}}})])}}),we=_e,ke=(0,D.Z)(we,be,ye,!1,null,"1df210d9",null),xe=ke.exports;const De=[{label:"全部",value:void 0},{label:"待财务确认",value:"1"},{label:"待项目确认",value:"4"},{label:"项目不通过",value:"5"},{label:"已确认",value:"2"}];var Ce,Pe,Se=(0,c.defineComponent)({components:{createDialog:g,detailDialog:_},setup(e,t){const{getUniteData:a,queryParams:l,uniteData:n,loading:s,columns:i,deleteUnite:r,total:o}=T(t);l.value.is_estimate="0";const u=[],d=(0,c.ref)(null),m=(0,c.ref)(null),p=()=>{d.value?.show()},h=(0,c.ref)([]),g=async(e,a)=>{const l=await(0,W.I)(t,a);l&&r(e)};i.value.push({label:"操作",align:"center",headerAlign:"center",minWidth:120,formatter:e=>{const t=[];return t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{t.stopPropagation(),m.value?.show(e)}}},["查看"])),t.push((0,c.h)("tg-button",{props:{type:"link"},class:"mgr-12",on:{click:t=>{g(e.id,"是否删除该结算单"),t.stopPropagation()}}},["删除"])),t}});const v=()=>{a(l.value)},f=()=>{l.value={settlement_date_start:void 0,settlement_date_end:void 0,status:void 0,is_estimate:"0",page_num:1,num:10,settlement_kind:2},v()},b=()=>{a(l.value)},y=e=>{l.value.page_num=e,v()},_=e=>{l.value.num=e,v()},w=e=>{e?(l.value.settlement_date_start=e[0],l.value.settlement_date_end=e[1]):(l.value.settlement_date_start=void 0,l.value.settlement_date_end=void 0)};return(0,c.onMounted)((()=>{v()})),{queryParams:l,createUnite:p,list:u,loading:s,columns:i,handleCurrentChange:y,handlePageSizeChange:_,queryHandler:v,uniteData:n,resetHandler:f,unityTotal:o,createHandler:b,monthHandle:w,createDialogRef:d,detailDialogRef:m,monthRange:h}},render(){const e=arguments[0];return e("div",{class:"investment-automatic"},[e("tg-card",{attrs:{padding:18},class:"investment-automatic-filter"},[e("el-form",{class:"flex-form",attrs:{inline:!0,size:"small","show-message":!1,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"结算周期："}},[e("el-date-picker",{attrs:{type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","range-separator":"~",format:"yyyy.MM","value-format":"yyyy-MM-01"},style:"width: 250px",on:{change:this.monthHandle},model:{value:this.monthRange,callback:e=>{this.monthRange=e}}})]),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{attrs:{clearable:!0,placeholder:"全部"},style:"width: 250px",model:{value:this.queryParams.status,callback:e=>{this.$set(this.queryParams,"status",e)}}},[De.map((t=>e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})))])]),e("el-form-item",{attrs:{label:" ","label-width":"20px"}},[e("tg-button",{attrs:{type:"primary"},on:{click:()=>{this.queryHandler()}}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:()=>{this.resetHandler()}}},["重置"])])])]),e("tg-card",{class:"mgt-12 investment-automatic-table"},[e("tg-button-line",{class:"mgt-12"},[e("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:()=>{this.createUnite()}}},["发起统一结算"])]),e("tg-table",{attrs:{border:!0,stripe:!0,data:this.uniteData,height:"calc(100vh - 302px)"},directives:[{name:"loading",value:this.loading}],class:"mgt-12 investment-automatic-table-content"},[this.columns.map(((t,a)=>e("el-table-column",d()([{},{props:{...t}},{key:a}])))),0===this.uniteData.length&&e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无项目"}})])]),this.uniteData.length>0&&e("el-pagination",{style:"margin: 8px 0",class:"flex-none",attrs:{"current-page":this.queryParams.page_num,"page-sizes":[10,20,50,100],"page-size":this.queryParams.num,total:this.unityTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.handlePageSizeChange}})]),e("create-dialog",{ref:"createDialogRef",attrs:{is_estimate:"0",settlement_kind:"2"},on:{success:e=>{this.detailDialogRef?.show(e),this.createHandler()}}}),e("detail-dialog",{attrs:{is_estimate:"2",settlement_kind:"2"},ref:"detailDialogRef",on:{success:()=>{this.createHandler()}}})])}}),$e=Se,Re=(0,D.Z)($e,Ce,Pe,!1,null,"d9ab66ac",null),je=Re.exports,Me=a(23812),He=a(1763);const qe=new Map([["estimated","Estimated"],["automatic","Automatic"],["withdrawal","Withdrawal"],["cost","Cost"],["costFormal","costFormal"]]);var Ae=(0,c.defineComponent)({props:{tab:{type:String,default:"estimated"}},components:{Estimated:B,Automatic:K,Withdrawal:ve,Cost:xe,CostFormal:je},setup(e,t){const a=(0,Me.YE)([{label:"暂估收入结算",value:"estimated"},{label:"收入结算",value:"automatic"},{label:"暂估成本结算",value:"cost"},{label:"成本结算",value:"costFormal"},{label:"提现记录",value:"withdrawal"}],e.tab),l=(0,c.computed)((()=>qe.get(a.checkedTab.value)??"estimated")),n=e=>{a.checkedTab.value=e.value;const l=a.tabs[0].value===e.value?{name:He.A.unite}:{name:He.A.withdrawal,params:{tab:e.value}};t.root.$router.push(l)};return{...a,tabPane:l,onTabChange:n}}}),Te=Ae,We=(0,D.Z)(Te,r,o,!1,null,null,null),ze=We.exports},89935:function(e,t,a){a.d(t,{$X:function(){return w},CE:function(){return u},E1:function(){return M},E9:function(){return c},Fj:function(){return j},G7:function(){return D},H2:function(){return s},KL:function(){return x},KS:function(){return i},L8:function(){return S},OI:function(){return n},Q:function(){return g},Rd:function(){return b},Sx:function(){return P},Vd:function(){return d},XQ:function(){return h},YE:function(){return o},YK:function(){return _},aX:function(){return r},bM:function(){return $},dQ:function(){return f},gZ:function(){return H},hi:function(){return C},iN:function(){return m},qw:function(){return R},sk:function(){return p},tv:function(){return k},u_:function(){return v},w1:function(){return y}});var l=a(93889);const n=[{value:1,label:"美妆"},{value:2,label:"个护"},{value:3,label:"服饰"},{value:4,label:"美食"},{value:5,label:"母婴"},{value:6,label:"数码"},{value:7,label:"家居"},{value:8,label:"保健"},{value:9,label:"萌宠"},{value:10,label:"箱包"},{value:11,label:"配饰"}],s=[{value:0,label:"混播"},{value:1,label:"专场"}],i=[{value:0,label:"0 ~ 100"},{value:1,label:"100 ~ 200"},{value:2,label:"200以上"}],r=[{value:"每小时观看人数",color:"#7484b7"},{value:"每小时观看数",color:"#4dcdb1"},{value:"场均观看人数",color:"#f895e7"},{value:"场均观看数",color:"#ffbf40"},{value:"粉丝精准度",color:"#5273d3"},{value:"日均开播场次",color:"#d87a80"},{value:"日均开播时长",color:"#b6a2de"},{value:"人均点击数",color:"#FFB980"},{value:"每小时互动数",color:"#d075c4"},{value:"人均互动数",color:"#fd936e"}],o=[{value:"最近15天",label:15},{value:"最近1个月",label:30},{value:"最近3个月",label:90}],c=[{value:"每小时观看人数",color:"#4dcdb1"},{value:"每小时观看数",color:"#7484b7"},{value:"观看数",color:"#b4c4f5"},{value:"观看人数",color:"#f895e7"},{value:"时长",color:"#5ab1ef"}],u=[{value:"最近7场",num:7},{value:"最近15场",num:15},{value:"最近30场",num:30},{value:"最近90场",num:90}],d=["最近15天","最近1个月","最近3个月"],m=[{value:0,label:"白天"},{value:1,label:"晚上"}],p=[{value:3,label:"0 ~ 5分钟"},{value:0,label:"5 ~ 10分钟"},{value:1,label:"10 ~ 15分钟"},{value:2,label:"15 ~ 20分钟"},{value:4,label:"20分钟以上"}],h=[{value:1,label:"预售场"},{value:2,label:"预热场"},{value:0,label:"非预售场"},{value:-1,label:"未录入"}],g=[{value:1,label:"预售场"},{value:2,label:"预热场"},{value:0,label:"非预售场"}],v=[{value:1,label:"未出单"},{value:2,label:"已出单"}],f=[{value:7,label:"最近一周"},{value:15,label:"最近15天"},{value:30,label:"最近一个月"}],b=[{value:l.RJ.Sales,label:"销售合同"},{value:l.RJ.Framework,label:"框架合同"}],y=[{value:1,label:"客户合同"},{value:2,label:"供应商合同"}],_=[{value:3,label:"采买合同"},{value:4,label:"框架合同"}],w=[{value:1,label:"营销业务"},{value:3,label:"抖音店播"},{value:2,label:"淘宝店播"}],k=[{value:1,label:"营销业务"},{value:3,label:"抖音店播"},{value:2,label:"淘宝店播"},{value:4,label:"区域业务"},{value:5,label:"S2B2C"}],x=[{value:1,label:"小红书"},{value:2,label:"微信公众号"},{value:3,label:"新浪微博"},{value:4,label:"抖音"},{value:5,label:"快手"},{value:6,label:"哔哩哔哩"},{value:7,label:"淘宝直播"},{value:8,label:"一直播"},{value:9,label:"淘宝图文"},{value:10,label:"淘宝短视频"},{value:11,label:"线下场地搭建"},{value:12,label:"线下视觉设计"},{value:13,label:"活动策划执行"}],D=[{value:1,label:"长视频"},{value:2,label:"短视频"},{value:3,label:"直播"}];var C,P;(function(e){e[e["ServiceCharge"]=1]="ServiceCharge",e[e["Commission"]=2]="Commission",e[e["Other"]=3]="Other",e[e["Refund"]=5]="Refund"})(C||(C={})),function(e){e[e["writeoff_no"]=0]="writeoff_no",e[e["writeoff_partial"]=1]="writeoff_partial",e[e["writeoff_yes"]=2]="writeoff_yes"}(P||(P={}));const S=[{label:"未核销",value:P.writeoff_no},{label:"部分核销",value:P.writeoff_partial},{label:"已核销",value:P.writeoff_yes}],$=new Map([[C.ServiceCharge,"服务费"],[C.Commission,"佣金"],[C.Other,"其他"],[C.Refund,"退款"]]),R=[{label:"服务费",value:C.ServiceCharge},{label:"佣金",value:C.Commission},{label:"其他",value:C.Other},{label:"退款",value:C.Refund}],j=[{label:"V任务",value:1},{label:"支付宝",value:2},{label:"对公银行",value:3}],M=[...j,{label:"阿里妈妈",value:4},{label:"巨量百应",value:5}],H=[{label:"网络营销师",value:1},{label:"练习生",value:2}]},64519:function(e,t,a){a.d(t,{Z:function(){return i}});var l=a(64923),n=a(97434),s=(0,n.defineComponent)({setup(){const e=(0,n.ref)(null);return{img:e}},render(e){return e("div",{class:"invoice-view-container"},[e("div",{class:"content"},[e("div",{class:"img-wraper"},[e("img",{attrs:{src:this.img}})]),e("div",{class:"close",on:{click:()=>{this.$emit("close")}}})])])}}),i={showDetail(e){return new Promise((t=>{const a=document.createElement("div");document.body.appendChild(a);const n=new l["default"](s);n.img=e,n.$on("close",(()=>{document.body.removeChild(n.$el),n.$destroy(),t()})),n.$mount(a)}))}}},11676:function(e,t,a){a.d(t,{K:function(){return d}});a(26699);var l=a(48606);const n=[".pdf",".doc",".docx",".ppt",".pptx"],s=[".mp4"],i=[".png",".jpg",".jpeg"],r=[".xls",".xlsx",".csv"],o=[".doc",".docx"],c=[".pdf"],u=[".csv"],d=e=>t=>{const a=/(\.[^.]+)$/.exec(t.name);let d="";a&&(d=a[1]);const m=[];if(e.image&&m.push(...i),e.file&&m.push(...n),e.video&&m.push(...s),e.excel&&m.push(...r),e.pdf&&m.push(...c),e.doc&&m.push(...o),e.csv&&m.push(...u),e.extensions&&m.push(...e.extensions),m.length>0&&!m.includes(d))return l.Message.warning(`文件格式不正确，请使用 ${m.join(";")}`),!1;if(void 0!==e.fileSize){const a=t.size/1024/1024<e.fileSize;if(!a)return l.Message.warning(`文件不能超过${e.fileSize}MB!`),!1}return!0};t["Z"]={ValidationFileUpload:d}},3346:function(e,t,a){a.d(t,{Ln:function(){return c},Me:function(){return p},OV:function(){return r},Ou:function(){return u},Pp:function(){return v},Tf:function(){return g},_F:function(){return f},eA:function(){return b},fO:function(){return y},hk:function(){return m},kg:function(){return o},mb:function(){return d},qC:function(){return h},vt:function(){return i}});var l=a(76012),n=a(10762),s=a(64236);const i=async(e,t)=>(0,l.dX)(n.y9,{params:{...(0,s.jG)({company_name:e,company_id:t})}}),r=async e=>(0,l.dX)(n.CH,{params:{...(0,s.jG)({project_uid:e})}}),o=async e=>(0,l.dX)(n.hV,{params:{...(0,s.jG)(e)}}),c=async e=>(0,l.dX)(n.yp,{params:{...(0,s.jG)(e)}}),u=async e=>(0,l.SO)(n.IY,{...(0,s.jG)(e)}),d=async e=>(0,l.SO)(n.Gs,{...(0,s.jG)(e)}),m=async e=>(0,l.SO)(n.Gs,{...e}),p=async e=>(0,l.dX)(n.S$.replace(":id",e)),h=async e=>(0,l.dX)(n.ii,{params:{...(0,s.jG)(e)}}),g=async e=>(0,l.dX)(n.AP,{params:{...(0,s.jG)(e)}}),v=async e=>(0,l.dX)(n.L6,{params:{...(0,s.jG)(e)}}),f=async e=>(0,l.SO)("/api/shop_live/save_withdraw",{...e}),b=async e=>(0,l.dX)("/api/settlement/get_settlement_by_shop_id",{params:{...(0,s.jG)(e)}}),y=async e=>(0,l.dX)("/api/settlement/query_settlements_last_achievement",{params:{...(0,s.jG)(e)}})},71963:function(e,t,a){a.d(t,{Qp:function(){return q},t:function(){return R},nE:function(){return P},Nz:function(){return T},b$:function(){return z},YH:function(){return W},FZ:function(){return j},GZ:function(){return M},uc:function(){return O},Eo:function(){return Y},B0:function(){return F},R3:function(){return U},W_:function(){return $},jJ:function(){return S},bs:function(){return H},xR:function(){return A},ob:function(){return x},eD:function(){return D},We:function(){return C},II:function(){return G},ln:function(){return B}});var l=a(76012);const n="/api/shop_live/save_live_goods_v2",s="/api/settlement/save_merchant_settlement_base_info",i="/api/settlement/save_settlement_data/merchant",r="/api/settlement/gen_sub_merchant_income_settlement",o="/api/shop_live/query_merchant_shop_live",c="/api/settlement/query_merchant_settlements",u="/api/settlement/del_merchant_settlement",d="/api/settlement/pass_merchant_settlement",m="/api/settlement/pass_unity_settlement",p="/api/settlement/refuse_merchant_settlement",h="/api/settlement/approve_merchant_settlement_financial/:id",g="/api/settlement/refuse_merchant_settlement_financial/:id",v="/api/financial/query_pay_list_v2",f="/api/settlement/list_unity_settlements",b="/api/settlement/create_unity_settlements",y="/api/settlement/confirm_unity_settlements",_="/api/settlement/delete_unity_settlement",w="/api/settlement/refresh_unity_settlement";var k=a(64236);const x=async e=>(0,l.SO)(n,{...(0,k.jG)(e)}),D=async e=>(0,l.SO)(s,{...(0,k.jG)(e)}),C=async e=>(0,l.SO)(i,{...(0,k.jG)(e)}),P=async(e,t)=>(0,l.SO)(r,{...(0,k.jG)({settlement_id:e,settlement_files:t})}),S=async e=>(0,l.dX)(o,{params:{merchant_goods_id:e}}),$=async(e,t=3)=>(0,l.dX)(c,{params:{...(0,k.jG)(e??""),settlement_kind:t}}),R=async e=>(0,l.SO)(u,{...(0,k.jG)({id:e})}),j=async e=>(0,l.SO)(`${d}/${e}`),M=async e=>(0,l.SO)(`${m}/${e}`),H=(e,t)=>(0,l.SO)(`${p}/${e}`,{refuse_reason:t}),q=async e=>(0,l.dX)(h.replace(":id",`${e}`)),A=async({id:e,refuse_reason:t})=>(0,l.SO)(g.replace(":id",`${e}`),{refuse_reason:t}),T=async e=>(0,l.dX)(v,{params:e}),W=async e=>(0,l.dX)(f,{params:e}),z=async e=>(0,l.dX)("/api/shop_live/query_withdraw",{params:e}),Y=e=>(0,l.SO)(b,{...(0,k.jG)(e)}),O=async e=>(0,l.SO)(y,{...(0,k.jG)({id:e})}),F=async e=>(0,l.SO)(_,{...(0,k.jG)({id:e})}),U=async e=>(0,l.SO)(w,{...(0,k.jG)({id:e})}),G=async e=>(0,l.SO)("/api/shop_live/delete_withdraw",{...(0,k.jG)({id:e})}),B=async e=>(0,l.SO)("/api/shop_live/withdraw_write_off",{...(0,k.jG)({id:e})})},93889:function(e,t,a){a.d(t,{GD:function(){return u},MT:function(){return i.Kb},N5:function(){return s},RJ:function(){return l},TZ:function(){return r},Vx:function(){return o},cC:function(){return n},kD:function(){return m},kV:function(){return p},nd:function(){return c},wk:function(){return d}});var l,n,s,i=a(17890);(function(e){e[e["Sales"]=1]="Sales",e[e["Framework"]=2]="Framework",e[e["Purchase"]=3]="Purchase",e[e["SupplierFramework"]=4]="SupplierFramework",e[e["ServiceContract"]=5]="ServiceContract",e[e["SupplierContract"]=6]="SupplierContract",e[e["AnchorContract"]=7]="AnchorContract"})(l||(l={})),function(e){e[e["initial"]=0]="initial",e[e["waiting"]=1]="waiting",e[e["passed"]=2]="passed",e[e["refused"]=3]="refused"}(n||(n={})),function(e){e[e["Type1"]=1]="Type1",e[e["Type2"]=2]="Type2",e[e["Type3"]=3]="Type3"}(s||(s={}));const r=new Map([[s.Type1,"不用印章"],[s.Type2,"公章"],[s.Type3,"合同章"]]),o=[{label:"公章",value:s.Type2},{label:"合同章",value:s.Type3},{label:"不用印章",value:s.Type1}],c=new Map([[i.Kb.Pending,"待审批"],[i.Kb.Normal,"审批成功"],[i.Kb.Failure,"审批失败"],[i.Kb.Processing,"审批中"],[i.Kb.Invalid,"作废"]]);var u;(function(e){e[e["Bank"]=1]="Bank",e[e["Alipay"]=2]="Alipay",e[e["VTask"]=3]="VTask",e[e["Alimama"]=4]="Alimama",e[e["Buyin"]=5]="Buyin"})(u||(u={}));const d=new Map([[u.Bank,"对公银行"],[u.Alipay,"支付宝"],[u.VTask,"V任务"],[u.Alimama,"淘宝联盟"],[u.Buyin,"巨量百应"]]),m=[{value:u.Bank,label:"对公银行"},{value:u.Alipay,label:"支付宝"},{value:u.VTask,label:"V任务"},{value:u.Alimama,label:"淘宝联盟"},{value:u.Buyin,label:"巨量百应"}],p=new Map([[1,"单次合作"],[2,"框架合同"],[3,"长期合作"],[4,"合作协议"],[-1,"补充协议"],[-2,"从合同"],[-3,"解除协议"],[-4,"结算协议"],[11,"销售合同"],[12,"采买合同"]]);new Map([[0,"其它"],[1,"固定服务费"],[2,"固定服务费+佣金"],[3,"纯佣金"]])},17890:function(e,t,a){var l,n;a.d(t,{Kb:function(){return l},OX:function(){return o},l7:function(){return r},yR:function(){return s}}),function(e){e[e["Pending"]=1]="Pending",e[e["Normal"]=2]="Normal",e[e["Failure"]=3]="Failure",e[e["Processing"]=4]="Processing",e[e["Invalid"]=5]="Invalid"}(l||(l={})),function(e){e[e["Yes"]=0]="Yes",e[e["No"]=1]="No",e[e["Reject"]=2]="Reject"}(n||(n={}));const s=new Map([[l.Pending,"待审批"],[l.Normal,"审批成功"],[l.Failure,"审批失败"],[l.Processing,"审批中"],[l.Invalid,"已作废"]]),i=new Map([[n.Yes,"未上传"],[n.No,"已上传"],[n.Reject,"已驳回"]]),r=[l.Normal,l.Failure,l.Processing,l.Invalid].map((e=>({value:e,label:s.get(e)??""}))),o=[n.Yes,n.No,n.Reject].map((e=>({value:e,label:i.get(e)??""})))},82741:function(e,t,a){a.d(t,{I:function(){return n},u:function(){return s}});var l=a(71340);const n=(e,t)=>{const a="string"===typeof t?{title:t}:t;return new Promise((t=>{e.root.$TDialog({...a,onConfirm:()=>t(!0),onCancel:()=>t(!1)})}))},s=e=>{const t="string"===typeof e?{title:e}:e;return new Promise(((e,a)=>{(0,l.t)({...t,onConfirm:()=>e(!0),onCancel:()=>a()})}))}},23812:function(e,t,a){a.d(t,{GQ:function(){return r},YE:function(){return s},cY:function(){return o},pK:function(){return i}});var l=a(97434),n=a(44928);const s=(e,t)=>({tabs:(0,l.reactive)([...e]),checkedTab:(0,l.ref)(t??(e.length<1?"":e[0].value))}),i=(e,t)=>{const a=(0,l.isRef)(e)?e:(0,l.ref)(e),n=(0,l.isRef)(t)?(0,l.unref)(t):t,s=a.value.length<1?"":a.value[0].value,i=(0,l.ref)(n??s);return{tabs:a,checkedTab:i}},r=(e,t,a)=>{const n=(0,l.reactive)([...t]),s=(0,l.ref)(a??(t.length<1?"":`${t[0].value}`)),i=t=>{e.root.$router.push({path:e.root.$route.path,query:{tab:`${t.value}`}})};return(0,l.onBeforeMount)((()=>{const l=e.root.$route.query.tab;s.value="string"===typeof l?l:a??(t.length<1?"":`${t[0].value}`)})),{tabs:n,checkedTab:s,onTabChange:i}},o=(e,t)=>{const a=(0,l.reactive)([...e]),s=(0,l.ref)(t??(e.length<1?"":`${e[0].value}`)),i=(0,n.t)(),r=e=>{const t=i.currentRoute,a={...t.params,tab:e.value};i.push({name:t.name,params:a})};return s.value=i.currentRoute.params.tab||t||s.value,{tabs:a,checkedTab:s,onTabChange:r}}},44928:function(e,t,a){a.d(t,{t:function(){return n}});var l=a(86834);const n=()=>{const e=new Proxy({},{get(e,t){return Reflect.get(l.Z,t)}});return e}},43773:function(e,t,a){a.d(t,{R:function(){return m},y:function(){return p}});var l=a(36568),n=a.n(l),s=a(97434),i=a(64923),r=a(77944);let o=1;const c=()=>{const e=document.createElement("div");return e.id="dialog_"+o++,document.body.appendChild(e),e},u=new Function,d=(e,t)=>{let a=e;return void 0===a&&(a={}),Object.keys(t).forEach((e=>{const l=a[e]||u,n=t[e];a[e]=(...e)=>{if(!1!==n(...e))return l(...e)}})),a},m=(e={})=>{const t=(0,s.ref)(),a=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),l=(0,s.ref)(!0),o=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};o(e);const u=(0,s.ref)(d(e.on,{close(){a.visible=!1},updateDialog(e={}){o(e)}})),m=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:r.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,s.provide)(t,e.provide[t])}))},render(t){if(l.value&&a.visible)return t("el-dialog",n()([{class:`customer-dialog el-dialog-center-rewrite tg-body-container  ${e.class}`},{props:a},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value}),a.footer&&t("fragments",{slot:"footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{attrs:{type:"primary"},on:{click:m}},[a.okText])])])}});const p=(...e)=>{a.visible||(a.visible=!0,(0,s.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},h=e=>(o(e),f),g=()=>{a.visible=!1},v=(e,t,a=!1)=>(!0===a?u.value[e]=t:d(u.value,{[e]:t}),f);(0,s.onUnmounted)((()=>{l.value=!1,a.visible=!1}));const f=(0,s.reactive)({show:p,update:h,on:v,close:g,config:e,data:e.data});return f},p=(e={})=>{const t=(0,s.ref)(),a=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),l=(0,s.ref)(!0),o=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};o(e);const u=(0,s.ref)(d(e.on,{close(){a.visible=!1},updateDialog(e={}){o(e)}})),m=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:r.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,s.provide)(t,e.provide[t])}))},render(t){if(!l.value)return;if(!a.visible)return;const{width:s,...i}=a;return t("el-drawer",n()([{class:`tg-drawer-rewrite ${e.class}`},{props:{...i,size:s}},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[t("div",{class:"tg-drawer-content"},[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value})]),a.footer&&t("div",{class:"tg-drawer-footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{class:"mgl-12",attrs:{type:"primary"},on:{click:m}},[a.okText])])])}});const p=(...e)=>{a.visible||(a.visible=!0,(0,s.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},h=e=>(o(e),f),g=()=>{a.visible=!1},v=(e,t,a=!1)=>(!0===a?u.value[e]=t:d(u.value,{[e]:t}),f);(0,s.onUnmounted)((()=>{l.value=!1,a.visible=!1}));const f=(0,s.reactive)({show:p,update:h,on:v,close:g,config:e});return f}}}]);