"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[2154],{60600:function(e,t,a){a.d(t,{Z:function(){return k}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tg-live-project-form-dialog"},[r("el-drawer",{staticClass:"tg-dialog-classic",attrs:{title:e.formTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.visible,wrapperClosable:!1},on:{close:e.onCancelBtnClick}},[r("div",{staticClass:"tg-drawer-form-content"},[r("el-form",{ref:"formRef",attrs:{model:e.projectForm,rules:e.formRules,"label-position":"top",size:"small","label-width":"106px"}},[r("head-lines",{staticStyle:{margin:"10px 0px"},attrs:{title:"项目信息"}}),r("el-form-item",{staticClass:"one-item",attrs:{label:"项目名称",prop:"project_name"}},[r("el-input",{ref:"autoFocuseRef",attrs:{placeholder:"建议仅输入品牌名称",size:"small",maxlength:"20"},model:{value:e.projectForm.project_name,callback:function(t){e.$set(e.projectForm,"project_name",t)},expression:"projectForm.project_name"}})],1),e.isEditForm?r("el-form-item",{staticClass:"two-item-left",attrs:{label:"公司名称",prop:"company_id"}},[r("el-select",{attrs:{value:"",disabled:e.isEditForm,placeholder:e.projectForm.company_name?e.projectForm.company_name:"--",size:"small"}})],1):r("el-form-item",{staticClass:"two-item-left",attrs:{label:"公司名称",prop:"company_id"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入并选择公司名称","remote-method":e.getAllCompanyName,size:"small"},on:{change:e.onCompanyIdChange},model:{value:e.projectForm.company_id,callback:function(t){e.$set(e.projectForm,"company_id",t)},expression:"projectForm.company_id"}},e._l(e.allCompanyName,(function(t,a){return r("el-option",{key:a,attrs:{label:t.company_name,value:t.id}},[r("span",[e._v(e._s(t.company_name))])])})),1)],1),e.isEditForm?r("el-form-item",{staticClass:"two-item-left",attrs:{label:"店铺名称",prop:"company_shop_id"}},[r("el-select",{attrs:{value:"",disabled:e.isEditForm,placeholder:e.projectForm.shop_name?e.projectForm.shop_name:"--",size:"small"}})],1):r("el-form-item",{staticClass:"two-item-left",attrs:{label:"店铺名称",prop:"company_shop_id"}},[r("el-select",{attrs:{placeholder:"请选择店铺",size:"small"},on:{change:e.onShopIdChange},model:{value:e.projectForm.company_shop_id,callback:function(t){e.$set(e.projectForm,"company_shop_id",t)},expression:"projectForm.company_shop_id"}},e._l(e.allStoreName,(function(t,a){return r("el-option",{key:a,attrs:{label:t.shop_name,value:t.shop_id}},[r("span",[e._v(e._s(t.shop_name))])])})),1)],1),e.isEditForm?r("el-form-item",{staticClass:"two-item-left",attrs:{label:"品牌"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.new_brand_name,callback:function(t){e.new_brand_name=t},expression:"new_brand_name"}})],1):r("el-form-item",{staticClass:"two-item-left",attrs:{label:"品牌"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.brand_name,callback:function(t){e.brand_name=t},expression:"brand_name"}})],1),e.isEditForm?r("el-form-item",{staticClass:"two-item-left",attrs:{label:"店铺类目"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.new_shop_cateogry_name,callback:function(t){e.new_shop_cateogry_name=t},expression:"new_shop_cateogry_name"}})],1):r("el-form-item",{staticClass:"two-item-left",attrs:{label:"店铺类目"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.shop_cateogry_name,callback:function(t){e.shop_cateogry_name=t},expression:"shop_cateogry_name"}})],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"business_type",label:"业务类型"}},[r("el-select",{staticClass:"select",attrs:{disabled:e.isEditForm,placeholder:"",size:"small"},on:{change:e.onBusinessTypeChange},model:{value:e.projectForm.business_type,callback:function(t){e.$set(e.projectForm,"business_type",t)},expression:"projectForm.business_type"}},[r("el-option",{key:-1,attrs:{label:"请选择",value:-1}}),e._l(e.BusinessTypeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"cooperation_type",label:"合作类型"}},[r("el-select",{staticClass:"select",attrs:{disabled:e.isEditForm,placeholder:"",size:"small"},model:{value:e.projectForm.cooperation_type,callback:function(t){e.$set(e.projectForm,"cooperation_type",t)},expression:"projectForm.cooperation_type"}},[r("el-option",{attrs:{label:"请选择",value:-1}}),r("el-option",{attrs:{label:"自营",value:1}}),r("el-option",{attrs:{label:"区域",value:2}})],1)],1),e.projectForm.cooperation_type===e.CooperationTypeEnum.selfSupport?r("div",{staticClass:"one-item",staticStyle:{"margin-top":"-12px","margin-bottom":"18px",height:"90px",background:"#f7f8f9","border-radius":"2px",padding:"18px"}},[e.projectForm.cooperation_type===e.CooperationTypeEnum.selfSupport?r("el-form-item",{staticStyle:{width:"249px"},attrs:{label:"直播间",prop:"studio_id"}},[r("el-select",{staticClass:"select",attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.getAllStudioName,placeholder:"请选择直播间",size:"small"},on:{change:e.onStudioIdChange},model:{value:e.projectForm.studio_id,callback:function(t){e.$set(e.projectForm,"studio_id",t)},expression:"projectForm.studio_id"}},e._l(e.allStudioName,(function(t,a){return r("el-option",{key:a,attrs:{label:t.studio_name,value:t.id}},[r("span",[e._v(e._s(t.studio_name))])])})),1)],1):e._e(),e.projectForm.cooperation_type!==e.CooperationTypeEnum.selfSupport?r("el-form-item",{staticStyle:{width:"249px"},attrs:{label:"直播间"}},[r("el-select",{staticClass:"select",attrs:{disabled:"",placeholder:"请选择直播间",size:"small"},model:{value:e.projectForm.studio_id,callback:function(t){e.$set(e.projectForm,"studio_id",t)},expression:"projectForm.studio_id"}},[r("el-option",{attrs:{value:""}},[r("span")])],1)],1):e._e()],1):e._e(),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"start_date",label:"开始时间"}},[r("el-date-picker",{attrs:{placeholder:"开始时间",type:"date",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.projectForm.start_date,callback:function(t){e.$set(e.projectForm,"start_date",t)},expression:"projectForm.start_date"}})],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"end_date",label:"结束时间"}},[r("el-date-picker",{attrs:{placeholder:"结束时间",type:"date",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.projectForm.end_date,callback:function(t){e.$set(e.projectForm,"end_date",t)},expression:"projectForm.end_date"}})],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"settlement_cycle_type",label:"结算周期"}},[r("el-select",{staticClass:"select",attrs:{placeholder:"",size:"small"},model:{value:e.projectForm.settlement_cycle_type,callback:function(t){e.$set(e.projectForm,"settlement_cycle_type",t)},expression:"projectForm.settlement_cycle_type"}},[r("el-option",{attrs:{label:"请选择",value:-1}}),r("el-option",{attrs:{label:"月结",value:1}}),r("el-option",{attrs:{label:"季结",value:2}}),r("el-option",{attrs:{label:"半年",value:3}})],1)],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"price_per_hour",label:"小时报价"}},[r("el-input",{attrs:{maxlength:"20",placeholder:"请输入报价",size:"small"},on:{input:e.getPricePerHour},model:{value:e.projectForm.price_per_hour,callback:function(t){e.$set(e.projectForm,"price_per_hour",t)},expression:"projectForm.price_per_hour"}},[r("template",{slot:"append"},[e._v("元/时")])],2)],1),e.is_douyin_self?r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"service_amount",label:"服务费"}},[r("el-input",{attrs:{placeholder:"请输入服务费",size:"small",maxlength:"20"},on:{input:e.getPriceServerAmount},model:{value:e.projectForm.service_amount,callback:function(t){e.$set(e.projectForm,"service_amount",t)},expression:"projectForm.service_amount"}},[r("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"commission_rate",label:"佣金比例"}},[r("el-input",{attrs:{placeholder:"请输入佣金比例",size:"small"},on:{input:function(t){return e.inputPositiveInteger(t,"commission_rate")}},model:{value:e.projectForm.commission_rate,callback:function(t){e.$set(e.projectForm,"commission_rate",t)},expression:"projectForm.commission_rate"}},[r("template",{slot:"append"},[e._v("%")])],2)],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"customer_manager_id",label:"客户经理"}},[r("el-select",{attrs:{filterable:"",disabled:-1===e.projectForm.business_type,placeholder:"请输入并选择客户经理",size:"small"},model:{value:e.projectForm.customer_manager_id,callback:function(t){e.$set(e.projectForm,"customer_manager_id",t)},expression:"projectForm.customer_manager_id"}},e._l(e.allCustomerName,(function(t,a){return r("el-option",{key:a,attrs:{disabled:t.id===e.disabledManagerId,label:t.username,value:t.id}},[r("span",[e._v(e._s(t.username))])])})),1)],1),r("el-form-item",{staticClass:"two-item-left",attrs:{prop:"project_manager_id",label:"项目经理"}},[r("el-select",{attrs:{filterable:"",disabled:-1===e.projectForm.business_type,placeholder:"请输入并选择项目经理",size:"small"},model:{value:e.projectForm.project_manager_id,callback:function(t){e.$set(e.projectForm,"project_manager_id",t)},expression:"projectForm.project_manager_id"}},e._l(e.allManagerName,(function(t,a){return r("el-option",{key:a,attrs:{disabled:t.id===e.disabledProjectManagerId,label:t.username,value:t.id}},[r("span",[e._v(e._s(t.username))])])})),1)],1),r("el-form-item",{staticClass:"two-item-left",attrs:{label:"项目所属部门",prop:"feishu_department_id"}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click",width:"267","popper-class":"live-department-tree-popper-class"}},[r("div",{staticClass:"repain-select",staticStyle:{display:"block"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{staticStyle:{color:"#999"},attrs:{value:e.projectForm.feishu_department_name,placeholder:"请选择项目所属部门",readonly:""},scopedSlots:e._u([{key:"suffix",fn:function(){return[r("i",{staticClass:"select-icon select-icon-user-add el-icon-arrow-down"})]},proxy:!0}])})],1),r("div",{staticClass:"department-tree"},[r("el-tree",{ref:"live_department_tree",attrs:{props:e.treeProps,"check-strictly":!0,"node-key":"id",data:e.feishuDepartmentList,"show-checkbox":"","default-checked-keys":e.default_checked_department_ids,"default-expanded-keys":e.default_checked_department_ids},on:{check:e.handleCheckChange}})],1)])],1),e.projectForm.business_type!==e.BusinessTypeEnum.taobao&&e.projectForm.business_type!==e.BusinessTypeEnum.douyin&&e.projectForm.business_type!==e.BusinessTypeEnum.douyinsh||1!==e.projectForm.cooperation_type?e._e():r("el-form-item",{staticStyle:{display:"inline-block",width:"100%"},attrs:{label:"",prop:"taobaoLiveBindAccounts"}},[r("label",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("直播账号 "),r("el-popover",{attrs:{offset:"10",placement:"top-end",trigger:"hover"}},[3!==e.projectForm.business_type&&7!==e.projectForm.business_type?[r("div",{staticClass:"tbLiveAccountFormLabel",staticStyle:{height:"100px"}},[r("div",{staticStyle:{float:"left",width:"174px",height:"100px"}},[r("img",{staticStyle:{width:"174px",height:"100px"},attrs:{src:a(53895),alt:""}})]),r("p",{staticStyle:{"font-size":"14px","font-weight":"400","font-family":"PingFangSC-Regular, PingFang SC",color:"#6a7b92","line-height":"20px",float:"left","margin-left":"18px",width:"209px",height:"100px"}},[e._v(" 该ID用于将插件收集的直播数据和天鸽内的直播场次进行匹配。获取方式：如图，登录直播中控台后在个人账号信息处查看用户"),r("br"),e._v(" ID ")])])]:[r("img",{staticStyle:{width:"700px"},attrs:{src:a(88529),alt:""}})],r("i",{staticClass:"el-icon-question",staticStyle:{color:"#c4cbd2","margin-right":"3px",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})],2)],1)]),r("div",{staticClass:"tbLiveAccountFormItem"},e._l(e.taobaoLiveBindAccounts,(function(t,a){return r("el-input",{key:a,attrs:{placeholder:"请输入直播账号ID",maxlength:"20"},on:{input:function(t){return e.getPositiveInteger(t)}},model:{value:t.account,callback:function(a){e.$set(t,"account","string"===typeof a?a.trim():a)},expression:"item.account"}})})),1)])],1),r("div",{staticClass:"tg-drawer-footer"},[r("tg-button",{attrs:{size:"small"},on:{click:e.onCancelBtnClick}},[e._v("取消")]),r("tg-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSaveBtnClick}},[e._v("保存")])],1)],1)])],1)},o=[],n=(a(21703),a(26699),a(97434)),i=a(53451),s=a.n(i),l=a(3346),c=a(29625),u=a(3422),p=a(86863),m=a(78066),d=a(64236),_=a(61282),v=a(3293),f=a(26895);const{debounce:g}=s(),h=/0|100|[1-9]\d?/,y=(e,t)=>{const a=(0,n.ref)([{account:""},{account:""},{account:""},{account:""},{account:""}]),r=(0,n.ref)({service_amount:void 0,id:-1,project_name:"",company_id:"",company_name:"",shop_name:"",company_shop_id:"",business_type:t,cooperation_type:-1,studio_id:"",start_date:"",end_date:"",commission_rate:"",customer_manager_id:"",live_num_per_month:"",duration_per_live:"",month_duration:"",other_requirement:"",remark:"",settlement_cycle_type:-1,price_per_hour:"",project_manager_id:"",live_account_ids:[],feishu_department_id:void 0,feishu_department_name:void 0,region:0,feishu_department_level:0}),o=(0,n.ref)({company_id:[{required:!0,message:"请选择客户名称",trigger:"change"}],company_shop_id:[{required:!0,message:"请选择店铺",trigger:"change"}],project_name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],business_type:[{required:!0,message:"请选择业务类型",trigger:"change"},{validator:(e,t,a)=>{-1===t?a(new Error("请选择业务类型")):a()},trigger:"change"}],commission_rate:[{required:!0,message:"请输入佣金比例",trigger:"change"},{validator:(e,t,a)=>{t>100?a(new Error("不能大于100")):t<0?a(new Error("不能小于0")):a()},trigger:"change"}],settlement_cycle_type:[{required:!0,message:"请选择结算周期",trigger:"change"},{validator:(e,t,a)=>{-1===t?a(new Error("请选择结算周期")):a()},trigger:"change"}],service_amount:[{required:!0,message:"请输入服务费",trigger:"blur"}],price_per_hour:[{required:!0,message:"请输入小时报价",trigger:"change"},{validator:(e,t,a)=>{t<0?a(new Error("小时报价不能为负数")):a()},trigger:"change"}],customer_manager_id:[{required:!0,message:"请选择客户经理",trigger:"change"}],project_manager_id:[{required:!0,message:"请选择项目经理",trigger:"change"}],cooperation_type:[{required:!0,message:"请选择合作类型",trigger:"change"},{validator:(e,t,a)=>{-1===t?a(new Error("请选择合作类型")):a()},trigger:"change"}],studio_id:[{required:!1,message:"请选择直播间",trigger:"change"}],start_date:[{required:!0,message:"请选择开始日期",trigger:"change"}],end_date:[{required:!0,message:"请选择结束日期",trigger:"change"}],feishu_department_id:[{required:!0,message:"请选择项目所属部门",trigger:"change"}],taobaoLiveBindAccounts:[{trigger:"change",required:!0,message:"至少填写一个帐号",validator:(e,t,r)=>{const o=a.value;let n=!1;for(let a=0;a<o.length;a++)if(!/^\s*$/.test(o[a].account)){n=!0;break}n?r():r(e.message)}}]}),i=e=>{r.value.price_per_hour=(0,_.nA)(e)},s=e=>{r.value.service_amount=(0,_.nA)(e)},p=e=>(/[1-9]\d{0,8}/.exec(e.replace(/\D+/gu,""))??[""])[0],m=e=>(0,_.nA)(e),d=(e,t)=>{r.value[t]="commission_rate"===t?m(e):p(e)},v=(0,n.ref)([]),f=async e=>{const{data:t}=await(0,u.Q)({page_num:1,num:100,studio_name:e,business_type:r.value.business_type.toString()});v.value=t.success?t.data.data:[]},g=e=>{r.value.studio_id=e},h=(0,n.ref)([]),y=(0,n.ref)([]),b=e=>{f(e.studio_name)},j=async e=>{const{data:t}=await(0,l.Ln)({company_name:e,verify_status:1});y.value=t.success?t.data.data:[]},w=(0,n.computed)((()=>h.value.find((e=>{if(r.value.company_shop_id)return e.shop_id===r.value.company_shop_id})))),C=(0,n.computed)((()=>{const e=w.value?.brand_name;return e||"--"})),k=(0,n.computed)((()=>{const e=c.Bs.get(w.value?.category??-1);return e||"--"})),x=e=>{r.value.company_id=e,r.value.company_shop_id="";for(let t=0;t<y.value.length;t++)y.value[t].id===e&&(h.value=y.value[t].shops_info??[])},S=e=>{r.value.company_shop_id=e};return{getPositiveInteger:p,taobaoLiveBindAccounts:a,projectForm:r,formRules:o,getPricePerHour:i,getPriceServerAmount:s,inputPositiveInteger:d,getAllStudioName:f,onStudioIdChange:g,onCompanyIdChange:x,onShopIdChange:S,shop_cateogry_name:k,brand_name:C,allStoreName:h,allCompanyName:y,reloadFormItems:b,allStudioName:v,getAllCompanyName:j}};var b=(0,n.defineComponent)({name:"LiveProjectForm",props:{visible:{type:Boolean,required:!0},isEditForm:{type:Boolean,default:!1},project:{type:Object,required:!1}},setup(e,t){const a=(0,n.ref)(void 0),r=(0,n.ref)(null),o=(0,n.ref)(!1),i=(0,n.ref)("新增项目"),s=(0,n.ref)([]),l=(0,n.ref)(void 0),u={label:"name",children:"sons"},_=(0,n.computed)((()=>w.value.feishu_department_id?[w.value.feishu_department_id]:[])),{getPositiveInteger:b,taobaoLiveBindAccounts:j,projectForm:w,formRules:C,getPricePerHour:k,getPriceServerAmount:x,inputPositiveInteger:S,getAllStudioName:F,onStudioIdChange:P,shop_cateogry_name:q,brand_name:$,allStoreName:E,allCompanyName:z,reloadFormItems:O,allStudioName:Z,getAllCompanyName:B,onCompanyIdChange:T,onShopIdChange:I}=y(void 0===e.project,e.project?.business_type??""),A=(0,n.ref)([]),R=(0,n.ref)(-1),G=async()=>{if(""===w.value.business_type)return;const{data:t}=await(0,p.pc)({roles:"1008",business_type:w.value.business_type});A.value=t.success?t.data:[];const a=e.project?.customer_manager_id;a&&(A.value.map((e=>e.id.toString())).includes(a.toString())||(R.value=a,A.value.push({id:a,username:e.project?.customer_manager??"--"})))},L=(0,n.ref)(-1),N=(0,n.ref)([]),D=async()=>{if(""===w.value.business_type)return;const{data:t}=await(0,p.pc)({roles:"1003",business_type:w.value.business_type});N.value=t.success?t.data:[];const a=e.project?.project_manager_id;a&&(N.value.map((e=>e.id.toString())).includes(a.toString())||(L.value=a,N.value.push({id:a,username:e.project?.project_manager??"--"})))},M=()=>{w.value.customer_manager_id="",w.value.project_manager_id="",w.value.studio_id="",G(),D(),w.value.cooperation_type===c.x3.selfSupport&&F()};(0,n.watch)((()=>j.value),(e=>{if(e){const e=j.value.map((e=>e.account));w.value.live_account_ids=e??[]}}),{deep:!0});const X=()=>{t.emit("dialog:close")},W=(0,n.ref)(""),H=(0,n.ref)(""),K=[c.WD.douyin,c.WD.douyinsh,c.WD.taobao],V=K,U=(0,n.computed)((()=>{const t=V.map((t=>1===e.project?.region&&e.isEditForm&&t===c.WD.douyin?{value:t,label:c.Zb.get(c.WD.douyinsh)}:{value:t,label:c.Zb.get(t)}));return t||"--"}));(0,n.watch)((()=>e.visible),(t=>{if(t)if(Q(),r.value?.resetFields(),i.value=void 0===e.project?"新增项目":"编辑项目",void 0!==e.project){if(e.isEditForm){const t=(0,n.computed)((()=>{const t=c.Bs.get(e.project?.category??-1);return t||"--"}));W.value=t.value,H.value=e.project.brand_name?e.project.brand_name:"--"}if(w.value.id=e.project.id,w.value.project_name=e.project.project_name,w.value.company_name=e.project.company_name,w.value.shop_name=e.project.shop_name,w.value.company_id=e.project.company_id,w.value.company_shop_id=e.project.customer_id,w.value.business_type=e.project.business_type,w.value.cooperation_type=e.project.cooperation_type,w.value.studio_id=e.project.studio_id,w.value.start_date=e.project.start_date,w.value.end_date=e.project.end_date,w.value.commission_rate=e.project.commission_rate,w.value.customer_manager_id=e.project.customer_manager_id,w.value.live_num_per_month=e.project.live_num_per_month,w.value.duration_per_live=e.project.duration_per_live,w.value.month_duration=e.project.month_duration,w.value.other_requirement=e.project.other_requirement,w.value.remark=e.project.remark,w.value.settlement_cycle_type=e.project.settlement_cycle_type,w.value.price_per_hour=e.project.price_per_hour,w.value.service_amount=e.project.service_amount,w.value.project_manager_id=e.project.project_manager_id,w.value.feishu_department_id=e.project.feishu_department_id,w.value.feishu_department_name=e.project.feishu_department_name,w.value.region=e.project.region,w.value.feishu_department_level=e.project.feishu_department_level,e.project.live_account_ids){w.value.live_account_ids=e.project.live_account_ids.toString().split(",");const t=[];w.value.live_account_ids.forEach(((e,a)=>{t.push({account:e})})),j.value=t}O(e.project),G(),D()}else(0,n.nextTick)((()=>{a.value?.focus()}))}));const Q=()=>{w.value.id=-1,w.value.company_id="",w.value.company_shop_id="",w.value.business_type=-1,w.value.cooperation_type=-1,w.value.studio_id="",w.value.start_date="",w.value.end_date="",w.value.commission_rate="",w.value.customer_manager_id="",w.value.live_num_per_month="",w.value.duration_per_live="",w.value.month_duration="",w.value.other_requirement="",w.value.remark="",w.value.settlement_cycle_type=-1,w.value.price_per_hour="",w.value.project_manager_id="",w.value.feishu_department_id=void 0,w.value.feishu_department_name=void 0,w.value.region=0,w.value.feishu_department_level=0,E.value=[],z.value=[],A.value=[],N.value=[],l.value?.setCheckedKeys([])},Y=async()=>{if(o.value)return;const e=await new Promise((e=>r.value?.validate((t=>e(t)))));if(!e)return;const a={project_name:w.value.project_name,company_id:w.value.company_id,company_shop_id:w.value.company_shop_id,business_type:1===w.value.region&&3===w.value.business_type?7:w.value.business_type,cooperation_type:w.value.cooperation_type,studio_id:w.value.studio_id,start_date:w.value.start_date,end_date:w.value.end_date,commission_rate:w.value.commission_rate,customer_manager_id:w.value.customer_manager_id,live_num_per_month:w.value.live_num_per_month,duration_per_live:w.value.duration_per_live,month_duration:w.value.month_duration,other_requirement:w.value.other_requirement,remark:w.value.remark,settlement_cycle_type:w.value.settlement_cycle_type,price_per_hour:w.value.price_per_hour||void 0,service_amount:w.value.service_amount?Number(w.value.service_amount):void 0,project_manager_id:w.value.project_manager_id,live_account_ids:w.value.live_account_ids,feishu_department_id:w.value.feishu_department_id,feishu_department_name:void 0,feishu_department_level:w.value.feishu_department_level};if(-1!==w.value.id&&(a.id=w.value.id),w.value.start_date>=w.value.end_date)return void t.root.$message.error("结束时间需要晚于开始时间");if(!h.test(w.value.commission_rate))return void t.root.$message.error("佣金比例只能在1-100的范围");o.value=!0;const[{data:n},i]=await Promise.all([await(0,m.Mv)(a),await(0,d._v)(200)]);o.value=!1,n.success?(t.root.$message.success(n.message),t.emit("dialog:close",!0)):t.root.$message.error(n.message??"项目保存失败")},J=g(Y,200),ee=async()=>{const e=await(0,v.o1)(),t=e.data.data.data;(0,f.$S)(t,!0,3),s.value=t};ee();const te=e=>{l.value?.setCheckedKeys([]),1!==e.level&&(e.id===w.value.feishu_department_id?(w.value.feishu_department_id=void 0,w.value.feishu_department_name=void 0):(w.value.feishu_department_id=e.id,w.value.feishu_department_name=e.name,l.value?.setCheckedKeys([e.id])),w.value.feishu_department_level=e.level)},ae=(0,n.computed)((()=>1===w.value.cooperation_type&&(3===w.value.business_type||7===w.value.business_type)));return{is_douyin_self:ae,autoFocuseRef:a,disabledProjectManagerId:L,disabledManagerId:R,getPositiveInteger:b,taobaoLiveBindAccounts:j,BusinessTypeEnum:c.WD,BusinessTypeOptions:U,formTitle:i,getPricePerHour:k,getPriceServerAmount:x,inputPositiveInteger:S,saveLoading:o,CooperationTypeEnum:c.x3,allCustomerName:A,getAllCustomerName:G,allManagerName:N,getAllManagerName:D,formRef:r,brand_name:$,shop_cateogry_name:q,new_shop_cateogry_name:W,new_brand_name:H,allStudioName:Z,getAllStudioName:F,onStudioIdChange:P,getAllCompanyName:B,allStoreName:E,allCompanyName:z,onCompanyIdChange:T,onShopIdChange:I,onBusinessTypeChange:M,formRules:C,onCancelBtnClick:X,onSaveBtnClick:J,projectForm:w,feishuDepartmentList:s,treeProps:u,handleCheckChange:te,live_department_tree:l,default_checked_department_ids:_}}}),j=b,w=a(1001),C=(0,w.Z)(j,r,o,!1,null,null,null),k=C.exports},3318:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tg-live-project-page"},[a("tg-card",{attrs:{padding:[18,18,6,18]},on:{"rect:update":e.onTopCardRectUpdate}},[a("el-form",{attrs:{size:"small","show-message":!1,"label-width":"70px"}},[a("div",{staticClass:"filter-form-div"},[a("div",{staticClass:"filter-form-item"},[a("el-form-item",{attrs:{label:"项目阶段："}},[a("el-select",{staticClass:"select",staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:e.queryForm.project_status,callback:function(t){e.$set(e.queryForm,"project_status",t)},expression:"queryForm.project_status"}},[a("el-option",{attrs:{label:"全部",value:-1}}),a("el-option",{attrs:{label:"试播中",value:e.ProjectStatusEnum.tryLive}}),a("el-option",{attrs:{label:"项目执行中",value:e.ProjectStatusEnum.execution}}),a("el-option",{attrs:{label:"区域执行中",value:e.ProjectStatusEnum.regionExecution}}),a("el-option",{attrs:{label:"执行结束",value:e.ProjectStatusEnum.executionEnd}}),a("el-option",{attrs:{label:"已完结",value:e.ProjectStatusEnum.finish}})],1)],1)],1),a("div",{staticClass:"filter-form-item"},[a("el-form-item",{attrs:{label:"合作类型："}},[a("el-select",{staticClass:"select",staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:e.queryForm.cooperation_type,callback:function(t){e.$set(e.queryForm,"cooperation_type",t)},expression:"queryForm.cooperation_type"}},[a("el-option",{attrs:{label:"全部",value:-1}}),a("el-option",{attrs:{label:"自营",value:1}}),a("el-option",{attrs:{label:"区域",value:2}})],1)],1)],1),a("div",{staticClass:"filter-form-item",staticStyle:{"min-width":"210px"}},[a("el-form-item",{attrs:{label:"业务类型："}},[a("el-select",{staticClass:"search-type-block",staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:e.queryForm.business_type,callback:function(t){e.$set(e.queryForm,"business_type",t)},expression:"queryForm.business_type"}},[a("el-option",{attrs:{label:"全部",value:-1}}),a("el-option",{attrs:{label:"抖音店播",value:3}}),a("el-option",{attrs:{label:"抖音店播(上海)",value:7}}),a("el-option",{attrs:{label:"淘宝店播",value:2}})],1)],1)],1),a("div",{staticClass:"filter-form-item",staticStyle:{"min-width":"314px"}},[a("el-form-item",{attrs:{label:"项目搜索："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"244px"},attrs:{clearable:"",placeholder:"请输入"+e.search_value_type},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.reload.apply(null,arguments)}},model:{value:e.queryForm.search_value,callback:function(t){e.$set(e.queryForm,"search_value",t)},expression:"queryForm.search_value"}},[a("el-select",{staticClass:"search-type-block",staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.queryForm.search_type,callback:function(t){e.$set(e.queryForm,"search_type",t)},expression:"queryForm.search_type"}},[a("el-option",{attrs:{label:"项目名称",value:6}}),a("el-option",{attrs:{label:"项目编号",value:1}}),a("el-option",{attrs:{label:"客户名称",value:2}}),a("el-option",{attrs:{label:"品牌名称",value:3}}),a("el-option",{attrs:{label:"客户经理",value:4}}),a("el-option",{attrs:{label:"项目经理",value:5}}),a("el-option",{attrs:{label:"团队成员",value:8}})],1)],1)],1)],1),a("div",{staticClass:"filter-form-item"},[a("el-form-item",{attrs:{"label-width":"0"}},[a("div",{staticClass:"filter-form-item-btn"},[a("tg-button",{attrs:{type:"primary"},on:{click:e.onQuerySearchClick}},[e._v("查询")]),a("tg-button",{staticClass:"mgl-12",on:{click:e.onQueryResetClick}},[e._v("重置")])],1)])],1)])])],1),a("tg-card",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mgt-12",class:e.cardFlexClass,attrs:{padding:[0,18,0,18]},on:{"rect:update":e.onRectUpdate}},"tg-card",e.cardProps,!1),[e.Permission.canEdit?a("tg-button-line",{staticClass:"mgt-12"},[a("tg-button",{attrs:{type:"primary",icon:"ico-btn-add"},on:{click:e.dialogProject.show}},[e._v("项目立项")])],1):e._e(),e.Permission.canViewList?a("el-table",e._b({class:e.Permission.canEdit?"mgt-12":"mgt-18",attrs:{stripe:"",data:e.list},on:{"row-click":e.onRowClick},scopedSlots:e._u([{key:"empty",fn:function(){return[a("empty-common",{attrs:{"detial-text":"暂无项目"}})]},proxy:!0}],null,!1,3081171088)},"el-table",e.tableProps,!1),e._l(e.columns,(function(t,r){return a("el-table-column",e._b({key:r},"el-table-column",t,!1))})),1):e._e(),e.Permission.canViewList&&e.total>0?a("el-pagination",{staticStyle:{margin:"8px 0"},attrs:{"current-page":e.queryForm.page_num,"page-sizes":[10,20,50,100],"page-size":e.queryForm.num,layout:"total, prev, pager, next, sizes, jumper",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.queryForm,"page_num",t)},"update:current-page":function(t){return e.$set(e.queryForm,"page_num",t)},"current-change":e.handleCurrentChange,"size-change":e.handlePageSizeChange}}):e._e()],1),a("AddLiveProject",{attrs:{visible:e.AddProjectVisible},on:{"dialog:close":e.onAddProjectModalClose}})],1)},o=[],n=a(97434),i=a(64236),s=a(78066),l=a(29625),c=a(67910),u=a(61282);const p=e=>{const t=(0,n.ref)(!1),a=(0,n.ref)(!1),r=(0,n.ref)([]),o=(0,n.ref)(0),p=(e=!1)=>{t.value=e},m=async t=>{a.value=!0;const[n,{data:l}]=await Promise.all([await(0,i._v)(500),await(0,s.tF)(t)]);a.value=!1,l.success?(r.value=l.data.data,o.value=l.data.total):e.root.$message({type:"warning",message:l.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},d=e=>e.project_uid,_=(e,t)=>{const a=e.project_name||"--",{is_folded:r,folded_text:o}=(0,u.zb)(a,12);return t||!r?o:(0,n.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a}},[(0,n.h)("span",{slot:"reference"},[o])])},v=(0,c.zY)(r,"项目名称",_),f=(e,t)=>{const a=e.shop_name||"--",{is_folded:r,folded_text:o}=(0,u.zb)(a,12);return t||!r?o:(0,n.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a}},[(0,n.h)("span",{slot:"reference"},[o])])},g=(e,t)=>{const a=e.brand_name||"--",{is_folded:r,folded_text:o}=(0,u.zb)(a,12);return t||!r?o:(0,n.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a}},[(0,n.h)("span",{slot:"reference"},[o])])},h=(e,t)=>{const a=e.company_name||"--",{is_folded:r,folded_text:o}=(0,u.zb)(a,12);return t||!r?o:(0,n.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a}},[(0,n.h)("span",{slot:"reference"},[o])])},y=(e,t)=>{const a=e.feishu_department_name||"--",{is_folded:r,folded_text:o}=(0,u.zb)(a,12);return t||!r?o:(0,n.h)("el-popover",{props:{placement:"right",trigger:"hover",content:a}},[(0,n.h)("span",{slot:"reference"},[o])])},b=(0,c.zY)(r,"公司名称",h),j=(0,c.zY)(r,"店铺名称",f),w=(0,c.zY)(r,"店铺名称",g),C=(0,n.computed)((()=>[{label:"项目编号",property:"project_uid",fixed:"left",minWidth:(0,c.zY)(r,"项目编号",d).value,formatter:d},{label:"项目名称",property:"project_name",fixed:"left",minWidth:v.value,formatter:e=>_(e,!1)},{label:"所属部门",align:"center",property:"feishu_department_name",minWidth:120,formatter:e=>y(e,!1)},{label:"公司名称",property:"company_name",minWidth:b.value,formatter:e=>h(e,!1)},{label:"店铺名称",property:"shop_name",minWidth:j.value,formatter:e=>f(e,!1)},{label:"店铺品牌",property:"brand_name",minWidth:w.value,formatter:e=>g(e,!1)},{label:"合作类型",minWidth:90,property:"cooperation_type",align:"center",formatter:e=>l.UN.get(e.cooperation_type)??""},{label:"项目阶段",minWidth:98,align:"center",property:"project_status",formatter:e=>l.Wj.get(e.project_status)??""},{label:"业务类型",minWidth:115,property:"business_type",formatter:e=>{l.Zb.get(e.business_type);const t=l.Zb.get(e.business_type??0),a=1===e.region?"(上海)":"";return t+a}},{label:"客户经理",minWidth:80,align:"center",property:"customer_manager",formatter:e=>""!==e.customer_manager?(0,n.h)("el-popover",{},[(0,n.h)("div",{class:"line-clamp-1",slot:"reference"},[e.customer_manager]),(0,n.h)("div",{style:{width:"80px"}},[e.customer_manager])]):(0,n.h)("DefText",{props:{content:""}})},{label:"项目经理",minWidth:80,align:"center",property:"project_manager",formatter:e=>""!==e.project_manager?(0,n.h)("el-popover",{},[(0,n.h)("div",{class:"line-clamp-1",slot:"reference"},[e.project_manager]),(0,n.h)("div",{style:{width:"80px"}},[e.project_manager])]):(0,n.h)("DefText",{props:{content:""}})}]));return{loadData:m,list:r,loading:a,total:o,columns:C,toggleAddProjectModalVisible:p,AddProjectVisible:t}};var m=a(60600),d=a(78902),_=a(21757),v=a(44928),f=a(43847),g=a(58302),h=a(40290),y=a(85341),b=a(43773);const j=!1;var w=(0,n.defineComponent)({name:"TgLiveProject",components:{AddLiveProject:m.Z},setup(e,t){const a=(0,v.t)(),r=(0,f.oR)(),o=a.currentRoute.query.source,i=a.currentRoute.query.search_type,s=(0,n.ref)({search_type:"console"===o?5:6,search_value:"console"===o?r.state.user?.userinfo?.username:"",project_status:-1,cooperation_type:-1,business_type:-1,page_num:1,num:20}),c=(0,b.R)({component:y.Z,title:"项目立项审批",footer:!1,width:"760px"});i&&(s.value.search_type=parseInt(i.toString(),10));const u=(0,n.computed)((()=>{const e=new Map([[1,"项目编号"],[2,"客户名称"],[3,"品牌名称"],[4,"客户经理"],[5,"项目经理"],[6,"项目名称"],[8,"团队成员"]]);return e.get(s.value.search_type??6)})),m=p(t),w=async e=>{m.toggleAddProjectModalVisible(!1),e&&await P()},C=()=>{P()},k=()=>{s.value.search_type=6,s.value.search_value="",s.value.project_status=-1,s.value.cooperation_type=-1,s.value.business_type=-1,s.value.page_num=1,s.value.num=20},x=()=>{k(),P()},S=e=>{s.value.page_num=e,P(!1)},F=e=>{s.value.num=e,P()},P=async(e=!0)=>{e&&(s.value.page_num=1);const t={page_num:s.value.page_num,num:s.value.num};-1!==s.value.search_type&&(t.search_type=s.value.search_type,""!==s.value.search_value&&(t.search_value=s.value.search_value)),-1!==s.value.project_status&&(t.project_status=s.value.project_status),-1!==s.value.cooperation_type&&(t.cooperation_type=s.value.cooperation_type),-1!==s.value.business_type&&(t.business_type=s.value.business_type),await m.loadData(t)},{jumpProjectDetail:q}=(0,h.k)(t),$=e=>{q({project_id:e.id})},E=(0,n.computed)((()=>{const e=(0,_.kG)(d.HN.live_project_list),t=(0,_.kG)(d.HN.live_project_save);return{canEdit:t,canViewList:e}})),z=32,O=34,Z=36,B=31,T=(0,n.ref)(0),I=e=>{T.value=e.height},A=(0,g.Z)({compensation:(0,n.computed)((()=>z+O+Z+B)),fixedBlockHeightRefs:[T],tableMinHeight:100,pagename:"live_project"});return{ProjectStatusEnum:l.C_,search_value_type:u,Permission:E,reload:P,queryForm:s,isDev:j,handlePageSizeChange:F,handleCurrentChange:S,onQueryResetClick:x,onQuerySearchClick:C,onAddProjectModalClose:w,onRowClick:$,...m,onTopCardRectUpdate:I,...A,dialogProject:c}},async mounted(){this.queryLiveProjectList()},methods:{async queryLiveProjectList(){await this.reload()}}}),C=w,k=a(1001),x=(0,k.Z)(C,r,o,!1,null,null,null),S=x.exports},86863:function(e,t,a){a.d(t,{B9:function(){return C},C7:function(){return h},E2:function(){return p},Fn:function(){return u},Jv:function(){return j},LK:function(){return d},Ou:function(){return g},TG:function(){return i},Uw:function(){return o},XZ:function(){return m},_6:function(){return b},aw:function(){return q},cQ:function(){return w},dh:function(){return P},em:function(){return n},g9:function(){return x},iI:function(){return c},it:function(){return y},jy:function(){return v},kT:function(){return k},pc:function(){return s},qJ:function(){return _},qq:function(){return f},ve:function(){return S},vf:function(){return F},w_:function(){return l}});var r=a(76012);a(42963);function o(e){return(0,r.ZP)({url:"/api/cust/del_customer",method:"get",params:e})}function n(e){return(0,r.ZP)({url:"/api/auth/query_user_names",method:"get",params:e})}function i(){return(0,r.ZP)({url:"/api/auth/query_user_names",method:"get"})}function s(e){return(0,r.ZP)({url:"/api/auth/get_user_by_role",method:"get",params:e})}function l(e){return(0,r.ZP)({url:"/api/cont/upload_attachment",method:"post",data:e})}function c(){return(0,r.ZP)({url:"/api/auth/get_department",method:"get"})}function u(){return(0,r.ZP)({url:"/api/cont/get_approver",method:"get"})}function p(e,t=1){const a=1===t?"/api/cont/query_contract":2===t?"/api/cont/query_law_contract":4===t?"/api/cont/query_cooperation_contract":5===t?"/api/cont/query_common_contract":"/api/cont/query_shop_live_contract";return(0,r.ZP)({url:a,method:"get",params:e})}function m(){return(0,r.ZP)({url:"/api/cont/get_contract_uid",method:"get"})}function d(e={}){return(0,r.ZP)({url:"/api/shop_live/get_shop_live_contract_uid",method:"get",params:e})}function _(e){return(0,r.ZP)({url:"/api/cont/del_contract",method:"post",data:e})}function v(e){return(0,r.ZP)({url:"/api/cont/approve_contract",method:"post",data:e})}function f(e){return(0,r.ZP)({url:"/api/cont/del_contract",method:"post",data:e})}function g(e){return(0,r.ZP)({url:`/api/cont/delete_contract_annex/${e}/`,method:"post"})}function h(e){return(0,r.ZP)({url:`/api/cont/delete_contract_statements/${e}/`,method:"post"})}function y(e){return(0,r.ZP)({url:"/api/cont/invalid_contract",method:"post",data:e})}function b(e){return(0,r.ZP)({url:"/api/cont/recycle_contract",method:"post",data:e})}function j(e){return(0,r.ZP)({url:"/api/auth/get_user_by_role",method:"get",params:e})}function w(e){return(0,r.ZP)({url:"/api/cont/get_partner_by_name",method:"get",params:e})}function C(e){return(0,r.ZP)({url:"/api/cont/save_contract_annex",method:"post",data:e})}function k(e){return(0,r.ZP)({url:"/api/cont/del_contract_annex",method:"post",data:e})}function x(e){return(0,r.ZP)({url:"/api/cont/query_contract_annex",method:"get",params:e})}function S(e){return(0,r.ZP)({url:"/api/cont/query_contract_statements",method:"get",params:e})}function F(e){return(0,r.ZP)({url:`/api/cont/get_contract_approval_flow/${e}/`,method:"get"})}function P(e){return(0,r.ZP)({url:`/api/cont/get_contract_annex_approval_flow/${e}/`,method:"get"})}function q(e){return(0,r.ZP)({url:`/api/cont/get_contract_statements_approval_flow/${e}/`,method:"get"})}},11676:function(e,t,a){a.d(t,{K:function(){return p}});a(26699);var r=a(48606);const o=[".pdf",".doc",".docx",".ppt",".pptx"],n=[".mp4"],i=[".png",".jpg",".jpeg"],s=[".xls",".xlsx",".csv"],l=[".doc",".docx"],c=[".pdf"],u=[".csv"],p=e=>t=>{const a=/(\.[^.]+)$/.exec(t.name);let p="";a&&(p=a[1]);const m=[];if(e.image&&m.push(...i),e.file&&m.push(...o),e.video&&m.push(...n),e.excel&&m.push(...s),e.pdf&&m.push(...c),e.doc&&m.push(...l),e.csv&&m.push(...u),e.extensions&&m.push(...e.extensions),m.length>0&&!m.includes(p))return r.Message.warning(`文件格式不正确，请使用 ${m.join(";")}`),!1;if(void 0!==e.fileSize){const a=t.size/1024/1024<e.fileSize;if(!a)return r.Message.warning(`文件不能超过${e.fileSize}MB!`),!1}return!0};t["Z"]={ValidationFileUpload:p}},3346:function(e,t,a){a.d(t,{Ln:function(){return c},Me:function(){return d},OV:function(){return s},Ou:function(){return u},Pp:function(){return f},Tf:function(){return v},_F:function(){return g},eA:function(){return h},fO:function(){return y},hk:function(){return m},kg:function(){return l},mb:function(){return p},qC:function(){return _},vt:function(){return i}});var r=a(76012),o=a(10762),n=a(64236);const i=async(e,t)=>(0,r.dX)(o.y9,{params:{...(0,n.jG)({company_name:e,company_id:t})}}),s=async e=>(0,r.dX)(o.CH,{params:{...(0,n.jG)({project_uid:e})}}),l=async e=>(0,r.dX)(o.hV,{params:{...(0,n.jG)(e)}}),c=async e=>(0,r.dX)(o.yp,{params:{...(0,n.jG)(e)}}),u=async e=>(0,r.SO)(o.IY,{...(0,n.jG)(e)}),p=async e=>(0,r.SO)(o.Gs,{...(0,n.jG)(e)}),m=async e=>(0,r.SO)(o.Gs,{...e}),d=async e=>(0,r.dX)(o.S$.replace(":id",e)),_=async e=>(0,r.dX)(o.ii,{params:{...(0,n.jG)(e)}}),v=async e=>(0,r.dX)(o.AP,{params:{...(0,n.jG)(e)}}),f=async e=>(0,r.dX)(o.L6,{params:{...(0,n.jG)(e)}}),g=async e=>(0,r.SO)("/api/shop_live/save_withdraw",{...e}),h=async e=>(0,r.dX)("/api/settlement/get_settlement_by_shop_id",{params:{...(0,n.jG)(e)}}),y=async e=>(0,r.dX)("/api/settlement/query_settlements_last_achievement",{params:{...(0,n.jG)(e)}})},78066:function(e,t,a){a.d(t,{A8:function(){return x},Ed:function(){return g},Eo:function(){return c},FT:function(){return q},HB:function(){return $},HR:function(){return F},I8:function(){return w},KH:function(){return b},Kn:function(){return y},LY:function(){return z},MB:function(){return m},Mv:function(){return s},R_:function(){return j},S2:function(){return T},WH:function(){return Z},Wk:function(){return d},dF:function(){return P},fz:function(){return E},gO:function(){return B},hQ:function(){return k},l7:function(){return p},mP:function(){return O},oP:function(){return v},pB:function(){return l},qG:function(){return f},sB:function(){return C},sV:function(){return u},tF:function(){return i},w3:function(){return S},xR:function(){return h},yC:function(){return _}});var r=a(64236),o=a(76012),n=a(70753);const i=async e=>(0,o.dX)(n.EA,{params:{...(0,r.jG)(e)}}),s=async e=>(0,o.SO)(n.j0,{...(0,r.jG)(e)}),l=async e=>(0,o.SO)("/api/shop_live/shop_live_project_approval",{...(0,r.jG)(e)}),c=async e=>(0,o.dX)("/api/shop_live/query_shop_live_cost",{params:{...(0,r.jG)(e)}}),u=async e=>(0,o.dX)("/api/payable/query_shop_live_payables",{params:{...(0,r.jG)(e)}}),p=async e=>(0,o.dX)(n.L.replace(":id",e)),m=async e=>(0,o.dX)(n.a0,{params:{project_id:e}}),d=async(e,t,a)=>(0,o.dX)(n.gV,{params:{project_id:e,page_num:t,num:a}}),_=async(e,t,a)=>(0,o.dX)(n.qe,{params:{project_id:e,page_num:t,num:a}}),v=async e=>(0,o.SO)(n.OW.replace("{achievement_id}",e)),f=async e=>(0,o.SO)(n.a9.replace("{achievement_id}",e)),g=async e=>(0,o.SO)("/api/shop_live/del_shop_live_cost/{cost_id}/".replace("{cost_id}",e)),h=async e=>(0,o.SO)(n.xR,(0,r.jG)(e)),y=async e=>(0,o.SO)(n.Kn,(0,r.jG)(e)),b=async e=>(0,o.SO)(n.KH,(0,r.jG)(e)),j=async e=>(0,o.SO)("/api/coop/save_achievement",(0,r.jG)(e)),w=async e=>(0,o.SO)("/api/shop_live/save_shop_live_cost",e),C=(e,t,a)=>(0,o.dX)("/api/shop_live/daily_report",{params:{begin_time:e,end_time:t,project_id:a}}),k=e=>(0,o.SO)("/api/shop_live/daily_report",(0,r.jG)(e)),x=(e,t,a)=>(0,o.dX)("/api/coop/daily_report",{params:{begin_time:e,end_time:t,project_id:a}}),S=e=>(0,o.SO)("/api/coop/daily_report",(0,r.jG)(e)),F=e=>(0,o.SO)("/api/shop_live/save_net_sales_rate",(0,r.jG)(e)),P=(e,t)=>(0,o.dX)("/api/shop_live/query_project_goal_settings",{params:{year:e,project_id:t}}),q=e=>(0,o.SO)("/api/shop_live/save_project_shop_goal_settings",e),$=e=>(0,o.SO)("/api/shop_live/save_project_anchor_goal_settings",e),E=e=>(0,o.dX)("/api/shop_live/get_project_settlement_setting",{params:{project_id:e}}),z=e=>(0,o.SO)("/api/shop_live/save_project_settlement_setting",(0,r.jG)(e)),O=e=>(0,o.dX)("/api/shop_live/get_project_auth_status/"+e+"/"),Z=e=>(0,o.dX)("/api/shop_live/search_expense_type",{params:{keyword:e}}),B=e=>(0,o.SO)("/api/shop_live/save_s2b2c_settlement_setting",(0,r.jG)(e)),T=e=>(0,o.dX)("/api/shop_live/get_s2b2c_settlement_setting",{params:{project_id:e}})},3422:function(e,t,a){a.d(t,{Q:function(){return s},V:function(){return l}});var r=a(76012),o=a(64236);const n="/api/studio/query_studio",i="/api/studio/save_studio",s=async e=>(0,r.dX)(n,{params:{...(0,o.jG)(e)}}),l=async e=>(0,r.SO)(i,{...(0,o.jG)(e)})},58302:function(e,t,a){var r=a(97434),o=a(77944),n=a(52140);const i=e=>{const t=(0,r.computed)((()=>o.Z.getters["global/scrollbarSetting"])),a=(0,r.computed)((()=>void 0!==e.pagename?!0!==t.value.find((t=>t.key===e.pagename))?.value:e.disable??!1)),i=(0,r.computed)((()=>{const t=(e.fixedBlockHeightRefs??[]).map((e=>(0,r.unref)(e))).reduce(((e,t)=>(0,r.unref)(e)+(0,r.unref)(t)),0);return a.value?"max-content":`calc(100vh - ${(0,r.unref)(t)+56+36}px)`})),s=(0,r.computed)((()=>(a.value,"flex-auto"))),l=(0,r.computed)((()=>({height:i.value,overflowInBody:!a.value}))),c=(0,r.ref)(0),u=(0,r.computed)((()=>a.value?{}:{height:Math.max(c.value-(0,r.unref)((0,r.unref)(e.compensation)),e.tableMinHeight??0)})),p=a.value?()=>{}:e=>{c.value!==e&&(c.value=e,(0,n.S)())},m=a.value?()=>{}:t=>{0===c.value?setTimeout((()=>{p(t.height)}),e.delay??1200):p(t.height)};return{cardHeight:i,tableProps:u,onRectUpdate:m,rectHeight:c,cardFlexClass:s,cardProps:l}};t["Z"]=i},44928:function(e,t,a){a.d(t,{t:function(){return o}});var r=a(86834);const o=()=>{const e=new Proxy({},{get(e,t){return Reflect.get(r.Z,t)}});return e}},43847:function(e,t,a){a.d(t,{Pc:function(){return i},oR:function(){return n}});var r=a(77944),o=a(97434);const n=()=>r.Z,i=()=>{const e=n(),t=(0,o.computed)((()=>e.getters["user/getUserInfo"]));return t}},52140:function(e,t,a){a.d(t,{S:function(){return r},n:function(){return o}});const r=()=>{const e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},o=()=>{const{width:e,height:t}=document.body.getBoundingClientRect();return{width:e,height:t}}},40290:function(e,t,a){a.d(t,{k:function(){return o}});var r=a(1763);const o=e=>{const t={jumpProjectDetail:e=>{const a={name:r.FB.project.detail,params:{id:`${e.project_id}`,tab:e.tab??"projectInfo",liveType:e.liveType??"calendar"}},o=e.newWindow??!1;t.jump(a,o)},jumpLiveDisplayDetail:e=>{const a={name:r.FB.display.detail,params:{id:`${e.project_id}`,liveId:`${e.live_id}`,tab:"live",liveType:e.liveType??"calendar"}},o=e.newWindow??!1;t.jump(a,o)},jump:(t,a=!1)=>{if(a){const{href:a}=e.root.$router.resolve(t);window.open(a,"_blank")}else e.root.$router.push(t)}};return{...t}}},43773:function(e,t,a){a.d(t,{R:function(){return m},y:function(){return d}});var r=a(36568),o=a.n(r),n=a(97434),i=a(64923),s=a(77944);let l=1;const c=()=>{const e=document.createElement("div");return e.id="dialog_"+l++,document.body.appendChild(e),e},u=new Function,p=(e,t)=>{let a=e;return void 0===a&&(a={}),Object.keys(t).forEach((e=>{const r=a[e]||u,o=t[e];a[e]=(...e)=>{if(!1!==o(...e))return r(...e)}})),a},m=(e={})=>{const t=(0,n.ref)(),a=(0,n.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),r=(0,n.ref)(!0),l=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};l(e);const u=(0,n.ref)(p(e.on,{close(){a.visible=!1},updateDialog(e={}){l(e)}})),m=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:s.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,n.provide)(t,e.provide[t])}))},render(t){if(r.value&&a.visible)return t("el-dialog",o()([{class:`customer-dialog el-dialog-center-rewrite tg-body-container  ${e.class}`},{props:a},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value}),a.footer&&t("fragments",{slot:"footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{attrs:{type:"primary"},on:{click:m}},[a.okText])])])}});const d=(...e)=>{a.visible||(a.visible=!0,(0,n.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},_=e=>(l(e),g),v=()=>{a.visible=!1},f=(e,t,a=!1)=>(!0===a?u.value[e]=t:p(u.value,{[e]:t}),g);(0,n.onUnmounted)((()=>{r.value=!1,a.visible=!1}));const g=(0,n.reactive)({show:d,update:_,on:f,close:v,config:e,data:e.data});return g},d=(e={})=>{const t=(0,n.ref)(),a=(0,n.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),r=(0,n.ref)(!0),l=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};l(e);const u=(0,n.ref)(p(e.on,{close(){a.visible=!1},updateDialog(e={}){l(e)}})),m=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:s.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,n.provide)(t,e.provide[t])}))},render(t){if(!r.value)return;if(!a.visible)return;const{width:n,...i}=a;return t("el-drawer",o()([{class:`tg-drawer-rewrite ${e.class}`},{props:{...i,size:n}},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:u.value},{attrs:{isDialog:!0}}]),[t("div",{class:"tg-drawer-content"},[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:u.value})]),a.footer&&t("div",{class:"tg-drawer-footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{class:"mgl-12",attrs:{type:"primary"},on:{click:m}},[a.okText])])])}});const d=(...e)=>{a.visible||(a.visible=!0,(0,n.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},_=e=>(l(e),g),v=()=>{a.visible=!1},f=(e,t,a=!1)=>(!0===a?u.value[e]=t:p(u.value,{[e]:t}),g);(0,n.onUnmounted)((()=>{r.value=!1,a.visible=!1}));const g=(0,n.reactive)({show:d,update:_,on:f,close:v,config:e});return g}},88529:function(e,t,a){e.exports=a.p+"static/img/live_account_douyin_tips.e893f2c9.jpg"},53895:function(e,t,a){e.exports=a.p+"static/img/live_account_tips.f30a6fcf.png"}}]);