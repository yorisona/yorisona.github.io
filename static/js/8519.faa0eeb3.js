"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[8519],{93295:function(e,t,a){a.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-container"},[a("el-tree",{ref:"single_tree",attrs:{data:e.c_treeData,"check-strictly":!0,"show-checkbox":"","node-key":"id",props:e.defaultProps},on:{check:e.check}})],1)},n=[],l=a(97434),i={props:{c_treeData:{type:Array}},emits:["handleTreeDataCall"],setup(e,t){const a=(0,l.reactive)({defaultProps:{label:"department_name",children:"sub_nodes"}}),r=e=>{t.refs.single_tree.setCheckedKeys([]),t.refs.single_tree.setCheckedKeys([e.id]),t.emit("handleTreeDataCall",e)},n=e=>{t.refs.single_tree.setCheckedKeys([e.department_info.id])},i=()=>{t.refs.single_tree.setCheckedKeys([])};return{...(0,l.toRefs)(a),check:r,editCheck:n,resetCheck:i}}},s=i,o=a(1001),c=(0,o.Z)(s,r,n,!1,null,null,null),u=c.exports},87653:function(e,t,a){a.r(t),a.d(t,{default:function(){return xe}});var r,n,l=a(36568),i=a.n(l),s=a(97434),o=a(29416),c=a(21757),u=a(6933),m=a.n(u),p=(0,s.defineComponent)({name:"financeDetails",setup(e,t){const{getData:a,tableData:r,loading:n}=(0,o.nl)(t),l=(0,s.inject)("filterParams"),i=()=>{const{business_type:e,date:t,project_name:r}=l.value;a({business_type:e,date:t,project_name:r})};(0,s.onMounted)((()=>{const e=m()(new Date).subtract(1,"months").startOf("month").format("YYYY-MM"),{business_type:t,date:r=e,project_name:n}=l.value;a({business_type:t,date:r,project_name:n})}));const u=()=>{(0,o.Hy)(l.value)},p=(0,c.gI)();return{tableData:r,loading:n,getData:a,permission:p,exportHandler:u,query:i}},render(){const e=arguments[0];return e("div",{class:"finance-details"},[e("tg-card",{class:"mgt-12 finance-report-main",attrs:{padding:this.permission.invoice_report_export?[12,18,18,18]:[6,18,18,18]}},[e("tg-button-line",[this.permission.invoice_report_export&&e("tg-button",{attrs:{type:"default",icon:"ico-btn-export",download:!0},on:{click:this.exportHandler}},["导出"])]),e("div",{class:"finance-report-table"},[e("vxe-table",{attrs:{border:!0,"highlight-hover-row":!0,"tooltip-config":{theme:"light"},"show-overflow":!0,height:"100%",data:this.tableData},directives:[{name:"loading",value:this.loading}]},[e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})]),e("vxe-colgroup",{attrs:{title:"项目信息","header-class-name":"project-info-head",align:"center"}},[o.Mr.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,fixed:t.fixed,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"合计","header-class-name":"project-sum-head",align:"center"}},[o.hM.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"收入","header-class-name":"project-income-head",align:"center"}},[o.eB.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"收款","header-class-name":"project-receive-head",align:"center"}},[o.OA.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"销售发票","header-class-name":"project-receipt-head",align:"center"}},[o.PP.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"成本","header-class-name":"project-cost-head",align:"center"}},[o.g8.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"付款","header-class-name":"project-payment-head",align:"center"}},[o.g9.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"采购发票","header-class-name":"project-purchase-head",align:"center"}},[o.sD.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))])])])])])}}),d=p,_=a(1001),f=(0,_.Z)(d,r,n,!1,null,"930e8212",null),g=f.exports,y=a(28440),v=a(24643);const b=[{label:"项目编号",property:"project_uid",align:"center",width:160,className:"project-income-head"},{label:"项目名称",property:"project_name",align:"left",width:150,className:"project-income-head"},{label:"业务类型",align:"center",width:90,formatter:e=>y.YW.get(e.business_type)},{label:"所属平台",align:"center",width:90,formatter:e=>y.qZ.get(e.platform)||"--"},{label:"合作类型",align:"center",headerAlign:"center",width:90,formatter:e=>y.PP.get(e.cooperation_type)||"--"},{label:"部门",property:"department",align:"center",width:120},{label:"项目经理",property:"project_manager",align:"center",headerAlign:"center",width:90,formatter:e=>e.project_manager||"--"},{label:"客户经理",property:"customer_manager",align:"center",headerAlign:"center",width:90,formatter:e=>e.customer_manager||"--"},{label:"单据编号",property:"achievement_uid",align:"left",headerAlign:"center",width:160},{label:"业绩名称",property:"achievement_name",align:"left",width:120,className:"project-income-head"},{label:"收款金额 (元)",align:"right",headerAlign:"right",width:120,formatter:e=>(0,v.Y4)(e.gather_amount,2,".",",")},{label:"收款方式",align:"center",headerAlign:"center",width:90,formatter:e=>y.AR.get(e.gather_way)},{label:"收款时间",property:"gather_date",align:"center",headerAlign:"center",width:100},{label:"确认时间",property:"confirm_date",align:"center",headerAlign:"center",width:100},{label:"确认人",property:"confirm_by",align:"center",headerAlign:"center",width:90,formatter:e=>e.confirm_by||"--"}];var x,w,k=(0,s.defineComponent)({name:"financePrecharge",setup(e,t){const{getData:a,tableData:r,params:n,loading:l,total:i}=(0,o.BW)(t),c=(0,s.inject)("filterParams"),u=e=>{n.value.num=e,p()},m=e=>{n.value.page_num=e,p()};(0,s.onMounted)((()=>{const{business_type:e,page_num:t=1,num:r=30,project_name:n}=c.value;a({business_type:e,page_num:t,num:r,project_name:n})}));const p=()=>{const{business_type:e,project_name:t}=c.value,{page_num:r,num:l}=n.value;a({business_type:e,page_num:r,num:l,project_name:t})};return{tableData:r,loading:l,getData:a,params:n,total:i,currentSizeChange:u,handleCurrentChange:m,query:p}},render(){const e=arguments[0];return e("div",{class:"finance-precharge"},[e("tg-table",{attrs:{stripe:!0,"tooltip-effect":"light",height:this.tableData.length>0?"calc(100vh - 255px)":"calc(100vh - 205px)",border:!0,data:this.tableData},directives:[{name:"loading",value:this.loading}],class:"precharge-table"},[e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})]),b.map((t=>e("el-table-column",{attrs:{"show-overflow-tooltip":!0,"class-name":t.className,label:t.label,prop:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),this.tableData.length>0&&e("div",{class:"pagination"},[e("el-pagination",{class:"flex-none",attrs:{"current-page":this.params.page_num,"page-sizes":[10,20,30,50,100],"page-size":this.params.num,total:this.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.currentSizeChange}})])])}}),j=k,$=(0,_.Z)(j,x,w,!1,null,null,null),q=$.exports;const A=[{label:"项目编号",property:"project_uid",align:"center",width:160,className:"project-income-head"},{label:"项目名称",property:"project_name",align:"left",width:150,className:"project-income-head"},{label:"业务类型",align:"center",width:90,formatter:e=>y.YW.get(e.business_type)||"--"},{label:"所属平台",align:"center",headerAlign:"center",width:90,formatter:e=>y.qZ.get(e.platform)||"--"},{label:"合作类型",align:"center",headerAlign:"center",width:90,formatter:e=>y.PP.get(e.cooperation_type)||"--"},{label:"部门",property:"department",align:"center",width:120,formatter:e=>e.department||"--"},{label:"项目经理",property:"project_manager",align:"center",headerAlign:"center",width:90,formatter:e=>e.project_manager||"--"},{label:"客户经理",property:"customer_manager",align:"center",headerAlign:"center",width:90,formatter:e=>e.customer_manager||"--"},{label:"单据编号",property:"cost_id",align:"center",headerAlign:"center",width:120},{label:"付款金额 (元)",align:"right",headerAlign:"right",width:120,formatter:e=>(0,v.Y4)(e.pay_amount,2,".",",")},{label:"付款方式",align:"center",headerAlign:"center",width:90,formatter:e=>y.Mi.get(e.pay_way)},{label:"付款时间",property:"pay_date",align:"center",headerAlign:"center",width:100},{label:"确认时间",property:"confirm_date",align:"center",headerAlign:"center",width:100},{label:"确认人",property:"confirm_by",align:"center",headerAlign:"center",width:90,formatter:e=>e.confirm_by||"--"}];var D,C,z,T,G=(0,s.defineComponent)({name:"financePrepay",setup(e,t){const{getData:a,tableData:r,params:n,loading:l,total:i}=(0,o.RM)(t),c=(0,s.inject)("filterParams"),u=e=>{n.value.num=e,p()},m=e=>{n.value.page_num=e,p()};(0,s.onMounted)((()=>{const{business_type:e,page_num:t=1,num:r=30,project_name:n}=c.value;a({business_type:e,page_num:t,num:r,project_name:n})}));const p=()=>{const{business_type:e,project_name:t}=c.value,{page_num:r,num:l}=n.value;a({business_type:e,page_num:r,num:l,project_name:t})};return{tableData:r,loading:l,getData:a,params:n,total:i,currentSizeChange:u,handleCurrentChange:m,query:p}},render(){const e=arguments[0];return e("div",{class:"finance-precharge"},[e("tg-table",{attrs:{"tooltip-effect":"light",border:!0,stripe:!0,height:this.tableData.length>0?"calc(100vh - 255px)":"calc(100vh - 205px)",data:this.tableData},directives:[{name:"loading",value:this.loading}],class:"precharge-table"},[e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})]),A.map((t=>e("el-table-column",{attrs:{"show-overflow-tooltip":!0,"class-name":t.className,label:t.label,prop:t.property,align:t.align,headerAlign:t.headerAlign,minWidth:t.width,formatter:t.formatter}})))]),this.tableData.length>0&&e("div",{class:"pagination"},[e("el-pagination",{class:"flex-none",attrs:{"current-page":this.params.page_num,"page-sizes":[10,20,30,50,100],"page-size":this.params.num,total:this.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.currentSizeChange}})])])}}),S=G,X=(0,_.Z)(S,D,C,!1,null,null,null),F=X.exports,W=(0,s.defineComponent)({name:"financeQuick",setup(e,t){const{getData:a,tableData:r,loading:n}=(0,o.Xu)(t),l=(0,s.inject)("filterParams"),i=()=>{const{business_type:e,date:t,project_name:r}=l.value;a({business_type:e,date:t,project_name:r})};(0,s.onMounted)((()=>{const e=m()(new Date).subtract(1,"months").startOf("month").format("YYYY-MM"),{business_type:t,date:r=e,project_name:n}=l.value;a({business_type:t,date:r,project_name:n})}));const u=()=>{(0,o.$n)(l.value)},p=(0,c.gI)();return{tableData:r,permission:p,loading:n,getData:a,exportHandler:u,query:i}},render(){const e=arguments[0];return e("div",{class:"finance-details"},[e("tg-card",{class:"mgt-12 finance-report-main",attrs:{padding:this.permission.invoice_report_export?[12,18,18,18]:[6,18,18,18]}},[e("tg-button-line",[this.permission.invoice_report_export&&e("tg-button",{attrs:{type:"default",icon:"ico-btn-export",download:!0},on:{click:this.exportHandler}},["导出"])]),e("div",{class:"finance-report-table"},[e("vxe-table",{attrs:{"highlight-hover-row":!0,border:!0,"tooltip-config":{theme:"light"},"show-overflow":!0,height:"100%",data:this.tableData},directives:[{name:"loading",value:this.loading}]},[e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})]),e("vxe-colgroup",{attrs:{title:"项目信息","header-class-name":"project-info-head",align:"center"}},[o.Mr.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"合计","header-class-name":"project-sum-head",align:"center"}},[o.hM.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"收入","header-class-name":"project-income-head",align:"center"}},[o.eB.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"收款","header-class-name":"project-receive-head",align:"center"}},[o.OA.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"销售发票","header-class-name":"project-receipt-head",align:"center"}},[o.PP.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"成本","header-class-name":"project-cost-head",align:"center"}},[o.g8.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"付款","header-class-name":"project-payment-head",align:"center"}},[o.g9.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))]),e("vxe-colgroup",{attrs:{title:"采购发票","header-class-name":"project-purchase-head",align:"center"}},[o.sD.map((t=>e("vxe-column",{attrs:{"header-class-name":t.className,title:t.label,field:t.property,align:t.align,headerAlign:t.headerAlign,width:t.width,formatter:t.formatter}})))])])])])])}}),M=W,O=(0,_.Z)(M,z,T,!1,null,"4fe39a67",null),P=O.exports,N=a(42386),R=a(67578),Y=a(74750),E=a(61282),Z=a(67910);const H=e=>{const t=(e,t)=>{const{is_folded:a,folded_text:r}=(0,E.zb)(e);return t||!a?r:(0,s.h)("el-popover",{props:{placement:"top",trigger:"hover",content:e,width:234,openDelay:300}},[(0,s.h)("span",{slot:"reference"},[r])])},a=(e,t)=>{const a=e.form_code?`${e.form_code}`:"--";return a},r=(e,a)=>{const r=e.reim_employee_name?e.reim_employee_name:"--";return t(r,a)},n=(e,t)=>{const a=(0,E.FU)(e.tax_excluded_amount??0);return a},l=(e,t)=>{const a=(0,E.FU)(e.tax_amount??0);return a},i=(e,t)=>{const a=e.expense_category_name?e.expense_category_name:"--";return a},o=(e,t)=>{const a=(0,E.FU)(e.payment_amount??0);return a},c=(e,t)=>{const a=(0,E.FU)(e.loan_write_off??0);return a},u=(e,t)=>{const a=(0,E.FU)(e.approved_amount??0);return a},m=(e,a)=>{const r=e.comment?e.comment:"--";return t(r,a)},p=(e,t)=>{const a=e.payer_bank_account_name?e.payer_bank_account_name:"--";return a},d=(e,t)=>{const a=e.project_name?e.project_name:"--";return a},h={pay_no_column:(0,s.computed)((()=>({label:"付款编号",align:"center",dataType:"text",minWidth:(0,Z.zY)(e,"付款编号",a).value,formatter:e=>a(e,!1)}))),date_column:(0,s.computed)((()=>({label:"日期",minWidth:110,align:"center",dataType:"text",prop:"settled_at"}))),pay_reason_column:(0,s.computed)((()=>({label:"付款事由",dataType:"text",minWidth:160,prop:"reimburse_name",showOverflowTooltip:!0}))),apply_by_column:(0,s.computed)((()=>({label:"申请人",align:"center",dataType:"text",minWidth:(0,Z.zY)(e,"申请人",r).value,formatter:e=>r(e,!1)}))),fee_department_column:(0,s.computed)((()=>({label:"费用归属部门",dataType:"text",minWidth:200,prop:"multistage_department_name",showOverflowTooltip:!0}))),account_name_column:(0,s.computed)((()=>({label:"户名",dataType:"text",minWidth:160,prop:"bank_acct_name",showOverflowTooltip:!0}))),account_column:(0,s.computed)((()=>({label:"账号",dataType:"text",minWidth:160,prop:"bank_acct_number",showOverflowTooltip:!0}))),cost_type_column:(0,s.computed)((()=>({label:"支出类型",minWidth:80,align:"center",formatter:e=>R.SN.get(e.pay_type)??"--"}))),exclude_tax_amount_column:(0,s.computed)((()=>({label:"不含税金额 (元)",align:"right",dataType:"money",minWidth:160,formatter:e=>n(e,!1)}))),tax_amount_column:(0,s.computed)((()=>({label:"税额 (元)",align:"right",dataType:"money",minWidth:(0,Z.zY)(e,"税额 (元)",l).value,formatter:e=>l(e,!1)}))),need_pay_amount_column:(0,s.computed)((()=>({label:"批准金额 (元)",align:"right",dataType:"money",minWidth:140,formatter:e=>o(e,!1)}))),loan_write_off:(0,s.computed)((()=>({label:"借款核销 (元)",align:"right",dataType:"money",minWidth:(0,Z.zY)(e,"借款核销 (元)",c).value,formatter:e=>c(e,!1)}))),pay_amount_amount_column:(0,s.computed)((()=>({label:"实付金额 (元)",align:"right",dataType:"money",minWidth:140,formatter:e=>u(e,!1)}))),invoice_column:(0,s.computed)((()=>({label:"发票",minWidth:60,align:"center",formatter:e=>e.has_invoice?"有":"无"}))),ccountant_type_column:(0,s.computed)((()=>({label:"会计科目",minWidth:(0,Z.zY)(e,"会计科目",i).value,align:"center",dataType:"text",prop:"expense_category_name",formatter:e=>i(e,!1)}))),remark_column:(0,s.computed)((()=>({label:"备注",minWidth:(0,Z.zY)(e,"备注",m).value,align:"left",dataType:"text",prop:"comment",formatter:e=>m(e,!1)}))),transform_way_column:(0,s.computed)((()=>({label:"转出路径",align:"left",dataType:"text",minWidth:(0,Z.zY)(e,"转出路径",p).value,formatter:e=>p(e,!1)}))),project_column:(0,s.computed)((()=>({label:"项目",align:"left",dataType:"text",minWidth:(0,Z.zY)(e,"项目",d).value,formatter:e=>d(e,!1)})))};return(0,s.computed)((()=>Object.values(h).map((e=>e.value))))};var Q=a(50737),U=a(59563),B=a(3293),I=a(93295),V=a(48606),K=a(11676),L=a(88721);const J=()=>{const e=(0,s.reactive)({settled_at:"",expense_type_biz_code:"",department_biz_code:"",project_uid:"",reimburse_name:"",payer_bank_account_id:"",approved_amount:"",has_invoice:void 0,tax_rate:"",tax_amount:"",tax_excluded_amount:"",comment:"",receiver_bank_account_name:""});(0,s.watch)((()=>[e.approved_amount,e.has_invoice,e.tax_rate]),(()=>{if(1===e.has_invoice){let t=Number(e.approved_amount)*(Number(e.tax_rate)/100);isNaN(t)?t="":(e.tax_amount=Number(t).toFixed(2),e.tax_excluded_amount=Number(e.approved_amount)-t)}else e.tax_rate="",e.tax_amount="",e.tax_excluded_amount=""}));const t=(0,U.h)(Q.sR,{defaultPageSize:1e4}),a=(0,U.Q)(B.o1),r=(0,U.Q)(N.k6),n=(0,U.h)(N.Ux,{manual:!0}),l=(0,U.Q)(N.md,{manual:!0}),i=e=>{n.run({page_num:1,num:20},{project_name:e})},o=()=>{const t={...e};return t.settled_at=m()(t.settled_at).format("YYYY-MM-DD"),1!==t.has_invoice&&(t.tax_excluded_amount=t.approved_amount,t.tax_amount="0"),"-1"===t.project_uid&&(t.project_uid=void 0),"-1"===t.department_biz_code&&(t.department_biz_code=void 0),l.runAsync(t)};return(0,s.reactive)({...(0,s.toRefs)(e),expense_type_biz_code_options:(0,s.toRef)(t,"data"),department_biz_code_options:(0,s.computed)((()=>[{department_id:"-1",name:"构美(公共)"},...a.data?.data||[]])),payer_bank_account_id_options:(0,s.toRef)(r,"data"),project_uid_options:(0,s.computed)((()=>[{project_uid:"-1",project_name:"无"},...n.data||[]])),search_project:i,submit:o})},ee=(e=[],t,a)=>e.map(((e,r)=>h("el-option",{key:r,attrs:{label:e[t],value:e[a]}})));var te,ae,re=(0,s.defineComponent)({components:{singleTrees:I.Z},setup(e,t){const a=(0,s.ref)(null),r=(0,s.ref)([{label:"批量导入",value:"1"},{label:"手动录入",value:"2"}]),n=(0,s.ref)("1"),l=J(),i=(0,s.ref)(),o=(0,s.reactive)({input:"",show:!1}),c=(0,s.ref)([]),u=()=>{if("2"===n.value)a.value?.validate((async e=>{e&&(await l.submit(),V.Message.success("手动录入成功"),t.emit("close"),t.emit("submit"))}));else if(0===c.value.length)return void V.Message.warning("请选择excel文件")};return{tabs:r,checkTab:n,artForm:l,formRef:a,dialogSubmit:u,treeRef:i,departmentForm:o,file:c}},render(){const e=arguments[0],t=this.artForm;return e("div",{class:"dialog-import"},[e("tg-tabs",{attrs:{tabs:this.tabs},on:{change:e=>{this.$emit("updateDialog",{footer:"2"===e.value}),console.log("change",e)}},model:{value:this.checkTab,callback:e=>{this.checkTab=e}}}),e("div",{class:"content"},["1"===this.checkTab&&e("div",{class:"batch"},[e("div",{class:"side"},[e("span",{class:"asterisk"},["*"]),"导入数据："]),e("div",{class:"file-list"},[e("tg-upload",{attrs:{"show-file-list":!1,action:"/api/financial/import_pay_info",beforeUpload:K.Z.ValidationFileUpload({excel:!0,fileSize:5}),success:e=>{e.success?(V.Message.success("批量导入成功"),this.$emit("close")):V.Message.error(e.message)}},style:"margin-bottom:16px"},[e("tg-button",{attrs:{icon:"ico-upload-lite"}},["上传文件"])]),e("upload-file-list",{model:{value:this.file,callback:e=>{this.file=e}}}),e("a",{class:"download",attrs:{target:"_blank",href:"https://tiange-oss.oss-cn-hangzhou.aliyuncs.com/upload_template/%E5%85%B6%E5%AE%83%E8%B4%B9%E7%94%A8%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx",download:!0}},["下载模板"])])]),"2"===this.checkTab&&e("div",{class:"artificial"},[e("el-form",i()([{ref:"formRef",attrs:{"label-width":"70px","label-position":"top",size:"small"}},{attrs:{model:t}}]),[e("div",{class:"artificial-item"},[e("el-form-item",{attrs:{label:"支出日期",prop:"settled_at",rules:{required:!0,message:"请选择日期",trigger:["blur"]}}},[e("el-date-picker",{style:"width:100%",attrs:{placeholder:"选择日期"},model:{value:t.settled_at,callback:e=>{this.$set(t,"settled_at",e)}}})]),e("el-form-item",{attrs:{label:"支出类别",prop:"expense_type_biz_code",rules:{required:!0,message:"请选择支出类别",trigger:["blur"]}}},[e("el-select",{style:"width:100%",attrs:{placeholder:"请选择",filterable:!0},model:{value:t.expense_type_biz_code,callback:e=>{this.$set(t,"expense_type_biz_code",e)}}},[ee(t.expense_type_biz_code_options,"expense_type_name","expense_type_biz_code")])]),e("el-form-item",{attrs:{label:"归属部门",prop:"department_biz_code",rules:{required:!0,message:"请选择归属部门",trigger:"change"}}},[e("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"popper-class"},model:{value:this.departmentForm.show,callback:e=>{this.$set(this.departmentForm,"show",e)}}},[e("el-input",{attrs:{placeholder:"请选择",readonly:!0,value:this.departmentForm.input},slot:"reference"},[e("template",{slot:"suffix"},[e("i",{class:"select-icon select-icon-user-add el-icon-arrow-down"})])]),e("el-tree",{attrs:{"show-checkbox":!0,"check-strictly":!0,"node-key":"department_id",data:t.department_biz_code_options},ref:"treeRef",on:{check:e=>{this.treeRef.setCheckedKeys([]),this.treeRef.setCheckedKeys([e.department_id]),t.department_biz_code=e.department_id,this.departmentForm.input=e.name,this.departmentForm.show=!1}},props:{props:{label:"name",children:"sons"}}})])]),e("el-form-item",{attrs:{label:"关联项目",prop:"project_uid",rules:{required:!0,message:"请选择关联项目",trigger:["blur"]}}},[e("el-select",{style:"width:100%",attrs:{placeholder:"请选择",filterable:!0,remote:!0,"remote-method":t.search_project},model:{value:t.project_uid,callback:e=>{this.$set(t,"project_uid",e)}}},[ee(t.project_uid_options,"project_name","project_uid")])]),e("el-form-item",{attrs:{label:"付款事由",prop:"reimburse_name",rules:{required:!0,message:"请输入付款事由",trigger:["blur"]}}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入（限20字）",maxlength:20},model:{value:t.reimburse_name,callback:e=>{this.$set(t,"reimburse_name",e)}}})]),e("el-form-item",{attrs:{label:"转出路径",prop:"payer_bank_account_id",rules:{required:!0,message:"请选择转出路径",trigger:["blur"]}}},[e("el-select",{style:"width:100%",attrs:{placeholder:"请选择"},model:{value:t.payer_bank_account_id,callback:e=>{this.$set(t,"payer_bank_account_id",e)}}},[ee(t.payer_bank_account_id_options,"bank_name","id")])]),e("el-form-item",{attrs:{label:"户名"}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入"},model:{value:t.receiver_bank_account_name,callback:e=>{this.$set(t,"receiver_bank_account_name",e)}}})]),e("el-form-item",{attrs:{label:"实付金额",prop:"approved_amount",rules:{required:!0,message:'请输入实付金额"',trigger:["blur"]}}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入"},on:{input:e=>t.approved_amount=L.Z.IntergerAndDecimals(e)},model:{value:t.approved_amount,callback:e=>{this.$set(t,"approved_amount",e)}}},[e("template",{slot:"append"},["元"])])]),e("el-form-item",{attrs:{label:"发票",prop:"has_invoice",rules:{required:!0,message:"请选择发票",trigger:["blur"]}}},[e("el-select",{style:"width:100%",attrs:{placeholder:"请选择"},model:{value:t.has_invoice,callback:e=>{this.$set(t,"has_invoice",e)}}},[e("el-option",{attrs:{label:"无",value:0}}),e("el-option",{attrs:{label:"有",value:1}})])]),e("el-form-item",{attrs:{label:"税率"}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入",disabled:1!==t.has_invoice},on:{input:e=>t.tax_rate=L.Z.IntergerAndDecimals(e)},model:{value:t.tax_rate,callback:e=>{this.$set(t,"tax_rate",e)}}},[e("template",{slot:"append"},["%"])])]),e("el-form-item",{attrs:{label:"税额"}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入",disabled:!0},on:{input:e=>t.tax_amount=L.Z.IntergerAndDecimals(e)},model:{value:t.tax_amount,callback:e=>{this.$set(t,"tax_amount",e)}}},[e("template",{slot:"append"},["元"])])]),e("el-form-item",{attrs:{label:"不含税金额"}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入",disabled:!0},model:{value:t.tax_excluded_amount,callback:e=>{this.$set(t,"tax_excluded_amount",e)}}},[e("template",{slot:"append"},["元"])])]),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{style:"width:100%",attrs:{placeholder:"请输入 (限20字)",maxlength:20},model:{value:t.comment,callback:e=>{this.$set(t,"comment",e)}}})])])])])])])}}),ne=re,le=(0,_.Z)(ne,te,ae,!1,null,"406b703a",null),ie=le.exports,se=a(43773);const oe=new Map([["付款编号","form_code"],["申请人","add_by_name"],["户名","bank_acct_name"],["项目名称","project_name"],["付款事由","fksy"],["备注","bz"]]);var ce,ue,me,pe,de=(0,s.defineComponent)({setup(e,t){const a=()=>({date:void 0,pay_type:void 0,payer_bank_account_id:void 0,department_name:void 0,expense_category_code:void 0,project_name:void 0,page_num:1,num:20,search_type:"付款编号"}),r=(0,se.R)({component:ie,width:"844px",title:"导入支出报表",footer:!1,on:{submit(){n.value.page_num=1,g.queryDailyCostReq()}}}),n=(0,s.ref)(a()),l=(0,s.ref)([]),i=(0,s.ref)(0),o=(0,s.ref)(!1),c=(0,s.computed)((()=>t.root.$route.meta?.tab[0])),u=(0,U.h)(Q.f8,{defaultPageSize:1e4}),p=(0,s.computed)((()=>{const e=[];return R.Fq.forEach(((t,a)=>{e.push({value:a,name:t})})),e})),d=(0,s.computed)((()=>{const e=[];return R.SN.forEach(((t,a)=>{e.push({value:a,name:t})})),e})),h=(0,s.ref)([]),_=H(l),f={disabledDate(e){const t=m()("2021-01-01");return m()(e).isBefore(t)}},g={query(){g.queryDailyCostReq()},reset(){n.value=a(),g.queryDailyCostReq()},exprotDailyCost(){const e=Object.keys(n.value).reduce(((e,t)=>{if("page_num"===t||"num"===t)return e;const a=n.value[t];if(a){if("date"===t)return`${e}&start_date=${a[0]}&end_date=${a[1]}`;if("project_name"===t){const t=oe.get(n.value.search_type);return`${e}&${t}=${a}`}return`${e}&${t}=${a}`}return e}),`Authorization=${(0,Y.LP)()}`),t="/api/financial/export_daily_pay",a=e.length?`${t}?${e}`:t;window.open(a,"_blank")},queryDailyCostReq:async()=>{const{date:e,project_name:a,search_type:r,...s}=n.value,c=oe.get(r),u={...s,start_date:e?.[0],end_date:e?.[1],[c]:a};o.value=!0;const m=await(0,N.Hz)(u);o.value=!1,m.data.success?(l.value=m.data.data.data,i.value=m.data.data.total,y.value=m.data.data.statistics_data):t.root.$message.error(m.data.message)},handleCurrentChange(e){n.value.page_num=e,g.queryDailyCostReq()},currentSizeChange(e){n.value.num=e,g.queryDailyCostReq()}};(0,s.onMounted)((async()=>{g.queryDailyCostReq();const e=await(0,N.k6)();e.data.success&&(h.value=e.data.data)}));const y=(0,s.ref)(),b=()=>void 0===y.value?[]:["合计","--","--","--","--","--","--","--",(0,v.Y4)(y.value.sum_tax_excluded_amount,2),(0,v.Y4)(y.value.sum_tax_amount,2),(0,v.Y4)(y.value.sum_payment_amount,2),(0,v.Y4)(y.value.sum_loan_write_off,2),(0,v.Y4)(y.value.sum_approved_amount,2),"--","--","--","--","--"],x=(0,s.ref)(158),w=e=>{x.value=e.height},k=(0,s.computed)((()=>{const e=i.value<=0?85:135,t=String(Number(x.value+e).toFixed(0));return"calc(100vh - "+t+"px)"}));return{topCardHeight:x,topCardHeightStr:k,onTopCardRectUpdate:w,total:i,queryForm:n,tableData:l,activeRoute:c,columns:_,feeTypeList:p,spendingTypeList:d,accountList:h,pickerOptions:f,loading:o,summaryMethod:b,dialog:r,...g,reqExpenseCategories:u}},render(){const e=arguments[0];return e("tg-card",{class:"daily-cost-container",attrs:{padding:0}},[e("tg-card",i()([{class:"daily-cost-background-card",style:"min-width: 1088px;",attrs:{padding:18}},{on:{"rect:update":this.onTopCardRectUpdate}}]),[e("el-form",i()([{class:"daily-cost-filter-form",attrs:{size:"small","label-width":"70px"}},{attrs:{model:this.formData}}]),[e("div",{class:"daily-cost-filter-form-div"},[e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{label:"日期选择："}},[e("el-date-picker",{attrs:{type:"daterange",clearable:!0,"range-separator":"～","value-format":"yyyy-MM-dd",format:"yyyy.MM.dd","start-placeholder":"开始时间","end-placeholder":"结束时间",pickerOptions:this.pickerOptions,editable:!1},style:"width: 100%",model:{value:this.queryForm.date,callback:e=>{this.$set(this.queryForm,"date",e)}}})])]),e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{label:"支出类型："}},[e("el-select",{class:"daily-cost-select",attrs:{placeholder:"请选择支出类型"},style:"width: 100%",model:{value:this.queryForm.pay_type,callback:e=>{this.$set(this.queryForm,"pay_type",e)}}},[e("el-option",{attrs:{label:"全部",value:void 0},key:0}),this.spendingTypeList.map(((t,a)=>e("el-option",{attrs:{label:t.name,value:t.value},key:a+1})))])])]),e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{label:"转出路径："}},[e("el-select",{class:"daily-cost-select",attrs:{placeholder:"请选择转出路径"},style:"width: 100%",model:{value:this.queryForm.payer_bank_account_id,callback:e=>{this.$set(this.queryForm,"payer_bank_account_id",e)}}},[e("el-option",{attrs:{label:"全部",value:void 0},key:0}),this.accountList.map(((t,a)=>e("el-option",{attrs:{label:t.bank_name,value:t.id},key:a+1})))])])]),e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{label:"归属部门："}},[e("el-input",{attrs:{placeholder:"请输入归属部门"},model:{value:this.queryForm.department_name,callback:e=>{this.$set(this.queryForm,"department_name",e)}}})])]),e("div",{class:"daily-cost-filter-form-item form-item-project"},[e("el-form-item",{attrs:{label:"项目搜索："}},[e("el-input",{attrs:{placeholder:`请输入${this.queryForm.search_type}`},model:{value:this.queryForm.project_name,callback:e=>{this.$set(this.queryForm,"project_name",e)}}},[e("el-select",{slot:"prepend",style:"width: 100px",model:{value:this.queryForm.search_type,callback:e=>{this.$set(this.queryForm,"search_type",e)}}},[e("el-option",{attrs:{label:"付款编号",value:"付款编号"}}),e("el-option",{attrs:{label:"项目名称",value:"项目名称"}}),e("el-option",{attrs:{label:"申请人",value:"申请人"}}),e("el-option",{attrs:{label:"户名",value:"户名"}})])])])]),e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{label:"会计科目："}},[e("el-select",{class:"daily-cost-select",attrs:{placeholder:"请选择会计科目"},style:"width: 100%",model:{value:this.queryForm.expense_category_code,callback:e=>{this.$set(this.queryForm,"expense_category_code",e)}}},[e("el-option",{attrs:{label:"全部",value:void 0},key:0}),this.reqExpenseCategories.data?.filter((e=>e.is_active)).map(((t,a)=>e("el-option",{attrs:{label:t.expense_category_name,value:t.expense_category_code},key:a+1})))])])]),e("div",{class:"daily-cost-filter-form-item"},[e("el-form-item",{attrs:{"label-width":"0"}},[e("div",{class:"daily-cost-filter-form-item-btn"},[e("tg-button",{attrs:{type:"primary"},on:{click:this.query}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.reset}},["重置"]),e("tg-button",{class:"mgl-12",on:{click:this.dialog.show}},["导入"]),e("tg-button",{class:"mgl-12",on:{click:this.exprotDailyCost}},["导出"])])])])])])]),e("tg-card",{class:"daily-cost-background-card mgt-12",style:"min-width: 1088px;",attrs:{padding:[18,18,0,18]}},[e("tg-table",{attrs:{height:"dailyCost"===this.activeRoute||this.tableData.length<=0?this.topCardHeightStr:"calc(100vh - 300px)",border:!0,stripe:!0,data:this.tableData,columns:this.columns,"show-summary":!0,"summary-method":this.summaryMethod},directives:[{name:"loading",value:this.loading}],class:"daily-cost-precharge-table"},[e("template",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})])]),this.tableData.length>0&&e("div",{class:"daily-cost-pagination"},[e("el-pagination",{class:"flex-none",attrs:{"current-page":this.queryForm.page_num,"page-sizes":[10,20,30,50,100],"page-size":this.queryForm.num,total:this.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":this.handleCurrentChange,"size-change":this.currentSizeChange}})])])])}}),he=de,_e=(0,_.Z)(he,ce,ue,!1,null,null,null),fe=_e.exports,ge=a(23812),ye=(0,s.defineComponent)({components:{financeDetails:g,financePrecharge:q,financePrepay:F,financeQuick:P,dailyCost:fe},setup(e,t){const a=[{label:"收支明细",value:"financeDetails"},{label:"预收",value:"financePrecharge"},{label:"预付",value:"financePrepay"},{label:"历史快照",value:"financeQuick"},{label:"日支出报表",value:"dailyCost"}],r=(0,s.computed)((()=>a.filter((e=>t.root.$route.meta?.tab.includes(e.value))))),n=(0,s.computed)((()=>t.root.$route.meta?.tab)),{checkedTab:l,tabs:i}=(0,ge.pK)(r,n.value?.[0]),{params:c}=(0,o.nl)(t),{params:u}=(0,o.Iz)(t);(0,s.provide)("filterParams",c);const p=()=>{(0,s.nextTick)((()=>{t.refs[l.value].query(c.value)}))};(0,s.watch)((()=>t.root.$route),(()=>{l.value=t.root.$route.meta?.tab[0]}));const d=()=>{c.value.business_type=void 0,c.value.project_name=void 0,c.value.page_num=1,c.value.num=30,c.value.date=m()(new Date).subtract(1,"months").startOf("month").format("YYYY-MM"),p()},h=()=>{(0,s.nextTick)((()=>{t.refs.unWriteOff.query(u.value)}))},_=()=>{u.value.num=1,u.value.num=30,u.value.buyer_name="",u.value.seller_name="",u.value.invoice_number="",u.value.invoice_type="",u.value.is_special="",u.value.invoice_status="1",u.value.not_full_write_off="1",h()};return{checkedTab:l,tabs:i,reportParams:c,queryForm:u,query:p,reset:d,allTabs:n,unWriteOfQuery:h,unWriteOfReset:_}},render(){const e=arguments[0],t={props:{tabs:this.tabs,bottom:!0,value:this.checkedTab},on:{change:e=>{this.checkedTab=e.value}}};return e("div",{class:"page-report",directives:[{name:"loading",value:this.loading}]},[this.allTabs.length>1&&e("tg-tabs",i()([{},t])),"dailyCost"!==this.checkedTab&&e("tg-card",{attrs:{padding:[18,18,18,18]}},["unWriteOff"!==this.checkedTab&&e("el-form",i()([{class:"filter-form",attrs:{size:"small","label-width":"70px"}},{attrs:{model:this.formData}}]),[e("div",{class:"filter-form-div"},[("financeDetails"===this.checkedTab||"financeQuick"===this.checkedTab)&&e("div",{class:"filter-form-item",style:"min-width:186px;max-width:286px"},[e("el-form-item",{attrs:{label:"时间：","label-width":"42px"}},[e("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM"},style:"width: 100%",model:{value:this.reportParams.date,callback:e=>{this.$set(this.reportParams,"date",e)}}})])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"业务类型："}},[e("el-select",{class:"select",attrs:{placeholder:"请选择业务类型"},style:"width: 100%",model:{value:this.reportParams.business_type,callback:e=>{this.$set(this.reportParams,"business_type",e)}}},[e("el-option",{attrs:{label:"全部",value:void 0}}),e("el-option",{attrs:{label:"营销业务",value:"1"}}),e("el-option",{attrs:{label:"抖音店播",value:"3"}}),e("el-option",{attrs:{label:"淘宝店播",value:"2"}}),e("el-option",{attrs:{label:"S2B2C",value:"5"}})])])]),e("div",{class:"filter-form-item",style:"min-width:186px;max-width:286px"},[e("el-form-item",{attrs:{label:"项目：","label-width":"42px"}},[e("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:this.reportParams.project_name,callback:e=>{this.$set(this.reportParams,"project_name",e)}}})])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{"label-width":"0"}},[e("div",{class:"filter-form-item-btn"},[e("tg-button",{attrs:{type:"primary"},on:{click:this.query}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.reset}},["重置"])])])])])]),"unWriteOff"===this.checkedTab&&e("el-form",i()([{class:"filter-form un-writeoff-form",attrs:{size:"small","label-width":"70px"}},{attrs:{model:this.formData}}]),[e("div",{class:"filter-form-div"},[e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"购买方："}},[e("el-input",{attrs:{placeholder:"请输入购买方"},model:{value:this.queryForm.buyer_name,callback:e=>{this.$set(this.queryForm,"buyer_name",e)}}})])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"销售方："}},[e("el-input",{attrs:{placeholder:"请输入销售方"},model:{value:this.queryForm.seller_name,callback:e=>{this.$set(this.queryForm,"seller_name",e)}}})])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"发票号码："}},[e("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:this.queryForm.invoice_number,callback:e=>{this.$set(this.queryForm,"invoice_number",e)}}})])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"发票类型："}},[e("el-select",{model:{value:this.queryForm.invoice_type,callback:e=>{this.$set(this.queryForm,"invoice_type",e)}}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"销售发票",value:"1"}}),e("el-option",{attrs:{label:"采购发票",value:"2"}})])])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{label:"是否专票："}},[e("el-select",{model:{value:this.queryForm.is_special,callback:e=>{this.$set(this.queryForm,"is_special",e)}}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"是",value:"1"}}),e("el-option",{attrs:{label:"否",value:"0"}})])])]),e("div",{class:"filter-form-item"},[e("el-form-item",{attrs:{"label-width":"0"}},[e("div",{class:"filter-form-item-btn"},[e("tg-button",{attrs:{type:"primary"},on:{click:this.unWriteOfQuery}},["查询"]),e("tg-button",{class:"mgl-12",on:{click:this.unWriteOfReset}},["重置"])])])])])])]),e(this.checkedTab,{class:"page-report-body",ref:this.checkedTab})])}}),ve=ye,be=(0,_.Z)(ve,me,pe,!1,null,"12a558fc",null),xe=be.exports},14239:function(e,t,a){a.d(t,{$3:function(){return T},$Y:function(){return U},D4:function(){return g},Ee:function(){return _},Gx:function(){return C},Iq:function(){return Z},Jf:function(){return P},Ms:function(){return M},PS:function(){return Q},QN:function(){return o},QT:function(){return l},R:function(){return s},RX:function(){return p},S1:function(){return j},UV:function(){return h},V:function(){return m},V2:function(){return b},Vx:function(){return A},Wd:function(){return E},Xd:function(){return X},_J:function(){return H},__:function(){return O},aG:function(){return i},co:function(){return r},f:function(){return D},fE:function(){return x},g1:function(){return $},g9:function(){return n},gW:function(){return v},kO:function(){return u},m2:function(){return k},oO:function(){return d},oZ:function(){return N},pM:function(){return z},q6:function(){return F},qZ:function(){return f},qy:function(){return c},uf:function(){return W},v2:function(){return Y},vU:function(){return y},vb:function(){return S},x7:function(){return w},yN:function(){return q},zN:function(){return G},zS:function(){return R}});const r="/api/settlement/query_financial_settlements",n="/api/settlement/query_settlements/approval_financial",l="/api/settlement/query_financial_cost_settlements",i="/api/settlement/query_settlements",s="/api/settlement/del_marketing_settlement",o="/api/settlement/del_shop_live_settlement",c="/api/settlement/del_common_settlement",u="/api/settlement/save_settlement_data/marketing",m="/api/settlement/save_settlement_data/shop_live",p="/api/settlement/save_settlement_data/common",d="/api/settlement/submit_settlement",h="/api/settlement/upload_recommend_file",_="/api/settlement/upload_order_file",f="/api/settlement/upload_taobao_cps_file",g="/api/settlement/upload_douyin_cps_file",y="/api/settlement/upload_vtask_file",v="/api/settlement/export_project_lives",b="/api/settlement/get_project_live_count",x="/api/settlement/reload_kol_company_relationship",w="/api/settlement/save_shop_live_settlement_base_info",k="/api/settlement/save_marketing_settlement_base_info",j="/api/settlement/save_common_settlement_base_info",$="/api/settlement/save_marketing_cost_settlement_base_info",q="/api/settlement/save_shop_live_cost_settlement_base_info",A="/api/settlement/save_common_cost_settlement_base_info",D="/api/settlement/upload_kol_company_file",C="/api/settlement/gen_sub_cost_settlement",z="/api/settlement/replace_coop_estimate_income_settlement",T="/api/settlement/replace_project_estimate_income_settlement",G="/api/settlement/replace_common_estimate_income_settlement",S="/api/settlement/replace_marketing_estimate_cost_settlement_base_info",X="/api/settlement/replace_shop_live_estimate_cost_settlement_base_info",F="/api/settlement/replace_common_estimate_cost_settlement_base_info",W="/api/settlement/upload_xingtu_file",M="/api/settlement/upload_douyin_cps_file_v2",O="/api/settlement/upload_group_file",P="/api/shop_live/get_customer_company_pit_fee",N="/api/settlement/gen_sub_income_settlement",R="/api/cust/settlement/query_company",Y="/api/oceanengine/ad_plan/get_ad_cost",E="/api/oceanengine/ad_plan/get_ad_cost/yufeng",Z="/api/financial/coop_upload_invoice_settlement",H="/api/financial/common_upload_invoice_settlement",Q="/api/financial/shop_live_upload_invoice_settlement",U="/api/approval/get_approval_by_settlement"},59563:function(e,t,a){a.d(t,{Q:function(){return l},h:function(){return i}});a(21703);var r=a(97434),n=a(48606);const l=(e,{manual:t,onError:a,onSuccess:l,defaultParams:i,transform:s}={})=>{const o=(0,r.ref)(),c=(0,r.ref)(),u=(0,r.ref)(!1),m=(0,r.ref)([]),p=()=>{d(...m.value)},d=(...t)=>Promise.resolve(t||i).then((()=>{u.value=!0})).then((()=>0===t.length&&i&&i.length>0?i:t)).then((e=>(m.value=e,e))).then((t=>e(...t))).then((e=>{if(!e.data.success)throw new Error(e.data.message);return o.value=s?s(e.data.data):e.data.data,l&&l(o.value,e.data),e})).then((()=>{u.value=!1})).catch((e=>{throw u.value=!1,c.value=e.message,a&&a(e),n.Message.error(e.message),e})),h=d;return t||d(...i||[]),(0,r.reactive)({data:o,error:c,loading:u,reload:p,run:d,runAsync:h,params:m})},i=(e,t={})=>{const{defaultPageSize:a=20,defaultParams:n=[],transform:i,...s}=t,o=(0,r.ref)(),c=(0,r.reactive)({total:0,page_num:1,page_size:a,onCurrentChange:e=>{const t=[...p.params];t[0]?t[0].page_num=e:t[0]={num:a,page_num:e},p.runAsync(...t).then((()=>{c.page_num=e}))},refresh:()=>c.onCurrentChange(1),reQuery(...e){const t=[];return p.params[0]?(t[0]=p.params[0],t[0].page_num=1,c.page_num=1):(t[0]={num:a,page_num:1},c.page_num=1),t.push(...e),p.runAsync(...t)}}),[u={num:a,page_num:1},...m]=n,p=l(e,{defaultParams:[u,...m],...s,onSuccess(e,a){o.value=i?i(e):e.data,c.total=e.total,t.onSuccess&&t.onSuccess(o.value,a)}}),{data:d,...h}=(0,r.toRefs)(p);return(0,r.reactive)({...h,data:o,pagination:c})}},28440:function(e,t,a){a.d(t,{AR:function(){return i},Mi:function(){return s},PP:function(){return l},YW:function(){return r},qZ:function(){return n}});const r=new Map([[1,"营销业务"],[3,"抖音店播"],[2,"淘宝店播"],[4,"基地业务"],[5,"S2B2C"],[6,"区域店播"]]),n=new Map([[2,"淘宝"],[1,"抖音"]]),l=new Map([[1,"直播"],[2,"视频"],[3,"图文"]]),i=new Map([[1,"V任务"],[2,"支付宝"],[3,"对公银行"],[4,"阿里妈妈"],[5,"巨量百应"]]),s=new Map([[1,"银行卡"],[2,"V任务"],[3,"对公银行"],[4,"支付宝"]])},11676:function(e,t,a){a.d(t,{K:function(){return m}});a(26699);var r=a(48606);const n=[".pdf",".doc",".docx",".ppt",".pptx"],l=[".mp4"],i=[".png",".jpg",".jpeg"],s=[".xls",".xlsx",".csv"],o=[".doc",".docx"],c=[".pdf"],u=[".csv"],m=e=>t=>{const a=/(\.[^.]+)$/.exec(t.name);let m="";a&&(m=a[1]);const p=[];if(e.image&&p.push(...i),e.file&&p.push(...n),e.video&&p.push(...l),e.excel&&p.push(...s),e.pdf&&p.push(...c),e.doc&&p.push(...o),e.csv&&p.push(...u),e.extensions&&p.push(...e.extensions),p.length>0&&!p.includes(m))return r.Message.warning(`文件格式不正确，请使用 ${p.join(";")}`),!1;if(void 0!==e.fileSize){const a=t.size/1024/1024<e.fileSize;if(!a)return r.Message.warning(`文件不能超过${e.fileSize}MB!`),!1}return!0};t["Z"]={ValidationFileUpload:m}},42386:function(e,t,a){a.d(t,{$W:function(){return Z},BN:function(){return k},BT:function(){return b},Bu:function(){return D},DR:function(){return z},FT:function(){return B},Hw:function(){return N},Hz:function(){return g},I2:function(){return T},JQ:function(){return w},KH:function(){return W},LZ:function(){return Q},Ml:function(){return L},NW:function(){return j},Oi:function(){return A},R5:function(){return x},R7:function(){return X},Sg:function(){return F},T_:function(){return S},Tu:function(){return p},UI:function(){return m},UW:function(){return u},Un:function(){return _},Ux:function(){return v},V$:function(){return o},XV:function(){return c},XY:function(){return H},Xz:function(){return d},_:function(){return Y},_u:function(){return V},aH:function(){return h},b:function(){return q},cN:function(){return E},ce:function(){return M},f2:function(){return $},g8:function(){return s},h:function(){return O},hE:function(){return G},k:function(){return i},k6:function(){return f},kf:function(){return R},md:function(){return y},oY:function(){return C},or:function(){return K},qp:function(){return P},w1:function(){return I},xW:function(){return U}});var r=a(76012),n=a(50709),l=a(64236);const i=async({id:e,refuse_reason:t})=>(0,r.SO)(n.VE.replace(":id",`${e}`),{refuse_reason:t}),s=async e=>(0,r.dX)(n.Ui.replace(":id",`${e}`)),o=async e=>(0,r.dX)(`/api/settlement/approve_cost_settlement/${e}`),c=({id:e,refuse_reason:t})=>(0,r.SO)(`/api/settlement/refuse_cost_settlement/${e}`,{refuse_reason:t}),u=async e=>(0,r.dX)(n.g8,{params:{...(0,l.jG)(e)}}),m=async e=>(0,r.dX)(n.V5,{params:{...(0,l.jG)(e)}}),p=async e=>(0,r.SO)("/api/financial/reverse",e),d=async e=>(0,r.SO)("/api/financial/reverse_again",e),h=async e=>(0,r.SO)("/api/financial/confirm_reverse",{...(0,l.jG)(e)}),_=async e=>(0,r.SO)("/api/financial/merchant_confirm_reverse",{...(0,l.jG)(e)}),f=async e=>(0,r.dX)("/api/financial/query_our_bank_accounts",{params:{...(0,l.jG)(e??{})}}),g=async e=>(0,r.dX)(n.Ou,{params:{...(0,l.jG)(e)}}),y=async e=>(0,r.SO)("/api/financial/add_manually_pay_info",{...(0,l.jG)(e)}),v=async(e,t)=>(0,r.dX)("/api/financial/query_all_project",{params:{...(0,l.jG)({...e,...t})}}),b=async e=>(0,r.dX)(n.LS,{params:{...(0,l.jG)(e)}}),x=async e=>(0,r.dX)(n.gC,{params:{...(0,l.jG)(e)}}),w=async e=>(0,r.dX)(n.po,{params:{...(0,l.jG)(e)}}),k=async e=>(0,r.dX)(n.bf,{params:{...(0,l.jG)(e)}}),j=async e=>(0,r.dX)(n.Oo,{params:{...(0,l.jG)(e)}}),$=async e=>(0,r.dX)(n.EJ,{params:{...(0,l.jG)(e)}}),q=async e=>(0,r.dX)(n.Zp,{params:{...(0,l.jG)(e)}}),A=async e=>(0,r.dX)(n.ED,{params:{...(0,l.jG)(e)}}),D=async(e,t)=>2===t?(0,r.dX)(n.xn,{params:{...(0,l.jG)(e)}}):1===t?(0,r.dX)(n.jH,{params:{...(0,l.jG)(e)}}):(0,r.dX)(n.Q9,{params:{...(0,l.jG)(e)}}),C=async(e,t)=>2===t?(0,r.dX)(n.rm,{params:{...(0,l.jG)(e)}}):1===t?(0,r.dX)(n.ei,{params:{...(0,l.jG)(e)}}):(0,r.dX)(n.EG,{params:{...(0,l.jG)(e)}}),z=async(e,t)=>2===t?(0,r.dX)(n.ed,{params:{...(0,l.jG)(e)}}):1===t?(0,r.dX)(n.kJ,{params:{...(0,l.jG)(e)}}):3===t?(0,r.dX)(n.Dd,{params:{...(0,l.jG)(e)}}):(0,r.dX)(n.cR,{params:{...(0,l.jG)(e)}}),T=async e=>(0,r.dX)(n.vr,{params:{...(0,l.jG)(e)}}),G=async e=>(0,r.dX)(n.qM,{params:{...(0,l.jG)(e)}}),S=async()=>(0,r.dX)(n.us),X=async()=>(0,r.dX)(n.TL),F=async()=>(0,r.dX)(n.li),W=async()=>(0,r.dX)(n.u8),M=async e=>(0,r.dX)(n.gV,{params:{...(0,l.jG)(e)}}),O=async()=>(0,r.dX)(n.Hn),P=async e=>(0,r.dX)(n.ly,{params:{...(0,l.jG)(e)}}),N=async e=>(0,r.SO)(n.ER,{...(0,l.jG)(e)}),R=async e=>(0,r.HG)(`${n.Cm}/${e}`),Y=async e=>(0,r.dX)(n.Vv,{params:{...(0,l.jG)(e)}}),E=async()=>(0,r.dX)(n.Do),Z=async e=>(0,r.dX)(n.y8,{params:{...(0,l.jG)(e)}}),H=async e=>(0,r.dX)(n.bp,{params:{...(0,l.jG)(e)}}),Q=async e=>(0,r.dX)(n.td,{params:{...(0,l.jG)(e)}}),U=async e=>(0,r.dX)(`${n.hv}/${e}`),B=async e=>(0,r.dX)(n.m0,{params:{...(0,l.jG)(e)}}),I=async e=>(0,r.dX)(`${n.oE}/${e}`),V=async e=>(0,r.SO)(n.L7,{...(0,l.jG)(e)}),K=async e=>(0,r.HG)(`${n.zI}/${e}`),L=e=>(0,r.SO)(n.y$,e)},76771:function(e,t,a){a.d(t,{DG:function(){return c},KS:function(){return h},PQ:function(){return _},W_:function(){return u},fh:function(){return p},lj:function(){return m},nW:function(){return o},yi:function(){return d}});var r=a(76012),n=a(50709),l=a(64236),i=a(14239),s=a(29625);const o=async e=>(0,r.dX)(n._2,{params:{...(0,l.jG)(e)}}),c=async e=>(0,r.dX)(n.HW,{params:{...(0,l.jG)(e)}}),u=async(e,t)=>(0,r.dX)("income"===e?i.g9:i.QT,{params:{...(0,l.jG)(t)}}),m=async e=>(0,r.SO)(n.gh,{invoice_status:2,...(0,l.jG)(e)}),p=async e=>(0,r.SO)(n.EN,{...(0,l.jG)(e)}),d=async(e,t)=>{switch(t){case s.kA.live:return(0,r.SO)(i.PS,{...(0,l.jG)(e)});case s.kA.common_business:return(0,r.SO)(i._J,{...(0,l.jG)(e)});case s.kA.marketing:return(0,r.SO)(i.Iq,{...(0,l.jG)(e)});default:return(0,r.SO)(i.PS,{...(0,l.jG)(e)})}},h=async e=>(0,r.SO)(n.AY,{...(0,l.jG)(e)}),_=async(e,t)=>(0,r.SO)(n.Dl,{invoice_id:e,write_off_list:t})},50737:function(e,t,a){a.d(t,{SL:function(){return o},bO:function(){return i},f8:function(){return l},sR:function(){return s}});var r=a(76012),n=a(64236);const l=(e={})=>(0,r.dX)("/api/maycur/list_expense_categories",{params:{...(0,n.jG)(e)}}),i=e=>(0,r.SO)("/api/maycur/save_expense_category",(0,n.jG)(e)),s=(e={})=>(0,r.dX)("/api/maycur/list_expense_types",{params:{...(0,n.jG)(e)}}),o=e=>(0,r.SO)("/api/maycur/save_expense_type",(0,n.jG)(e))},23812:function(e,t,a){a.d(t,{GQ:function(){return s},YE:function(){return l},cY:function(){return o},pK:function(){return i}});var r=a(97434),n=a(44928);const l=(e,t)=>({tabs:(0,r.reactive)([...e]),checkedTab:(0,r.ref)(t??(e.length<1?"":e[0].value))}),i=(e,t)=>{const a=(0,r.isRef)(e)?e:(0,r.ref)(e),n=(0,r.isRef)(t)?(0,r.unref)(t):t,l=a.value.length<1?"":a.value[0].value,i=(0,r.ref)(n??l);return{tabs:a,checkedTab:i}},s=(e,t,a)=>{const n=(0,r.reactive)([...t]),l=(0,r.ref)(a??(t.length<1?"":`${t[0].value}`)),i=t=>{e.root.$router.push({path:e.root.$route.path,query:{tab:`${t.value}`}})};return(0,r.onBeforeMount)((()=>{const r=e.root.$route.query.tab;l.value="string"===typeof r?r:a??(t.length<1?"":`${t[0].value}`)})),{tabs:n,checkedTab:l,onTabChange:i}},o=(e,t)=>{const a=(0,r.reactive)([...e]),l=(0,r.ref)(t??(e.length<1?"":`${e[0].value}`)),i=(0,n.t)(),s=e=>{const t=i.currentRoute,a={...t.params,tab:e.value};i.push({name:t.name,params:a})};return l.value=i.currentRoute.params.tab||t||l.value,{tabs:a,checkedTab:l,onTabChange:s}}},88721:function(e,t,a){var r=a(41572);a(97434);const n={IntergerAndDecimals(e){const t=/(\d+)$|\d+\.?\d{0,2}/.exec(e);return t?t[0]:""},Interger(e){return e.replace(/[^\d]/g,"")},NumberRange(e,t){return a=>{const r=this.IntergerAndDecimals(a);if(""===r)return r;const n=Number(r);return n<e?e+"":n>t?t+"":r}},Thousands(e){if(null===e||void 0===e||""===e)return e;e+="";const t=/^(\d+)(\.\d+$)?$/.exec(e+"");if(!t)return e;const a=t[1],r=t[2];let n=a.replace(/(\d{1,3})(?=(\d{3})+$)/g,(e=>`${e},`));return void 0!==r&&(n=`${n}${r}`),n},NineIntergerAndDecimals(e){const t=(/(?:0|[1-9]\d{0,8})(?:\.\d{0,2})?/u.exec(e.replace(/[^.\d]+/gu,"").replace(r.Pj,""))??[""])[0];return t}};t["Z"]=n}}]);