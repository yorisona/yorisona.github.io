"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[3011],{31428:function(e,t,a){a.d(t,{Z:function(){return p}});var s,l,r=a(97434),i=(0,r.defineComponent)({props:{value:{type:Array,default:()=>[]},separator:{type:String,default:"～"},startPlaceholder:{type:String},endPlaceholder:{type:String},maxLength:{type:Array,default:()=>[]}},render(){const e=arguments[0];return e("div",{class:"tg-input-range"},[e("el-input",{attrs:{maxLength:this.maxLength[0],value:this.value[0],placeholder:this.startPlaceholder},on:{input:e=>{const t=[...this.value];t[0]=e,this.$emit("input",t)}}}),e("span",[this.separator]),e("el-input",{attrs:{maxLength:this.maxLength[1],value:this.value[1],placeholder:this.endPlaceholder},on:{input:e=>{const t=[...this.value];t[1]=e,this.$emit("input",t)}}})])}}),o=i,n=a(1001),c=(0,n.Z)(o,s,l,!1,null,"1be24118",null),p=c.exports},69745:function(e,t,a){a.d(t,{Z:function(){return y}});a(21703);var s=a(36568),l=a.n(s),r=a(97434),i=a(53451),o=a.n(i),n=a(48606),c=a(318),p=a(31428);const{debounce:d}=o(),u={business_type:2,base_salary:"",commission_rate:"",end_date:"",start_date:"",end_time:"",start_time:"",settlement_type:1,hourly_wage:"",project_id:"",appendix:[],coop_dates:[],available_time:[]};var m,h,f=(0,r.defineComponent)({components:{InputRange:p.Z},props:{save:{type:Function}},setup(e,t){const a=(0,r.ref)(null),s=(0,r.ref)(""),l=(0,r.ref)(!1),i=(0,r.ref)([]),o=(0,r.ref)([]),p=(0,r.ref)({...u}),m=(0,r.ref)([]),h=()=>{t.emit("close"),t.root.$nextTick(f),l.value=!1},f=()=>{p.value={pics:[],videos:[],status:1}},g=(e,t)=>{s.value=e,p.value={business_type:1,hourly_wage:[],available_date:[],available_time:[],...t},l.value=!0},v=()=>{a.value?.validate((t=>{if(!t)return!1;e.save(p.value).then((()=>{l.value=!1})).catch((e=>{n.Message.error(e.message)}))}))},b=d(v,200),y=e=>{c.ZP.GetShopLiveProject({search_type:6,search_value:e}).then((e=>{i.value=e.data}))},_=e=>{c.ZP.GetAuthQueryUser({search_type:2,search_value:e}).then((e=>{o.value=e.data}))};return{show:g,query:y,queryPeople:_,title:s,visible:l,formData:p,months:m,onCloseBtnClick:h,onSaveBtnClick:b,formRef:a,project_list:i,people_list:o}},render(){const e=arguments[0],t=1===this.formData.business_type?"试播":"试镜";return e("el-dialog",{class:"tg-dialog-classic",attrs:{width:"572px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},[this.title]),e("div",{class:"dialog-content"},[e("el-form",l()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{"label-position":"top",size:"small","label-width":"106px"}}]),[e("div",{class:"form-body"},[e("el-form-item",{attrs:{className:"mgb-18",label:"申请类型",prop:"business_type",rules:{required:!0,message:"请选择",trigger:"blur"}}},[e("el-select",{attrs:{placeholder:"请输入标题"},on:{change:()=>{this.formData.project_id=null,this.project_list=[]}},model:{value:this.formData.business_type,callback:e=>{this.$set(this.formData,"business_type",e)}}},[e("el-option",{attrs:{label:"试播",value:1},style:"width: 161px"}),e("el-option",{attrs:{label:"试镜",value:2},style:"width: 161px"})])]),e("el-form-item",{attrs:{className:"mgb-18",label:`${t}项目`,prop:"apply_project_id",rules:{required:!0,message:"输入并选择项目",trigger:"blur"}}},[e("el-select",{attrs:{filterable:!0,remote:!0,"remote-method":this.query,placeholder:"输入并选择项目"},model:{value:this.formData.apply_project_id,callback:e=>{this.$set(this.formData,"apply_project_id",e)}}},[this.project_list.map(((t,a)=>e("el-option",{attrs:{label:t.project_name,value:t.id},style:"width: 161px",key:a}))),e("p",{slot:"empty",class:"select-no-data"},["暂无数据"])])]),e("el-form-item",{attrs:{className:"mgb-18",label:"联系人",prop:"contact_uid",rules:{required:!0,message:"输入并选择联系人",trigger:"blur"}}},[e("el-select",{attrs:{filterable:!0,remote:!0,"remote-method":this.queryPeople,placeholder:"输入并选择联系人"},model:{value:this.formData.contact_uid,callback:e=>{this.$set(this.formData,"contact_uid",e)}}},[this.people_list.map(((t,a)=>e("el-option",{attrs:{label:t.username,value:t.id},style:"width: 161px",key:a}))),e("p",{slot:"empty",class:"select-no-data"},["暂无数据"])])]),1===this.formData.business_type&&e("el-form-item",{attrs:{className:"mgb-18",label:`${t}薪资`,prop:"pilot_hourly_wage",rules:{required:!0,message:`填写${t}薪资`,trigger:"blur"}}},[e("el-input",{attrs:{placeholder:"请输入时薪"},model:{value:this.formData.pilot_hourly_wage,callback:e=>{this.$set(this.formData,"pilot_hourly_wage",e)}}},[e("span",{slot:"append"},["元/时"])])]),1===this.formData.business_type&&e("el-form-item",{attrs:{className:"mgb-18",label:"全职保底薪资",prop:"floor_monthly_wage",rules:[{required:!0,message:"请填写全职保底薪资",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入薪资"},model:{value:this.formData.floor_monthly_wage,callback:e=>{this.$set(this.formData,"floor_monthly_wage",e)}}},[e("span",{slot:"append"},["元/月"])])]),2===this.formData.business_type&&e("el-form-item",{class:"column2",attrs:{label:"可提供时薪范围",prop:"hourly_wage",rules:[{required:!0,message:"请填写可提供时薪范围",trigger:"blur"},{message:"请填写可提供时薪范围",validator:(e,t,a)=>{1===t.length||""===t[0]||""===t[1]?a(new Error(e.message)):a()},trigger:"blur"}]}},[e("inputRange",{attrs:{separator:"～",startPlaceholder:"最低时薪",endPlaceholder:"最高时薪",maxLength:[5,5]},model:{value:this.formData.hourly_wage,callback:e=>{this.$set(this.formData,"hourly_wage",e)}}})]),e("el-form-item",{class:"column2",attrs:{label:`可${t}日期`,prop:"coop_dates",rules:{required:!0,message:`请选择可${t}日期`,trigger:"blur"}}},[e("el-date-picker",{attrs:{type:"daterange",format:"yyyy.MM.dd","range-separator":"～","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:this.formData.coop_dates,callback:e=>{this.$set(this.formData,"coop_dates",e)}}})]),2===this.formData.business_type&&e("div",{class:"column2"},[e("el-form-item",{attrs:{label:`可${t}时间`,prop:"end_time",rules:{required:!0,message:`请选择可${t}时间`,trigger:"blur"}}},[e("div",{class:"time-select-box"},[e("p",{class:"el-icon-time icon-time"}),e("el-time-select",{attrs:{editable:!1,"picker-options":{start:"00:00",step:"00:30",end:"23:30"},placeholder:"开始时间"},model:{value:this.formData.start_time,callback:e=>{this.$set(this.formData,"start_time",e)}}}),e("p",{class:"icon-range"},["~"]),e("el-time-select",{attrs:{editable:!1,"picker-options":{start:"00:00",step:"00:30",end:"23:30"},placeholder:"结束时间"},model:{value:this.formData.end_time,callback:e=>{this.$set(this.formData,"end_time",e)}}})])])]),e("el-form-item",{class:"column3",attrs:{label:"其他要求",prop:"other_requirement"}},[e("el-input",{attrs:{placeholder:"请输入其他要求",type:"textarea",row:4},model:{value:this.formData.other_requirement,callback:e=>{this.$set(this.formData,"other_requirement",e)}}})])])])]),e("template",{slot:"footer",style:"height: 50px"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])}}),g=f,v=a(1001),b=(0,v.Z)(g,m,h,!1,null,"4a022034",null),y=b.exports},33011:function(e,t,a){a.d(t,{Z:function(){return K}});var s=a(97434),l=a(57412),r=a(45781),i=a(318);const o=e=>{const t=(0,s.ref)([]),a=(0,s.ref)(0),l=(0,s.ref)(0),r=(0,s.ref)({num:20,page_num:1}),o=(0,s.ref)({}),n=(s,r)=>{const o={...s};Promise.resolve().then((()=>r||void 0===r?i.ZP.GetAnchorApplyList(o):i.ZP.GetAnchorApplyDetail(o))).then((e=>{t.value=e.data,a.value=e.total,l.value=s.page_num})).catch((t=>{e.root.$message.error(t.message)}))},c=e=>{n({...r.value,page_num:1,...e})},p=()=>{r.value={...r.value,flower_name:"",real_name:"",gender:"",live_year_from:"",live_year_to:"",anchor_type:"",cooperation_status:"",num:20,page_num:1,live_years:[]}},d=async(e,t)=>i.ZP.GetAnchorApplySchedule(e).then((()=>{c(t)})),u=async(e,t)=>i.ZP.GetAnchorApplyCancel(e).then((()=>{c(t)})),m=async(e,t)=>i.ZP.PostAnchorApplyFedback(e).then((()=>{c(t)}));return(0,s.reactive)({applySchedule:d,applyCancel:u,applyFeedback:m,queryForm:r,reset:p,queryStart:c,query:n,list:t,total:a,page_num:l,filter:o})};var n=a(31428),c=a(58302),p=a(53451),d=a.n(p),u=a(48606),m=a(21757),h=a(82741);const{debounce:f}=d();var g,v,b=(0,s.defineComponent)({props:{save:{type:Function},cancel:{type:Function}},setup(e,t){const a=(0,s.ref)(null),l=(0,s.ref)(""),r=(0,s.ref)(!1),i=(0,s.ref)({}),o=(0,s.ref)([]),n=(0,m.gI)(),c=()=>{i.value={}},p=()=>{t.emit("close"),t.root.$nextTick(c),r.value=!1},d=(e,t)=>{l.value=e,i.value=t||{},void 0===i.value.lid&&(i.value.lid=Date.now()),r.value=!0},g=()=>{const t=e.save;t(i.value).then((()=>{r.value=!1})).catch((e=>{u.Message.error(e.message)}))},v=async()=>{const a=await(0,h.I)(t,"取消后数据无法恢复，是否继续操作？");if(a){const t=e.cancel;t(i.value).then((()=>{r.value=!1})).catch((e=>{u.Message.error(e.message)}))}},b=f(g,200);return{show:d,title:l,visible:r,formData:i,months:o,onCloseBtnClick:p,onCancel:v,onSaveBtnClick:b,formRef:a,permission:n}},render(){const e=arguments[0],t=1===this.formData.apply_type?"试镜":"试播";return e("el-dialog",{class:"tg-dialog-classic",attrs:{width:"440px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},[this.title]),e("div",{class:"dialog-content"},[e("div",{class:"form-item"},[e("div",{class:"label"},["申请类型："]),e("div",{class:"text"},[t])]),e("div",{class:"form-item"},[e("div",{class:"label"},["项目："]),e("div",{class:"text"},[this.formData.project_name])]),e("div",{class:"form-item"},[e("div",{class:"label"},[1===this.formData.apply_type?"时薪":"试播薪资","："]),1===this.formData.apply_type?e("div",{class:"text"},[this.formData.min_hourly_wage,"～",this.formData.max_hourly_wage,"元/小时"]):e("div",[this.formData.pilot_hourly_wage,"元/时"])]),e("div",{class:"form-item"},[e("div",{class:"label"},["可",t,"日期："]),e("div",{class:"text"},[this.formData.available_date_begin,"～",this.formData.available_date_end])]),1===this.formData.apply_type?e("div",{class:"form-item"},[e("div",{class:"label"},["可",t,"时间："]),e("div",{class:"text"},[this.formData.available_time_begin,"～",this.formData.available_time_end])]):"",1!==this.formData.apply_type?e("div",{class:"form-item"},[e("div",{class:"label"},["全职保底薪资："]),e("div",{class:"text"},[this.formData.floor_monthly_wage,"元/月"])]):"",e("div",{class:"form-item"},[e("div",{class:"label"},["联系人："]),e("div",{class:"text"},[this.formData.contact_username])]),e("div",{class:"form-item"},[e("div",{class:"label"},["其他要求："]),e("div",{class:"text"},[this.formData.other_requirement])])]),1===this.formData.apply_status&&e("template",{slot:"footer",style:"height: 50px"},[this.list?this.permission.supplier_trialbroadcast_cancal_arrangement?e("div",{class:"div-default-btn",on:{click:this.onCancel}},["取消申请"]):"":e("div",{class:"div-default-btn",on:{click:this.onCancel}},["取消申请"]),this.list?this.permission.supplier_trialbroadcast_confirm_arrangement?e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确认安排"]):"":e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确认安排"])])])}}),y=b,_=a(1001),k=(0,_.Z)(y,g,v,!1,null,"a17e4d98",null),w=k.exports,x=(a(26699),a(36568)),D=a.n(x),C=a(11676),F=a(64236);const{debounce:$}=d();var Z,P,S=(0,s.defineComponent)({props:{save:{type:Function}},setup(e,t){const a=(0,s.ref)(null),l=(0,s.ref)(""),r=(0,s.ref)(!1),i=(0,s.ref)({pics:[],videos:[],status:1}),o=(0,s.ref)([]),n=()=>{t.emit("close"),t.root.$nextTick(c),r.value=!1},c=()=>{i.value={pics:[],videos:[],status:1}},p=(e,t)=>{l.value=e,i.value={pics:[],videos:[],status:1,checked:!1,apply_id:t},r.value=!0},d=()=>{a.value?.validate((t=>{if(!t)return!1;e.save(i.value).then((()=>{r.value=!1})).catch((e=>{u.Message.error(e.message)}))}))},m=$(d,200);return{show:p,title:l,visible:r,formData:i,months:o,onCloseBtnClick:n,onSaveBtnClick:m,formRef:a}},render(){const e=arguments[0],t=this.title;return e("el-dialog",{class:"tg-dialog-classic",attrs:{width:"634px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},[this.title,"反馈"]),e("div",{class:"dialog-content"},[e("el-form",D()([{},{attrs:{model:this.formData}},{ref:"formRef",attrs:{"label-position":"top",size:"small","label-width":"106px"}}]),[e("div",{class:"line-box first"},[e("el-form-item",{class:"mgb-18",attrs:{label:`${t}结果`,prop:"status",rules:{required:!0,message:`请选择${t}`,trigger:"blur"}}},[e("el-select",{attrs:{placeholder:"请输入标题"},model:{value:this.formData.status,callback:e=>{this.$set(this.formData,"status",e)}}},[e("el-option",{style:"width: 149px",attrs:{label:"合适 ",value:1}}),e("el-option",{style:"width: 149px",attrs:{label:"不合适",value:-1}})])]),"试镜"===t&&e("el-checkbox",{model:{value:this.formData.checked,callback:e=>{this.$set(this.formData,"checked",e)}}},["马上发起试播"])]),e("div",{class:"line-box"},[e("el-form-item",{attrs:{className:"mgb-18",label:"详细说明",prop:"description",rules:{required:!0,message:"请输入详情说明",trigger:"blur"}}},[e("el-input",{attrs:{placeholder:"请输入说明",type:"textarea",maxlength:200,"show-word-limit":!0,rows:4},model:{value:this.formData.description,callback:e=>{this.$set(this.formData,"description",e)}}})])]),e("div",{class:"line-box"},[e("el-form-item",{class:"mgb-18",attrs:{prop:"pics",rules:{required:!0,message:"请上传图片",trigger:"blur"}}},[e("span",{slot:"label"},[e("span",["品牌方反馈"]),e("span",{class:"tip"},["(最多5张，单张大小不超过 5MB)"])]),e("div",{class:"file-list"},[this.formData.pics.map(((t,a)=>e("div",{class:"file",key:a},[e("tg-image",{attrs:{src:t}}),e("tg-icon",{attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.formData.pics.splice(a,1)}}})]))),this.formData.pics.length<5?e("tg-upload",{attrs:{action:"/api/anchor/upload_anchor_file","show-file-list":!1,beforeUpload:e=>{const t=e.size/1024/1024<5;return["image/jpeg","image/jpg","image/png"].includes(e.type)||[".jpeg",".jpg",".png"].includes((0,F.mD)(e.name))?!!t||(u.Message.warning("图片不能超过5MB!"),!1):(u.Message.warning("文件格式不正确，请使用 png / jpg/ jpeg"),!1)},success:e=>{this.formData.pics.push(e.data.source)}}},[e("div",{class:"upload-btn"},[e("i",{class:"el-icon-plus avatar-uploader-icon"}),e("span",["上传图片"])])]):""])])]),e("div",{class:"line-box video-box"},[e("el-form-item",{attrs:{className:"mgb-18",prop:"videos",rules:{required:!0,message:`请上传${t}视频`,trigger:"blur"}}},[e("span",{slot:"label"},[e("span",[t,"视频"]),e("span",{class:"tip"},["(视频支持MP4；最多上传5个文件(单个视频大小不超过50M)"])]),this.formData.videos.length<5?e("tg-upload",{class:"upload-video",attrs:{action:"/api/anchor/upload_anchor_video","show-file-list":!1,beforeUpload:C.Z.ValidationFileUpload({video:!0,fileSize:50}),success:e=>{this.formData.videos.push(e.data.source)}}},[e("tg-button",{attrs:{name:"ico-upload"}},["上传视频"])]):"",e("div",{class:"videos"},[this.formData.videos.map(((t,a)=>e("div",{class:"video"},[e("tg-icon",{attrs:{name:"ico-Pdfbeifen"}}),e("span",[" ",l.Z.basename(t)]),e("tg-icon",{class:"delete-icon",attrs:{name:"ico-a-quseguanbiicon2x"},on:{click:()=>{this.formData.videos.splice(a,1)}}})])))])])])])]),e("template",{slot:"footer",style:"height: 50px"},[e("tg-button",{attrs:{size:"small"},on:{click:this.onCloseBtnClick}},["取消"]),e("tg-button",{attrs:{size:"small",type:"primary"},on:{click:this.onSaveBtnClick}},["确定"])])])}}),q=S,B=(0,_.Z)(q,Z,P,!1,null,"293816ca",null),A=B.exports;const{debounce:R}=d();var T,j,M,z,E=(0,s.defineComponent)({props:{save:{type:Function}},setup(e,t){const a=(0,s.ref)(null),l=(0,s.ref)(""),r=(0,s.ref)(!1),i=(0,s.ref)({feedback_pics:[],feedback_videos:[]}),o=(0,s.ref)([]),n=()=>{t.emit("close"),t.root.$nextTick(c),r.value=!1},c=()=>{console.log("")},p=(e,t)=>{l.value=e,i.value={...t},r.value=!0},d=()=>{a.value?.validate((t=>{if(!t)return!1;e.save(i.value).then((()=>{r.value=!1})).catch((e=>{u.Message.error(e.message)}))}))},m=R(d,200);return{show:p,title:l,visible:r,formData:i,months:o,onCloseBtnClick:n,onSaveBtnClick:m,formRef:a}},render(){const e=arguments[0];return e("el-dialog",{class:"tg-dialog-classic",attrs:{width:"572px",visible:this.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1},on:{close:this.onCloseBtnClick}},[e("fragments",{slot:"title"},[this.title]),e("div",{class:"dialog-content"},[e("div",{class:"block"},[e("div",{class:"label"},["试播结果"]),e("div",{class:"text"},[1===this.formData.feedback_status?"合适":"不合适"])]),e("div",{class:"block"},[e("div",{class:"label"},["详细说明"]),e("div",{class:"text"},[this.formData.feedback_content])]),e("div",{class:"block"},[e("div",{class:"label"},["反馈图片"]),e("div",{class:"images"},[this.formData.feedback_pics.map((t=>e("tg-image",{attrs:{src:t,alt:""}})))])]),e("div",{class:"block"},[e("div",{class:"label"},["试播视频"]),e("div",{class:"videos"},[this.formData.feedback_videos.map((t=>e("div",{class:"video"},[e("tg-icon",{attrs:{name:"ico-Pdfbeifen"}}),e("a",{class:"link-url",attrs:{href:t,target:"_blank"}},[l.Z.basename(t)])])))])])])])}}),N=E,W=(0,_.Z)(N,T,j,!1,null,"d062751c",null),Y=W.exports,I=a(44928),U=a(69745),L=a(6933),V=a.n(L),G=(0,s.defineComponent)({props:{operation:{type:Object},filter:{type:Object,default:()=>({})},list:{type:Boolean,default:!1}},components:{InputRange:n.Z,dialogApply:w,dialogFeedback:A,dialogFeedbackView:Y,dialogTrialBroadcast:U.Z},setup(e,t){const a=(0,I.t)(),l=o(t),r=(0,s.ref)(),i=(0,s.ref)(),n=(0,s.ref)(),p=(0,s.ref)("");l.queryForm.anchor_id=a.currentRoute.params.id,l.filter=e.filter,l.query({...l.queryForm,...l.filter},e.list);const d=()=>{l.query({...l.queryForm,...l.filter},e.list)};(0,s.watch)((()=>e.filter),(()=>{l.filter=e.filter,l.query({...l.queryForm,...l.filter,page_num:1})}),{deep:!0});const u=32,h=0,f=0,g=12,v=(0,s.ref)(0),b=(0,c.Z)({compensation:u+h+f+g,fixedBlockHeightRefs:[v],pagename:"customer_shop"}),y=(0,m.gI)(),_=e=>{v.value=e.height},k=t=>{l.filter=e.filter,l.query({...l.queryForm,...l.filter,page_num:t})},w=(0,s.ref)(),x=()=>{w.value?.show("试镜试播")},D=(t,a,s)=>{const l=1===a?"试镜":"试播";i.value?.show(`${l}`,t),e.list&&(p.value=s)};return{data:l,dialogApplyRef:r,dialogFeedbackRef:i,showDialogFeedbackClick:D,dialogFeedbackViewRef:n,...b,onTopCardRectUpdate:_,permission:y,IsCurrentUser:m.Em,reload:d,changePage:k,showTrialBroad:x,dialogTrialBroadcastRef:w,anchor_id:p}},render(){const e=arguments[0];return e("div",[e("div",{class:["broadcast-wrapper",this.list?"broadcast-wrapper-list":""]},[e("tg-table",{attrs:{stripe:!0,data:this.data.list,height:"100%"},class:"mgt-18 table-box"},[e("div",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无试播视镜"}})]),this.list?e("el-table-column",{attrs:{label:"花名",minWidth:84},scopedSlots:{default:({row:e})=>l.Z.ellipsisText(r.Z.formatEmpty(e.flower_name),8)}}):"",this.list?e("el-table-column",{attrs:{label:"真名",align:"center",minWidth:120},scopedSlots:{default:({row:e})=>l.Z.ellipsisText(r.Z.formatEmpty(e.real_name),5)}}):"",e("el-table-column",{attrs:{label:"申请人",minWidth:104,align:"center"},scopedSlots:{default:({row:e})=>l.Z.ellipsisText(r.Z.formatEmpty(e.apply_username))}}),e("el-table-column",{attrs:{label:"品牌",prop:"brand_name",minWidth:120},scopedSlots:{default:({row:e})=>r.Z.formatEmpty(e.brand_name)}}),e("el-table-column",{attrs:{label:"申请类型",prop:"apply_type",minWidth:80,align:"center"},scopedSlots:{default:({row:e})=>1===e.apply_type?"试镜":"试播"}}),e("el-table-column",{attrs:{label:"申请时间",minWidth:142,prop:"apply_datetime",align:"center"}}),e("el-table-column",{attrs:{label:"联系人",minWidth:100,align:"center",prop:"contact_username"},scopedSlots:{default:({row:e})=>r.Z.formatEmpty(e.contact_username)}}),e("el-table-column",{attrs:{label:"反馈人",minWidth:66,align:"center",prop:"feedback_username"},scopedSlots:{default:({row:e})=>r.Z.formatEmpty(e.feedback_username)}}),e("el-table-column",{attrs:{label:"反馈时间",align:"center",prop:"feedback_datetime",minWidth:142},scopedSlots:{default:({row:e})=>r.Z.formatEmpty(e.feedback_datetime)}}),e("el-table-column",{attrs:{label:"反馈结果",prop:"feedback_status",minWidth:80},scopedSlots:{default:({row:e})=>{const t=e.feedback_status;return 1===t?"合适":-1===t?"不合适":"--"}}}),e("el-table-column",{attrs:{label:"申请状态",minWidth:80,align:"center",prop:"apply_status"},scopedSlots:{default:({row:{apply_status:t}})=>{switch(t){case 1:return e("span",{style:{color:"#F04B4B"}},["待执行"]);case 2:return e("span",{style:{color:"#FF955F"}},["待反馈"]);case 3:return e("span",{style:{color:"#33BA5D"}},["已完成"]);case-1:return e("span",{style:{color:"#A4B2C2"}},["已取消"]);default:return"未知"}}}}),e("el-table-column",{attrs:{label:"要求",width:60,prop:"anchor_type"},scopedSlots:{default:({row:t})=>this.list?this.permission.supplier_trialbroadcast_view_apply?e("span",{class:"href",on:{click:()=>{this.dialogApplyRef?.show("合作申请",t)}}},["要求"]):"":e("span",{class:"href",on:{click:()=>{this.dialogApplyRef?.show("合作申请",t)}}},["要求"])}}),e("el-table-column",{attrs:{label:"反馈",width:60,prop:"anchor_type"},scopedSlots:{default:({row:t})=>{if(1===t.apply_status)return"";const a=1===t.apply_type?"试镜":"试播";return null===t.feedback_uid?(this.IsCurrentUser(t.contact_uid)||this.IsCurrentUser(t.apply_uid))&&2===t.apply_status?e("span",{class:"href",on:{click:()=>this.showDialogFeedbackClick(t.id,t.apply_type,t.anchor_id)}},["反馈"]):"":this.list?this.permission.supplier_trialbroadcast_view_feedback?e("span",{class:"href",on:{click:()=>{this.dialogFeedbackViewRef?.show(`${a}反馈`,t)}}},["查看"]):"":e("span",{class:"href",on:{click:()=>{this.dialogFeedbackViewRef?.show(`${a}反馈`,t)}}},["查看"])}}})]),this.data.total>0&&e("el-pagination",{attrs:{className:"mgt-10 flex-none","current-page":this.data.page_num,"page-sizes":[10,20,50,100,200],pageSize:this.data.queryForm.num,total:this.data.total,layout:"total, prev, pager, next, sizes, jumper"},style:{margin:"8px 0"},on:{"current-change":e=>this.changePage(e),"size-change":e=>{this.data.queryForm.num=e,this.data.queryStart({...this.data.filter})}}})]),e(w,{ref:"dialogApplyRef",attrs:{cancel:({id:e})=>this.data.applyCancel(e,{...this.data.filter}),save:({id:e})=>this.data.applySchedule(e,{...this.data.filter})}}),e(A,{ref:"dialogFeedbackRef",attrs:{save:e=>this.data.applyFeedback({...e,content:e.description},{...this.data.filter}).then((t=>(e.checked&&(this.list?setTimeout(this.showTrialBroad,10):setTimeout(this.operation.showTrialBroad,10)),t)))}}),e(Y,{ref:"dialogFeedbackViewRef"}),this.list?e(U.Z,{ref:"dialogTrialBroadcastRef",attrs:{save:async e=>Promise.resolve().then((async()=>{const t={anchor_id:this.anchor_id,...e};return t.available_date_begin=V()(e.coop_dates[0]).format("YYYY.MM.DD"),t.available_date_end=V()(e.coop_dates[1]).format("YYYY.MM.DD"),1===e.business_type?i.ZP.PostAnchorApplyPilot(t):2===e.business_type?(t.min_hourly_wage=e.hourly_wage[0],t.max_hourly_wage=e.hourly_wage[1],t.available_time_begin=e.start_time+":00",t.available_time_end=e.end_time+":00",i.ZP.PostAnchorApplyAudition(t)):void 0})).then((e=>(this.reload(),e)))}}):""])}}),H=G,O=(0,_.Z)(H,M,z,!1,null,"54b946a7",null),K=O.exports},11676:function(e,t,a){a.d(t,{K:function(){return d}});a(26699);var s=a(48606);const l=[".pdf",".doc",".docx",".ppt",".pptx"],r=[".mp4"],i=[".png",".jpg",".jpeg"],o=[".xls",".xlsx",".csv"],n=[".doc",".docx"],c=[".pdf"],p=[".csv"],d=e=>t=>{const a=/(\.[^.]+)$/.exec(t.name);let d="";a&&(d=a[1]);const u=[];if(e.image&&u.push(...i),e.file&&u.push(...l),e.video&&u.push(...r),e.excel&&u.push(...o),e.pdf&&u.push(...c),e.doc&&u.push(...n),e.csv&&u.push(...p),e.extensions&&u.push(...e.extensions),u.length>0&&!u.includes(d))return s.Message.warning(`文件格式不正确，请使用 ${u.join(";")}`),!1;if(void 0!==e.fileSize){const a=t.size/1024/1024<e.fileSize;if(!a)return s.Message.warning(`文件不能超过${e.fileSize}MB!`),!1}return!0};t["Z"]={ValidationFileUpload:d}},82741:function(e,t,a){a.d(t,{I:function(){return l},u:function(){return r}});var s=a(71340);const l=(e,t)=>{const a="string"===typeof t?{title:t}:t;return new Promise((t=>{e.root.$TDialog({...a,onConfirm:()=>t(!0),onCancel:()=>t(!1)})}))},r=e=>{const t="string"===typeof e?{title:e}:e;return new Promise(((e,a)=>{(0,s.t)({...t,onConfirm:()=>e(!0),onCancel:()=>a()})}))}},58302:function(e,t,a){var s=a(97434),l=a(77944),r=a(52140);const i=e=>{const t=(0,s.computed)((()=>l.Z.getters["global/scrollbarSetting"])),a=(0,s.computed)((()=>void 0!==e.pagename?!0!==t.value.find((t=>t.key===e.pagename))?.value:e.disable??!1)),i=(0,s.computed)((()=>{const t=(e.fixedBlockHeightRefs??[]).map((e=>(0,s.unref)(e))).reduce(((e,t)=>(0,s.unref)(e)+(0,s.unref)(t)),0);return a.value?"max-content":`calc(100vh - ${(0,s.unref)(t)+56+36}px)`})),o=(0,s.computed)((()=>(a.value,"flex-auto"))),n=(0,s.computed)((()=>({height:i.value,overflowInBody:!a.value}))),c=(0,s.ref)(0),p=(0,s.computed)((()=>a.value?{}:{height:Math.max(c.value-(0,s.unref)((0,s.unref)(e.compensation)),e.tableMinHeight??0)})),d=a.value?()=>{}:e=>{c.value!==e&&(c.value=e,(0,r.S)())},u=a.value?()=>{}:t=>{0===c.value?setTimeout((()=>{d(t.height)}),e.delay??1200):d(t.height)};return{cardHeight:i,tableProps:p,onRectUpdate:u,rectHeight:c,cardFlexClass:o,cardProps:n}};t["Z"]=i},52140:function(e,t,a){a.d(t,{S:function(){return s},n:function(){return l}});const s=()=>{const e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},l=()=>{const{width:e,height:t}=document.body.getBoundingClientRect();return{width:e,height:t}}},45781:function(e,t,a){var s=a(49187),l=a(8581),r=a(61282);const i=new s.ZP;t["Z"]={formatEmpty(e,t){return null===e||void 0===e||""===e||e instanceof Array&&e.length<=0?"--":void 0!==t?`${e}${t}`:e},formatTime(e){try{return null===e||void 0===e||""===e?"--":e.replace(/-/g,".")}catch(t){return e}},formatTimespan(e){try{if(null===e||void 0===e||""===e)return"--";const t=new Date;return t.setTime(1e3*e),(0,l.WU)(t,"YYYY.mm.dd")}catch(t){return e}},formatPrice(e,t=s.WL.Fen,a=!0){try{if(null===e||void 0===e||""===e)return"--";const s=i.format(i.parse(e,t));return a?`￥${s}`:s}catch(l){return e}},formatPriceFormYuan(e,t=2,a=!0){try{if(null===e||void 0===e||""===e)return"--";let s=e;return s=e>1e8?(e/1e8).toFixed(t)+"亿":e>1e4?(e/1e4).toFixed(t)+"w":(e-0).toFixed(t),a&&(s=`￥${s}`),s}catch(s){return e}},formatPriceToThousand(e,t=2,a=!0,s=!1){try{if(null===e||void 0===e||""===e)return"--";let l=e;return e>1e4?l=(e/1e4).toFixed(t)+"w":(l=(e-0).toFixed(t),s&&(l=(e-0).toFixed(0))),a&&(l=`￥${l}`),l}catch(l){return e}},formatPriceToThousandformatAmount(e,t=2,a=!0,s=!1){try{if(null===e||void 0===e||""===e)return"--";let l=e;return e>1e4?l=(0,r.dN)((e/1e4).toFixed(2),"None")+"w":(l=(0,r.dN)((e-0).toFixed(t),"None",0===t),s&&(l=(e-0).toFixed(0))),a&&(l=`￥${l}`),l}catch(l){return e}},tranNumber(e,t=2){if(null===e||void 0===e||""===e)return"--";if(!(e>=0))return e||"-";e+="";const a=e.toString(),s=a.split(".")[0],l=s.length;if(l<5)return a;if(l>8){const e=s.substring(s.length-8,s.length-8+t);return parseFloat(parseInt(s/1e8+"",10)+"."+e)+"亿"}if(l>4){const e=s.substring(s.length-4,s.length-4+t);return parseFloat(parseInt(s/1e4+"",10)+"."+e)+"w"}}}}}]);