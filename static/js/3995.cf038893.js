(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[3995],{63546:function(t,e,a){"use strict";a.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"void-content-base"},[a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("申请人：")]),a("p",{staticClass:"value"},[t._v(t._s(t.currentUserName))])]),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("开票时间：")]),a("p",{staticClass:"value"},[t._v(t._s(t.showProDateFormat(1e3*t.invoice_date,"YYYY.MM.DD")))])]),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("发票号码：")]),a("p",{staticClass:"value"},[t._v(t._s(t.invoice_number))])]),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("发票代码：")]),a("p",{staticClass:"value"},[t._v(t._s(t.invoice_code))])]),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("开票金额负数：")]),a("p",{staticClass:"value"},[t._v(t._s(t.numberMoneyFormat(t.total_amount,2)))])]),a("div",{staticClass:"base-item"}),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("购买方：")]),a("p",{staticClass:"value",staticStyle:{"max-width":"220px"}},[t._v(" "+t._s(t.buyer_name||"--")+" ")])]),a("div",{staticClass:"base-item"},[a("p",{staticClass:"label"},[t._v("纳税人识别号：")]),a("p",{staticClass:"value"},[t._v(t._s(t.buyer_tax_number))])])])},i=[],l=a(97434),r=a(8136),n=a(24643),c=(0,l.defineComponent)({props:{info:{type:Object,default:()=>({})}},setup(t,e){const a=(0,l.computed)((()=>e.root.$store.getters["user/getUserInfo"].username));return{currentUserName:a,showProDateFormat:r.xF,numberMoneyFormat:n.rH,...(0,l.toRefs)(t.info)}}}),o=c,u=a(1001),v=(0,u.Z)(o,s,i,!1,null,"225d1c28",null),p=v.exports},63995:function(t,e,a){"use strict";a.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("div",[a("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new advance-detail-dialog red-detail-dialog",attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.visible,isAppendToBody:!0,isfooter:!0,width:"948px"},on:{close:t.emitClose},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",[t._v("开红票申请详情")])]},proxy:!0},{key:"footer",fn:function(){return[a("tg-button",{attrs:{type:"default"},on:{click:t.emitClose}},[t._v("取消")]),3===t.baseData.approval_status?a("div",{staticClass:"div-default-btn",on:{click:t.reSubmit}},[t._v(" 重新编辑提交 ")]):t._e()]},proxy:!0}],null,!1,1064876026)},[a("div",{staticClass:"detail-wrapper"},[a("div",{staticClass:"left-wrapper"},[a("div",{staticClass:"left-header"},[a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[t._v("申请人：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.username))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[t._v("申请部门：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.create_department))])]),a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[t._v("发起时间：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.gmt_create.replace(/-/g,".")))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[t._v("审批编号：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.approval_uid))]),1===t.baseData.approval_status?a("span",{staticClass:"status"},[t._v("审批中")]):2===t.baseData.approval_status?a("span",{staticClass:"status success"},[t._v("审批通过")]):3===t.baseData.approval_status?a("span",{staticClass:"status error"},[t._v("审批失败")]):a("span",{staticClass:"status revoke"},[t._v("已撤销")])])]),a("div",{staticClass:"left-body"},[a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[t._v("开票时间：")]),a("div",{staticClass:"value"},[t._v(" "+t._s(t.moment(1e3*t.baseData.approval_detail.invoice_date).format("YYYY.MM.DD"))+" ")])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[t._v("发票号码：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.approval_detail.invoice_number))])]),a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[t._v("发票代码：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.approval_detail.invoice_code))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[t._v("开票金额负数：")]),a("div",{staticClass:"value"},[t._v("￥"+t._s(t.baseData.approval_detail.total_amount))])]),a("div",{staticClass:"line left"},[a("p",{staticClass:"label"},[t._v("购买方：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.approval_detail.buyer_name))])]),a("div",{staticClass:"line right"},[a("p",{staticClass:"label"},[t._v("纳税人识别号：")]),a("div",{staticClass:"value"},[t._v(t._s(t.baseData.approval_detail.buyer_tax_number))])]),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[t._v("红冲原因：")]),a("div",{staticClass:"value line-value"},[t._v(" "+t._s(t.baseData.approval_detail.remark?t.baseData.approval_detail.remark:"--")+" ")])]),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[t._v("是否已认证：")]),a("div",{staticClass:"value line-value"},[t._v(" "+t._s(t.baseData.approval_detail.is_certified?"是":"否")+" ")])]),a("div",{staticClass:"line",staticStyle:{height:"auto"}},[a("p",{staticClass:"label"},[t._v("附件：")]),a("div",{staticClass:"value line-value"},[t.baseData.approval_detail.red_invoice_attachment_url?[a("Appendix",{attrs:{list:[t.baseData.approval_detail.red_invoice_attachment_url]}})]:a("span",[t._v("--")])],2)])])]),a("div",{staticClass:"right-wrapper"},[a("h5",{staticClass:"right-wrapper-title"},[t._v("审批进度")]),a("WorkbenchTimeLine",{attrs:{"step-status":t.baseData.approval_status,items:t.baseData.approval_flow_detail}})],1)])]),a("InvoiceRedDialog",{ref:"invoiceRedDialogRef",attrs:{invoice:t.baseData.approval_detail,isEdit:!0},on:{success:t.reClose}})],1):t._e()},i=[],l=a(97434),r=a(24643),n=a(79703),c=a(17660),o=a(79261),u=a(6933),v=a.n(u),p=(0,l.defineComponent)({name:"InvoiceRedDetailDialog",props:{info:{type:Object,default:()=>({})}},components:{Appendix:n.Z,WorkbenchTimeLine:c.Z,InvoiceRedDialog:o.Z},setup(t,e){const a=(0,l.ref)(!1),s=(0,l.ref)(!1),i=(0,l.ref)(null),n=(0,l.ref)(null),c=()=>{s.value=!1,e.emit("close")},o=t=>{i.value=t,s.value=!0},u=async()=>{n.value?.show()},p=()=>{c(),e.emit("success")};return{visible:s,emitClose:c,numberFormat:r.Y4,edit:a,reSubmit:u,baseData:i,reClose:p,show:o,moment:v(),invoiceRedDialogRef:n}}}),d=p,f=a(1001),_=(0,f.Z)(d,s,i,!1,null,"ab23bdd6",null),m=_.exports},79261:function(t,e,a){"use strict";a.d(e,{Z:function(){return _}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoice-red-dialog"},[a("el-dialog",{staticClass:"tg-dialog-classic tg-dialog-vcenter-new",attrs:{title:"开红票申请",visible:t.visible,width:"624px","destroy-on-close":"","close-on-click-modal":!1},on:{close:t.cancel}},[t.visible?a("invoice-base",{attrs:{info:t.invoice}}):t._e(),a("div",{staticClass:"reason-box"},[a("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.form,size:"small","label-position":"top"}},[a("el-form-item",{attrs:{label:"发票红冲原因：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入原因"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("el-form-item",[a("div",{staticClass:"radio-flex"},[a("p",{staticClass:"slot"},[a("span",{staticClass:"star"},[t._v("*")]),t._v("对方是否已认证发票：")]),a("el-radio-group",{model:{value:t.form.is_certified,callback:function(e){t.$set(t.form,"is_certified",e)},expression:"form.is_certified"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)]),t.form.is_certified?a("el-form-item",{attrs:{prop:"attachment"}},[a("div",{staticClass:"upload-box"},[a("tg-upload",{attrs:{disabled:t.form.attachment.length>=1,action:"/api/financial/upload_red_invoice_attachment","show-file-list":!1,beforeUpload:t.beforeUpload,success:t.successHandle}},[a("tg-button",{attrs:{disabled:t.form.attachment.length>=1,icon:"ico-upload-lite"}},[t._v("上传附件")])],1),a("span",{staticClass:"file-tips"},[t._v(" 支持扩展名：.pdf .png .jpg .jpeg；（文件大小不超过30M） ")])],1),a("div",{staticClass:"file-list-box"},[a("upload-file-list",{model:{value:t.form.attachment,callback:function(e){t.$set(t.form,"attachment",e)},expression:"form.attachment"}})],1)]):t._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("tg-button",{staticClass:"mgr-18",attrs:{size:"small"},on:{click:t.cancel}},[t._v("取 消")]),a("tg-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提 交")])],1)],1),a("tg-mask-loading",{attrs:{visible:t.saveLoading,content:"正在保存，请稍候..."}})],1)},i=[],l=a(97434),r=a(82741),n=a(63546),c=a(11676),o=a(64236),u=a(76771),v=(0,l.defineComponent)({props:{invoice:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},components:{InvoiceBase:n.Z},setup(t,e){const a=(0,l.ref)(!1),s=(0,l.ref)(!1),i=(0,l.ref)(null),n=(0,l.ref)(null),v=(0,l.reactive)({remark:"",is_certified:1,attachment:[]});(0,l.watch)((()=>s.value),(e=>{e&&t.isEdit&&(v.remark=t.invoice.remark,v.is_certified=t.invoice.is_certified,v.attachment=t.invoice.red_invoice_attachment_url?[t.invoice.red_invoice_attachment_url]:[])}));const p=()=>{s.value=!0};(0,l.watch)(s,(e=>{e&&(n.value=t.invoice.id)}));const d=(0,l.reactive)({remark:[{required:!0,message:"请输入作废原因",trigger:"blur"}],attachment:[{required:!0,message:"请上传附件",trigger:"change"}]});function f(){v.remark="",v.is_certified=1,v.attachment=[]}function _(){s.value=!1,f()}(0,l.watch)(v.attachment,(t=>{t.length>0&&e.refs.formRef.clearValidate("attachment")}));const m=t=>(0,c.K)({pdf:!0,image:!0,fileSize:30})(t),C=t=>{v.attachment.push(t.data.source)};async function b(){const l=await new Promise((t=>i.value?.validate((e=>t(e)))));if(!l)return;const c=await(0,r.I)(e,{title:t.isEdit?"确认重新开红票吗？":"确认开红票吗？",content:"提交后将在飞书中进行审核",confirmText:"确认",cancelText:"取消"});if(c){a.value=!0;const i={id:t.isEdit?t.invoice.invoice_id:n.value,remark:v.remark,is_certified:v.is_certified,red_invoice_attachment_url:v.is_certified?v.attachment[0]:""},[{data:l}]=await(0,o.Dc)(500,(0,u.KS)(i));a.value=!1,l.success?(s.value=!1,e.root.$message.success("作废成功"),e.emit("success"),f()):e.root.$message({type:"warning",message:l.message??"作废失败，稍后重试",duration:2e3,showClose:!0})}}return{visible:s,show:p,saveLoading:a,form:v,formRef:i,beforeUpload:m,successHandle:C,cancel:_,submit:b,formRules:d}}}),p=v,d=a(1001),f=(0,d.Z)(p,s,i,!1,null,null,null),_=f.exports},8136:function(t,e,a){"use strict";a.d(e,{AR:function(){return k},BG:function(){return D},Cl:function(){return F},D$:function(){return n},EI:function(){return v},Hx:function(){return l},LY:function(){return o},Nv:function(){return c},Ps:function(){return I},Rd:function(){return x},ZC:function(){return d},_t:function(){return C},bI:function(){return y},g9:function(){return m},hy:function(){return p},jh:function(){return A},mB:function(){return b},mx:function(){return E},nA:function(){return B},q0:function(){return w},sc:function(){return g},ug:function(){return h},us:function(){return _},vJ:function(){return f},wA:function(){return r},xF:function(){return u}});var s=a(20713),i=a.n(s);function l(t,e){const a=t.display_type;switch(a){case 0:return"混播";case 1:return"专场"}}const r=["综合","美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值"],n=["美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值","行政采购"];function c({category:t}){return 0===t?"无":r[t]}function o(t,e){const a=t.sales_price_period;switch(a){case 0:return"0 ~ 100";case 1:return"100 ~ 200";case 2:return"200以上"}}function u(t,e="YYYY-MM-DD"){return i()(t).format(e)}function v(t,e="YYYY-MM-DD hh:mm:ss"){return i()(t+"+0800").format(e)}function p(t,e){return i()(t+"+0800").format(e||"YYYY-MM-DD")}function d(t){let e=parseInt(t,10),a=0,s=0;e>=60&&(a=parseInt(e/60,10),e=parseInt(e%60,10),a>=60&&(s=parseInt(a/60,10),a=parseInt(a%60,10)));let i=""+(parseInt(e,10)<10?"0"+parseInt(e,10):parseInt(e,10));return i=(parseInt(a,10)<10?"0"+parseInt(a,10):parseInt(a,10))+":"+i,i=(parseInt(s,10)<10?"0"+parseInt(s,10):parseInt(s,10))+":"+i,i}function f(t){const e=t.is_presell;switch(e){case-1:return"未录入";case 1:return"预售";case 0:return"非预售";case 2:return"预热"}}function _(t){const e=t.is_display;switch(e){case-1:return"未录入";case 2:return"已出单";case 1:return"未出单"}}function m(t){const e=t.duration;switch(e){case-1:return"未录入";case 0:return"5 ~ 10分钟";case 1:return"10 ~ 15分钟";case 2:return"15 ~ 20分钟";case 3:return"0 ~ 5分钟";case 4:return"20分钟以上"}}function C(t){const e=t.display_period;switch(e){case-1:return"未录入";case 0:return"白天";case 1:return"晚上"}}function b(t){const e=t.shop_type;switch(e){case 0:return"无";case 1:return"淘宝店";case 2:return"天猫店";case 3:return"抖音店";default:return"--"}}function h(t){const e=t.company_type;switch(e){case 0:return"无";case 1:return"同行机构";case 2:return"广告公司";case 3:return"品牌TP";case 4:return"直客"}}function y(t,e){const a=/[^\x00-\xff]/g;let s;if(t.replace(a,"**").length>e){s=Math.floor(e/2);for(let i=s,l=t.length;i<l;i++)if(t.substr(0,i).replace(a,"**").length>=e)return t.substr(0,i)}return t}const F=[{type:0,value:"全部"},{type:1,value:"普通客户"},{type:2,value:"重点客户"},{type:3,value:"战略客户"},{type:4,value:"KA客户"}],g=[{value:"全部",type:0},{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13}],D=[{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13},{value:"行政采购",type:14}],w=[{value:3,text:"抖音店"},{value:1,text:"淘宝店"},{value:2,text:"天猫店"}],x=[{value:1,text:"同行机构"},{value:2,text:"广告公司"},{value:3,text:"品牌TP"},{value:4,text:"直客"}],k=[{type:0,value:"--"},{type:1,value:"同行机构"},{type:2,value:"广告公司"},{type:3,value:"品牌TP"},{type:4,value:"直客"}],B=["#D15CB4","#6090F0","#FF9C69","#59B6DF","#C673F0","#52CCC2","#F0737F","#6FCC66","#DBD26A","#9D73F0","#FAB36E","#A2D160","#D15CB4","#58B89F","#E06C9C","#8873F0","#FA9384","#C251A6","#486DB5","#C77A52","#4185A3","#9557B5","#3C968F","#B55760","#4F9149","#A19A4D","#7657B5","#BF8954","#759645","#964282","#3C7D6C","#A65073","#6556B3","#BF7065","#873874"],A=["#6090F0","#FF9C69","#52CCC2","#59B6DF","#C673F0","#D15CB4","#F0737F","#DBD26A","#FAB36E","#A2D160","#6FCC66","#58B89F","#8873F0","#FA9384","#9D73F0","#E06C9C","#C251A6"],E=["#1E8DFF","#FFBF00","#10C0D3","#9273F8","#FE9C25","#00B942","#FFCD39","#FF829D","#00A3FF","#3AD08E","#F1DC2F","#845EF7","#FF7F00","#B3DC12","#009999","#2877FF","#D977F2","#FFC073","#768FF3","#81E5B1","#BAC8FF","#E599F8","#E7E275","#FF7E7E","#F7A0B8","#49C6F1","#B197FC","#53D66F","#FF97AD","#FDD866"];function I(t){for(const e of t)if("一"<=e&&e<="龥")return e;return t[0]}},20713:function(t,e,a){t.exports=a(70680)(52703)}}]);