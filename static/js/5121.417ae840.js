"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5121],{85121:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-main"},[a("tg-card",{attrs:{padding:[18]},on:{"rect:update":t.onTopCardRectUpdate}},[a("el-form",{ref:"formRef",attrs:{inline:!0,"label-width":"60px",size:"small","label-position":"left"}},[a("el-form-item",{attrs:{label:"商品信息"}},[a("el-input",{staticStyle:{width:"264px"},attrs:{placeholder:"请输入商品名称或商品编码"},model:{value:t.searchProjectName,callback:function(e){t.searchProjectName="string"===typeof e?e.trim():e},expression:"searchProjectName"}})],1),a("el-form-item",{staticStyle:{"margin-left":"24px"},attrs:{label:"二级类目"}},[a("el-select",{staticStyle:{width:"264px"},attrs:{placeholder:"请选择类目",filterable:""},on:{change:t.onSelectCatIdChange},model:{value:t.select_cat_id,callback:function(e){t.select_cat_id=e},expression:"select_cat_id"}},[a("el-option",{attrs:{label:"全部",value:void 0}}),t._l(t.categoryList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2)],1),a("el-form-item",{staticStyle:{"margin-left":"24px"},attrs:{label:"三级类目"}},[a("el-select",{staticStyle:{width:"264px"},attrs:{placeholder:"请选择类目",filterable:""},model:{value:t.third_tiange_cat_id,callback:function(e){t.third_tiange_cat_id=e},expression:"third_tiange_cat_id"}},[a("el-option",{attrs:{label:"全部",value:void 0}}),t._l(t.categoryList2,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2)],1),a("el-form-item",{staticStyle:{"margin-left":"24px"}},[a("tg-button",{attrs:{type:"primary"},on:{click:t.searchInfo}},[t._v("查询")]),a("tg-button",{staticClass:"mgl-12",on:{click:t.onQueryResetClick}},[t._v("重置")])],1)],1)],1),a("tg-card",t._b({staticClass:"mgt-12 flex-auto live-display-content",attrs:{padding:[18,18,0,18]},on:{"rect:update":t.onRectUpdate}},"tg-card",t.cardProps,!1),[a("tg-table",{directives:[{name:"loading",rawName:"v-loading",value:t.saleInfoLoading,expression:"saleInfoLoading"}],attrs:{stripe:"",border:"",data:t.saleInfoData,"default-sort":{prop:"sale_count",order:"descending"},height:"100%","header-cell-style":{background:"#ffffff",height:"36px !important",color:"#19232d",fontSize:"12px",padding:0,fontWeight:"bold",borderBottom:"1px solid #EAEEF0"}},on:{"sort-change":t.tableSort}},[t._l(t.infoColumn,(function(e,r){return a("el-table-column",t._b({key:r},"el-table-column",e,!1))})),a("template",{slot:"empty"},[a("empty-common",{attrs:{"detial-text":"暂无数据"}})],1)],2),a("div",{staticClass:"block flex-none",staticStyle:{margin:"0 0 10px 0"}},[t.infoTotal>0?a("el-pagination",{staticClass:"mgt-12",attrs:{"current-page":t.saleInfo.page_num,"page-sizes":[10],"page-size":t.saleInfo.num,total:t.infoTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":t.onCurrentChange}}):t._e()],1)],1)],1)},i=[],o=a(97434),n=a(55917),l=a(20809),s=(0,o.defineComponent)({setup(t,e){const a=(0,o.ref)(""),{tableHeightLogic:r,onTopCardRectUpdate:i}=(0,l.Z)(),s=e.root.$route.query.kol_id,c=(0,o.ref)(void 0),d=(0,o.ref)(void 0),g=(0,o.computed)((()=>({project_id:e.root.$route.params.id,...e.root.$route.query,is_from_project:"true"===String(e.root.$route.query.is_from_project),...s?{first_cat_id:c.value,second_cat_id:d.value}:{first_tiange_cat_id:1,second_tiange_cat_id:c.value,third_tiange_cat_id:d.value}}))),u=(0,o.ref)({num:10,page_num:1,sort:""}),{saleData:m,getData:h,loading:p,total:f,hotGoodsColumn:_,category_2:v,category_3:b,getCategory_2:y,getCategory_3:w}=s?(0,n.$d)(e):(0,n.CB)(e);y({level:s?void 0:1,category_id:void 0,...g.value}),console.log(v,"categoryList");const x=t=>{const{prop:e,order:a}=t;u.value.sort=null===a?"sale_count_desc":"ascending"===a?e:e+"_desc",k()},k=()=>{h({...g.value,...u.value})};k();const A=t=>{u.value.page_num=t,k()},C=t=>{d.value=void 0,w({start_date:g.value.start_date,end_date:g.value.end_date,project_id:g.value.project_id,level:2,kol_id:s||void 0,category_id:c.value})},W=()=>{a.value="",d.value=void 0,c.value=void 0,k()};return{onTopCardRectUpdate:i,...r,onCurrentChange:A,onQueryResetClick:W,searchInfo:k,saleInfo:u,projectAndDate:g,tableSort:x,saleInfoData:m,getSaleInfo:h,saleInfoLoading:p,infoTotal:f,infoColumn:_,select_cat_id:c,categoryList:v,searchProjectName:a,categoryList2:b,onSelectCatIdChange:C,third_tiange_cat_id:d}}}),c=s,d=a(1001),g=(0,d.Z)(c,r,i,!1,null,"21415203",null),u=g.exports},58302:function(t,e,a){var r=a(97434),i=a(77944),o=a(52140);const n=t=>{const e=(0,r.computed)((()=>i.Z.getters["global/scrollbarSetting"])),a=(0,r.computed)((()=>void 0!==t.pagename?!0!==e.value.find((e=>e.key===t.pagename))?.value:t.disable??!1)),n=(0,r.computed)((()=>{const e=(t.fixedBlockHeightRefs??[]).map((t=>(0,r.unref)(t))).reduce(((t,e)=>(0,r.unref)(t)+(0,r.unref)(e)),0);return a.value?"max-content":`calc(100vh - ${(0,r.unref)(e)+56+36}px)`})),l=(0,r.computed)((()=>(a.value,"flex-auto"))),s=(0,r.computed)((()=>({height:n.value,overflowInBody:!a.value}))),c=(0,r.ref)(0),d=(0,r.computed)((()=>a.value?{}:{height:Math.max(c.value-(0,r.unref)((0,r.unref)(t.compensation)),t.tableMinHeight??0)})),g=a.value?()=>{}:t=>{c.value!==t&&(c.value=t,(0,o.S)())},u=a.value?()=>{}:e=>{0===c.value?setTimeout((()=>{g(e.height)}),t.delay??1200):g(e.height)};return{cardHeight:n,tableProps:d,onRectUpdate:u,rectHeight:c,cardFlexClass:l,cardProps:s}};e["Z"]=n},20809:function(t,e,a){var r=a(97434),i=a(58302);e["Z"]=()=>{const t=32,e=34,a=36,o=31,n=(0,r.ref)(0),l=t=>{n.value=t.height},s=(0,i.Z)({compensation:(0,r.computed)((()=>t+e+a+o)),fixedBlockHeightRefs:[n,25],tableMinHeight:100});return{tableHeightLogic:s,onTopCardRectUpdate:l}}},52140:function(t,e,a){a.d(e,{S:function(){return r},n:function(){return i}});const r=()=>{const t=document.createEvent("Event");t.initEvent("resize",!0,!0),window.dispatchEvent(t)},i=()=>{const{width:t,height:e}=document.body.getBoundingClientRect();return{width:t,height:e}}},45781:function(t,e,a){var r=a(49187),i=a(8581),o=a(61282);const n=new r.ZP;e["Z"]={formatEmpty(t,e){return null===t||void 0===t||""===t||t instanceof Array&&t.length<=0?"--":void 0!==e?`${t}${e}`:t},formatTime(t){try{return null===t||void 0===t||""===t?"--":t.replace(/-/g,".")}catch(e){return t}},formatTimespan(t){try{if(null===t||void 0===t||""===t)return"--";const e=new Date;return e.setTime(1e3*t),(0,i.WU)(e,"YYYY.mm.dd")}catch(e){return t}},formatPrice(t,e=r.WL.Fen,a=!0){try{if(null===t||void 0===t||""===t)return"--";const r=n.format(n.parse(t,e));return a?`￥${r}`:r}catch(i){return t}},formatPriceFormYuan(t,e=2,a=!0){try{if(null===t||void 0===t||""===t)return"--";let r=t;return r=t>1e8?(t/1e8).toFixed(e)+"亿":t>1e4?(t/1e4).toFixed(e)+"w":(t-0).toFixed(e),a&&(r=`￥${r}`),r}catch(r){return t}},formatPriceToThousand(t,e=2,a=!0,r=!1){try{if(null===t||void 0===t||""===t)return"--";let i=t;return t>1e4?i=(t/1e4).toFixed(e)+"w":(i=(t-0).toFixed(e),r&&(i=(t-0).toFixed(0))),a&&(i=`￥${i}`),i}catch(i){return t}},formatPriceToThousandformatAmount(t,e=2,a=!0,r=!1){try{if(null===t||void 0===t||""===t)return"--";let i=t;return t>1e4?i=(0,o.dN)((t/1e4).toFixed(2),"None")+"w":(i=(0,o.dN)((t-0).toFixed(e),"None",0===e),r&&(i=(t-0).toFixed(0))),a&&(i=`￥${i}`),i}catch(i){return t}},tranNumber(t,e=2){if(null===t||void 0===t||""===t)return"--";if(!(t>=0))return t||"-";t+="";const a=t.toString(),r=a.split(".")[0],i=r.length;if(i<5)return a;if(i>8){const t=r.substring(r.length-8,r.length-8+e);return parseFloat(parseInt(r/1e8+"",10)+"."+t)+"亿"}if(i>4){const t=r.substring(r.length-4,r.length-4+e);return parseFloat(parseInt(r/1e4+"",10)+"."+t)+"w"}}}},55917:function(t,e,a){a.d(e,{$d:function(){return f},CB:function(){return p},NU:function(){return m},O5:function(){return u}});var r=a(97434),i=a(92410),o=a(45781),n=a(48606),l=a(99575),s=a(59760);const{formatPriceFormYuan:c,formatEmpty:d,tranNumber:g}=o.Z;var u,m,h;(function(t){t["sessions"]="sessions",t["commodity"]="commodity",t["launchnchor"]="launchnchor",t["flow"]="flow",t["fans"]="fans",t["launch"]="launch"})(u||(u={})),function(t){t[t["date"]=0]="date",t[t["week"]=1]="week",t[t["month"]=2]="month"}(m||(m={})),function(t){t[t["shop"]=0]="shop",t[t["launch"]=1]="launch"}(h||(h={}));const p=t=>{const e=(0,r.reactive)({loading:!1,saleData:[],total:0,hotGoodsColumn:[{label:"商品信息",width:228,align:"left",fixed:!0,headerAlign:"left",formatter:t=>(0,r.h)("div",{class:"goods-info"},[(0,r.h)("img",{attrs:{src:t.image_url||s},style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}}),(0,r.h)("div",{class:"info-row"},[(0,r.h)("el-tooltip",{props:{content:t.title}},[(0,r.h)("div",{class:"goods-title",style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}},t.title)]),(0,r.h)("div",{class:"goods-price"},[(0,r.h)("span",void 0,"直播价："),(0,r.h)("span",void 0,c((t.discount_price/100).toFixed(2),2,!1))])])])},{label:"商品编号",width:164,align:"center",headerAlign:"center",formatter:t=>d(t.item_id)},{label:"类目",minWidth:120,align:"left",headerAlign:"left",formatter:t=>d(t.second_cname)},{label:"讲解次数",minWidth:95,align:"right",sortable:"custom",prop:"talk_times",headerAlign:"right",formatter:t=>g(t.talk_times)},{label:"曝光人数",minWidth:95,align:"right",sortable:"custom",prop:"watch_ucnt",headerAlign:"right",formatter:t=>g(t.watch_ucnt)},{label:"点击人数",minWidth:95,align:"right",sortable:"custom",prop:"click_ucnt",headerAlign:"right",formatter:t=>g(t.click_ucnt)},{label:"点击率",minWidth:85,align:"right",sortable:"custom",prop:"click_rate",headerAlign:"right",formatter:t=>d(t.click_rate,"%")},{label:"订单数",minWidth:85,align:"right",sortable:"custom",prop:"order_cnt",headerAlign:"right",formatter:t=>g(t.order_cnt)},{label:"销量",minWidth:85,align:"right",sortable:"custom",prop:"sale_count",headerAlign:"right",formatter:t=>g(t.sale_count)},{label:"销售额 (元)",minWidth:106,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:t=>c((t.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:104,align:"right",sortable:"custom",prop:"gmv_part",headerAlign:"right",formatter:t=>d(t.gmv_part,"%")},{label:"成交转化率",minWidth:104,align:"right",sortable:"custom",prop:"pay_rate",headerAlign:"right",formatter:t=>d(t.pay_rate,"%")}],shopDetailColumns:[{label:"商品信息",width:228,align:"left",fixed:!0,headerAlign:"left",formatter:t=>(0,r.h)("div",{class:"goods-info"},[(0,r.h)("img",{attrs:{src:t.image_url||s},style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}}),(0,r.h)("div",{class:"info-row"},[(0,r.h)("el-tooltip",{props:{content:t.title}},[(0,r.h)("div",{class:"goods-title",style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}},t.title)]),(0,r.h)("div",{class:"goods-price"},[(0,r.h)("span",void 0,"直播价："),(0,r.h)("span",void 0,c((t.discount_price/100).toFixed(2),2,!1))])])])},{label:"类目",minWidth:130,align:"left",headerAlign:"left",formatter:t=>d(t.second_cname)},{label:"销售额 (元)",minWidth:126,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:t=>c((t.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:144,align:"right",sortable:"custom",prop:"gmv_part",headerAlign:"right",formatter:t=>d(t.gmv_part,"%")},{label:"销量",minWidth:105,align:"right",sortable:"custom",prop:"sale_count",headerAlign:"right",formatter:t=>g(t.sale_count)},{label:"平均售价 (元)",minWidth:126,align:"right",sortable:"custom",prop:"avg_price",headerAlign:"right",formatter:t=>c((t.avg_price/100).toFixed(2),2,!1)},{label:"平均折扣率",minWidth:135,align:"right",sortable:"custom",prop:"discount_rate",headerAlign:"right",formatter:t=>d(t.discount_rate,"%")},{label:"讲解次数",minWidth:105,align:"right",sortable:"custom",prop:"talk_times",headerAlign:"right",formatter:t=>g(t.talk_times)},{label:"发货前退款金额 (元)",minWidth:164,align:"right",sortable:"custom",prop:"refund_status21_gmv",headerAlign:"right",formatter:t=>c((t.refund_status21_gmv/100).toFixed(2),2,!1)},{label:"发货前退款比例",minWidth:164,align:"right",sortable:"custom",prop:"refund_status21_rate",headerAlign:"right",formatter:t=>d(t.refund_status21_rate,"%")},{label:"总退款金额 (元)",minWidth:134,align:"right",sortable:"custom",prop:"refund_gmv",headerAlign:"right",formatter:t=>c((t.refund_gmv/100).toFixed(2),2,!1)},{label:"总退款比例",minWidth:134,align:"right",sortable:"custom",prop:"refund_rate",headerAlign:"right",formatter:t=>d(t.refund_rate,"%")}]}),a=async a=>{e.loading=!0;try{const t=await(0,i.GX)(a);e.saleData=t.data.data.items||[],e.total=t.data.data.total||0}catch(r){t.root.$message.error("查询失败")}finally{e.loading=!1}},o=(0,r.ref)([]),u=(0,r.ref)([]),m=(0,r.ref)([]),h=async t=>{const e=await(0,i.jL)({...t});e.data.success?o.value=e.data.data.map((t=>({label:t.cat_name,value:t.id}))):n.Message.error(e.data.message)},p=async t=>{const e=await(0,l.v3)({...t,is_from_project:t.is_from_project||!1});e.data.success?u.value=e.data.data.map((t=>({label:t.cat_name,value:t.id}))):n.Message.error(e.data.message)},f=async t=>{const e=await(0,l.v3)({...t,is_from_project:t.is_from_project||!1});e.data.success?m.value=e.data.data.map((t=>({label:t.cat_name,value:t.id}))):n.Message.error(e.data.message)};return{...(0,r.toRefs)(e),getData:a,getCategory_1:h,getCategory_2:p,getCategory_3:f,category_1:o,category_2:u,category_3:m}},f=t=>{const e=(0,r.reactive)({loading:!1,saleData:[],total:0,hotGoodsColumn:[{label:"商品信息",width:228,align:"left",fixed:!0,headerAlign:"left",formatter:t=>(0,r.h)("div",{class:"goods-info"},[(0,r.h)("img",{attrs:{src:t.image_url||s},style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}}),(0,r.h)("div",{class:"info-row"},[(0,r.h)("el-tooltip",{props:{content:t.title}},[(0,r.h)("div",{class:"goods-title",style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}}},t.title)]),(0,r.h)("div",{class:"goods-price"},[(0,r.h)("span",void 0,"吊牌价："),(0,r.h)("span",void 0,c((t.market_price/100).toFixed(2),2,!1))])])])},{label:"类目",minWidth:120,align:"left",headerAlign:"left",formatter:t=>d(t.second_cname)},{label:"销售额 (元)",minWidth:106,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:t=>c((t.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:100,align:"right",prop:"gmv_part",headerAlign:"right",formatter:t=>d(t.gmv_part,"%")},{label:"销量",minWidth:85,align:"right",sortable:"custom",prop:"sale_count",headerAlign:"right",formatter:t=>g(t.sale_count)},{label:"平均售价 (元)",minWidth:105,align:"right",prop:"avg_price",headerAlign:"right",formatter:t=>c((t.avg_price/100).toFixed(2),2,!1)},{label:"平均折扣率",minWidth:95,align:"right",prop:"discount_rate",headerAlign:"right",formatter:t=>d(t.discount_rate,"%")},{label:"讲解次数",minWidth:95,align:"right",sortable:"custom",prop:"talk_times",headerAlign:"right",formatter:t=>g(t.talk_times)},{label:"发货前退款金额 (元)",minWidth:164,align:"right",sortable:"custom",prop:"refund_status21_gmv",headerAlign:"right",formatter:t=>c((t.refund_status21_gmv/100).toFixed(2),2,!1)},{label:"发货前退款比例",minWidth:130,align:"right",prop:"refund_status21_rate",headerAlign:"right",formatter:t=>d(t.refund_status21_rate,"%")},{label:"总退款金额 (元)",minWidth:130,align:"right",sortable:"custom",prop:"refund_gmv",headerAlign:"right",formatter:t=>c((t.refund_gmv/100).toFixed(2),2,!1)},{label:"总退款比例",minWidth:100,align:"right",prop:"refund_rate",headerAlign:"right",formatter:t=>d(t.refund_rate,"%")}]}),a=async a=>{e.loading=!0;try{const t=await(0,i._3)(a);e.saleData=t.data.data.data||[],e.total=t.data.data.total||0}catch(r){t.root.$message.error("查询失败")}finally{e.loading=!1}},o=(0,r.ref)([]),l=(0,r.ref)([]),u=(0,r.ref)([]),m=async t=>{const e=await(0,i.Mi)({...t});e.data.success?o.value=e.data.data.map((t=>({label:t.cat_name,value:t.cat_id||t.id}))):n.Message.error(e.data.message)},h=async t=>{const e=await(0,i.Mi)({...t,is_from_project:t.is_from_project||!1});e.data.success?l.value=e.data.data.map((t=>({label:t.cat_name,value:t.cat_id||t.id}))):n.Message.error(e.data.message)},p=async t=>{const e=await(0,i.Mi)({...t,is_from_project:t.is_from_project||!1});e.data.success?u.value=e.data.data.map((t=>({label:t.cat_name,value:t.cat_id||t.id}))):n.Message.error(e.data.message)};return{...(0,r.toRefs)(e),getData:a,getCategory_1:m,getCategory_2:h,getCategory_3:p,category_1:o,category_2:l,category_3:u}}}}]);