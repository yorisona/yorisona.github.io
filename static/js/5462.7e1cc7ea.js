(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5462],{85462:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ae}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.CustomerDetail?a("div",{staticClass:"tg-page-container tg-customer-list-page"},[a("TgBreadcrumbs",{staticClass:"flex-none",attrs:{routes:e.routes}},[a("span",[e._v(e._s(e.addByFormat(e.CustomerDetail)))])]),a("CustomerDetailBase",{staticClass:"flex-none",attrs:{customer:e.CustomerDetail,editable:e.UserRoles.includes(e.RIGHT_CODE.update_customer),deletable:e.UserRoles.includes(e.RIGHT_CODE.del_customer)},on:{edit:e.editCustomer,delete:e.delCustomer}}),a("CustomerContactList",{staticClass:"flex-auto",on:{"cooperation:create":function(t){return e.addContact(!0)},"cooperation:edit":function(t){return e.addContact(!1,t)}}}),a("add-customer",{attrs:{visible:e.customerVisible,"customer-form-edit":e.detailFormEdit,id:e.id},on:{close:e.close,save:e.saveCustomer}}),a("AddContactDialog",{ref:"addContact",attrs:{is_create:e.is_create}})],1):e._e()},i=[],r=a(74913),n=a(86863),s=a(37808),l=a(8136),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:0===e.id?"customer-header-create-wrapper":""},[null===e.customerForm?a("div"):a("el-drawer",{staticClass:"add-customer-drawer",attrs:{visible:e.visible,height:"100vh",size:"612px","close-on-click-modal":!1,wrapperClosable:!1},on:{close:e.close},scopedSlots:e._u([0===e.id?{key:"title",fn:function(){return[a("div",{staticClass:"customer-header-create"},[a("tg-tabs",{staticStyle:{background:"#f4f8ff"},attrs:{tabs:[{label:"新增店铺",value:"onebyone"},{label:"批量导入",value:"import"}],inline:!0,height:48},model:{value:e.dialogType,callback:function(t){e.dialogType=t},expression:"dialogType"}})],1)]},proxy:!0}:{key:"title",fn:function(){return[a("div",{staticClass:"customer-header"},[a("span",{class:[{active:"onebyone"===e.dialogType}],staticStyle:{"font-size":"16px"}},[e._v("编辑店铺")])])]},proxy:!0}],null,!0)},[a("div",{staticClass:"add-customer-drawer-inner"},["onebyone"===e.dialogType?a("div",{staticClass:"drawer-form"},[a("el-form",{ref:"customerForm",staticClass:"customer-form",attrs:{model:e.customerForm,"label-width":"127px","label-position":"top",rules:e.customerRules,size:"small"}},[a("div",{staticClass:"customer-form-left"},[0===e.id?a("el-alert",{attrs:{title:"注意：提示已存在的店铺请不要重复录入，会导致后期数据统计不准确。业绩归属和谁录入的客户无关，录入的客户联系人仅您和上级可见。",type:"warning","show-icon":"",closable:!1}}):e._e(),a("el-row",{staticClass:"form-title"},[a("i",{staticClass:"form-title-mark"}),a("p",{staticClass:"form-title-p"},[e._v("店铺基础信息")])]),a("el-form-item",{staticClass:"form-item form-item-left",attrs:{label:"店铺名称",prop:"shopName"}},[a("el-input",{ref:"autoFocuseRef",staticStyle:{width:"260px"},attrs:{placeholder:"请输入店铺名称",maxlength:"40",clearable:""},model:{value:e.customerForm.shopName,callback:function(t){e.$set(e.customerForm,"shopName",t)},expression:"customerForm.shopName"}})],1),a("el-form-item",{staticClass:"form-item form-item-right",attrs:{label:"店铺类目",prop:"category"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择"},model:{value:e.customerForm.category,callback:function(t){e.$set(e.customerForm,"category",t)},expression:"customerForm.category"}},e._l(e.categoryList,(function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),a("el-form-item",{staticClass:"form-item form-item-left",attrs:{label:"店铺类型",prop:"shopType"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择"},model:{value:e.customerForm.shopType,callback:function(t){e.$set(e.customerForm,"shopType",t)},expression:"customerForm.shopType"}},e._l(e.shopTypeRadio,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"form-item form-item-right",attrs:{label:"店铺品牌",prop:"brand_id"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.customerForm.brand_id,callback:function(t){e.$set(e.customerForm,"brand_id",t)},expression:"customerForm.brand_id"}},e._l(e.shopList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.brand_name,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"form-item-left",attrs:{label:"业务类型",prop:"business_type"}},[a("el-checkbox-group",{model:{value:e.customerForm.business_type,callback:function(t){e.$set(e.customerForm,"business_type",t)},expression:"customerForm.business_type"}},e._l(e.BusinessTypeOptions,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{staticClass:"form-item-left",attrs:{label:"公司名称",prop:"company_id"}},[e._l(e.list,(function(t,o){return a("div",{key:o,staticClass:"company-selected-box"},[a("el-select",{staticStyle:{width:"267px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:t.company_name?t.company_name:"请输入公司并选择公司名称","remote-method":e.companyRemoteMethod,loading:e.companyLoading},on:{change:e.onCompanySelect},model:{value:e.oneId[o],callback:function(t){e.$set(e.oneId,o,t)},expression:"oneId[index]"}},e._l(e.companies,(function(e){return a("el-option",{key:e.id,attrs:{label:e.company_name,value:e.id}})})),1),a("el-button",{staticClass:"delete-company-btn",attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:function(a){return e.removeItem(t,o)}}})],1)})),a("el-button",{staticClass:"add-company-btn",attrs:{icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("添加公司")])],2),0===e.id?a("el-row",{staticClass:"form-title"},[a("i",{staticClass:"form-title-mark"}),a("p",{staticClass:"form-title-p"},[e._v("客户联系人")])]):e._e(),0===e.id?a("el-form-item",{staticClass:"form-item form-item-left",attrs:{label:"客户姓名",prop:"customerName"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入客户姓名",maxlength:"20"},model:{value:e.customerForm.customerName,callback:function(t){e.$set(e.customerForm,"customerName",t)},expression:"customerForm.customerName"}})],1):e._e(),0===e.id?a("el-form-item",{staticClass:"form-item",staticStyle:{"margin-left":"18px"},attrs:{label:"联系方式",prop:"wechat"}},[a("el-input",{staticStyle:{width:"125px"},attrs:{placeholder:"请输入手机号",maxlength:11},nativeOn:{input:function(t){return e.inputMobile.apply(null,arguments)}},model:{value:e.customerForm.mobile,callback:function(t){e.$set(e.customerForm,"mobile",t)},expression:"customerForm.mobile"}}),a("el-input",{staticClass:"mgl-10",staticStyle:{width:"125px"},attrs:{placeholder:"请输入微信号",maxlength:20},model:{value:e.customerForm.wechat,callback:function(t){e.$set(e.customerForm,"wechat",t)},expression:"customerForm.wechat"}}),a("div",{staticClass:"small-tip"},[e._v("（至少填写一项）")])],1):e._e(),a("el-row",{staticClass:"form-title"},[a("i",{staticClass:"form-title-mark"}),a("p",{staticClass:"form-title-p"},[e._v("客户基础信息")])]),a("el-form-item",{staticClass:"form-item-left",attrs:{label:"客户类型",prop:"companyName"}},[a("el-radio-group",{model:{value:e.customerForm.companyType,callback:function(t){e.$set(e.customerForm,"companyType",t)},expression:"customerForm.companyType"}},e._l(e.companyTypeRadio,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1),a("el-form-item",{staticClass:"form-item-left",staticStyle:{"margin-bottom":"6px"},attrs:{label:"客户地址",prop:""}},[a("el-cascader",{ref:"cascader",staticStyle:{width:"552px"},attrs:{options:e.city,props:{value:"id",label:"name"}},model:{value:e.customerForm.cities,callback:function(t){e.$set(e.customerForm,"cities",t)},expression:"customerForm.cities"}})],1),a("el-form-item",{staticClass:"form-item-left",attrs:{label:""}},[a("el-input",{staticStyle:{width:"552px"},attrs:{type:"textarea",rows:3,placeholder:"详细地址"},model:{value:e.customerForm.addrDetail,callback:function(t){e.$set(e.customerForm,"addrDetail",t)},expression:"customerForm.addrDetail"}})],1),a("el-row",{staticClass:"form-title"},[a("i",{staticClass:"form-title-mark"}),a("p",{staticClass:"form-title-p"},[e._v("财务信息")])]),a("el-form-item",{staticClass:"form-item form-item-left",attrs:{"label-width":e.rightBlockLabelWidth,label:"公司开票抬头"}},[a("el-input",{attrs:{placeholder:"请输入公司开票抬头"},model:{value:e.customerForm.invoiceTitle,callback:function(t){e.$set(e.customerForm,"invoiceTitle",t)},expression:"customerForm.invoiceTitle"}})],1),a("el-form-item",{staticClass:"form-item form-item-right",attrs:{"label-width":e.rightBlockLabelWidth,label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.customerForm.invoiceAddr,callback:function(t){e.$set(e.customerForm,"invoiceAddr",t)},expression:"customerForm.invoiceAddr"}})],1),a("el-form-item",{staticClass:"form-item form-item-left",attrs:{"label-width":e.rightBlockLabelWidth,label:"纳税人识别号",prop:"invoiceNumber"}},[a("el-input",{attrs:{placeholder:"请输入纳税人识别号"},model:{value:e.customerForm.invoiceNumber,callback:function(t){e.$set(e.customerForm,"invoiceNumber",t)},expression:"customerForm.invoiceNumber"}})],1),a("el-form-item",{staticClass:"form-item form-item-right",attrs:{"label-width":e.rightBlockLabelWidth,label:"账号",prop:"invoiceAccount"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.customerForm.invoiceAccount,callback:function(t){e.$set(e.customerForm,"invoiceAccount",t)},expression:"customerForm.invoiceAccount"}})],1),a("el-form-item",{staticClass:"form-item form-item-left",attrs:{"label-width":e.rightBlockLabelWidth,label:"开户行"}},[a("el-input",{attrs:{placeholder:"请输入开户行"},model:{value:e.customerForm.invoiceBank,callback:function(t){e.$set(e.customerForm,"invoiceBank",t)},expression:"customerForm.invoiceBank"}})],1),a("el-form-item",{staticClass:"form-item form-item-right",attrs:{"label-width":e.rightBlockLabelWidth,label:"电话",prop:"invoicePhone"}},[a("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.customerForm.invoicePhone,callback:function(t){e.$set(e.customerForm,"invoicePhone",t)},expression:"customerForm.invoicePhone"}})],1)],1)])],1):e._e(),"import"===e.dialogType?a("star-import-file",{staticClass:"drawer-form",attrs:{uploadText:"客户",uploadKey:"customer",downloadSrc:"/template/customer_upload_template.xlsx"}}):e._e(),"onebyone"===e.dialogType?a("div",{staticClass:"el-drawer-footer"},[a("tg-button",{on:{click:e.close}},[e._v("取消")]),a("tg-button",{attrs:{type:"primary",disabled:e.isAddingEditing},on:{click:e.submitForm}},[e._v("保存")])],1):e._e()],1)])],1)},u=[],m=(a(21703),a(54433)),p=a(57046),d=a(3346),y=a(79433),_=a(58496),h=a(64236),f=a(93266),v=a(29625),b=a(97434);const g=(0,p.I8)(m.areaType);var k={props:{visible:{type:Boolean,required:!0},customerFormEdit:{type:Object,default(){return{shopName:"",shopType:"",category:"",brand_id:"",business_type:[],companyName:"",manager_ids:[],manager_infos:[],companyType:"",customerName:"",customerClass:"",mobile:"",wechat:"",intention:"",province:"",city:"",county:"",cities:[],addrDetail:"",manager:{},department:"",invoiceTitle:"",invoiceAddr:"",invoiceNumber:"",invoiceAccount:"",invoiceBank:"",invoicePhone:"",coopAe:[],managerName:"",company_id:""}}},id:{type:[Number,String],default:0}},setup(){const e=(0,b.ref)(void 0);return{autoFocuseRef:e}},data(){const e=(e,t,a)=>{const{wechat:o,mobile:i}=this.customerForm;""===o&&""===i?(this.goTop(),a(new Error("手机号和微信号至少填写一个"))):""===i||/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(i)?a():a(new Error("请输入正确的手机号码"))};return{oneId:[],list:[{oneId:"",company_id:"",company_name:""}],customerForm:{shopName:"",shopType:"",category:"",brand_id:"",business_type:[],companyName:"",manager_ids:[],manager_infos:[],companyType:"",customerName:"",customerClass:"",mobile:"",wechat:"",intention:"",province:"",city:"",county:"",cities:[],addrDetail:"",manager:{},department:"",invoiceTitle:"",invoiceAddr:"",invoiceNumber:"",invoiceAccount:"",invoiceBank:"",invoicePhone:"",coopAe:[],managerName:"",company_id:""},isAddingEditing:!1,shopTypeRadio:l.q0,companyTypeRadio:l.Rd,categoryList:g,categoryFormate:l.Nv,customerClassList:l.Cl,departmentList:[],managerList:[],shopList:[],city:[],flatCity:[],customerRules:{shopType:[{required:!0,message:"请选择店铺类型",trigger:"change"}],shopName:[{required:!0,message:"请输入店铺名称",trigger:"blur"}],category:[{required:!0,message:"请选择客户类目",trigger:"change"}],customerName:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],business_type:[{required:!0,message:"请选择业务类型",trigger:"change"}],wechat:[{required:!0,validator:e,trigger:"blur"}],invoiceNumber:[{validator(e,t,a){if(""===t)return void a();const o=/.*[\u4e00-\u9fa5]+.*$/;o.test(t)?a(new Error("请输入正确的纳税人识别号")):a()},trigger:"blur"}],invoiceAccount:[{validator(e,t,a){if(""===t)return void a();const o=/^[0-9]+$/;o.test(t)?a():a(new Error("账号必须为纯数字"))},trigger:"blur"}],invoicePhone:[{validator(e,t,a){if(""===t)return void a();const o=/^[1][0-9]{10}$/,i=/^(0[0-9]{2,3}[-\s])?([1-9][0-9]{6,7})+(-[0-9]{1,4})?$/;o.test(t)||i.test(t)?a():a(new Error("请输入正确的电话号码"))},trigger:"blur"}]},aeAllList:[],dialogType:"onebyone",companyLoading:!1,companies:[],rightBlockLabelWidth:"98px",version:(0,f.v)(),BusinessTypeOptions:v.Yh.filter((e=>e.value!==v.WD.mcn))}},computed:{isClassFallback(){return!1!==this.version&&this.version<=84}},async created(){await this.fetchCityData(),this.queryUserNames(s.b.customer_manager),this.getBrandList()},methods:{addItem(){this.list.push({oneId:"",company_id:"",company_name:""})},removeItem(e,t){this.list.splice(t,1),this.oneId.splice(t,1)},async fetchCityData(){const e=await(0,_.gT)();this.city=e,this.flatCity=(0,_.Ds)((0,h.Qc)(e))},close(){this.oneId=[],this.list=[{oneId:"",company_id:"",company_name:""}],this.$refs.customerForm?.resetFields(),this.$emit("close")},queryUserNames(e){(0,n.TG)().then((e=>{if(e.data.success&&(this.managerList=e.data.data.user_data,this.id&&this.customerForm?.managerId&&this.managerList)){const e=this.managerList.find((e=>e.id===this.customerForm?.managerId));this.customerForm.manager={department_str:"",...e}}}))},initAddr(){const{province:e,city:t,county:a}=this.customerForm,o=(0,_.Io)([e,t,a],this.flatCity);this.customerForm.cities=o;const i=`${e} / ${t} / ${a}`;setTimeout((()=>{this.$refs.cascader.inputValue=" /  / "===i?"":i}),17)},submitForm(){if(0===this.customerForm.shopType)return this.$message.error("请选择店铺类型"),!1;this.$refs.customerForm.validate((e=>{if(!e)return""!==this.customerForm.shopName&&""!==this.customerForm.category&&""!==this.customerForm.customerName||this.goTop(),!1;this.isAddingEditing=!0,this.saveCustomer()}))},goTop(){document.querySelector(".customer-form").scrollTop=0},async saveCustomer(){const e=this.customerForm,[t,a,o]=e.cities?(0,_.cV)(e.cities,this.flatCity):[void 0,void 0,void 0];let i=[],r=[];for(let l=0;l<this.oneId.length;l++)"number"!==typeof this.oneId[l]?i.push(this.list[l].company_id):i.push(this.oneId[l]);i.forEach((e=>{e&&r.push(e)}));const n={shop_name:e.shopName,shop_type:e.shopType,category:e.category,brand_id:e.brand_id,business_type:e.business_type,company_ids:r,company_type:e.companyType||null,customer_name:e.customerName,mobile:e.mobile,wechat:e.wechat,intention:e.intention,addr_province:t,addr_town:a,addr_county:o,addr_detail:e.addrDetail,invoice_title:e.invoiceTitle,invoice_addr:e.invoiceAddr,invoice_number:e.invoiceNumber,invoice_account:e.invoiceAccount,invoice_bank:e.invoiceBank,invoice_phone:e.invoicePhone};this.id&&(n.id=this.id);const s=this.id?await(0,y.DW)(n):await(0,y.X1)(n);s.data.success?(this.$emit("save",s.data.data),this.oneId=[],this.list=[{company_id:"",company_name:""}]):this.$message.error(s.data.message),this.isAddingEditing=!1},resetCustomer(){this.oneId=[],this.list=[{company_id:"",company_name:""}],this.customerForm.shop_name="",this.customerForm.shopType="",this.customerForm.category="",this.customerForm.companyName="",this.customerForm.companyType="",this.customerForm.customerName="",this.customerForm.customerClass="",this.customerForm.mobile="",this.customerForm.wechat="",this.customerForm.intention="",this.customerForm.province="",this.customerForm.city="",this.customerForm.county="",this.customerForm.addrDetail="",this.customerForm.manager={},this.customerForm.department="",this.customerForm.invoiceTitle="",this.customerForm.invoiceAddr="",this.customerForm.invoiceNumber="",this.customerForm.invoiceAccount="",this.customerForm.invoiceBank="",this.customerForm.invoicePhone="",this.customerForm.managerName="",this.customerForm.cities=[]},handleImportType(e){this.dialogType=e},async companyRemoteMethod(e){if(""===e)return void(this.companies=[]);const t=await(0,d.vt)(e);t.data.success?this.companies=t.data.data.map((e=>({...e}))):this.companies=[]},onCompanySelect(e){this.customerForm.companyName=this.companies.find((t=>t.id===e))?.company_name},inputMobile(e){const t=e.target.value.replace(/\D+/u,"");this.customerForm.mobile=t,e.target.value=t},async getBrandList(){const e=await(0,y.wh)({});e.data.success?this.shopList=e.data.data:this.$message.error(e.data.message)}},watch:{visible(e){if(e)if(this.id){this.initAddr(),this.list=[],this.customerForm=this.customerFormEdit;const e=this.customerForm.companies;for(let t=0;t<e.length;t++)this.list.push({oneId:e[t].company_id,company_id:e[t].company_id,company_name:e[t].company_name}),this.oneId.push(e[t].company_name)}else this.resetCustomer(),this.$nextTick((()=>{this.goTop(),this.autoFocuseRef.focus()}));this.companyRemoteMethod(this.customerForm.companyName)},customerForm(e,t){JSON.stringify(e)!==JSON.stringify(t)&&null!==e&&(this.customerForm.manager=this.managerList.find((e=>e.id===this.customerForm.manager.id))??{username:"",id:0,department:0,department_str:""},this.customerForm.manager_ids||(this.$set(this.customerForm,"manager_ids"),this.customerForm.manager_ids=[]),this.customerForm.manager_ids.splice(0,this.customerForm.manager_ids.length,...this.customerForm.manager_infos.map((e=>e.manager_id))))}}},C=k,w=a(1001),F=(0,w.Z)(C,c,u,!1,null,"891df774",null),x=F.exports,D={computed:{...(0,r.mapGetters)({UserInfo:"user/getUserInfo",UserRoles:"user/getUserRole",CustomerDetail:"cooperative/CustomerDetail",CooperationDetail:"cooperative/CooperationDetail",CooperationdetailStatus:"cooperative/CooperationdetailStatus"})},created(){},methods:{...(0,r.mapActions)({ResetCurrentAERecordList:"cooperative/ResetCurrentAERecordList",GetCustomerDetail:"cooperative/GetCustomerDetail",GetCooperationDetail:"cooperative/GetCooperationDetail",SetCooperationdetailStatus:"cooperative/SetCooperationdetailStatus"})}},T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"AddChatRecordDialog",staticClass:"customer-dialog tg-dialog-vcenter",attrs:{visible:e.visible,width:"440px",hight:"305px","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(e.is_create?"新增联系人":"编辑联系人"))])]},proxy:!0},{key:"footer",fn:function(){return[a("tg-button",{on:{click:e.handledialogCancel}},[e._v("取消")]),a("tg-button",{attrs:{type:"primary"},on:{click:e.handledialogSubmit}},[e._v("保存")])]},proxy:!0}])},[a("el-alert",{staticStyle:{padding:"10px 21px"},attrs:{closable:!1,title:"该信息仅您和上级可见。",type:"warning","show-icon":""}}),a("div",{staticClass:"addchat-container"},[a("el-form",{ref:"add_contact_form",attrs:{model:e.add_contact_form,rules:e.add_contact_rules}},[a("el-form-item",{attrs:{label:"客户姓名",prop:"customer_name"}},[a("el-input",{staticStyle:{width:"392px"},attrs:{type:"textarea",rows:1,maxlength:100,placeholder:"请输入客户姓名"},model:{value:e.add_contact_form.customer_name,callback:function(t){e.$set(e.add_contact_form,"customer_name",t)},expression:"add_contact_form.customer_name"}})],1),a("el-form-item",{staticClass:"with-small-tip",attrs:{label:"联系方式",prop:"wechat"}},[a("div",{staticClass:"small-tip"},[e._v("（至少填写一项）")]),a("div",{staticStyle:{width:"400px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{placeholder:"请输入手机号",maxlength:11},nativeOn:{input:function(t){return e.inputMobile.apply(null,arguments)}},model:{value:e.add_contact_form.mobile,callback:function(t){e.$set(e.add_contact_form,"mobile",t)},expression:"add_contact_form.mobile"}}),a("el-input",{staticStyle:{width:"193px","margin-left":"6px"},attrs:{placeholder:"请输入微信号",maxlength:20},model:{value:e.add_contact_form.wechat,callback:function(t){e.$set(e.add_contact_form,"wechat",t)},expression:"add_contact_form.wechat"}})],1)])],1)],1)],1)},N=[],A=a(97484),I={name:"AddChatRecord",mixins:[D],props:["is_create"],data(){const e=(e,t,a)=>{const{wechat:o,mobile:i}=this.add_contact_form;""===o&&""===i?(this.goTop(),a(new Error("手机号和微信号至少填写一个"))):""===i||/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(i)?a():a(new Error("请输入正确的手机号码"))};return{add_contact_form:{id:0,customer_id:0,customer_name:"",mobile:"",wechat:""},add_contact_rules:{customer_name:[{required:!0,message:"客户姓名不能为空",trigger:"blur"},{max:20,message:"不能超过20个字",trigger:"blur"}],wechat:[{required:!0,validator:e,trigger:"blur"}]},page:null,visible:!1}},methods:{...(0,r.mapActions)({GetContact:"cooperative/GetContact"}),show(e,t){e?(this.title="编辑联系人",this.add_contact_form=Object.assign(this.add_contact_form,e),t&&(this.page=t)):(this.title="新增联系人",this.resetForm()),this.visible=!0},handledialogCancel(){this.visible=!1},resetForm(){this.$refs.add_contact_form&&this.$refs.add_contact_form.clearValidate(),this.add_contact_form.customer_id=0,this.add_contact_form.id=0,this.add_contact_form.customer_name="",this.add_contact_form.mobile="",this.add_contact_form.wechat=""},async handledialogSubmit(){const e=await new Promise((e=>{this.$refs.add_contact_form.validate((t=>{e(t)}))}));if(!e)return;const{id:t,...a}=this.add_contact_form,o=0===t?{...a,customer_id:this.CustomerDetail.id}:{id:t,...a,customer_id:this.CustomerDetail.id},i=await(0,A.xf)(o);i.data.success?(this.$message.success(i.data.message),this.GetContact({customer_id:this.CustomerDetail.id,num:100,page_num:1}),this.resetForm(),this.visible=!1):this.$message.error(i.data.message)}}},$=I,E=(0,w.Z)($,T,N,!1,null,"f7c2eede",null),O=E.exports,S=a(36568),P=a.n(S),L=a(51538),B=a(76612),R=a(23857),K=a(61282),G=a(78902),Z=a(21757);const V=(0,f.v)();var q=(0,b.defineComponent)({props:{customer:{type:Object,required:!0}},setup(){const e=(0,b.computed)((()=>!1!==V&&V<=84)),t=(0,b.computed)((()=>{const e=(0,Z.kG)(G.HN.customer_edit),t=(0,Z.kG)(G.HN.customer_delete);return{canEdit:e,canDelete:t}}));return{isClassFallback:e,Permission:t}},render(){const e=arguments[0],{customer:t}=this,{shop_type:a,category:o,company_type:i,customer_class:r,addr_province:n,addr_town:s,addr_county:c,addr_detail:u}=t,m=t.business_type.map((e=>v.Zb.get(e)??"")).filter((e=>""!==e)).join("、"),p=a===R.CJ.Taobao?e(B.Z,{attrs:{name:"ico-taobao"}}):a===R.CJ.Tmall?e(B.Z,{attrs:{name:"ico-tmall"}}):a===R.CJ.Douyin?e(B.Z,{attrs:{name:"ico-douyin"}}):e(""),d=[n??"",s??"",c??"",u??""].filter((e=>""!==e)).join(" "),y=e("el-popover",{attrs:{placement:"bottom-start",width:"330",trigger:"click","popper-class":"detail-step-popover-wrapper"}},[e("div",{class:"detail-step-popover-wrapper-hd"},["财务信息"]),e("div",{class:"detail-step-popover-wrapper-line"}),e("div",{class:"step-popover-wrapper"},[e("span",{class:"step-popover-wrapper-row-label"},["公司开票抬头："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_title)]),e("span",{class:"step-popover-wrapper-row-label"},["纳税人识别号："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_number)]),e("span",{class:"step-popover-wrapper-row-label"},["开户行："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_bank)]),e("span",{class:"step-popover-wrapper-row-label"},["账号："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_account)]),e("span",{class:"step-popover-wrapper-row-label"},["电话："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_phone)]),e("span",{class:"step-popover-wrapper-row-label"},["地址："]),e("span",{class:"step-popover-wrapper-row-content"},[(0,K.Vw)(t.invoice_addr)])]),e("a",{slot:"reference"},["点击查看财务信息"])]),_=[[e("div",{class:"base-grid-item-lbl",style:"width: 90px"},["店铺类目"]),e("div",{class:"base-grid-item-content"},[(0,v.RB)(o)])],[e("div",{class:"base-grid-item-lbl"},["店铺品牌"]),e("div",{class:"base-grid-item-content"},[(0,K.Vw)(t.brand_name)])],[e("div",{class:"base-grid-item-lbl"},["客户分类"]),e("div",{class:"base-grid-item-content"},[r?l.Cl[r].value:"--"])],[e("div",{class:"base-grid-item-lbl",style:"width: 90px"},["客户类型"]),e("div",{class:"base-grid-item-content"},[(0,l.ug)({company_type:i})])],[e("div",{class:"base-grid-item-lbl"},["公司名称"]),e("span",[t.companies.map((t=>e("span",{key:t.company_id},[t.company_name," "])))])],[e("div",{class:"base-grid-item-lbl"},["业务类型"]),e("div",{class:"base-grid-item-content"},[e("def-text",{attrs:{content:m}})])],[e("div",{class:"base-grid-item-lbl",style:"width: 90px"},["客户地址"]),e("div",{class:"base-grid-item-content"},[(0,K.Vw)(d)])],[e("div",{class:"base-grid-item-lbl"},["财务信息"]),y]],h={nativeOn:{click:()=>{this.$emit("edit")}}},f={nativeOn:{click:()=>{this.$emit("delete")}},style:{...this.isClassFallback?{marginLeft:"12px"}:{}}},b={class:"customer-shop-detail-base-block"};return e(L.Z,b,[e("div",{class:"customer-shop-detail-base-block-hd"},[p,e("span",{class:"name"},[t.shop_name]),e("div",{class:"more-btns"},[this.Permission.canEdit?e(B.Z,P()([{attrs:{name:"ico-edit"}},h])):"",this.Permission.canDelete?e(B.Z,P()([{attrs:{name:"ico-delete"}},f])):""])]),e("div",{class:"base-grid"},[_.map((([t,a])=>e("div",{class:"base-grid-item"},[t,"：",a])))])])}}),M=a(82741),Y=a(1763),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.ContactList?a("tg-block",{staticClass:"mgt-10"},[a("div",{staticClass:"btns-line",staticStyle:{"margin-top":"8px"}},[a("tg-button",{directives:[{name:"show",rawName:"v-show",value:e.Permission.canEdit,expression:"Permission.canEdit"}],attrs:{type:"primary",icon:"ico-btn-add"},on:{click:e.addContact}},[e._v("新增联系人")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:null!==e.ContactList?e.ContactList.data:[]},scopedSlots:e._u([{key:"empty",fn:function(){return[a("span",[e._v("该客户还没有联系人哦~")])]},proxy:!0}],null,!1,3499693022)},[a("el-table-column",{attrs:{prop:"customer_name",label:"联系人","header-align":"left",align:"left",minWidth:"150"}}),a("el-table-column",{attrs:{prop:"wechat",label:"手机号/微信","header-align":"left",align:"left",minWidth:"350"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s((o.mobile?o.mobile:"--")+"/"+(o.wechat?o.wechat:"--")))])]}}],null,!1,4168693231)}),a("el-table-column",{attrs:{prop:"wechat",label:"录入人","header-align":"left",align:"left",minWidth:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("p",[e._v(e._s(""+o.add_by_name))]),a("p",[e._v(e._s(""+o.gmt_create.split(" ")[0]))])]}}],null,!1,3424973825)}),a("el-table-column",{attrs:{align:"center",minWidth:"78"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.Permission.canEdit&&e.ShowEditBtn(t.row)?a("tg-button",{attrs:{type:"link"},on:{click:function(a){return e.editContact(t.row)}}},[e._v("编辑")]):e._e()]}}],null,!1,3953331215)},[a("template",{slot:"header"},[e._v(" 操作 ")])],2)],1)],1):e._e()},U=[],W=a(50585),H={name:"CustomerContactList",mixins:[D],setup(e,t){const a=t.root.$store.getters["user/getUserInfo"],o=(0,b.computed)((()=>{const e=(0,Z.kG)(G.HN.customer_collaboration_delete),t=(0,Z.kG)(G.HN.customer_edit);return{canDelete:e,canEdit:t}}));return{currentUser:a,Permission:o}},data(){return{customerStageList:W.PH}},computed:{...(0,r.mapGetters)({ContactList:"cooperative/ContactList"})},methods:{addContact(){this.$emit("cooperation:create")},ShowEditBtn(e){return this.currentUser.id===e.add_by},editContact(e){this.$emit("cooperation:edit",e)}}},X=H,z=(0,w.Z)(X,j,U,!1,null,"3b54545c",null),J=z.exports,Q={name:"CustomerDetail",components:{addCustomer:x,AddContactDialog:O,CustomerDetailBase:q,CustomerContactList:J},mixins:[D],data(){return{RIGHT_CODE:s.H,id:0,detailFormEdit:null,customerVisible:!1,is_create:!0,routes:[{path:"/customer/shop",title:"店铺管理"},{path:"",title:"店铺详情"}],disabled:!1}},created(){this.$route.params.id?(this.id=this.$route.params.id,this.initCustomerInfo(this.$route.params.id)):this.$router.back()},methods:{toggledd(){this.disabled=!this.disabled},...(0,r.mapActions)({GetCooperation:"cooperative/GetCooperation",GetContact:"cooperative/GetContact"}),initCustomerInfo(e){this.GetCustomerDetail(this.id),this.GetContact({customer_id:e,num:100,page_num:1})},editCustomer(){const e=this.formatForm((0,h.Qc)(this.CustomerDetail));e.department+="",this.detailFormEdit=(0,h.Qc)(e),this.customerVisible=!0},async delCustomer(){const e="此操作将永久删除该数据, 是否继续？",t=await(0,M.I)({root:this},e);if(t){const e={customer_id:this.id};(0,n.Uw)(e).then((e=>{e.data.success?(this.$message.success("删除成功"),this.$router.push({name:Y.Ou.shop})):this.$message.error(e.data.message)}))}},addByFormat(e){return`录入人：${e.add_by} ${(0,l.EI)(e.gmt_create)}`},formatForm(e){const{manager:t,manager_id:a,department:o,...i}=e;return{...i,shopName:e.shop_name,shopType:e.shop_type,category:e.category,companyName:e.company_name,companyType:e.company_type,customerName:e.customer_name,level:e.level,customerClass:e.customer_class||"",mobile:e.mobile,wechat:e.wechat,intention:e.intention,cities:[],province:e.addr_province,city:e.addr_town,county:e.addr_county,addrDetail:e.addr_detail,manager:{username:t,id:a,department:o,department_str:""},department:e.department||"",invoiceTitle:e.invoice_title,invoiceAddr:e.invoice_addr,invoiceNumber:e.invoice_number,invoiceAccount:e.invoice_account,invoiceBank:e.invoice_bank,invoicePhone:e.invoice_phone,coopAe:e.coop_ae,managerName:e.manager_name}},close(){this.detailForm=this.detailFormBak,this.customerVisible=!1},saveCustomer(e){this.$message.success("保存成功"),this.customerVisible=!1,this.GetCustomerDetail(this.id)},createRecord(){this.$refs.AddChatRecord.show()},showMoreRecord(){this.$refs.ChatRecordList.show()},addCooperation(){this.$refs.addCooperation.show()},addContact(e,t){let a={};e?(this.is_create=!0,this.$refs.addContact.show()):(this.is_create=!1,a={customer_id:t["customer_id"],customer_name:t["customer_name"],mobile:t["mobile"],wechat:t["wechat"],id:t["id"]},this.$refs.addContact.show(a))}}},ee=Q,te=(0,w.Z)(ee,o,i,!1,null,"d19cfb46",null),ae=te.exports},86863:function(e,t,a){"use strict";a.d(t,{B9:function(){return w},C7:function(){return v},E2:function(){return m},Fn:function(){return u},Jv:function(){return k},LK:function(){return d},Ou:function(){return f},TG:function(){return n},Uw:function(){return i},XZ:function(){return p},_6:function(){return g},aw:function(){return A},cQ:function(){return C},dh:function(){return N},em:function(){return r},g9:function(){return x},iI:function(){return c},it:function(){return b},jy:function(){return _},kT:function(){return F},pc:function(){return s},qJ:function(){return y},qq:function(){return h},ve:function(){return D},vf:function(){return T},w_:function(){return l}});var o=a(76012);a(42963);function i(e){return(0,o.ZP)({url:"/api/cust/del_customer",method:"get",params:e})}function r(e){return(0,o.ZP)({url:"/api/auth/query_user_names",method:"get",params:e})}function n(){return(0,o.ZP)({url:"/api/auth/query_user_names",method:"get"})}function s(e){return(0,o.ZP)({url:"/api/auth/get_user_by_role",method:"get",params:e})}function l(e){return(0,o.ZP)({url:"/api/cont/upload_attachment",method:"post",data:e})}function c(){return(0,o.ZP)({url:"/api/auth/get_department",method:"get"})}function u(){return(0,o.ZP)({url:"/api/cont/get_approver",method:"get"})}function m(e,t=1){const a=1===t?"/api/cont/query_contract":2===t?"/api/cont/query_law_contract":4===t?"/api/cont/query_cooperation_contract":5===t?"/api/cont/query_common_contract":"/api/cont/query_shop_live_contract";return(0,o.ZP)({url:a,method:"get",params:e})}function p(){return(0,o.ZP)({url:"/api/cont/get_contract_uid",method:"get"})}function d(e={}){return(0,o.ZP)({url:"/api/shop_live/get_shop_live_contract_uid",method:"get",params:e})}function y(e){return(0,o.ZP)({url:"/api/cont/del_contract",method:"post",data:e})}function _(e){return(0,o.ZP)({url:"/api/cont/approve_contract",method:"post",data:e})}function h(e){return(0,o.ZP)({url:"/api/cont/del_contract",method:"post",data:e})}function f(e){return(0,o.ZP)({url:`/api/cont/delete_contract_annex/${e}/`,method:"post"})}function v(e){return(0,o.ZP)({url:`/api/cont/delete_contract_statements/${e}/`,method:"post"})}function b(e){return(0,o.ZP)({url:"/api/cont/invalid_contract",method:"post",data:e})}function g(e){return(0,o.ZP)({url:"/api/cont/recycle_contract",method:"post",data:e})}function k(e){return(0,o.ZP)({url:"/api/auth/get_user_by_role",method:"get",params:e})}function C(e){return(0,o.ZP)({url:"/api/cont/get_partner_by_name",method:"get",params:e})}function w(e){return(0,o.ZP)({url:"/api/cont/save_contract_annex",method:"post",data:e})}function F(e){return(0,o.ZP)({url:"/api/cont/del_contract_annex",method:"post",data:e})}function x(e){return(0,o.ZP)({url:"/api/cont/query_contract_annex",method:"get",params:e})}function D(e){return(0,o.ZP)({url:"/api/cont/query_contract_statements",method:"get",params:e})}function T(e){return(0,o.ZP)({url:`/api/cont/get_contract_approval_flow/${e}/`,method:"get"})}function N(e){return(0,o.ZP)({url:`/api/cont/get_contract_annex_approval_flow/${e}/`,method:"get"})}function A(e){return(0,o.ZP)({url:`/api/cont/get_contract_statements_approval_flow/${e}/`,method:"get"})}},50585:function(e,t,a){"use strict";a.d(t,{PH:function(){return o},rN:function(){return r}});const o=[{type:1,value:"意向客户",subtitle:"客户需求"},{type:2,value:"确定合作",subtitle:"业绩登记/成本安排/返点安排"},{type:3,value:"执行项目",subtitle:"指定AE/AE跟单"},{type:4,value:"执行结束",subtitle:"执行结果"},{type:5,value:"数据入库",subtitle:"导入场次/商品数据"}],i=[{label:"V任务",value:1},{label:"支付宝",value:2},{label:"对公银行",value:3}],r=e=>i.find((t=>t.value===e))?.label??""},54433:function(e,t,a){"use strict";a.r(t),a.d(t,{KolTagEnum:function(){return r},KolVerifyStatusEnum:function(){return _},areaType:function(){return p},businessType:function(){return m},directOriginalList:function(){return i},kolTag:function(){return d},kolTagFormat:function(){return y},kolTagList:function(){return n},kolVerifyStatus:function(){return h},kolVerifyStatusFilter:function(){return f},mediaType:function(){return u},newKolTagList:function(){return s},newPlatformList:function(){return c},platformData:function(){return o},platformList:function(){return l},specialList:function(){return v}});const o=[{platformKey:"tb",platformName:"淘宝",platSelected:!0,detailKey:"kol_tb_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"star_name",name:!0},{label:"淘宝ID",key:"star_id"},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"}],mediumTypeInfo:[{mediumName:"直播",info:[{label:"专场成本价",key:"star_special_cost",unit:"(元 / 场)"},{label:"专场刊例价",key:"star_special_price",unit:"(元 / 场)"},{label:"混播成本价",key:"star_mix_cost",unit:"(元 / 链接)"},{label:"混播刊例价",key:"star_mix_price",unit:"(元 / 链接)"}],otherInfo:[{label:"配合度",key:"responsivity",showCondition:"is_cooperation"},{label:"单客价",key:"sales_price_period",showCondition:"is_cooperation"},{label:"淘客ID",key:"wangwang_name",showCondition:"is_cooperation"},{label:"平均观看(PV)",key:"pv_average",showCondition:""}]},{mediumName:"视频",info:[{label:"视频成本价",key:"video_price",unit:"(元 / 条)"},{label:"视频刊例价",key:"video_publish_price",unit:"(元 / 条)"}]},{mediumName:"图文",info:[{label:"图文成本价",key:"photo_price",unit:"(元 / 篇)"},{label:"图文刊例价",key:"photo_publish_price",unit:"(元 / 篇)"}]}]},{platformKey:"douyin",platformName:"抖音",platSelected:!1,detailKey:"kol_douyin_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"douyin_name",name:!0},{label:"抖音号",key:"douyin_id",name:!0},{label:"粉丝数(万)",key:"fans_number"},{label:"获赞数(万)",key:"praise_number"},{label:"所属机构",key:"company_id",type:"select"},{label:"商品橱窗上架价格(元)",key:"shopwindow_price"},{label:"纯佣最低佣金比例",key:"pure_commission_min_percent"},{label:"打包最低佣金比例",key:"package_price_min_percent"},{label:"短视频+直播打包坑位费",key:"short_video_liver_price"}],mediumTypeInfo:[{mediumName:"直播",info:[{label:"专场成本价",key:"live_special_price",unit:"(元 / h)"},{label:"专场最低佣金比例",key:"special_commission_min_percent",unit:"%"},{label:"专场是否需要佣金",key:"is_special_commission",unit:""},{label:"混播场是否需要佣金",key:"is_mix_commission",unit:""},{label:"混播单链接成本价",key:"live_mix_price",unit:"(元 / 链接)"},{label:"混播场最低佣金比例",key:"mix_min_commission_percent",unit:"(元 / 链接)"},{label:"专场刊例价",key:"live_special_publish_price",unit:"(元 / h)"},{label:"专场最高链接数",key:"special_max_url",unit:"(条)"},{label:"混播单链接刊例价",key:"live_mix_publish_price",unit:"(元 / 链接)"}]},{mediumName:"视频",info:[{label:"1-20s视频成本价",key:"video_1_20_price",unit:"(元 / 条)"},{label:"1-20s视频刊例价",key:"video_1_20_publish_price",unit:"(元 / 条)"},{label:"1-20s星图后台价",key:"video_1_20_star_map_price",unit:"(元 / 条)"},{label:"星图返点比例",key:"star_map_rebate_percent",unit:"%"},{label:"21-60s视频成本价",key:"video_21_60_price",unit:"(元 / 条)"},{label:"21-60s视频刊例价",key:"video_21_60_publish_price",unit:"(元 / 条)"},{label:"21-60s星图后台价",key:"video_21_60_star_map_price",unit:"(元 / 条)"}]}]},{platformKey:"xhs",platformName:"小红书",platSelected:!1,detailKey:"kol_xhs_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"xhs_name",name:!0},{label:"小红书号",key:"xhs_id"},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"},{showLabel:"是否品牌合作人",key:"is_partner"}],mediumTypeInfo:[{mediumName:"直播",info:[{label:"直播成本价",key:"live_cost_price"},{label:"直播刊例价",key:"live_publish_price"}]},{mediumName:"视频",info:[{label:"视频成本价",key:"video_price",unit:"(元 / 条)"},{label:"视频刊例价",key:"video_publish_price",unit:"(元 / 条)"},{label:"品牌合作人后台视频报价",key:"brand_partner_video_price",unit:"(元 / 条)"}]},{mediumName:"图文",info:[{label:"图文成本价",key:"photo_price",unit:"(元 / 篇)"},{label:"图文刊例价",key:"photo_publish_price",unit:"(元 / 篇)"},{label:"品牌合作人后台图文报价",key:"brand_partner_image_text_price",unit:"(元 / 篇)"}]}]},{platformKey:"kuaishou",platformName:"快手",platSelected:!1,detailKey:"kol_kuaishou_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"kuaishou_name",name:!0},{label:"快手号",key:"kuaishou_id"},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"}],mediumTypeInfo:[{mediumName:"直播",info:[{label:"专场成本价",key:"live_special_price",unit:"(元 / 场)"},{label:"专场刊例价",key:"live_special_publish_price",unit:"(元 / 场)"},{label:"混播成本价",key:"live_mix_price",unit:"(元 / 链接)"},{label:"混播刊例价",key:"live_mix_publish_price",unit:"(元 / 链接)"}]},{mediumName:"视频",info:[{label:"视频成本价",key:"video_price",unit:"(元 / 条)"},{label:"视频刊例价",key:"video_publish_price",unit:"(元 / 条)"}]}]},{platformKey:"weibo",platformName:"微博",platSelected:!1,detailKey:"kol_weibo_info",key_avatar:"avatar",baseInfo:[{label:"微博账号",key:"weibo_name",name:!0},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"}],mediumTypeInfo:[{mediumName:"图文",info:[{label:"转发成本价",key:"trans_price",unit:"(元 / 篇)"},{label:"转发刊例价",key:"trans_publish_price",unit:"(元 / 篇)"},{label:"直发成本价",key:"direct_price",unit:"(元 / 篇)"},{label:"直发刊例价",key:"direct_publish_price",unit:"(元 / 篇)"}],otherInfo:[{label:"直发是否原创报价",key:"is_direct_original",dictionary:"directOriginalList",showCondition:""}]}]},{platformKey:"yizhibo",platformName:"一直播",platSelected:!1,detailKey:"kol_yizhibo_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"yizhibo_name",name:!0},{label:"一直播ID",key:"yizhibo_id"},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"}],mediumTypeInfo:[{mediumName:"直播",info:[{label:"直播成本价",key:"price",unit:"(元 / 场)"},{label:"直播刊例价",key:"live_publish_price",unit:"(元 / 场)"}]}]},{platformKey:"bili",platformName:"哔哩哔哩",platSelected:!1,detailKey:"kol_bili_info",key_avatar:"avatar",baseInfo:[{label:"昵称",key:"bili_name",name:!0},{label:"哔哩哔哩号",key:"bili_id"},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"}],mediumTypeInfo:[{mediumName:"视频",info:[{label:"视频成本价",key:"video_price",unit:"(元 / 条)"},{label:"视频刊例价",key:"video_publish_price",unit:"(元 / 条)"}]}]},{platformKey:"wechat",platformName:"微信公众号",platSelected:!1,detailKey:"kol_wechat_info",key_avatar:"avatar",baseInfo:[{label:"微信公众号",key:"wechat_id",name:!0},{label:"粉丝数(万)",key:"fans_number"},{label:"所属机构",key:"company_id",type:"select"},{showLabel:"是否原创",key:"is_original"},{showLabel:"是否认证",key:"is_certification"}],mediumTypeInfo:[{mediumName:"图文",info:[{label:"头条成本价",key:"photo_headline_price",unit:"(元 / 篇)"},{label:"头条刊例价",key:"photo_headline_publish_price",unit:"(元 / 篇)"},{label:"次条成本价",key:"photo_second_price",unit:"(元 / 篇)"},{label:"次条刊例价",key:"photo_second_publish_price",unit:"(元 / 篇)"}]}]}],i=[{value:1,text:"是"},{value:0,text:"否"}];var r;(function(e){e[e["GRASS_KOL"]=7]="GRASS_KOL",e[e["LIVE_KOL"]=8]="LIVE_KOL",e[e["TAOBAO_KOL"]=9]="TAOBAO_KOL",e[e["TAOBAO_KOC"]=10]="TAOBAO_KOC",e[e["DOUYIN_KOL"]=11]="DOUYIN_KOL",e[e["DOUYIN_KOC"]=12]="DOUYIN_KOC"})(r||(r={}));const n=[{value:r.GRASS_KOL,label:"种草达人"},{value:r.LIVE_KOL,label:"直播达人"},{value:r.DOUYIN_KOL,label:"抖音KOL"},{value:r.DOUYIN_KOC,label:"抖音KOC"},{value:r.TAOBAO_KOL,label:"淘宝KOL"},{value:r.TAOBAO_KOC,label:"淘宝KOC"}],s=[{label:"全部",value:0},{label:"主播",value:1},{label:"红人",value:2},{label:"明星",value:3},{label:"KOL",value:4},{label:"KOC",value:5},{label:"素人",value:6},{value:7,label:"种草达人"},{value:8,label:"直播达人"},{value:9,label:"KOL"}],l=[{value:"全部",type:0,key:""},{value:"小红书",type:1,key:"xhs",icon:"iconfont icon-xiaohongshuicon"},{value:"微信公众号",type:2,key:"wechat",icon:"iconfont icon-weixin"},{value:"新浪微博",type:3,key:"weibo",icon:"iconfont icon-weibo"},{value:"抖音",type:4,key:"douyin",icon:"iconfont icon-douyin"},{value:"淘宝",type:7,key:"tb",icon:"iconfont icon-taobao"},{value:"快手",type:5,key:"kuaishou",icon:"iconfont icon-kuaishou"},{value:"哔哩哔哩",type:6,key:"bili",icon:"iconfont icon-bilibili"},{value:"一直播",type:8,key:"yizhibo",icon:"iconfont icon-yizhibo"}],c=[{label:"全部",value:""},{label:"抖音",value:"douyin"},{label:"淘宝",value:"tb"},{label:"小红书",value:"xhs"},{label:"快手",value:"kuaishou"}],u=[{value:"全部",type:0,key:""},{value:"直播",type:1,key:"live"},{value:"视频",type:2,key:"video"},{value:"图文",type:3,key:"photo"}],m=[{value:"营销业务",key:1},{value:"淘宝店铺",key:2}],p=[{value:"美妆",key:1},{value:"生活",key:2},{value:"服饰",key:3},{value:"美食",key:4},{value:"母婴",key:5},{value:"数码",key:6},{value:"家装",key:7},{value:"健康",key:8},{value:"宠物",key:9},{value:"时尚",key:10},{value:"配饰",key:11},{value:"家电",key:12},{value:"测评",key:13},{value:"旅行",key:14},{value:"运动",key:15},{value:"摄影",key:16},{value:"情感",key:17},{value:"汽车",key:18},{value:"搞笑",key:19},{value:"教育",key:20},{value:"财经",key:21},{value:"萌娃",key:22},{value:"文化",key:23},{value:"影视",key:24},{value:"娱乐",key:25},{value:"游戏",key:26},{value:"海外",key:27},{value:"才艺",key:28},{value:"三农",key:29},{value:"二次元",key:30},{value:"高颜值",key:31}],d=[{value:"主播",key:1},{value:"红人",key:2},{value:"明星",key:3},{value:"达人",key:4},{value:"koc",key:5},{value:"素人",key:6}],y=e=>d.find((t=>t.key===e))?.value;var _;(function(e){e[e["PENDING"]=0]="PENDING",e[e["APPROVED"]=1]="APPROVED",e[e["NOT_APPROVED"]=-1]="NOT_APPROVED"})(_||(_={}));const h=[{label:"审核中",value:_.PENDING},{label:"已通过",value:_.APPROVED},{label:"未通过",value:_.NOT_APPROVED}],f=[{label:"审核中",value:String(_.PENDING)},{label:"已通过",value:String(_.APPROVED)},{label:"未通过",value:String(_.NOT_APPROVED)}],v=[{label:"是",value:1},{label:"否",value:0}]},3346:function(e,t,a){"use strict";a.d(t,{Ln:function(){return c},Me:function(){return d},OV:function(){return s},Ou:function(){return u},Pp:function(){return h},Tf:function(){return _},_F:function(){return f},eA:function(){return v},fO:function(){return b},hk:function(){return p},kg:function(){return l},mb:function(){return m},qC:function(){return y},vt:function(){return n}});var o=a(76012),i=a(10762),r=a(64236);const n=async(e,t)=>(0,o.dX)(i.y9,{params:{...(0,r.jG)({company_name:e,company_id:t})}}),s=async e=>(0,o.dX)(i.CH,{params:{...(0,r.jG)({project_uid:e})}}),l=async e=>(0,o.dX)(i.hV,{params:{...(0,r.jG)(e)}}),c=async e=>(0,o.dX)(i.yp,{params:{...(0,r.jG)(e)}}),u=async e=>(0,o.SO)(i.IY,{...(0,r.jG)(e)}),m=async e=>(0,o.SO)(i.Gs,{...(0,r.jG)(e)}),p=async e=>(0,o.SO)(i.Gs,{...e}),d=async e=>(0,o.dX)(i.S$.replace(":id",e)),y=async e=>(0,o.dX)(i.ii,{params:{...(0,r.jG)(e)}}),_=async e=>(0,o.dX)(i.AP,{params:{...(0,r.jG)(e)}}),h=async e=>(0,o.dX)(i.L6,{params:{...(0,r.jG)(e)}}),f=async e=>(0,o.SO)("/api/shop_live/save_withdraw",{...e}),v=async e=>(0,o.dX)("/api/settlement/get_settlement_by_shop_id",{params:{...(0,r.jG)(e)}}),b=async e=>(0,o.dX)("/api/settlement/query_settlements_last_achievement",{params:{...(0,r.jG)(e)}})},29625:function(e,t,a){"use strict";var o,i;a.d(t,{Bs:function(){return d},C_:function(){return s},RB:function(){return y},UN:function(){return u},WD:function(){return o},Wj:function(){return l},Y$:function(){return i},Yh:function(){return n},Zb:function(){return r},i8:function(){return p},kA:function(){return _},x3:function(){return c}}),function(e){e[e["marketing"]=1]="marketing",e[e["taobao"]=2]="taobao",e[e["douyin"]=3]="douyin",e[e["base"]=4]="base",e[e["mcn"]=5]="mcn",e[e["douyinsh"]=7]="douyinsh"}(o||(o={})),function(e){e[e["common"]=1]="common",e[e["system"]=2]="system"}(i||(i={}));const r=new Map([[o.marketing,"营销业务"],[o.douyin,"抖音店播"],[o.taobao,"淘宝店播"],[o.base,"基地业务"],[o.mcn,"S2B2C"],[o.douyinsh,"抖音店播(上海)"]]),n=[{value:o.marketing,label:"整合营销"},{value:o.douyin,label:"抖音店播"},{value:o.taobao,label:"淘宝店播"},{value:o.mcn,label:"S2B2C"},{value:o.douyinsh,label:"抖音店播(上海)"}];var s;(function(e){e[e["creation"]=1]="creation",e[e["tryLive"]=2]="tryLive",e[e["execution"]=3]="execution",e[e["regionExecution"]=4]="regionExecution",e[e["finish"]=5]="finish",e[e["executionEnd"]=6]="executionEnd"})(s||(s={}));const l=new Map([[s.creation,"项目创建"],[s.tryLive,"试播中"],[s.execution,"项目执行中"],[s.regionExecution,"区域执行中"],[s.executionEnd,"执行结束"],[s.finish,"已完结"]]);var c;(function(e){e[e["region"]=2]="region",e[e["selfSupport"]=1]="selfSupport"})(c||(c={}));const u=new Map([[c.region,"区域"],[c.selfSupport,"自营"]]);var m;(function(e){e[e["month"]=1]="month",e[e["quarter"]=2]="quarter",e[e["halfAyear"]=3]="halfAyear"})(m||(m={}));const p=new Map([[m.month,"月结"],[m.quarter,"季结"],[m.halfAyear,"半年"]]),d=new Map([[1,"美妆"],[2,"生活"],[3,"服饰"],[4,"美食"],[5,"母婴"],[6,"数码"],[7,"家装"],[8,"健康"],[9,"宠物"],[10,"时尚"],[11,"配饰"],[12,"家电"],[13,"测评"],[14,"旅行"],[15,"运动"],[16,"摄影"],[17,"情感"],[18,"汽车"],[19,"搞笑"],[20,"教育"],[21,"财经"],[22,"萌娃"],[23,"文化"],[24,"影视"],[25,"娱乐"],[26,"游戏"],[27,"海外"],[28,"才艺"],[29,"三农"],[30,"二次元"],[31,"高颜值"]]);function y(e){return 0===e?"无":d.get(e)??"无"}var _;(function(e){e[e["live"]=1]="live",e[e["marketing"]=2]="marketing",e[e["common_business"]=3]="common_business"})(_||(_={}))},23857:function(e,t,a){"use strict";var o;a.d(t,{CJ:function(){return o},Zu:function(){return i}}),function(e){e[e["Taobao"]=1]="Taobao",e[e["Tmall"]=2]="Tmall",e[e["Douyin"]=3]="Douyin"}(o||(o={}));const i=new Map([[0,"--"],[o.Taobao,"淘宝店"],[o.Tmall,"天猫店"],[o.Douyin,"抖音店"]]);o.Taobao,o.Tmall,o.Douyin},82741:function(e,t,a){"use strict";a.d(t,{I:function(){return i},u:function(){return r}});var o=a(71340);const i=(e,t)=>{const a="string"===typeof t?{title:t}:t;return new Promise((t=>{e.root.$TDialog({...a,onConfirm:()=>t(!0),onCancel:()=>t(!1)})}))},r=e=>{const t="string"===typeof e?{title:e}:e;return new Promise(((e,a)=>{(0,o.t)({...t,onConfirm:()=>e(!0),onCancel:()=>a()})}))}},8136:function(e,t,a){"use strict";a.d(t,{AR:function(){return D},BG:function(){return w},Cl:function(){return k},D$:function(){return s},EI:function(){return m},Hx:function(){return r},LY:function(){return c},Nv:function(){return l},Ps:function(){return I},Rd:function(){return x},ZC:function(){return d},_t:function(){return f},bI:function(){return g},g9:function(){return h},hy:function(){return p},jh:function(){return N},mB:function(){return v},mx:function(){return A},nA:function(){return T},q0:function(){return F},sc:function(){return C},ug:function(){return b},us:function(){return _},vJ:function(){return y},wA:function(){return n},xF:function(){return u}});var o=a(20713),i=a.n(o);function r(e,t){const a=e.display_type;switch(a){case 0:return"混播";case 1:return"专场"}}const n=["综合","美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值"],s=["美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值","行政采购"];function l({category:e}){return 0===e?"无":n[e]}function c(e,t){const a=e.sales_price_period;switch(a){case 0:return"0 ~ 100";case 1:return"100 ~ 200";case 2:return"200以上"}}function u(e,t="YYYY-MM-DD"){return i()(e).format(t)}function m(e,t="YYYY-MM-DD hh:mm:ss"){return i()(e+"+0800").format(t)}function p(e,t){return i()(e+"+0800").format(t||"YYYY-MM-DD")}function d(e){let t=parseInt(e,10),a=0,o=0;t>=60&&(a=parseInt(t/60,10),t=parseInt(t%60,10),a>=60&&(o=parseInt(a/60,10),a=parseInt(a%60,10)));let i=""+(parseInt(t,10)<10?"0"+parseInt(t,10):parseInt(t,10));return i=(parseInt(a,10)<10?"0"+parseInt(a,10):parseInt(a,10))+":"+i,i=(parseInt(o,10)<10?"0"+parseInt(o,10):parseInt(o,10))+":"+i,i}function y(e){const t=e.is_presell;switch(t){case-1:return"未录入";case 1:return"预售";case 0:return"非预售";case 2:return"预热"}}function _(e){const t=e.is_display;switch(t){case-1:return"未录入";case 2:return"已出单";case 1:return"未出单"}}function h(e){const t=e.duration;switch(t){case-1:return"未录入";case 0:return"5 ~ 10分钟";case 1:return"10 ~ 15分钟";case 2:return"15 ~ 20分钟";case 3:return"0 ~ 5分钟";case 4:return"20分钟以上"}}function f(e){const t=e.display_period;switch(t){case-1:return"未录入";case 0:return"白天";case 1:return"晚上"}}function v(e){const t=e.shop_type;switch(t){case 0:return"无";case 1:return"淘宝店";case 2:return"天猫店";case 3:return"抖音店";default:return"--"}}function b(e){const t=e.company_type;switch(t){case 0:return"无";case 1:return"同行机构";case 2:return"广告公司";case 3:return"品牌TP";case 4:return"直客"}}function g(e,t){const a=/[^\x00-\xff]/g;let o;if(e.replace(a,"**").length>t){o=Math.floor(t/2);for(let i=o,r=e.length;i<r;i++)if(e.substr(0,i).replace(a,"**").length>=t)return e.substr(0,i)}return e}const k=[{type:0,value:"全部"},{type:1,value:"普通客户"},{type:2,value:"重点客户"},{type:3,value:"战略客户"},{type:4,value:"KA客户"}],C=[{value:"全部",type:0},{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13}],w=[{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13},{value:"行政采购",type:14}],F=[{value:3,text:"抖音店"},{value:1,text:"淘宝店"},{value:2,text:"天猫店"}],x=[{value:1,text:"同行机构"},{value:2,text:"广告公司"},{value:3,text:"品牌TP"},{value:4,text:"直客"}],D=[{type:0,value:"--"},{type:1,value:"同行机构"},{type:2,value:"广告公司"},{type:3,value:"品牌TP"},{type:4,value:"直客"}],T=["#D15CB4","#6090F0","#FF9C69","#59B6DF","#C673F0","#52CCC2","#F0737F","#6FCC66","#DBD26A","#9D73F0","#FAB36E","#A2D160","#D15CB4","#58B89F","#E06C9C","#8873F0","#FA9384","#C251A6","#486DB5","#C77A52","#4185A3","#9557B5","#3C968F","#B55760","#4F9149","#A19A4D","#7657B5","#BF8954","#759645","#964282","#3C7D6C","#A65073","#6556B3","#BF7065","#873874"],N=["#6090F0","#FF9C69","#52CCC2","#59B6DF","#C673F0","#D15CB4","#F0737F","#DBD26A","#FAB36E","#A2D160","#6FCC66","#58B89F","#8873F0","#FA9384","#9D73F0","#E06C9C","#C251A6"],A=["#1E8DFF","#FFBF00","#10C0D3","#9273F8","#FE9C25","#00B942","#FFCD39","#FF829D","#00A3FF","#3AD08E","#F1DC2F","#845EF7","#FF7F00","#B3DC12","#009999","#2877FF","#D977F2","#FFC073","#768FF3","#81E5B1","#BAC8FF","#E599F8","#E7E275","#FF7E7E","#F7A0B8","#49C6F1","#B197FC","#53D66F","#FF97AD","#FDD866"];function I(e){for(const t of e)if("一"<=t&&t<="龥")return t;return e[0]}},57046:function(e,t,a){"use strict";a.d(t,{I8:function(){return i},X1:function(){return r},mr:function(){return o}});a(26699);function o(e,t="yyyy-MM-dd"){var a=new Date(e),o={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return t}function i(e){const t=e.constructor===Array?[]:{};for(let a in e)e.hasOwnProperty(a)&&(e[a]&&"object"===typeof e[a]?(t[a]=e[a].constructor===Array?[]:{},t[a]=i(e[a])):t[a]=e[a]);return t}function r(e,t,a){const o=e.target.value,i=/^[1-9]\d*$/;e.target.value=i.test(o)?o:"",t[a]=i.test(o)?o:""}},58496:function(e,t,a){"use strict";a.d(t,{Ds:function(){return r},Io:function(){return n},cV:function(){return s},gT:function(){return o}});const o=async()=>await fetch("/city.json").then((e=>e.json()));function i(e){const{id:t,name:a,children:o}=e;return[{id:t,name:a},...o??[]]}const r=e=>e.flatMap(i).flatMap(i),n=(e,t)=>e.map((e=>t.find((t=>t.name===e))?.id??"")),s=(e,t)=>e.map((e=>t.find((t=>t.id===e))?.name??""))},20713:function(e,t,a){e.exports=a(70680)(52703)}}]);