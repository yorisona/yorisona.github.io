(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5198],{95198:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return S}});var r=a(97434),i=a(64185),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"customer-dialog tg-dialog-vcenter-new",attrs:{visible:t.visible,width:"940px","custom-class":"competitor-add-dialog",title:"管理竞品店铺","close-on-click-modal":!1},on:{close:t.onClose},scopedSlots:t._u([{key:"footer",fn:function(){return[a("tg-button",{on:{click:t.onClose}},[t._v("取消")]),a("tg-button",{directives:[{name:"loading",rawName:"v-loading",value:t.postLoading,expression:"postLoading"}],attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"team-member-content"},[a("el-alert",{attrs:{title:"添加的店铺为竞品店铺名称",type:"warning","show-icon":"",closable:!1}}),t.shopList.length?a("div",{staticClass:"dialog-competitor-dialog"},[t._l(t.shopList,(function(e,r){return a("div",{key:r,staticClass:"shop-item-box"},[a("el-input",{staticClass:"shop-item",attrs:{size:"small",maxlength:"20",placeholder:"请输入店铺名称"},on:{blur:function(a){return t.onShopBlur(e,r)}},model:{value:e.shop_name,callback:function(a){t.$set(e,"shop_name","string"===typeof a?a.trim():a)},expression:"item.shop_name"}},[a("el-select",{staticStyle:{width:"104px"},attrs:{slot:"prepend",placeholder:"类型"},slot:"prepend",model:{value:e.style,callback:function(a){t.$set(e,"style",a)},expression:"item.style"}},[t._l(t.CompeteShopStyleOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),void 0!==e.style?a("tg-icon",{staticClass:"shop-item-select-prefix",attrs:{slot:"prefix",name:e.style===t.CompeteShopStyle.QuickFashion?"ico-icon_leixing_kuaishishang":e.style===t.CompeteShopStyle.LightLuxury?"ico-icon_leixing_qingshe":e.style===t.CompeteShopStyle.Sports?"ico-icon_leixing_yundong":e.style===t.CompeteShopStyle.Other?"ico-icon_leixing_qita":""},slot:"prefix"}):t._e()],2)],1),a("tg-icon",{staticClass:"close",attrs:{name:"ico-btn-delete"},on:{click:function(e){return t.deleteShop(r)}}})],1)})),a("div",{staticClass:"shop-item-box"},[a("tg-button",{attrs:{icon:"ico-btn-add",type:"primary",size:"small"},on:{click:t.addShop}},[t._v("新增竞品")])],1)],2):a("div",[a("div",{staticClass:"dialog-competitor-dialog"},[a("div",{staticClass:"shop-item"},[a("tg-button",{attrs:{icon:"ico-btn-add",type:"primary",size:"small"},on:{click:t.addShop}},[t._v("新增竞品")])],1)]),a("div",{staticClass:"empty-container-cctv"},[a("empty-common",{attrs:{"detial-text":"暂无竞品店铺"}})],1)])],1)])},o=[],s=a(99575),l=a(59063),c=(0,r.defineComponent)({setup(t,e){const a=()=>{!0===i.value&&e.emit("close",g.value),c.value=!1},i=(0,r.ref)(!1),n=(0,r.ref)(!1),o=async()=>{if(g.value.length>=30)return void e.root.$message.warning("店铺数量不能超过30个");let t=!1;for(let e=0;e<g.value.length;e++){const a=g.value[e];if(""===a.shop_name.replace(/\s/g,"")){t=!0;break}if(null===a.style||void 0===a.style){t=!0;break}}if(t)return void e.root.$message.warning("店铺类型和名称必须填写");n.value=!0;const{data:{success:a}}=await(0,s.Cb)(g.value);a?(e.root.$message.success("添加成功"),i.value=!0):e.root.$message.error("添加失败"),n.value=!1,c.value=!1},c=(0,r.ref)(!1),u=(0,r.ref)(!1),p=()=>{if(g.value.length>0){const t=g.value[g.value.length-1];if(null===t.style||void 0===t.style)return void e.root.$message.warning("必须选择类型");if(""===t.shop_name.replace(/\s/g,""))return void e.root.$message.warning("必须填写店铺名称");if(g.value.length>=30)return void e.root.$message.warning("最多只能30个店铺")}g.value.push({shop_name:"",style:void 0})},m=(t,e)=>{if(e!==g.value.length-1||""!==t.shop_name.replace(/\s/g,"")||null!==t.style&&void 0!==t.style){for(let a=0;a<g.value.length;a++)if(a!==e&&t.shop_name===g.value[a].shop_name){t.shop_name="";break}}else h(e)},d=(0,r.ref)(""),h=t=>{g.value.splice(t,1)},g=(0,r.ref)([]),v=t=>{const e=t=>"string"!==typeof t[0];0===t.length?g.value=[]:e(t)?g.value=t:g.value=t.map((t=>({shop_name:t}))),i.value=!1,c.value=!0};return{onClose:a,onSave:o,addShop:p,currentName:d,postLoading:n,shopList:g,visible:c,show:v,deleteShop:h,addShopFlag:u,onShopBlur:m,CompeteShopStyleOptions:l.md,CompeteShopStyle:l.b_}}}),u=c,p=a(1001),m=(0,p.Z)(u,n,o,!1,null,null,null),d=m.exports,h=a(6933),g=a.n(h),v=a(45781),y=a(24643),f=a(62214);const{formatPriceFormYuan:_}=v.Z;var b,x,w=(0,r.defineComponent)({components:{competitorDialog:d,"line-charts":f.Z},setup(t,e){const a=(0,r.ref)(1),n=[],o=(0,r.ref)([]),s=(0,r.computed)((()=>{if("全部"!==x.value.shop_name&&u.value.shop_name)return u.value.shop_name})),{loading:l,getData:c,categoryParams:u,shopList:p,categoryData:m,getShopData:d,total_gmv:h,total_sale_count:v}=(0,i.b5)(e),{loading:f,getData:b,cummaryParams:x,summaryData:w,summaryTotal:F}=(0,i.yF)(e),C=(t,e)=>{const a={style:u.value.style,...t};return b(a,e)},S=(0,i.mU)(),D=()=>{const t=[];return t[0]="合计",t[1]="",t[2]=null===h.value?"":_(h.value,2,!1),t[3]=null===v.value?"":(0,y.Y4)(v.value,0,".",","),t[4]="",t[5]="",t},A=()=>{x.value.page_num=1,C(x.value,a.value)},k=async()=>{u.value.start_date=o.value[0],u.value.end_date=o.value[1],await c(u.value),w.value=[],F.value=0,x.value.page_num=1,x.value.shop_name=s.value,x.value.start_date=u.value.start_date,x.value.end_date=u.value.end_date,C(x.value,a.value)},Y=()=>{(0,i.KY)(u.value,"/api/shop_live/export_douyin_competitive_item_categories")},$=()=>{const t=1===a.value?"/api/shop_live/export_douyin_competitive_items_total":"/api/shop_live/export_douyin_competitive_items";(0,i.KY)({style:u.value.style,...x.value},t)},L=()=>{const t=g()().add(-30,"days").format("YYYY-MM-DD"),a=g()().format("YYYY-MM-DD");o.value=[t,a],u.value.start_date=t,u.value.end_date=a,u.value.shop_name=void 0,u.value.style=void 0,u.value.sort=void 0,e.refs["tableCategoryRef"].clearSort(),w.value=[],F.value=0,x.value.page_num=1,u.value.sort=void 0,e.refs["tableSummaryRef"].clearSort(),c(u.value)},P=()=>{e.refs.competitorDialogRef.show(JSON.parse(JSON.stringify(p.value)))},I=t=>{p.value=t},B=t=>{const e=x.value.item_cat;e===t.item_cat?x.value.item_cat=void 0:x.value.item_cat=t.item_cat,x.value.page_num=1,x.value.shop_name=s.value,x.value.start_date=u.value.start_date,x.value.end_date=u.value.end_date,C(x.value,a.value)},N=(t,e)=>{if(x.value.page_num=1,null===e)x.value.sort=void 0;else if("ascending"===e)x.value.sort=`${t}`;else{if("descending"!==e)return void console.log("未知",e);x.value.sort=`${t}_desc`}C(x.value,a.value)};return(0,r.onMounted)((()=>{o.value=[u.value.start_date,u.value.end_date],d(),k()})),{categoryParams:u,shopList:p,radioChange:A,ExportList:i.KY,exportSummary:$,timeline:S,exportCategory:Y,cummaryParams:x,summaryTotal:F,sLoading:f,summaryData:w,showDialog:P,dialogClose:I,sgetData:C,radio:a,loading:l,categoryData:m,categoryRowClick:B,columns:n,getData:c,getSummaries:D,search:k,curDate:o,reset:L,onSortChange:N,shopName:s}},render(){const t=arguments[0],e=this.categoryData.length>0,a=(0,i.YV)(e),r=this.summaryData.length>0,n=(0,i._O)(r,(t=>{this.timeline.queryCategory({shop_name:this.categoryParams.shop_name,item_id:t.item_id})}));return t("div",{class:"data-center-competitor"},[t("div",{class:"competitor-form"},[t("el-form",{class:"filter-form flex-form",attrs:{inline:!0,"label-width":"70px",size:"small"}},[t("el-form-item",{attrs:{label:"竞品店铺风格：",prop:"style","label-width":"110"}},[t("el-select",{on:{change:()=>{this.categoryParams.shop_name=void 0}},model:{value:this.categoryParams.style,callback:t=>{this.$set(this.categoryParams,"style",t)}}},[t("el-option",{attrs:{label:"全部",value:void 0}}),l.md.map((e=>t("el-option",{attrs:{label:e.label,value:e.value},key:e.value})))])]),t("el-form-item",{attrs:{label:"竞品账号：",prop:""}},[t("el-select",{attrs:{filterable:!0,placeholder:"全部"},model:{value:this.categoryParams.shop_name,callback:t=>{this.$set(this.categoryParams,"shop_name",t)}}},[t("el-option",{attrs:{label:"全部",value:void 0}}),this.shopList.filter((t=>void 0===this.categoryParams.style||t.style===this.categoryParams.style)).map(((e,a)=>t("el-option",{attrs:{label:e.shop_name,value:e.shop_name},key:a})))])]),t("el-form-item",{attrs:{label:"日期：","label-width":"42px"}},[t("el-date-picker",{style:"width: 240px",attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd",clearable:!1},model:{value:this.curDate,callback:t=>{this.curDate=t}}})]),t("el-form-item",[t("tg-button",{attrs:{type:"primary"},on:{click:this.search}},["查询"]),t("tg-button",{class:"mgl-12",on:{click:this.reset}},["重置"])])])]),t("div",{class:"competitor-main"},[t("div",{class:"competitor-category"},[t("div",{class:"action-btn"},[t("div",{style:"display:flex;alian-item:center"},[t("tg-button",{attrs:{type:"default",icon:"ico-btn-export",download:!0},on:{click:this.exportCategory}},["导出类目数据"]),t("el-button",{class:"text",attrs:{type:"text"},on:{click:this.showDialog}},["管理竞品店铺"])]),t("div",[t("tg-table",{ref:"tableCategoryRef",attrs:{"highlight-current-row":!0,"show-summary":!0,"summary-method":this.getSummaries,height:375,"row-style":{cursor:"pointer"},columns:a,data:this.categoryData,stripe:!0,sort:this.categorySort},directives:[{name:"loading",value:this.loading}],on:{"row-click":this.categoryRowClick,"sort-change":t=>{let e=t.prop;if(e=e.replace(/_str$/,""),null===t.order)this.categoryParams.sort=void 0;else if("ascending"===t.order)this.categoryParams.sort=`${e}`;else{if("descending"!==t.order)return void console.log("未知",t.order);this.categoryParams.sort=`${e}_desc`}this.search()}},scopedSlots:{empty:()=>t("div",{style:"position: static;"},[t("empty-common",{attrs:{"detial-text":"暂无数据，快去管理竞品店铺新增吧~"}})])}})])])]),t("div",{class:"competitor-export"},[t("div",{class:"action-btn"},[t("el-radio-group",{on:{change:this.radioChange},model:{value:this.radio,callback:t=>{this.radio=t}}},[t("el-radio",{attrs:{label:1}},["汇总查看"]),t("el-radio",{attrs:{label:2}},["按日查看明细"])]),t("tg-button",{attrs:{type:"default",icon:"ico-btn-export",download:!0},on:{click:this.exportSummary}},["导出商品数据"])]),t("div",[t("tg-table",{ref:"tableSummaryRef",attrs:{"highlight-current-row":!0,stripe:!0,columns:1===this.radio?n:i.CO,data:this.summaryData,sortable:"custom"},style:"padding-bottom: 50px;",directives:[{name:"loading",value:this.sLoading}],scopedSlots:{empty:()=>t("div",{style:"position: static;"},[t("empty-common",{attrs:{"detial-text":"暂无数据，快去管理竞品店铺新增吧~"}})])},on:{"sort-change":t=>{this.onSortChange(t.prop,t.order)}}}),this.summaryTotal>0&&t("div",{class:"competitor-page"},[t("el-pagination",{attrs:{className:"mgt-10","current-page":this.cummaryParams.page_num,"page-sizes":[10,20,50,100],pageSize:this.cummaryParams.num,total:this.summaryTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":t=>{this.cummaryParams.page_num=t,this.sgetData(this.cummaryParams,this.radio)},"size-change":t=>{this.cummaryParams.num=t,this.sgetData(this.cummaryParams,this.radio)}}})])])])]),t("competitor-dialog",{ref:"competitorDialogRef",on:{close:this.dialogClose}}),t("el-dialog",{class:"tg-dialog-classic el-dialog-center-rewrite",attrs:{width:"1100px","custom-class":"competitor-dialog",visible:this.timeline.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1,title:this.timeline.title},on:{close:this.timeline.onClose}},[t("div",{class:"charts-box",style:"padding: 40px 0;"},[t("line-charts",{attrs:{className:"line-chart",date:this.timeline.charts.data,loading:this.timeline.loading,list:this.timeline.charts.series,unit:" "}})])])])}}),F=w,C=(0,p.Z)(F,b,x,!1,null,"75c5ff26",null),S=C.exports},32200:function(t,e,a){"use strict";a.d(e,{Z:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",staticClass:"chart"})},i=[],n=a(4096),o={props:{options:{type:Object,default:()=>({})},currentIndex:{type:Number,default:-1}},watch:{options:{handler(t){this.updateOptions(t)},deep:!0},currentIndex:{handler:function(t){-1!==t&&this.upAxisPointer()},deep:!0}},mounted(){const{resize:t,...e}=this.$listeners,a=this.$refs.chart;this.chart=n.init(a),Object.keys(e).forEach((t=>{this.chart.on(t,((...e)=>this.$emit(t,this.chart,...e)))})),this.updateOptions(this.options),window.addEventListener("resize",this.resize),this.chart.on("click",this.clickFunc)},destroyed(){window.removeEventListener("resize",this.resize),this.chart&&(this.chart.dispose(),this.chart=null)},methods:{resize(...t){this.chart.resize(),this.$emit("resize",[this.chart,...t])},updateOptions(t){null!==t&&void 0!==t&&this.chart.setOption(t,!0)},clickFunc(t){this.$emit("selectClick",t)},upAxisPointer(){let t={currentIndex:this.currentIndex},e=this.options.series[3].data.length;t.currentIndex>0&&this.chart.dispatchAction({type:"downplay",seriesIndex:3,dataIndex:t.currentIndex-1}),t.currentIndex=t.currentIndex%e,this.chart.dispatchAction({type:"highlight",seriesIndex:3,dataIndex:t.currentIndex}),this.chart.dispatchAction({type:"showTip",seriesIndex:3,dataIndex:t.currentIndex})}}},s=o,l=a(1001),c=(0,l.Z)(s,r,i,!1,null,"67d5f011",null),u=c.exports},99197:function(t,e,a){"use strict";a.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"empty-chart",staticStyle:{"margin-top":"20px"}},[a("empty-common",{attrs:{"detial-text":"暂无数据","img-height":100,"img-width":150}})],1)},i=[],n=a(1001),o={},s=(0,n.Z)(o,r,i,!1,null,"1c4271b8",null),l=s.exports},62214:function(t,e,a){"use strict";a.d(e,{Z:function(){return g}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"314px",width:"100%"}},[t.date.length>0?a("base-echarts",{attrs:{options:t.baseOptions}}):a("Empty")],1)},i=[],n=a(32200),o=a(45781),s=a(99197),l=a(8136);const{tranNumber:c}=o.Z,u=(t,e)=>{const a=t-0;return 0===e||isNaN(a)?t:a.toFixed(2)};var p={name:"BaseLine",components:{BaseEcharts:n.Z,Empty:s.Z},props:{loading:{type:Boolean,default:!0},date:{type:Array,default:()=>[]},list:{type:Array,default:()=>[]},legend:{type:Boolean,default:()=>!0},color:{type:Array},percentage:{type:Boolean},unit:{type:String,default:"%"}},data(){return{baseOptions:{grid:{top:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:0,formatter:t=>{const e=15;let a="",r=Math.round(t.length/e)+1;for(let n=0;n<t.length;){const e=1===n||2===n?this.unit:"";a+='<div style="display: flex; line-height: 24px;padding: 0 15px;color: #606974;font-size: 12px;font-weight: normal">';for(let i=0;i<r;i++){if(n>=t.length)continue;const r=void 0===t[n].value||null===t[n].value;a+=`<div style="display: flex;align-items: center;margin-right: 10px;flex: 1;">${t[n].marker}<span>${(0,l.bI)(t[n].seriesName,15)}</span>\n                  <span style="padding-left: 18px;">${r?"--":u(c(t[n].value),n)}${r?"":e}</span></div>`,n+=1}a+="</div>"}const i=`<div style="padding-bottom: 10px">\n              <p style="padding:10px;">\n                <span>${t[0].name}</span>\n                <span style="float:right;"></span>\n              </p>\n              ${a}\n            </div>`;return i},textStyle:{color:"#343F4C",fontSize:14,fontWeight:"bold"},extraCssText:"box-shadow: 1px 2px 8px 0px  rgba(0, 0, 0, 0.26);"},legend:{show:this.legend,bottom:0},xAxis:{type:"category",data:[],axisLine:{lineStyle:{color:"rgba(52,63,76,0.30)"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",fontSize:11},splitLine:{show:!1}},color:this.color?this.color:l.nA,yAxis:[{type:"value",scale:!0,nameTextStyle:{color:"#666",fontSize:14},min:0,splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...t)=>{const e=c(...t);return!0===this.percentage?`${e}%`:e}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}},{type:"value",scale:!0,position:"right",nameTextStyle:{color:"#666",fontSize:14},min:0,splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...t)=>{const e=c(...t);return`${e}${this.unit}`}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}}],series:[]}}},created(){this.init()},watch:{date:{handler(){this.init()},deep:!0},list:{handler(){this.init()},deep:!0}},methods:{init(){const t=JSON.parse(JSON.stringify(this.list));this.baseOptions.xAxis.data=this.date,this.baseOptions.series=t}}},m=p,d=a(1001),h=(0,d.Z)(m,r,i,!1,null,null,null),g=h.exports},59063:function(t,e,a){"use strict";var r;a.d(e,{b_:function(){return r},md:function(){return i}}),function(t){t[t["QuickFashion"]=2]="QuickFashion",t[t["LightLuxury"]=1]="LightLuxury",t[t["Sports"]=3]="Sports",t[t["Other"]=4]="Other"}(r||(r={}));const i=[{label:"轻奢",value:r.LightLuxury},{label:"快时尚",value:r.QuickFashion},{label:"运动",value:r.Sports},{label:"其他",value:r.Other}];var n;(function(t){t[t["Normal"]=0]="Normal",t[t["Leading"]=1]="Leading",t[t["Lagging"]=2]="Lagging"})(n||(n={}));n.Normal,n.Leading,n.Lagging;var o;(function(t){t[t["Spring"]=1]="Spring",t[t["Summer"]=2]="Summer",t[t["Autumn"]=3]="Autumn",t[t["Winter"]=4]="Winter"})(o||(o={}));o.Spring,o.Summer,o.Autumn,o.Winter},64185:function(t,e,a){"use strict";a.d(e,{CO:function(){return f},KY:function(){return g},YV:function(){return v},_O:function(){return y},b5:function(){return x},mU:function(){return b},yF:function(){return _}});var r=a(97434),i=a(99575),n=a(45781),o=a(24643),s=a(42963),l=a(74750),c=a(6933),u=a.n(c),p=a(59760),m=a(59063),d=a(61282);const{formatPriceFormYuan:h}=n.Z;function g(t,e){const a=s.stringify(t),r=(0,l.LP)();window.open(`https://data.goumee.com${e}?${a}&Authorization=${r}`)}const v=t=>{const e=[{label:"竞品店铺风格",prop:"style",width:160,formatter:t=>{switch(t.style){case m.b_.QuickFashion:return"快时尚";case m.b_.LightLuxury:return"轻奢";case m.b_.Sports:return"运动";case m.b_.Other:return"其他";default:return"未知分类"}}},{label:"类目",prop:"item_cat",minWidth:220,formatter:t=>{if(!t.item_cat||t.item_cat.length<16)return t.item_cat||"--";const{folded_text:e}=(0,d.zb)(t.item_cat,15);return(0,r.h)("el-popover",{props:{placement:"top",trigger:"hover",effect:"light",content:t.item_cat},scopedSlots:{reference:()=>(0,r.h)("span",{},e)}})}},{label:"销售额 (元)",prop:"gmv",align:"right",minWidth:160,headerAlign:"right",sortable:!!t&&"custom",dataType:"",formatter:t=>t.gmv_str},{label:"销量",prop:"sale_count",align:"right",minWidth:120,headerAlign:"right",sortable:!!t&&"custom",formatter:t=>t.sale_count_str},{label:"浏览量",prop:"watch_count_str",align:"right",minWidth:120,headerAlign:"right",sortable:!!t&&"custom"},{label:"转化率",prop:"pay_rate_str",align:"right",minWidth:120,headerAlign:"right",sortable:!!t&&"custom",dataType:{suffix:"%"}}];return e},y=(t,e)=>{const a=[{label:"商品信息",minWidth:280,formatter:t=>(0,r.h)("div",{class:"competitor-goods-info"},[(0,r.h)("el-image",{attrs:{src:t.item_image,fit:"contain"},style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id)}},class:"goods-image"},[(0,r.h)("img",{slot:"error",attrs:{style:"width: 100%;height: 100%;",src:p}})]),(0,r.h)("div",{class:"goods-info"},[(0,r.h)("p",void 0,t.item_id),(0,r.h)("el-tooltip",{attrs:{effect:"light",content:t.item_title,placement:"top-start"}},[(0,r.h)("div",{attrs:{title:t.item_title},class:"goods-name two-omit-item"},[(0,r.h)("a",{attrs:{target:"_blank",href:"https://haohuo.jinritemai.com/views/product/item2?id="+t.item_id}},t.item_title)])])])])},{label:"所属类目",prop:"item_cat",minWidth:134,align:"center",headerAlign:"center"},{label:"销量",minWidth:134,align:"right",headerAlign:"right",sortable:!!t&&"custom",prop:"sale_count",formatter(t){return null!==t.sale_count?(0,o.Y4)(Number(t.sale_count),0,".",","):"--"}},{label:"销售额 (元)",minWidth:134,align:"right",headerAlign:"right",sortable:!!t&&"custom",prop:"gmv",formatter(t){return null!==t.gmv?h(t.gmv,2,!1):"--"}},{label:"浏览量",minWidth:134,align:"right",headerAlign:"right",prop:"watch_count",sortable:!!t&&"custom",formatter(t){return null!==t.watch_count?(0,o.Y4)(Number(t.watch_count),0,".",","):"--"}},{label:"转化率",align:"center",minWidth:98,headerAlign:"center",sortable:!!t&&"custom",prop:"pay_rate",formatter(t){return null!==t.pay_rate?t.pay_rate+"%":"--"}},{label:"吊牌价 (元)",align:"right",minWidth:110,headerAlign:"right",sortable:!!t&&"custom",prop:"market_price",formatter(t){return null!==t.market_price?h(t.market_price,2,!1):"--"}},{label:"销售价 (元)",align:"right",minWidth:110,headerAlign:"right",sortable:!!t&&"custom",prop:"discount_price",formatter(t){return null!==t.discount_price?h(t.discount_price,2,!1):"--"}},{label:"销售趋势",minWidth:134,align:"center",headerAlign:"center",formatter(t){return(0,r.h)("a",{class:"trend",on:{click:()=>e(t)}},"查看")}}];return a},f=[{label:"商品信息",minWidth:270,formatter:t=>(0,r.h)("div",{class:"competitor-goods-info"},[(0,r.h)("el-image",{attrs:{src:t.item_image,fit:"contain"},class:"goods-image"}),(0,r.h)("div",{class:"goods-info"},[(0,r.h)("p",void 0,t.item_id),(0,r.h)("el-tooltip",{attrs:{effect:"light",content:t.item_title,placement:"top-start"}},[(0,r.h)("div",{attrs:{title:t.item_title},class:"goods-name two-omit-item"},t.item_title)])])])},{label:"所属类目",prop:"item_cat",minWidth:134,align:"center",headerAlign:"center"},{label:"日期",minWidth:134,prop:"date",align:"center",headerAlign:"center"},{label:"销量",minWidth:134,align:"right",headerAlign:"right",prop:"sale_count",sortable:"custom",formatter(t){return null!==t.sale_count?(0,o.Y4)(Number(t.sale_count),0,".",","):"--"}},{label:"销售额 (元)",minWidth:134,align:"right",headerAlign:"right",prop:"gmv",sortable:"custom",formatter(t){return null!==t.gmv?h(t.gmv,2,!1):"--"}},{label:"浏览量",minWidth:134,align:"right",headerAlign:"right",prop:"watch_count",sortable:"custom",formatter(t){return null!==t.watch_count?(0,o.Y4)(Number(t.watch_count),0,".",","):"--"}},{label:"转化率",align:"center",minWidth:88,headerAlign:"center",sortable:"custom",prop:"pay_rate",formatter(t){return null!==t.pay_rate?t.pay_rate+"%":"--"}},{label:"吊牌价 (元)",align:"right",minWidth:110,headerAlign:"right",sortable:"custom",prop:"market_price",formatter(t){return null!==t.market_price?h(t.market_price,2,!1):"--"}},{label:"销售价 (元)",align:"right",minWidth:110,headerAlign:"right",sortable:"custom",prop:"discount_price",formatter(t){return null!==t.discount_price?h(t.discount_price,2,!1):"--"}}],_=t=>{const e=(0,r.reactive)({loading:!1,cummaryParams:{shop_name:void 0,start_date:void 0,end_date:void 0,item_cat:void 0,page_num:1,num:10,sort:void 0},summaryTotal:0,summaryData:[]}),a=async(a,r)=>{const n={...a};n.shop_name="全部"===n.shop_name?void 0:n.shop_name,e.loading=!0;const o=1===r?i.Av:i.Qd;try{const{data:{data:t}}=await o(n);e.summaryData=t.list,e.summaryTotal=t.total}catch(s){console.error(s),t.root.$message.error("查询失败")}finally{e.loading=!1}};return{...(0,r.toRefs)(e),getData:a}},b=()=>{const t=(0,r.ref)(!1),e=(0,r.ref)(!1),a=(0,r.ref)({data:[],series:[]}),n=(0,r.ref)(""),o=()=>{e.value=!1},s=r=>{n.value="抖音销量/浏览量趋势",a.value={data:[],series:[]},e.value=!0,t.value=!0,(0,i.hU)(r).then((e=>{const r=e.data.data,i=r.map((t=>t.date));a.value={data:i,series:[{smooth:!0,showSymbol:!0,type:"line",name:"销量",data:r.map((t=>t.sale_count))},{smooth:!0,showSymbol:!0,type:"line",name:"浏览量",yAxisIndex:1,data:r.map((t=>t.watch_count))}]},t.value=!1}))};return(0,r.reactive)({loading:t,visible:e,charts:a,queryCategory:s,onClose:o,title:n})},x=t=>{const e=u()().add(-30,"days").format("YYYY-MM-DD"),a=u()().format("YYYY-MM-DD"),n=(0,r.reactive)({loading:!1,categoryParams:{shop_name:void 0,start_date:e,end_date:a,style:void 0},categoryData:[],shopList:[],total_gmv:0,total_sale_count:0}),s=async e=>{const a={...e};n.loading=!0;try{const{data:{data:t}}=await(0,i.Hk)(a);t.list.forEach((t=>{t.pay_rate_str=t.pay_rate,t.gmv_str=h(t.gmv,2,!1),t.sale_count_str=null!==t.sale_count?(0,o.Y4)(Number(t.sale_count),0,".",","):null,t.watch_count_str=null!==t.watch_count?(0,o.Y4)(Number(t.watch_count),0,".",","):null})),n.total_gmv=t.total_gmv,n.total_sale_count=t.total_sale_count,n.categoryData=t.list}catch(r){t.root.$message.error("查询失败")}finally{n.loading=!1}},l=async()=>{try{const{data:{data:t}}=await(0,i.hx)();n.shopList=[...t]}catch(e){t.root.$message.error("查询失败")}};return{...(0,r.toRefs)(n),getData:s,getShopData:l}}},8136:function(t,e,a){"use strict";a.d(e,{AR:function(){return D},BG:function(){return F},Cl:function(){return x},D$:function(){return s},EI:function(){return p},Hx:function(){return n},LY:function(){return c},Nv:function(){return l},Ps:function(){return $},Rd:function(){return S},ZC:function(){return d},_t:function(){return y},bI:function(){return b},g9:function(){return v},hy:function(){return m},jh:function(){return k},mB:function(){return f},mx:function(){return Y},nA:function(){return A},q0:function(){return C},sc:function(){return w},ug:function(){return _},us:function(){return g},vJ:function(){return h},wA:function(){return o},xF:function(){return u}});var r=a(20713),i=a.n(r);function n(t,e){const a=t.display_type;switch(a){case 0:return"混播";case 1:return"专场"}}const o=["综合","美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值"],s=["美妆","生活","服饰","美食","母婴","数码","家装","健康","宠物","时尚","配饰","家电","测评","旅行","运动","摄影","情感","汽车","搞笑","教育","财经","萌娃","文化","影视","娱乐","游戏","海外","才艺","二次元","高颜值","行政采购"];function l({category:t}){return 0===t?"无":o[t]}function c(t,e){const a=t.sales_price_period;switch(a){case 0:return"0 ~ 100";case 1:return"100 ~ 200";case 2:return"200以上"}}function u(t,e="YYYY-MM-DD"){return i()(t).format(e)}function p(t,e="YYYY-MM-DD hh:mm:ss"){return i()(t+"+0800").format(e)}function m(t,e){return i()(t+"+0800").format(e||"YYYY-MM-DD")}function d(t){let e=parseInt(t,10),a=0,r=0;e>=60&&(a=parseInt(e/60,10),e=parseInt(e%60,10),a>=60&&(r=parseInt(a/60,10),a=parseInt(a%60,10)));let i=""+(parseInt(e,10)<10?"0"+parseInt(e,10):parseInt(e,10));return i=(parseInt(a,10)<10?"0"+parseInt(a,10):parseInt(a,10))+":"+i,i=(parseInt(r,10)<10?"0"+parseInt(r,10):parseInt(r,10))+":"+i,i}function h(t){const e=t.is_presell;switch(e){case-1:return"未录入";case 1:return"预售";case 0:return"非预售";case 2:return"预热"}}function g(t){const e=t.is_display;switch(e){case-1:return"未录入";case 2:return"已出单";case 1:return"未出单"}}function v(t){const e=t.duration;switch(e){case-1:return"未录入";case 0:return"5 ~ 10分钟";case 1:return"10 ~ 15分钟";case 2:return"15 ~ 20分钟";case 3:return"0 ~ 5分钟";case 4:return"20分钟以上"}}function y(t){const e=t.display_period;switch(e){case-1:return"未录入";case 0:return"白天";case 1:return"晚上"}}function f(t){const e=t.shop_type;switch(e){case 0:return"无";case 1:return"淘宝店";case 2:return"天猫店";case 3:return"抖音店";default:return"--"}}function _(t){const e=t.company_type;switch(e){case 0:return"无";case 1:return"同行机构";case 2:return"广告公司";case 3:return"品牌TP";case 4:return"直客"}}function b(t,e){const a=/[^\x00-\xff]/g;let r;if(t.replace(a,"**").length>e){r=Math.floor(e/2);for(let i=r,n=t.length;i<n;i++)if(t.substr(0,i).replace(a,"**").length>=e)return t.substr(0,i)}return t}const x=[{type:0,value:"全部"},{type:1,value:"普通客户"},{type:2,value:"重点客户"},{type:3,value:"战略客户"},{type:4,value:"KA客户"}],w=[{value:"全部",type:0},{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13}],F=[{value:"淘宝图文",type:9},{value:"小红书",type:1},{value:"微信公众号",type:2},{value:"新浪微博",type:3},{value:"淘宝短视频",type:10},{value:"抖音",type:4},{value:"快手",type:5},{value:"哔哩哔哩",type:6},{value:"淘宝直播",type:7},{value:"一直播",type:8},{value:"线下场地搭建",type:11},{value:"线下视觉设计",type:12},{value:"活动策划执行",type:13},{value:"行政采购",type:14}],C=[{value:3,text:"抖音店"},{value:1,text:"淘宝店"},{value:2,text:"天猫店"}],S=[{value:1,text:"同行机构"},{value:2,text:"广告公司"},{value:3,text:"品牌TP"},{value:4,text:"直客"}],D=[{type:0,value:"--"},{type:1,value:"同行机构"},{type:2,value:"广告公司"},{type:3,value:"品牌TP"},{type:4,value:"直客"}],A=["#D15CB4","#6090F0","#FF9C69","#59B6DF","#C673F0","#52CCC2","#F0737F","#6FCC66","#DBD26A","#9D73F0","#FAB36E","#A2D160","#D15CB4","#58B89F","#E06C9C","#8873F0","#FA9384","#C251A6","#486DB5","#C77A52","#4185A3","#9557B5","#3C968F","#B55760","#4F9149","#A19A4D","#7657B5","#BF8954","#759645","#964282","#3C7D6C","#A65073","#6556B3","#BF7065","#873874"],k=["#6090F0","#FF9C69","#52CCC2","#59B6DF","#C673F0","#D15CB4","#F0737F","#DBD26A","#FAB36E","#A2D160","#6FCC66","#58B89F","#8873F0","#FA9384","#9D73F0","#E06C9C","#C251A6"],Y=["#1E8DFF","#FFBF00","#10C0D3","#9273F8","#FE9C25","#00B942","#FFCD39","#FF829D","#00A3FF","#3AD08E","#F1DC2F","#845EF7","#FF7F00","#B3DC12","#009999","#2877FF","#D977F2","#FFC073","#768FF3","#81E5B1","#BAC8FF","#E599F8","#E7E275","#FF7E7E","#F7A0B8","#49C6F1","#B197FC","#53D66F","#FF97AD","#FDD866"];function $(t){for(const e of t)if("一"<=e&&e<="龥")return e;return t[0]}},45781:function(t,e,a){"use strict";var r=a(49187),i=a(8581),n=a(61282);const o=new r.ZP;e["Z"]={formatEmpty(t,e){return null===t||void 0===t||""===t||t instanceof Array&&t.length<=0?"--":void 0!==e?`${t}${e}`:t},formatTime(t){try{return null===t||void 0===t||""===t?"--":t.replace(/-/g,".")}catch(e){return t}},formatTimespan(t){try{if(null===t||void 0===t||""===t)return"--";const e=new Date;return e.setTime(1e3*t),(0,i.WU)(e,"YYYY.mm.dd")}catch(e){return t}},formatPrice(t,e=r.WL.Fen,a=!0){try{if(null===t||void 0===t||""===t)return"--";const r=o.format(o.parse(t,e));return a?`￥${r}`:r}catch(i){return t}},formatPriceFormYuan(t,e=2,a=!0){try{if(null===t||void 0===t||""===t)return"--";let r=t;return r=t>1e8?(t/1e8).toFixed(e)+"亿":t>1e4?(t/1e4).toFixed(e)+"w":(t-0).toFixed(e),a&&(r=`￥${r}`),r}catch(r){return t}},formatPriceToThousand(t,e=2,a=!0,r=!1){try{if(null===t||void 0===t||""===t)return"--";let i=t;return t>1e4?i=(t/1e4).toFixed(e)+"w":(i=(t-0).toFixed(e),r&&(i=(t-0).toFixed(0))),a&&(i=`￥${i}`),i}catch(i){return t}},formatPriceToThousandformatAmount(t,e=2,a=!0,r=!1){try{if(null===t||void 0===t||""===t)return"--";let i=t;return t>1e4?i=(0,n.dN)((t/1e4).toFixed(2),"None")+"w":(i=(0,n.dN)((t-0).toFixed(e),"None",0===e),r&&(i=(t-0).toFixed(0))),a&&(i=`￥${i}`),i}catch(i){return t}},tranNumber(t,e=2){if(null===t||void 0===t||""===t)return"--";if(!(t>=0))return t||"-";t+="";const a=t.toString(),r=a.split(".")[0],i=r.length;if(i<5)return a;if(i>8){const t=r.substring(r.length-8,r.length-8+e);return parseFloat(parseInt(r/1e8+"",10)+"."+t)+"亿"}if(i>4){const t=r.substring(r.length-4,r.length-4+e);return parseFloat(parseInt(r/1e4+"",10)+"."+t)+"w"}}}},4096:function(t,e,a){t.exports=a(70680)(12996)},20713:function(t,e,a){t.exports=a(70680)(52703)}}]);