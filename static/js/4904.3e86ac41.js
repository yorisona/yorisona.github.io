"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[4904],{44744:function(e,t,a){a.d(t,{Z:function(){return _}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"314px",width:"100%"}},[e.date.length>0?a("base-echarts",{staticStyle:{width:"680px",height:"314px"},attrs:{options:e.baseOptions}}):a("Empty")],1)},l=[],s=a(32200),i=a(99197),n=a(8136),r=a(45781);const{tranNumber:c}=r.Z,d=(e,t,a="")=>{if(void 0===e||null===e||""===e||"--"===e)return"--";const o=Math.abs(e-0);return isNaN(o)?e+a:0===t?o+a:o.toFixed(t)+a};var u={name:"index",components:{BaseEcharts:s.Z,Empty:i.Z},props:{loading:{type:Boolean,default:!0},date:{type:Array,default:()=>[]},list:{type:Array,default:()=>[]},legend:{type:Boolean,default:()=>!0},color:{type:Array},percentage:{type:Boolean},unit:{type:String,default:"%"}},data(){return{baseOptions:{grid:{top:30,left:10,right:30,bottom:40,containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:0,formatter:e=>{let t="";for(let o=0;o<3;o++){t+='<div style="display: flex; line-height: 24px;padding: 0 10px;color: #606974;font-size: 12px;font-weight: normal">',t+='<div style="display: flex;align-items: center;margin-right: 10px; flex: 1;">';const a=e[o].seriesName;let l=e[o].value>0?"ico-icon_tongyong_shangsheng_16_red":"ico-icon_tongyong_xiajiang_16_green";if(l=`<svg  aria-hidden="true" class="icon ${l}" style="color: rgb(196, 203, 210);"><use xlink:href="#${l}"></use></svg>`,"品牌销售额"===a||"大盘销售额"===a){const s=e.find((e=>e.seriesName===a+"_data"));t+=`${e[o].marker}<span>${(0,n.bI)(e[o].seriesName,15)}：</span>`,t+=`<span style="padding-left: 5px; font-weight: 600">${d(s?.value,o)} `,null!==s?.value&&void 0!==s?.value&&"--"!==s.value&&(t+=`(${l}${d(e[o].value,0,"%")})`),t+="</span>\n                  </div>"}else if("品牌对比涨幅"===e[o].seriesName){t+=`<span style="padding-left: 16px">${e[o].seriesName}：</span>`,void 0!==e[o].value&&null!==e[o].value&&"--"!==e[o].value?t+=`<span style="padding-left: 5px; font-weight: 600">${l}${d(c(e[o].value),0,"%")}</span>`:t+='<span style="padding-left: 5px; font-weight: 600">--</span>',t+="</div>",t+="</div>";break}t+="</div>"}const a=`<div style="padding-bottom: 10px">\n              <p style="padding:10px;">\n                <span>${e[0].name}</span>\n                <span style="float:right;"></span>\n              </p>\n              ${t}\n            </div>`;return a},textStyle:{color:"#343F4C",fontSize:14,fontWeight:"bold"},extraCssText:"box-shadow: 1px 2px 8px 0px  rgba(0, 0, 0, 0.26);"},legend:{show:this.legend,bottom:0,data:["品牌销售额","大盘销售额"]},xAxis:{type:"category",data:[],axisLine:{lineStyle:{color:"rgba(52,63,76,0.30)"},onZero:!1},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",fontSize:11},splitLine:{show:!1}},color:this.color?this.color:n.nA,yAxis:[{type:"value",name:"销售额涨幅%",nameLocation:"end",nameTextStyle:{color:"#606974",fontSize:12},splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...e)=>{const t=c(...e);return!0===this.percentage?`${t}%`:t}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}},{type:"value",show:!1,nameLocation:"end",nameTextStyle:{color:"#606974",fontSize:12},splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...e)=>{const t=c(...e);return!0===this.percentage?`${t}%`:t}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}}],series:[]}}},created(){this.init()},watch:{date:{handler(){this.init()},deep:!0},list:{handler(){this.init()},deep:!0}},methods:{init(){const e=JSON.parse(JSON.stringify(this.list));this.baseOptions.xAxis.data=this.date,this.baseOptions.series=e,this.baseOptions={...this.baseOptions}}}},p=u,m=a(1001),h=(0,m.Z)(p,o,l,!1,null,"2d1bd874",null),_=h.exports},92378:function(e,t,a){a.d(t,{Z:function(){return T}});var o=a(36568),l=a.n(o),s=a(97434),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:this.styles||"height: 300px; width: 100%"},[e.pieData.length>0?a("base-echarts",{staticStyle:{height:"233px",width:"285px"},style:{height:this.pieHeight+"px",width:this.pieWidth+"px"},attrs:{options:e.baseOptions}}):a("Empty")],1)},n=[],r=a(32200),c=a(99197),d=a(8136),u=a(45781);const{tranNumber:p}=u.Z;var m={name:"BasePie",components:{BaseEcharts:r.Z,Empty:c.Z},props:{pieHeight:{type:Number,default:233},pieWidth:{type:Number,default:285},title:{type:Object,default:()=>({text:""})},loading:{type:Boolean,default:!0},pieData:{type:Array,default:()=>[]},formatterModal:{type:Function,default:null},styles:{type:String,default:""},legend:{type:Object,default:()=>({icon:"circle",itemWidth:10,itemHeight:10,type:"scroll",bottom:-5})},seriesOpt:{type:Object,default:()=>({radius:["45%","65%"]})}},data(){const e=this.legend;return{baseOptions:{title:this.title,tooltip:{trigger:"item",backgroundColor:"white",formatter:e=>{const t=`<div class="tooltip-wrapper">\n                          <p class="p-row tooltip-title">${e.marker}${e.name}</p>\n                          <p class="p-row">\n                            <span>数值：</span>\n                            <span class="left">${p(e.value)}</span>\n                          </p>\n                          <p class="p-row">\n                            <span>占比：</span>\n                            <span class="left"><span>${e.percent}%</span></span>\n                          </p>\n                        <div>`;return t}},legend:e,color:d.jh,series:[{name:this.pieData?this.pieData.map((e=>e.name)):[],type:"pie",selectedMode:"single",avoidLabelOverlap:!0,bottom:-20,label:{align:"left",normal:{textStyle:{fontSize:12,color:"#606974"}}},data:this.pieData?this.pieData.map((e=>({name:e.name,value:e.value}))):[],...this.seriesOpt}]}}},watch:{pieData:{handler(){this.init()},deep:!0}},methods:{init(){this.baseOptions={...this.baseOptions,series:[{name:this.pieData?this.pieData.map((e=>e.name)):[],type:"pie",selectedMode:"single",avoidLabelOverlap:!0,label:{align:"left",normal:{textStyle:{fontSize:12,color:"#606974"}}},data:this.pieData?this.pieData.map((e=>({name:e.name,value:e.value}))):[],...this.seriesOpt}]}}}},h=m,_=a(1001),g=(0,_.Z)(h,i,n,!1,null,null,null),v=g.exports,f=a(99575),b=a(64236);const y=e=>e.toFixed(2)-0,w=e=>function(t){return`<div class="tooltip-wrapper">\n                      <p class="p-row">\n                        <span class="right">${t.name}</span>\n                      </p>\n                      <p class="p-row">\n                        ${t.marker}\n                        <span>${e}：</span>\n                        <span>${t.value}</span>\n                        <span style="padding-left: 12px">${t.percent}%</span>\n                      </p>\n                    <div>`},x={bottom:"-2%",left:"center",type:"scroll",icon:"circle"},k={radius:["30%","45%"],label:{show:!1}};var S,C,D=(0,s.defineComponent)({components:{pieEcharts:v},props:{visible:{type:Boolean,default:!1},catId:{type:Number,default:0}},setup(e,t){const a=(0,s.ref)(!0),o=(0,s.inject)("searchParams"),l=(0,s.ref)(!1),i=(0,s.ref)([]),n=(0,s.ref)([]),r=(0,s.ref)([{label:"价格带",prop:"name",align:"center",headerAlign:"center"},{label:"销量",prop:"value",align:"center",headerAlign:"center"},{label:"占比",prop:"ratio",align:"center",width:90,headerAlign:"center"}]),c=(0,s.ref)([{label:"价格带",prop:"name",align:"center",headerAlign:"center"},{label:"销售额",prop:"value",align:"center",headerAlign:"center"},{label:"占比",prop:"ratio",align:"center",width:90,headerAlign:"center"}]),d=async a=>{l.value=!0;const[{data:o}]=await(0,b.Dc)(500,(0,f.OZ)({...a,cat_id:e.catId}));if(l.value=!1,o.success){const e=o.data.pie_chart,t=e.reduce(((e,t)=>t.gmv+e),0),a=e.reduce(((e,t)=>t.sale_count+e),0);i.value=e.map(((a,o)=>{const l={name:"",value:y(a.gmv/100),ratio:t>0?(a.gmv/t*100).toFixed(2)+"%":"0"};return o<=0&&0===a.min_price?l.name=y(a.max_price/100)+"以下":o!==e.length-1||a.max_price?l.name="￥"+y(a.min_price/100)+"-￥"+y(a.max_price/100):l.name=y(a.min_price/100)+"以上",l})),n.value=e.map(((t,o)=>{const l={name:"",value:t.sale_count,ratio:a>0?(t.sale_count/a*100).toFixed(2)+"%":"0"};return o<=0&&0===t.min_price?l.name=y(t.max_price/100)+"以下":o!==e.length-1||t.max_price?l.name="￥"+y(t.min_price/100)+"-￥"+y(t.max_price/100):l.name=y(t.min_price/100)+"以上",l}))}else t.root.$message({type:"warning",message:o.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return(0,s.onBeforeMount)((()=>{o.value.project_id&&e.visible&&d(o.value)})),(0,s.watch)((()=>e.visible),(e=>{e&&(a.value=!0,d(o.value))})),{checkChartOrTable:a,itemGmvPieData:i,itemSalePieData:n,loading:l,priceGoodsColumn:r,priceGoodsGmvColumn:c}},render(){const e=arguments[0];return e("div",{class:"pirce-pie"},[e("div",{class:"icon-row"},[e("tg-icon",{on:{click:()=>this.checkChartOrTable=!0},class:this.checkChartOrTable?"icon left active":"icon left",attrs:{name:"ico-icon_tongyong_bingtu2"}}),e("span",{class:"line"}),e("tg-icon",{on:{click:()=>this.checkChartOrTable=!1},class:this.checkChartOrTable?"icon right":"icon right active",attrs:{name:"ico-icon_tongyong_liebiao1"}})]),e("div",{class:this.checkChartOrTable?"pie-main ":"pie-main hide"},[e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销量",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:x,seriesOpt:k,styles:"width: 100%; height:233px","pie-data":this.itemSalePieData,loading:this.loading,formatterModal:w("销量")}})]),e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销售额",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:x,seriesOpt:k,styles:"width: 100%; height:233px","pie-data":this.itemGmvPieData,loading:this.loading,formatterModal:w("销售额")}})])]),e("div",{class:this.checkChartOrTable?"table-main hide":"table-main "},[e("div",{class:"table"},[e("tg-table",{attrs:{height:"235",border:!0,data:this.itemSalePieData},directives:[{name:"loading",value:this.loading}]},[this.priceGoodsColumn.map((t=>e("el-table-column",l()([{},{attrs:{...t}}]))))])]),e("div",{class:"table"},[e("tg-table",{attrs:{height:"235",border:!0,data:this.itemGmvPieData},directives:[{name:"loading",value:this.loading}]},[this.priceGoodsGmvColumn.map((t=>e("el-table-column",l()([{},{attrs:{...t}}]))))])])])])}}),j=D,$=(0,_.Z)(j,S,C,!1,null,"ada055da",null),T=$.exports},1757:function(e,t,a){a.d(t,{Z:function(){return g}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top-10-wrapper"},[a("tg-block",{staticClass:"flex-none",staticStyle:{"margin-bottom":"30px"},attrs:{bodyStyle:{padding:"0"}}},[a("tg-tabs",{attrs:{tabs:e.tabs,bottom:""},on:{change:e.onTabChange},model:{value:e.checkedTab,callback:function(t){e.checkedTab=t},expression:"checkedTab"}})],1),a("div",{staticClass:"list-box"},[a("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"top-list"},e._l(e.list,(function(t){return a("li",{key:t.item_id,staticClass:"list-item"},[a("img",{attrs:{src:t.image_url,alt:""}}),a("div",{staticClass:"detail-box"},[a("p",{staticClass:"name line-clamp-1"},[e._v(e._s(t.title))]),a("div",{staticClass:"sale-data"},[a("p",[e._v(" 售价："+e._s(null===t.discount_price?"--":e.formatPriceFormYuan(0===t.discount_price?0:t.discount_price/100))+" ")]),"gmv_desc"===e.activeIndex?a("p",[e._v(" 销量："+e._s(null===t.sale_count?"--":e.numberFormat(Number(t.sale_count),0,".",","))+" ")]):a("p",[e._v(" 销售额："+e._s(null===t.gmv?"--":e.formatPriceFormYuan(0===t.gmv?0:t.gmv/100))+" ")])]),"gmv_desc"===e.activeIndex?a("div",{staticClass:"sales"},[e._v(" 销售额："+e._s(null===t.gmv?"--":e.formatPriceFormYuan(0===t.gmv?0:t.gmv/100))+"（"+e._s(null===t.gmv_part?"--":t.gmv_part+"%")+"） ")]):"click_rate_desc"===e.activeIndex?a("div",{staticClass:"sales"},[e._v(" 点击率："+e._s(null===t.click_rate?"--":t.click_rate+"%")+" ")]):a("div",{staticClass:"sales"},[e._v(" 转化率："+e._s(null===t.pay_rate?"--":t.pay_rate+"%")+" ")])])])})),0)])],1)},l=[],s=a(97434),i=a(23812),n=a(99575),r=a(64236),c=a(45781),d=a(24643);const{formatPriceFormYuan:u}=c.Z;var p=(0,s.defineComponent)({props:{visible:{type:Boolean,default:!1},catId:{type:Number,default:0}},setup(e,t){const a=(0,s.inject)("searchParams"),o=(0,s.ref)(!1),l=(0,s.ref)("gmv_desc"),c=(0,s.ref)("gmv_desc"),p=(0,s.ref)("gmv_desc"),m=(0,s.ref)([]),h=async()=>{const s={...a.value,page_num:1,num:10,tiange_cat_id:e.catId,sort:l.value};o.value=!0;const[{data:i}]=await(0,r.Dc)(500,(0,n.GX)(s));o.value=!1,i.success?m.value=i.data.items:(m.value=[],t.root.$message({type:"warning",message:i.message??"查询失败，稍后重试",duration:2e3,showClose:!0}))};(0,s.onBeforeMount)((()=>{e.visible&&h()})),(0,s.watch)((()=>e.visible),(e=>{e&&(p.value="gmv_desc",l.value="gmv_desc",h())}));const _=(0,i.pK)((0,s.computed)((()=>{const e=[{label:"销售额top10",value:"gmv_desc"},{label:"点击率top10",value:"click_rate_desc"},{label:"转化率top10",value:"pay_rate_desc"}];return e})),c),g=e=>{l.value=e.value,h()};return{activeIndex:l,..._,onTabChange:g,list:m,formatPriceFormYuan:u,numberFormat:d.Y4,checkedTab:p,loading:o}}}),m=p,h=a(1001),_=(0,h.Z)(m,o,l,!1,null,"85c99fde",null),g=_.exports},34813:function(e,t,a){a.r(t),a.d(t,{default:function(){return Te}});var o,l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"commodityRef",staticClass:"commodity-analysis",class:e.activeIndex?"minBig":"minSmall"},[a("div",{staticClass:"commodity-form"},[a("el-form",{staticClass:"filter-form flex-form",attrs:{size:"small","show-message":!1,inline:!0}},[a("el-form-item",{attrs:{label:"项目名称：",prop:""}},[a("el-select",{staticStyle:{width:"264px"},attrs:{filterable:""},on:{change:e.getAccess},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.project_list,(function(t){return a("el-option",{key:t.project_id,attrs:{label:t.project_name,value:t.project_id}},[e._v(e._s(t.project_name)+" "),t.project_status===e.ProjectStatusEnum.finish?a("span",[e._v("(已完结)")]):t.project_status===e.ProjectStatusEnum.executionEnd?a("span",[e._v("(执行结束)")]):a("span",[e._v("(进行中)")])])})),1)],1),a("el-form-item",{attrs:{label:"查询日期："}},[a("el-date-picker",{staticStyle:{width:"264px"},attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"~","picker-options":e.pickerOptions,type:"daterange",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.curDate,callback:function(t){e.curDate=t},expression:"curDate"}})],1),a("el-form-item",[a("tg-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"router"},[a("div",{staticClass:"commodity-navgition"},[a("el-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",disabled:e.accessObj.has_access},on:{click:e.linkAccess}},[e._v("商家授权")]),e.accessObj.has_access?a("span",{staticClass:"tips"},[a("tg-icon",{staticStyle:{color:"#33ba5d","font-size":"18px","margin-top":"1px"},attrs:{name:"ico-icon_tongyong_chenggong_xianxing1"}}),a("span",{staticClass:"text"},[e._v("当前商家已授权")])],1):a("span",{staticClass:"tips"},[a("i",{staticClass:"el-icon-warning-outline"}),a("span",{staticClass:"text"},[e._v("当前商家未授权")])])],1),a("div",{staticClass:"summary-gmv"},[a("span",[e._v("总销量："),a("b",[e._v(e._s(e.numberFormat(e.baseData.all_sale_count,0,".",",")))])]),a("span",[e._v("总销售额："),a("b",[e._v(e._s(e.formatPriceFormYuan(0===e.baseData.all_sale_amount?0:e.baseData.all_sale_amount/100)))])]),a("span",[e._v("店铺总销售量："),a("b",[e._v(e._s(e.numberFormat(e.baseData.all_shop_sale_count,0,".",",")))])]),a("span",[e._v("店铺总销售额："),a("b",[e._v(e._s(e.formatPriceFormYuan(0===e.baseData.all_shop_sale_amount?0:e.baseData.all_shop_sale_amount/100)))])])]),a("data-switch",{staticStyle:{"margin-left":"auto"},attrs:{index:e.activeIndex},on:{checkATab:e.handleCheckTab}})],1),a("div",{staticClass:"commodity-main"},[a(e.component,{ref:"comp",tag:"component",on:{scroll:e.onScroll,report:e.getReport}})],1)])},i=[],n=a(97434),r=a(86919),c=a(9914),d=a(47997),u=a(62214),p=a(61282),m=(0,n.defineComponent)({components:{"line-charts":u.Z},setup:(0,d.sY)(((e,t)=>{const a=(0,c.mU)(),o=(0,c.r5)((e=>{a.queryGoods({project_id:e.project_id,item_id:e.item_id})})),l=(0,n.ref)(),s=(0,n.ref)({}),i=(0,n.ref)({}),r=(0,n.ref)(),d=(0,n.ref)({displayHot:!0,displaySubHot:!0,displayOther:!0,displayRadio:"全部"});(0,c.Rx)((e=>{i.value=s.value={project_id:e.project_id,start_date:e.start_date,end_date:e.end_date},o.category_report_query(e).then((()=>{o.query_project({project_id:s.value.project_id,start_date:s.value.start_date,end_date:s.value.end_date,page_num:1,hot:!0===d.value.displayOther?void 0:Number(d.value.displayHot),second_hot:!0===d.value.displayOther?void 0:Number(d.value.displaySubHot)}).then((()=>{t.emit("report",o.category_report)}))}))}));const u=[{label:"一级类目",minWidth:"120",prop:"first_cname"},{label:"二级类目",minWidth:"130",prop:"second_cname",align:"center"},{label:"款数",minWidth:"100",prop:"item_count",align:"center"},{label:"直播销量",minWidth:"110",prop:"sale_count",align:"right",formatter(e){return(0,p.dN)(e.sale_count,"",!0)}},{label:"直播销售额 (元)",minWidth:"136",prop:"gmv",align:"right",formatter(e){return(0,p.dN)(e.gmv/100,"")}},{label:"店铺销量",minWidth:"110",prop:"shop_sale_count",align:"right",formatter(e){return e.shop_sale_count?(0,p.dN)(e.shop_sale_count,"",!0):"--"}},{label:"店铺销售额 (元)",minWidth:"136",prop:"shop_gmv",align:"right",formatter(e){return e.shop_gmv?(0,p.dN)(e.shop_gmv/100,""):"--"}},{label:"点击率",minWidth:"80",prop:"click_rate",align:"right",dataType:{suffix:"%"}},{label:"转化率",minWidth:"80",prop:"pay_rate",align:"right",dataType:{suffix:"%"}},{label:"上周销量",minWidth:"130",prop:"last_week_sale_count",align:"right",formatter(e){return(0,p.dN)(e.last_week_sale_count,"",!0)}},{label:"上周销售额 (元)",minWidth:"164",prop:"last_week_gmv",align:"right",formatter(e){return(0,p.dN)(e.last_week_gmv/100,"")}},{label:"累计销量",minWidth:"140",prop:"total_sale_count",align:"right",formatter(e){return(0,p.dN)(e.total_sale_count,"",!0)}},{label:"累计销售额 (元)",minWidth:"140",prop:"total_gmv",formatter(e){return(0,p.dN)(e.total_gmv/100,"")},align:"right"},{label:"销售趋势",minWidth:"116",align:"center",dataType:"money",formatter(e){const t=this.$createElement;return t("a",{on:{click:t=>{t.stopPropagation(),t.preventDefault(),a.queryCategory({project_id:e.project_id,cat_id:e.second_cid})}},style:"font-size:12px"},["查看"])}}],m=e=>{const a=s.value.start_date||i.value.start_date,c=s.value.end_date||i.value.end_date,u=s.value.project_id,{second_cid:p}=e;s.value.id!==e.id?(s.value.id=e.id,s.value.second_cid=p):(s.value.second_cid=void 0,s.value.id=void 0,l.value?.setCurrentRow()),o.query_project({project_id:u,start_date:a,end_date:c,cat_id:s.value.second_cid,page_num:1,hot:!0===d.value.displayOther?void 0:Number(d.value.displayHot),second_hot:!0===d.value.displayOther?void 0:Number(d.value.displaySubHot)}).then((()=>{(0,n.nextTick)((()=>{t.emit("scroll",r.value.offsetTop)}))}))},h=e=>{const a=s.value,l=s.value.start_date||i.value.start_date,c=s.value.end_date||i.value.end_date;o.query_project({project_id:a.project_id,start_date:l,end_date:c,cat_id:a.second_cid,page_num:e,hot:!0===d.value.displayOther?void 0:Number(d.value.displayHot),second_hot:!0===d.value.displayOther?void 0:Number(d.value.displaySubHot),other:!0===d.value.displayOther?void 0:Number(d.value.displayOther)}).then((()=>{(0,n.nextTick)((()=>{t.emit("scroll",r.value.offsetTop);const e=document.querySelector(".project-table .el-table__body-wrapper");e&&(e.scrollLeft=0)}))}))},_=()=>o.query_project({project_id:s.value.project_id,start_date:s.value.start_date,end_date:s.value.end_date,page_num:1,cat_id:s.value.second_cid,hot:!0===d.value.displayOther?void 0:Number(d.value.displayHot),second_hot:!0===d.value.displayOther?void 0:Number(d.value.displaySubHot)}),g=()=>_();return{columns:u,goodData:o,selectedRow:s,hotHandler:g,onRowClick:m,checkList:d,onCurrentChange:h,timeline:a,tableRef:l,projectTableRef:r,search:_}})),render(){const e=arguments[0],t=this.goodData.pagination,a=this.timeline;return e("div",{class:"comp"},[e("div",{class:"category-table"},[e("tg-table",{ref:"tableRef",attrs:{"highlight-current-row":!0,stripe:!0,border:!0,maxHeight:318,columns:this.columns,data:this.goodData.category_report},on:{"row-click":this.onRowClick},scopedSlots:{empty:()=>e("div",{style:"position: static;"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})])}})]),e("div",{class:"line"}),e("div",{style:"margin-bottom: 12px"},[e("el-radio",{class:"hot-check",attrs:{label:"全部"},on:{change:()=>{this.checkList.displayOther=!0,this.checkList.displayHot=!1,this.checkList.displaySubHot=!1,this.page_num=1,this.hotHandler()}},model:{value:this.checkList.displayRadio,callback:e=>{this.$set(this.checkList,"displayRadio",e)}}}),e("el-radio",{class:"hot-check",attrs:{label:"只显示爆款"},on:{change:()=>{this.checkList.displayOther=!1,this.checkList.displayHot=!0,this.checkList.displaySubHot=!1,this.page_num=1,this.hotHandler()}},model:{value:this.checkList.displayRadio,callback:e=>{this.$set(this.checkList,"displayRadio",e)}}}),e("el-radio",{class:"hot-check",attrs:{label:"只显示次爆款"},on:{change:()=>{this.checkList.displayOther=!1,this.checkList.displayHot=!1,this.checkList.displaySubHot=!0,this.page_num=1,this.hotHandler()}},model:{value:this.checkList.displayRadio,callback:e=>{this.$set(this.checkList,"displayRadio",e)}}})]),e("div",{ref:"projectTableRef",class:"project-table"},[e("tg-table",{attrs:{"show-header":!1,border:!0,columns:this.goodData.columns,data:this.goodData.project_report,"highlight-current-row":!0}})]),t.total>0&&e("div",{class:"pagination-box"},[e("el-pagination",{attrs:{total:t.total,"page-size":20,layout:"total, prev, pager, next","current-page":t.page_num},on:{"current-change":this.onCurrentChange}})]),e("el-dialog",{class:"tg-dialog-classic el-dialog-center-rewrite",attrs:{width:"543px",visible:a.visible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1,title:a.title},on:{close:a.onClose}},[e("div",{class:"charts-box"},[e("line-charts",{attrs:{className:"line-chart",date:a.charts.data,loading:a.loading,list:a.charts.series}})])])])}}),h=m,_=a(1001),g=(0,_.Z)(h,o,l,!1,null,"e6ba4ec0",null),v=g.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tab-box"},[a("tg-tabs",{staticStyle:{width:"180px",height:"48px"},attrs:{tabs:e.tabs},on:{change:e.onTabChange},model:{value:e.checkedTab,callback:function(t){e.checkedTab=t},expression:"checkedTab"}}),a("div",{staticClass:"tab-fake analysis"},[a("p",{staticClass:"tab-fake-node",on:{click:e.goYuShowShangpinFenXi}},[e._v("预售商品分析")])]),a("div",{staticClass:"tab-fake analysis"},[a("p",{staticClass:"tab-fake-node",on:{click:e.goAnalysisPage}},[e._v("竞品对比分析")])]),a("div",{staticClass:"tab-fake week"},[a("p",{staticClass:"tab-fake-node",on:{click:e.goWeekPage}},[e._v("每周爆款对比")])])],1),"System"===e.activeIndex?a("System",{staticClass:"flex-auto"}):e._e(),"Timer"===e.activeIndex?a("Timer",{staticClass:"flex-auto"}):e._e()],1)},b=[],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commodity-analysis-system"},[a("div",{staticClass:"first-category-box"},[e.firstCategory.length>1?a("el-button-group",e._l(e.firstCategory,(function(t){return a("el-tooltip",{key:t.id,staticClass:"item",attrs:{enterable:!1,disabled:!(t.cat_name.length>3),effect:"dark",content:t.cat_name,placement:"top"}},[a("el-button",{staticClass:"mgt-16",staticStyle:{width:"100px"},attrs:{type:e.firstActive===t.id?"primary":"",size:"small"},on:{click:function(a){return e.changeFirst(t.id)}}},[e._v(e._s(t.cat_name.length>3?e.get_folded_text(t.cat_name,4):t.cat_name)+" ")])],1)})),1):e._e(),a("tg-button",{staticStyle:{"margin-top":"16px","margin-left":"12px"},attrs:{type:"default",icon:"ico-btn-export"},on:{click:e.exportBtnClick}},[e._v("导出")])],1),a("div",{staticClass:"category-table"},[a("tg-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableSystemAnalysisRef",class:e.showSort?"":"hasShowSort",attrs:{data:e.list,"row-key":function(t){return e.getRowKey(t)},border:"","row-style":e.rowHightlight,"default-expand-all":"","default-sort":{prop:"shop_gmv",order:"descending"},"tree-props":{children:"children",hasChildren:"hasChildren"},"show-summary":!1,"summary-method":e.getSummaries,height:"100%"},on:{"row-click":e.onRowClick,"sort-change":e.sortChange},scopedSlots:e._u([{key:"empty",fn:function(){return[a("empty-common",{attrs:{"detial-text":"暂无数据"}})]},proxy:!0}])},[a("el-table-column",{attrs:{prop:"category_name",label:"二级类目","min-width":"130",fixed:"left","label-class-name":e.showSort?"check-label":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{enterable:!1,disabled:!(t.row.category_name.length>6),effect:"dark",content:t.row.category_name,placement:"top"}},[a("span",[e._v(e._s(t.row.category_name.length>6?e.get_folded_text(t.row.category_name,6):t.row.category_name))])])]}}])}),a("el-table-column",{attrs:{prop:"third_tiange_cat_name",label:"三级类目","min-width":"110",fixed:"left","label-class-name":e.showSort?"check-label":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{enterable:!1,disabled:!(t.row.third_tiange_cat_name.length>6),effect:"dark",content:t.row.third_tiange_cat_name,placement:"top"}},[a("span",[e._v(e._s(t.row.third_tiange_cat_name.length>6?e.get_folded_text(t.row.third_tiange_cat_name,6):t.row.third_tiange_cat_name))])])]}}])}),a("el-table-column",{attrs:{label:"款数","min-width":"110",align:"center",prop:"item_count","label-class-name":e.showSort?"check-label":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.item_count?e.numberFormat(Number(t.row.item_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"店铺销量","min-width":"110",prop:"shop_sale_count",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.shop_sale_count?e.numberFormat(Number(t.row.shop_sale_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"店铺销售额 (元)","min-width":"150",prop:"shop_gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.shop_gmv?e.formatPriceFormYuan(0===t.row.shop_gmv?0:t.row.shop_gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"平均件单价 (元)","min-width":"150",prop:"shop_sale_price_avg",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(void 0!==t.row.shop_sale_price_avg?e.formatPriceFormYuan(0===t.row.shop_sale_price_avg?0:t.row.shop_sale_price_avg/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"店铺销售额占比","min-width":"140",prop:"shop_gmv_rate",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.shop_gmv_rate?e.numberFormat(Number(t.row.shop_gmv_rate),2)+"%":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"发货前退款销售额 (元)","min-width":"180",prop:"shop_refund_status21_gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.shop_refund_status21_gmv&&void 0!==t.row.shop_refund_status21_gmv?e.formatPriceFormYuan(0===t.row.shop_refund_status21_gmv?0:t.row.shop_refund_status21_gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"发货前退款销售额占比","min-width":"180",prop:"shop_refund_status21_gmv_rate",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.shop_refund_status21_gmv_rate&&void 0!==t.row.shop_refund_status21_gmv_rate?e.numberFormat(Number(t.row.shop_refund_status21_gmv_rate),2)+"%":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"上周店铺销量","min-width":"140",prop:"last_week_shop_sale_count",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.last_week_shop_sale_count?e.numberFormat(Number(t.row.last_week_shop_sale_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"上周店铺销售额 (元)","min-width":"170",prop:"last_week_shop_gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.gmv?e.formatPriceFormYuan(0===t.row.last_week_shop_gmv?0:t.row.last_week_shop_gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"上周平均件单价 (元)","min-width":"170",prop:"last_week_shop_sale_price_avg",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(void 0!==t.row.last_week_shop_sale_price_avg?e.formatPriceFormYuan(0===t.row.last_week_shop_sale_price_avg?0:t.row.last_week_shop_sale_price_avg/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"店铺累计销量","min-width":"140",prop:"total_shop_sale_count",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.total_shop_sale_count?e.numberFormat(Number(t.row.total_shop_sale_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"店铺累计销售额 (元)","min-width":"170",prop:"total_shop_gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.total_shop_gmv?e.formatPriceFormYuan(0===t.row.total_shop_gmv?0:t.row.total_shop_gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"直播销量","min-width":"110",prop:"sale_count",align:"right",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.sale_count?e.numberFormat(Number(t.row.sale_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"直播销售额 (元)","min-width":"160",prop:"gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.gmv?e.formatPriceFormYuan(0===t.row.gmv?0:t.row.gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"直播销售额占比","min-width":"160",prop:"gmv_rate",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.gmv_rate?e.numberFormat(Number(t.row.gmv_rate),2)+"%":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"上周直播销量","min-width":"160",prop:"last_week_sale_count",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.last_week_sale_count?e.numberFormat(Number(t.row.last_week_sale_count),0,".",","):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"上周直播销售额 (元)","min-width":"180",prop:"last_week_gmv",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.last_week_gmv?e.formatPriceFormYuan(0===t.row.last_week_gmv?0:t.row.last_week_gmv/100,2,!1):"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"点击率","min-width":"100",prop:"click_rate",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.click_rate?e.numberFormat(Number(t.row.click_rate),2)+"%":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"转化率","min-width":"110",prop:"pay_rate",align:"right",sortable:!!e.showSort&&"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!==t.row.pay_rate?e.numberFormat(Number(t.row.pay_rate),2)+"%":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"查看",width:"137",fixed:"right",prop:"view","label-class-name":e.showSort?"check-label":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"overview-btn-box"},[a("a",{staticClass:"btn-text",staticStyle:{"font-weight":"normal"}},[e._v("商品明细")]),t.row.has_feigua_cat?a("a",{staticClass:"btn-text",staticStyle:{"margin-right":"4px"},on:{click:function(a){return a.stopPropagation(),e.saleAnalysisClick(t.row)}}},[e._v("销售分析")]):e._e()])]}}])})],1)],1),a("el-dialog",{staticClass:"tg-dialog-classic el-dialog-center-rewrite",attrs:{width:"780px",visible:e.salesVisible,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1,title:"本类目销售分析"},on:{close:e.onSalesClose}},[a("div",{staticClass:"sales-analysis-box"},[a("div",{staticClass:"line-box"},[a("h3",{staticClass:"box-title"},[e._v("与同类目大盘销售额趋势对比图")]),a("div",{staticClass:"charts-box"},[a("LineCharts",{attrs:{date:e.lineTrend.date,list:e.lineTrend.series,loading:e.lineTrend.loading}}),e.lineTrend.date.length>0?a("div",{staticClass:"chart-tips"},[a("el-popover",{attrs:{trigger:"hover",content:"品牌和大盘销售额的涨幅是指每天的销售额对比搜索周期第一天的销售额的涨幅变化",placement:"top",width:"360"}},[a("tg-icon",{staticStyle:{color:"#939393"},attrs:{slot:"reference",name:"ico-question"},slot:"reference"})],1)],1):e._e()],1),a("div",{staticClass:"tips-box"},[a("p",[e._v(" 在近"),a("span",{staticClass:"highlight"},[e._v(e._s(e.lineData.day))]),e._v("天，品牌销售额增幅高于大盘销售额的天数有 "),e.lineData.moreDay>0?a("el-popover",{attrs:{trigger:(e.lineData.moreDay,"hover"),placement:"top"}},[a("div",{staticClass:"tips-box-list"},e._l(e.heightList,(function(t,o){return a("div",{key:o},[a("span",{class:{isMax:t.isMax}},[e._v(" "+e._s(t.tipsCn)+" ")])])})),0),a("span",{staticClass:"highlight",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.lineData.moreDay))])]):a("span",{staticClass:"highlight",staticStyle:{cursor:"default"}},[e._v(e._s(e.lineData.moreDay))]),e._v(" 天，最高超过"),a("span",{staticClass:"highlight"},[e._v(e._s(Math.abs(e.lineData.big))+"%")]),e._v("； ")],1),a("p",[e._v(" 增幅低于大盘销售额的天数有 "),e.lineData.lessDay>0?a("el-popover",{attrs:{trigger:(e.lineData.lessDay,"hover"),placement:"top"}},[a("div",{staticClass:"tips-box-list"},e._l(e.lowList,(function(t,o){return a("div",{key:o},[a("span",{class:{isMin:t.isMax}},[e._v(" "+e._s(t.tipsCn)+" ")])])})),0),a("span",{staticClass:"highlight",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.lineData.lessDay))])]):a("span",{staticClass:"highlight",staticStyle:{cursor:"default"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.lineData.lessDay))]),e._v(" 天，最低超过"),a("span",{staticClass:"highlight"},[e._v(e._s(Math.abs(e.lineData.mini))+"%")])],1)])]),a("div",{staticClass:"pie-box"},[a("h3",{staticClass:"box-title"},[e._v("价格带销售分析")]),a("Price",{attrs:{visible:e.salesVisible,"cat-id":e.catId}})],1),a("div",{staticClass:"top-box"},[a("h3",{staticClass:"box-title"},[e._v("畅销商品榜")]),a("top",{attrs:{visible:e.salesVisible,"cat-id":e.catId}})],1)])])],1)},w=[],x=a(44744),k=a(1757),S=a(92378),C=a(99575),D=a(64236),j=a(45781),$=a(24643),T=a(1763),F=a(6933),P=a.n(F);const{formatPriceFormYuan:A}=j.Z;var O=(0,n.defineComponent)({components:{Top:k.Z,Price:S.Z,LineCharts:x.Z},setup:(0,d.sY)(((e,t)=>{const a=(0,n.inject)("searchParams"),o=(0,n.inject)("searchProjectName"),l=(0,n.ref)(0),s=e=>{l.value=e.height},i=(0,n.ref)(!1),r=(0,n.ref)("shop_gmv_desc"),c=(0,n.ref)([]),d=(0,n.ref)([]),u=(0,n.ref)(!0),m=(0,n.ref)([]),h=(0,n.ref)(0),_=(0,n.ref)([]),g=(0,n.ref)(),v=async e=>{console.log(e,"2222"),i.value=!0;const[{data:a}]=await(0,D.Dc)(500,(0,C.Bm)(e));if(i.value=!1,a.success){g.value=a.data;let e=a.data.categories;e.length>0?(e=[].concat(...e.map((e=>e.children))),e.map((e=>{"其他"===e.category_name?(e.third_tiange_cat_name="小计",e.children=[]):(e.third_tiange_cat_name="小计",e.children.map((e=>{e.category_name=""})))})),e.length>0&&e.unshift(E()),u.value=!0,(0,n.nextTick)((()=>{_.value=e}))):(u.value=!1,_.value=[])}else _.value=[],u.value=!1,g.value=void 0,t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},f=async e=>{i.value=!0;const[{data:a}]=await(0,D.Dc)(30,(0,C.aH)(e));i.value=!1,a.success?(m.value=a.data,a.data.length>0&&(h.value=m.value[0].id)):(m.value=[],t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0}))},b=e=>{h.value=e,v({...a.value,category_id:h.value,sort:r.value})};(0,n.onBeforeMount)((async()=>{a.value.project_id&&(await f(a.value),await v({...a.value,category_id:h.value,sort:r.value}),(0,n.nextTick)((()=>{setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),1e3)})))})),(0,n.watch)((()=>a.value),(async e=>{void 0!==e&&(await f(a.value),await v({...a.value,category_id:h.value,sort:r.value}))}),{deep:!0});const y=(0,n.ref)({date:[],series:[],loading:!0}),w=(0,n.ref)({day:0,moreDay:0,lessDay:0,big:0,mini:0}),x=async e=>{const[{data:a}]=await(0,D.Dc)(30,(0,C.F7)(e));if(a.success){const e=a.data;if(0===e.length)return y.value.loading=!1,y.value.date=[],w.value.big=0,w.value.mini=0,w.value.moreDay=0,w.value.lessDay=0,!1;const t=[],o=[],l=[],s=[],i=[];let n=0,r=0;const u=[];c.value=[],d.value=[];let p=null,m=null;e.forEach((e=>{t.push(e.increase_balance),o.push(null!==e.tiange_gmv_increase?e.tiange_gmv_increase:"--"),i.push(null!==e.competitive_gmv_increase?e.competitive_gmv_increase:"--"),l.push(null!==e.tiange_gmv?e.tiange_gmv/100:"--"),s.push(null!==e.competitive_gmv?e.competitive_gmv/100:"--"),e.increase_balance>0?(n++,c.value.push(e),null===p&&(p=e),e.increase_balance>p.increase_balance&&(p=e),e.tipsCn=`${P()(e.day).format("MM月DD日")}，品牌销售额增幅高于大盘销售额 ${e.increase_balance}%`):e.increase_balance<0&&(r++,d.value.push(e),null===m&&(m=e),e.increase_balance<m.increase_balance&&(m=e),e.tipsCn=`${P()(e.day).format("MM月DD日")}，品牌销售额增幅低于大盘销售额 ${Math.abs(e.increase_balance)}%`),u.push(e.day.replace(/-/g,".").substring(5,10))})),p&&(p.isMax=!0),m&&(m.isMax=!0),w.value.day=e.length,w.value.big=Math.max.apply(null,t),w.value.mini=Math.min.apply(null,t),w.value.moreDay=n,w.value.lessDay=r,y.value={date:u,series:[{smooth:!0,showSymbol:!0,type:"line",name:"品牌销售额",data:o,color:"#59B6DF",yAxisIndex:0},{smooth:!0,showSymbol:!0,type:"line",name:"大盘销售额",data:i,color:"#FF9C69",yAxisIndex:0},{smooth:!1,showSymbol:!1,name:"品牌对比涨幅",type:"line",itemStyle:{opacity:0},lineStyle:{opacity:0},yAxisIndex:0,data:t},{name:"品牌销售额_data",smooth:!1,showSymbol:!1,type:"line",yAxisIndex:1,itemStyle:{opacity:0},lineStyle:{opacity:0},data:l},{name:"大盘销售额_data",yAxisIndex:1,smooth:!1,showSymbol:!1,type:"line",itemStyle:{opacity:0},lineStyle:{opacity:0},data:s}],loading:!1}}else t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},k=(0,n.ref)(0),S=(0,n.ref)(!1),j=e=>{k.value=e.id,S.value=!0,x({...a.value,tiange_cat_id:k.value})},F=()=>{S.value=!1},O=e=>{e.second_tiange_cat_id?t.root.$router.push({name:T.xx.commodityAnalysisDetail,query:{project_name:o.value,project_id:a.value.project_id,end_date:a.value.end_date,start_date:a.value.start_date,first_tiange_cat_id:h.value,second_tiange_cat_id:e.second_tiange_cat_id,third_tiange_cat_id:e.third_tiange_cat_id}}):t.root.$router.push({name:T.xx.commodityAnalysisDetail,query:{project_name:o.value,project_id:a.value.project_id,end_date:a.value.end_date,start_date:a.value.start_date,first_tiange_cat_id:h.value,second_tiange_cat_id:e.id}})},L=({order:e,prop:t})=>{let o="";"descending"===e?o=`${t}_desc`:"ascending"===e&&(o=`${t}`),r.value=o,v({...a.value,category_id:h.value,sort:o})},N=({row:e})=>{let t={};return"小计"===e.third_tiange_cat_name&&(t={"background-color":"#F6FBFF"}),!0===e.isSum&&(t={"background-color":"#E9E9E9 !important"},t["font-weight"]=600),t},E=()=>{const e=["item_count","shop_sale_count","shop_gmv","shop_sale_price_avg","shop_gmv_rate","shop_refund_status21_gmv","shop_refund_status21_gmv_rate","last_week_shop_sale_count","last_week_shop_gmv","last_week_shop_sale_price_avg","shop_sale_count_rate","shop_sale_gmv_rate","shop_sale_price_avg_rate","total_shop_sale_count","total_shop_gmv","sale_count","gmv","gmv_rate","last_week_sale_count","last_week_gmv","sale_count_rate","sale_gmv_rate","click_rate","pay_rate"],t={category_name:"全部",third_tiange_cat_name:"合计",isSum:!0};return e.map((e=>{if(void 0===g.value)return"--";t[e]=g.value["all_"+e],void 0===t[e]&&(t[e]=null)})),t},W=()=>{const e={...a.value,category_id:h.value,sort:r.value};(0,C.QC)(e)},R=e=>void 0!==e.children?e.id+"only":e.id;return{sortChange:L,loading:i,onRowClick:O,onTopCardRectUpdate:s,heightList:c,lowList:d,onSalesClose:F,salesVisible:S,firstCategory:m,firstActive:h,saleAnalysisClick:j,list:_,showSort:u,formatPriceFormYuan:A,numberFormat:$.Y4,get_folded_text:p.$O,changeFirst:b,catId:k,lineTrend:y,lineData:w,rowHightlight:N,getSummaries:E,exportBtnClick:W,getRowKey:R}}))}),L=O,N=(0,_.Z)(L,y,w,!1,null,"6c2fe95d",null),E=N.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commodity-analysis-timer"},[a("tg-card",e._b({staticClass:"flex-none category-table",attrs:{padding:[12,18,6,18]},on:{"rect:update":e.onRectUpdate}},"tg-card",e.cardProps,!1),[a("el-button-group",[a("el-radio-group",{attrs:{size:"small"},model:{value:e.timeType,callback:function(t){e.timeType=t},expression:"timeType"}},[a("el-radio-button",{attrs:{label:"season"}},[e._v("按季节")]),a("el-radio-button",{attrs:{label:"year"}},[e._v("按年度")])],1)],1),"season"===e.timeType?a("tg-table",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mgt-12",attrs:{border:"","row-style":e.rowHightlightSeason,data:e.listSeason,"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.onRowClick},scopedSlots:e._u([{key:"empty",fn:function(){return[a("empty-common",{attrs:{"detial-text":"暂无数据"}})]},proxy:!0}],null,!1,2826547353)},"tg-table",e.tableProps,!1),[a("el-table-column",{attrs:{label:"季节",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?a("span",[1===t.row.season?a("span",[e._v("春季")]):2===t.row.season?a("span",[e._v("夏季")]):3===t.row.season?a("span",[e._v("秋季")]):4===t.row.season?a("span",[e._v("冬季")]):a("span",[e._v("其他")])]):a("span")]}}],null,!1,110587838)}),a("el-table-column",{attrs:{label:"年度款",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["其他"===t.row.season?a("span",[e._v("其他")]):e._e(),"其他"!==t.row.season&&0===t.row.year?a("span",[e._v("小计")]):e._e(),"其他"!==t.row.season&&0!==t.row.year?a("span",[e._v(e._s(t.row.year))]):e._e()]}}],null,!1,348393532)}),a("el-table-column",{attrs:{label:"款数",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!==t.row.item_count?e.numberFormat(Number(t.row.item_count),0,".",","):"--"))]}}],null,!1,4040608927)}),a("el-table-column",{attrs:{label:"店铺销量",align:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!==t.row.shop_gmv?e.numberFormat(Number(t.row.shop_sale_count),0,".",","):"--"))]}}],null,!1,2046051652)}),a("el-table-column",{attrs:{label:"店铺销售额 (元)",align:"right","label-class-name":"add-padding-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(null!==t.row.shop_gmv?e.formatPriceFormYuan(0===t.row.shop_gmv?0:t.row.shop_gmv/100,2,!1):"--")+" ")])]}}],null,!1,2905769921)}),a("el-table-column",{attrs:{prop:"pie",label:"销售额占比",align:"right","label-class-name":"add-padding-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null!==t.row.shop_gmv_pie?t.row.shop_gmv_pie+"%":"--"))])]}}],null,!1,4066322430)}),a("el-table-column",{attrs:{label:"查看",width:"100px",align:"center"}},[[a("a",{staticClass:"btn-text"},[e._v("商品明细")])]],2)],1):a("tg-table",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mgt-16",attrs:{border:"","row-style":e.rowHightlightYear,data:e.listYear,"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.onRowClick},scopedSlots:e._u([{key:"empty",fn:function(){return[a("empty-common",{attrs:{"detial-text":"暂无数据"}})]},proxy:!0}])},"tg-table",e.tableProps,!1),[a("el-table-column",{attrs:{label:"年度款",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?a("span",[t.row.year?a("span",[e._v(e._s(t.row.year))]):a("span",[e._v("其他")])]):a("span")]}}])}),a("el-table-column",{attrs:{label:"季节",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["其他"===t.row.year?a("span",[e._v("其他")]):e._e(),"其他"!==t.row.year&&0===t.row.season?a("span",[e._v("小计")]):e._e(),"其他"!==t.row.year&&0!==t.row.season?a("span",[1===t.row.season?a("span",[e._v("春季")]):2===t.row.season?a("span",[e._v("夏季")]):3===t.row.season?a("span",[e._v("秋季")]):4===t.row.season?a("span",[e._v("冬季")]):a("span",[e._v("其他")])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"款数",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!==t.row.item_count?e.numberFormat(Number(t.row.item_count),0,".",","):"--"))]}}])}),a("el-table-column",{attrs:{label:"店铺销量",align:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!==t.row.shop_gmv?e.numberFormat(Number(t.row.shop_sale_count),0,".",","):"--"))]}}])}),a("el-table-column",{attrs:{label:"店铺销售额",align:"right","label-class-name":"add-padding-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(null!==t.row.shop_gmv?e.formatPriceFormYuan(0===t.row.shop_gmv?0:t.row.shop_gmv/100):"--")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"pie",label:"销售额占比",align:"right","label-class-name":"add-padding-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null!==t.row.shop_gmv_pie?t.row.shop_gmv_pie+"%":"--"))])]}}])}),a("el-table-column",{attrs:{label:"查看",width:"100px",align:"center"}},[[a("a",{staticClass:"btn-text"},[e._v("商品明细")])]],2)],1)],1)],1)},R=[],Z=a(58302);const{formatPriceFormYuan:B}=j.Z;var I=(0,n.defineComponent)({name:"TgDataCenterCommodityTimer",setup(e,t){const a=32,o=34,l=36,s=31,i=(0,n.ref)(0),r=e=>{i.value=e.height},c=(0,Z.Z)({compensation:(0,n.computed)((()=>a+o+l+s)),fixedBlockHeightRefs:[i,150],tableMinHeight:100}),d=(0,n.ref)(!1),u=(0,n.ref)("season"),p=(0,n.inject)("searchParams"),m=(0,n.inject)("searchProjectName"),h=(0,n.ref)([]),_=(0,n.ref)([]),g=async e=>{d.value=!0;const[{data:a}]=await(0,D.Dc)(500,(0,C.RG)(e));if(d.value=!1,a.success){const e=a.data.reports;h.value=e}else h.value=[],t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0})},v=async e=>{d.value=!0;const[{data:a}]=await(0,D.Dc)(500,(0,C.YM)(e));if(d.value=!1,a.success){const e=a.data.reports;_.value=e}else _.value=[],t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};(0,n.onBeforeMount)((()=>{v(p.value)})),(0,n.watch)((()=>p.value),(e=>{void 0!==e&&("season"===u.value?v(p.value):g(p.value))}),{deep:!0}),(0,n.watch)((()=>u.value),(e=>{"season"===e?v(p.value):g(p.value)}));const f=e=>{"season"===u.value?t.root.$router.push({name:T.xx.commodityAnalysisDetail,query:{project_name:m.value,project_id:p.value.project_id,end_date:p.value.end_date,start_date:p.value.start_date,year:e.year?e.year:void 0,season:e.season,type:u.value}}):t.root.$router.push({name:T.xx.commodityAnalysisDetail,query:{project_name:m.value,project_id:p.value.project_id,end_date:p.value.end_date,start_date:p.value.start_date,year:e.year,season:e.season?e.season:void 0,type:u.value}})},b=({row:e})=>{let t={};return"其他"!==e.season&&0===e.year&&(t={"background-color":"#F6FBFF"}),t},y=({row:e})=>{let t={};return"其他"!==e.year&&0===e.season&&(t={"background-color":"#F6FBFF"}),t};return{listYear:h,listSeason:_,timeType:u,loading:d,onTopCardRectUpdate:r,...c,formatPriceFormYuan:B,numberFormat:$.Y4,onRowClick:f,rowHightlightSeason:b,rowHightlightYear:y}}}),M=I,Y=(0,_.Z)(M,W,R,!1,null,"e4e10328",null),G=Y.exports,H=a(23812),z=(0,n.defineComponent)({props:{tab:{type:String,default:"system"}},components:{System:E,Timer:G},setup(e,t){const a=(0,n.inject)("searchParams"),o=(0,n.inject)("searchProjectName"),l=(0,n.ref)("System"),s=(0,n.ref)("System"),i=(0,H.pK)((0,n.computed)((()=>{const e=[{label:"自定义类目分析",value:"System"}];return e})),s),r=()=>{t.root.$router.push({name:T.xx.commodityAnalysisPreSale,query:{project_name:o.value,project_id:a.value.project_id}})},c=()=>{t.root.$router.push({name:T.xx.commodityAnalysisCompetitive,query:{project_name:o.value,project_id:a.value.project_id}})},d=()=>{t.root.$router.push({name:T.xx.commodityWeekPopular,query:{project_name:o.value,project_id:a.value.project_id}})},u=e=>{l.value=e.value};return{activeIndex:l,...i,onTabChange:u,goAnalysisPage:c,goWeekPage:d,goYuShowShangpinFenXi:r}}}),q=z,U=(0,_.Z)(q,f,b,!1,null,"484c9172",null),K=U.exports,X=a(36568),J=a.n(X),V=a(82598),Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:this.styles||"height: 300px; width: 100%"},[e.pieData.length>0?a("base-echarts",{attrs:{options:e.baseOptions}}):a("Empty")],1)},ee=[],te=a(32200),ae=a(99197),oe=a(8136),le={name:"BasePie",components:{BaseEcharts:te.Z,Empty:ae.Z},props:{title:{type:Object,default:()=>({text:""})},loading:{type:Boolean,default:!0},pieData:{type:Array,default:()=>[]},formatterModal:{type:Function,default:null},styles:{type:String,default:""},legend:{type:Object,default:()=>({icon:"circle",itemWidth:10,itemHeight:10,type:"scroll",bottom:-5})},seriesOpt:{type:Object,default:()=>({radius:["45%","65%"]})}},data(){const e=this.pieData?this.pieData.map((e=>e.value)):[],t=this.pieData?this.pieData.map((e=>e.name)):[];return{baseOptions:{xAxis:{type:"category",data:t,axisLine:{lineStyle:{color:"#4D343F4C",width:1}}},color:oe.jh,yAxis:{type:"value",name:"销量占比(%)",axisLine:{lineStyle:{color:"#4D343F4C",width:1}}},series:[{data:e,type:"bar",showBackground:!0,barWidth:"25",label:{show:!0,position:"top",formatter:e=>e.value+"%"}}],grid:{left:"20",right:"4%",bottom:"2",top:"50",containLabel:!0}}}},watch:{pieData:{handler(){this.init()},deep:!0}},methods:{init(){try{const e=this.pieData.map((e=>e.name)),t=this.pieData.map((e=>e.value));this.baseOptions={...this.baseOptions,xAxis:{type:"category",data:e,axisLabel:{color:"#606974"},axisLine:{lineStyle:{color:"#343f4c4d",width:1}}},color:oe.jh,yAxis:{type:"value",name:"销量占比(%)",nameTextStyle:{color:"#606974"},splitLine:{show:!1},axisLabel:{color:"#606974"},axisLine:{lineStyle:{color:"#343f4c4d",width:1}}},series:[{data:t,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(240,240,240,0.7)"},barWidth:"25",label:{show:!0,position:"top",formatter:e=>e.value+"%"}}],grid:{left:"5",right:"4%",bottom:"2",top:"50",containLabel:!0}}}catch(e){console.log(e)}}}},se=le,ie=(0,_.Z)(se,Q,ee,!1,null,null,null),ne=ie.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods-top"},[a("h2",[e._v(e._s(e.title))]),a("div",{staticClass:"goods-table-main"},[a("h4",{staticClass:"top-title"},[a("span",{staticClass:"tixing"}),a("span",{staticClass:"text"},[e._v(e._s(e.topTitle))])]),this.tableData.length?a("div",{staticClass:"goods-row"},e._l(e.tableData,(function(t){return a("div",{key:t.item_id,staticClass:"goods-column"},[a("img",{attrs:{src:t.image_url}}),a("div",{staticClass:"info"},[a("h6",[e._v(e._s(t.title))]),a("div",{staticClass:"gmv"},[a("span",[e._v("售价："+e._s(e.formatPriceFormYuan(t.discount_price/100)))]),a("span",[e._v("销量："+e._s(t.sale_count))])]),a("div",{staticClass:"price"},[a("span",[e._v("销售额："+e._s(e.formatPriceFormYuan(t.gmv/100)))]),a("span",[e._v("("+e._s(t.gmv_part)+"%)")])])])])})),0):a("Empty",{staticStyle:{"margin-top":"100px"}})],1)])},ce=[];const{formatPriceFormYuan:de}=j.Z;var ue={components:{Empty:ae.Z},props:{title:{type:String,default:"畅销商品榜"},topTitle:{type:String,default:"爆款商品TOP10"},tableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]}},methods:{formatPriceFormYuan:de}},pe=ue,me=(0,_.Z)(pe,re,ce,!1,null,"726ec6a4",null),he=me.exports;const _e=e=>function(t){return`<div class="tooltip-wrapper">\n                      <p class="p-row">\n                        <span class="right">${t.name}</span>\n                      </p>\n                      <p class="p-row">\n                        ${t.marker}\n                        <span>${e}：</span>\n                        <span>${t.value}</span>\n                        <span style="padding-left: 12px">${t.percent}%</span>\n                      </p>\n                    <div>`},ge={bottom:"-2%",left:"center",type:"scroll",icon:"circle"},ve={radius:["30%","45%"],label:{show:!1}};var fe,be,ye=(0,n.defineComponent)({props:{},components:{pieEcharts:V.Z,goodsTop:he,BaseEcharts:te.Z,categoryEcharts:ne,Empty:ae.Z},setup(e,t){const{gmvPieData:a,salePieData:o,getData:l,loading:s}=(0,c.cv)(t),i=(0,c.r5)(),r=(0,n.ref)({num:10,page_num:1,sort:"",title:""}),d=(0,n.ref)(!0);let u={project_id:void 0,start_date:void 0,end_date:void 0};const{gmvPieData:p,salePieData:m,getData:h,loading:_,priceGoodsColumn:g,priceGoodsGmvColumn:v}=(0,c.Z$)(t),{saleData:f,getData:b,loading:y}=(0,c.gD)(t),{saleData:w,getData:x,loading:k}=(0,c.gD)(t),{saleData:S,getData:C,loading:D,total:j,hotGoodsColumn:$}=(0,c.gD)(t),{saleData:T,getData:F,hotGoodsColumn:P,loading:A}=(0,c.y8)(t);(0,c.Rx)((e=>{r.value.page_num=1,r.value.title="";const a={start_date:e.start_date,end_date:e.end_date,project_id:e.project_id};u=a,l(a),h(a),b({...a,sort:"sale_count_desc",num:10,page_num:1}),x({...a,sort:"sale_count",num:10,page_num:1}),F(a),C({...a,...r.value}),i.category_report_query(e).then((()=>{t.emit("report",i.category_report)}))}));const O=()=>{C({...u,...r.value})},L=e=>{const{prop:t,order:a}=e;r.value.sort=null===a?"sale_count_desc":"ascending"===a?t:t+"_desc",O()};return{getData:l,getSaleInfo:C,searchInfo:O,tableSort:L,salePieData:o,priceGoodsColumn:g,priceGoodsGmvColumn:v,saleInfoData:S,hotItemData:T,gmvPieData:a,infoTotal:j,checkChartOrTable:d,infoColumn:$,saleInfo:r,loading:s,itemGmvPieData:p,itemSalePieData:m,topUnSaleData:w,topSaleData:f,itemLoading:_,saleInfoLoading:D,hotGoodsColumn:P,hotItemLoading:A,topUnLoading:k,topLoading:y}},render(){const e=arguments[0];return e("div",{class:"commodity-analysis-chart"},[e("div",{class:"analysis-pie-chart"},[e("div",{class:"category-pie"},[e("h6",["类目销售分析"]),e("div",{class:"pie-main"},[e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销量",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:ge,seriesOpt:ve,styles:"width: 332px; height:283px","pie-data":this.salePieData,loading:this.loading,formatterModal:_e("销量")}})]),e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销售额",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:ge,seriesOpt:ve,styles:"width: 332px; height:283px","pie-data":this.gmvPieData,loading:this.loading,formatterModal:_e("销售额")}})])])]),e("div",{class:"pirce-pie"},[e("h6",[e("span",["价格带销售分析"]),e("div",{class:"icon-row"},[e("tg-icon",{on:{click:()=>this.checkChartOrTable=!0},class:this.checkChartOrTable?"icon left active":"icon left",attrs:{name:"ico-icon_tongyong_bingtu2"}}),e("span",{class:"line"}),e("tg-icon",{on:{click:()=>this.checkChartOrTable=!1},class:this.checkChartOrTable?"icon right":"icon right active",attrs:{name:"ico-icon_tongyong_liebiao1"}})])]),e("div",{class:this.checkChartOrTable?"pie-main ":"pie-main hide"},[e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销量",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:ge,seriesOpt:ve,styles:"width: 332px; height:283px","pie-data":this.itemSalePieData,loading:this.itemLoading,formatterModal:_e("销量")}})]),e("div",{class:"pie"},[e("pie-echarts",{attrs:{title:{text:"销售额",x:"center",y:"center",textStyle:{color:"#3c5269",fontWeight:400,fontSize:14}},legend:ge,seriesOpt:ve,styles:"width: 332px; height:283px","pie-data":this.itemGmvPieData,loading:this.itemLoading,formatterModal:_e("销售额")}})])]),e("div",{class:this.checkChartOrTable?"table-main hide":"table-main "},[e("div",{class:"table"},[e("tg-table",{attrs:{height:"235",border:!0,data:this.itemSalePieData},directives:[{name:"loading",value:this.itemLoading}]},[this.priceGoodsColumn.map((t=>e("el-table-column",J()([{},{attrs:{...t}}]))))])]),e("div",{class:"table"},[e("tg-table",{attrs:{height:"235",border:!0,data:this.itemGmvPieData},directives:[{name:"loading",value:this.itemLoading}]},[this.priceGoodsGmvColumn.map((t=>e("el-table-column",J()([{},{attrs:{...t}}]))))])])])])]),e("div",{class:"analysi-table"},[e("div",{class:"best-sale-goods"},[e("goods-top",{directives:[{name:"loading",value:this.topLoading}],attrs:{title:"畅销商品榜",topTitle:"爆款商品TOP10",tableData:this.topSaleData}})]),e("div",{class:"sale-goods-rate"},[e("h2",{class:"title"},["爆款商品销售占比"]),e("div",{class:"rate-table"},[e("el-table",{attrs:{height:"248",stripe:!0,data:this.hotItemData},directives:[{name:"loading",value:this.hotItemLoading}]},[this.hotGoodsColumn.map((t=>e("el-table-column",J()([{},{attrs:{...t}}]))))])]),e("div",{class:"rate-charts"},[e("category-echarts",{style:"height: 280px",attrs:{loading:this.hotItemLoading,"pie-data":this.hotItemData.map((e=>({name:e.title?.replace("爆款商品",""),value:e.sale_count_part})))}})])]),e("div",{class:"unsale-goods"},[e("goods-top",{directives:[{name:"loading",value:this.topLoading}],attrs:{title:"滞销商品榜",topTitle:"滞销商品TOP10",tableData:this.topUnSaleData}})])]),e("div",{class:"sale-info-table"},[e("h2",["商品销售详情"]),e("div",{class:"table-main"},[e("el-input",J()([{attrs:{size:"small",placeholder:"请输入商品名称或商品编码"},style:"width: 400px"},{nativeOn:{keyup:e=>{13===e.keyCode&&(this.saleInfo.page_num=1,this.searchInfo())}}},{model:{value:this.saleInfo.title,callback:e=>{this.$set(this.saleInfo,"title","string"===typeof e?e.trim():e)}}}]),[e("i",{class:"el-icon-search el-input__icon",slot:"prefix"})]),e("div",{class:"table-lalal mgt-12"},[e("tg-table",{attrs:{stripe:!0,data:this.saleInfoData,"default-sort":{prop:"sale_count",order:"descending"},maxHeight:638},directives:[{name:"loading",value:this.saleInfoLoading}],on:{"sort-change":this.tableSort}},[this.infoColumn.map((t=>e("el-table-column",J()([{},{attrs:{...t}}])))),e("fragments",{slot:"empty"},[e("empty-common",{attrs:{"detial-text":"暂无数据"}})])]),this.saleInfoData.length>0&&e("div",{class:"block flex-none",style:"margin: 8px 0 10px 0"},[e("el-pagination",{class:"mgt-12",attrs:{"current-page":this.saleInfo.page_num,"page-sizes":[10],pageSize:this.saleInfo.num,total:this.infoTotal,layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":e=>{this.saleInfo.page_num=e,this.searchInfo()}}})])])])])])}}),we=ye,xe=(0,_.Z)(we,fe,be,!1,null,"43993e97",null),ke=xe.exports,Se=a(29625);const{formatPriceFormYuan:Ce}=j.Z;var De=(0,n.defineComponent)({components:{DataSwitch:r.Z,CompList:K,CompChart:ke,CompListOld:v},setup(e,t){const a=(0,n.ref)(0),o=(0,n.ref)([]),l=(0,n.ref)({access_url:"",has_access:!0}),s=e=>{a.value=e},i=(0,n.computed)((()=>0===a.value?0===h.value?"":1===h.value?"CompList":"CompListOld":"CompChart")),r=(0,n.ref)(""),c=(0,n.ref)(""),d=(0,n.ref)({project_id:void 0,start_date:void 0,end_date:void 0}),u=(0,n.ref)(""),p=(0,n.reactive)({project_id:void 0,start_date:P()(),end_date:P()()}),m=(0,n.ref)([]),h=(0,n.computed)((()=>{const e=m.value.find((e=>e.project_id===d.value.project_id));return void 0===e?0:!0===e.new_report?1:2}));(0,n.provide)("searchParams",d),(0,n.provide)("searchProjectName",u),(0,n.provide)("hasNewProject",h);const _=()=>(0,C.Te)().then((e=>(m.value=e.data.data.projects,e.data.data))),g=async()=>{try{const{data:{data:e}}=await(0,C.e_)({project_id:p.project_id});let t="";m.value.map((e=>{e.project_id===p.project_id&&(t=e.project_name)})),d.value.project_id=p.project_id,u.value=t,l.value=e,b()}catch(e){console.log(e)}};(0,n.onMounted)((()=>{_().then((e=>{void 0===p.project_id&&(p.project_id=e.default.project_id,p.start_date=e.default.date,p.end_date=e.default.date,o.value=[e.default.date,e.default.date],b(),g(),j(d.value))}))}));const v={disabledDate(e){return e.getTime()>Date.now()||e.getTime()<new Date("2022/01/1 00:00:00").getTime()}},f=()=>{p.project_id=m.value[0].project_id,o.value=[]},b=()=>{const{project_id:e}=p;d.value={project_id:e,start_date:o.value[0],end_date:o.value[1]},j(d.value)},y=(0,n.ref)(),w=e=>{y.value.scrollTop=e-66},x=()=>{window.open(l.value.access_url)},k=e=>{const t=e.reduce(((e,t)=>e+t.sale_count),0),a=e.reduce(((e,t)=>e+t.gmv),0);r.value=(0,$.Y4)(t||0,0,".",","),c.value=Ce(a/100)},S=(0,n.ref)({all_sale_amount:0,all_sale_count:0,all_shop_sale_amount:0,all_shop_sale_count:0}),j=async e=>{const[{data:a}]=await(0,D.Dc)(500,(0,C.Bm)(e));if(a.success){const e=a.data;S.value.all_sale_amount=e.all_sale_amount,S.value.all_sale_count=e.all_sale_count,S.value.all_shop_sale_amount=e.all_shop_sale_amount,S.value.all_shop_sale_count=e.all_shop_sale_count}else t.root.$message({type:"warning",message:a.message??"查询失败，稍后重试",duration:2e3,showClose:!0})};return{ProjectStatusEnum:Se.C_,form:p,linkAccess:x,getReport:k,search:b,reset:f,gmvTotal:c,project_list:m,curDate:o,saleTotal:r,searchParams:d,getAccess:g,pickerOptions:v,accessObj:l,component:i,handleCheckTab:s,activeIndex:a,commodityRef:y,onScroll:w,baseData:S,numberFormat:$.Y4,formatPriceFormYuan:Ce,hasNewProject:h}}}),je=De,$e=(0,_.Z)(je,s,i,!1,null,"702de17b",null),Te=$e.exports},62214:function(e,t,a){a.d(t,{Z:function(){return _}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"314px",width:"100%"}},[e.date.length>0?a("base-echarts",{attrs:{options:e.baseOptions}}):a("Empty")],1)},l=[],s=a(32200),i=a(45781),n=a(99197),r=a(8136);const{tranNumber:c}=i.Z,d=(e,t)=>{const a=e-0;return 0===t||isNaN(a)?e:a.toFixed(2)};var u={name:"BaseLine",components:{BaseEcharts:s.Z,Empty:n.Z},props:{loading:{type:Boolean,default:!0},date:{type:Array,default:()=>[]},list:{type:Array,default:()=>[]},legend:{type:Boolean,default:()=>!0},color:{type:Array},percentage:{type:Boolean},unit:{type:String,default:"%"}},data(){return{baseOptions:{grid:{top:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:0,formatter:e=>{const t=15;let a="",o=Math.round(e.length/t)+1;for(let s=0;s<e.length;){const t=1===s||2===s?this.unit:"";a+='<div style="display: flex; line-height: 24px;padding: 0 15px;color: #606974;font-size: 12px;font-weight: normal">';for(let l=0;l<o;l++){if(s>=e.length)continue;const o=void 0===e[s].value||null===e[s].value;a+=`<div style="display: flex;align-items: center;margin-right: 10px;flex: 1;">${e[s].marker}<span>${(0,r.bI)(e[s].seriesName,15)}</span>\n                  <span style="padding-left: 18px;">${o?"--":d(c(e[s].value),s)}${o?"":t}</span></div>`,s+=1}a+="</div>"}const l=`<div style="padding-bottom: 10px">\n              <p style="padding:10px;">\n                <span>${e[0].name}</span>\n                <span style="float:right;"></span>\n              </p>\n              ${a}\n            </div>`;return l},textStyle:{color:"#343F4C",fontSize:14,fontWeight:"bold"},extraCssText:"box-shadow: 1px 2px 8px 0px  rgba(0, 0, 0, 0.26);"},legend:{show:this.legend,bottom:0},xAxis:{type:"category",data:[],axisLine:{lineStyle:{color:"rgba(52,63,76,0.30)"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",fontSize:11},splitLine:{show:!1}},color:this.color?this.color:r.nA,yAxis:[{type:"value",scale:!0,nameTextStyle:{color:"#666",fontSize:14},min:0,splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...e)=>{const t=c(...e);return!0===this.percentage?`${t}%`:t}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}},{type:"value",scale:!0,position:"right",nameTextStyle:{color:"#666",fontSize:14},min:0,splitLine:{show:!0,lineStyle:{color:["#eee"],type:"dashed"}},axisTick:{lineStyle:{opacity:0}},axisLabel:{color:"#606974",formatter:(...e)=>{const t=c(...e);return`${t}${this.unit}`}},axisLine:{lineStyle:{type:"solid",color:"rgba(52,63,76,0.30)",width:"1"}}}],series:[]}}},created(){this.init()},watch:{date:{handler(){this.init()},deep:!0},list:{handler(){this.init()},deep:!0}},methods:{init(){const e=JSON.parse(JSON.stringify(this.list));this.baseOptions.xAxis.data=this.date,this.baseOptions.series=e}}},p=u,m=a(1001),h=(0,m.Z)(p,o,l,!1,null,null,null),_=h.exports},29625:function(e,t,a){var o,l;a.d(t,{Bs:function(){return m},C_:function(){return n},RB:function(){return h},UN:function(){return d},WD:function(){return o},Wj:function(){return r},Y$:function(){return l},Yh:function(){return i},Zb:function(){return s},i8:function(){return p},kA:function(){return _},x3:function(){return c}}),function(e){e[e["marketing"]=1]="marketing",e[e["taobao"]=2]="taobao",e[e["douyin"]=3]="douyin",e[e["base"]=4]="base",e[e["mcn"]=5]="mcn",e[e["douyinsh"]=7]="douyinsh"}(o||(o={})),function(e){e[e["common"]=1]="common",e[e["system"]=2]="system"}(l||(l={}));const s=new Map([[o.marketing,"营销业务"],[o.douyin,"抖音店播"],[o.taobao,"淘宝店播"],[o.base,"基地业务"],[o.mcn,"S2B2C"],[o.douyinsh,"抖音店播(上海)"]]),i=[{value:o.marketing,label:"整合营销"},{value:o.douyin,label:"抖音店播"},{value:o.taobao,label:"淘宝店播"},{value:o.mcn,label:"S2B2C"},{value:o.douyinsh,label:"抖音店播(上海)"}];var n;(function(e){e[e["creation"]=1]="creation",e[e["tryLive"]=2]="tryLive",e[e["execution"]=3]="execution",e[e["regionExecution"]=4]="regionExecution",e[e["finish"]=5]="finish",e[e["executionEnd"]=6]="executionEnd"})(n||(n={}));const r=new Map([[n.creation,"项目创建"],[n.tryLive,"试播中"],[n.execution,"项目执行中"],[n.regionExecution,"区域执行中"],[n.executionEnd,"执行结束"],[n.finish,"已完结"]]);var c;(function(e){e[e["region"]=2]="region",e[e["selfSupport"]=1]="selfSupport"})(c||(c={}));const d=new Map([[c.region,"区域"],[c.selfSupport,"自营"]]);var u;(function(e){e[e["month"]=1]="month",e[e["quarter"]=2]="quarter",e[e["halfAyear"]=3]="halfAyear"})(u||(u={}));const p=new Map([[u.month,"月结"],[u.quarter,"季结"],[u.halfAyear,"半年"]]),m=new Map([[1,"美妆"],[2,"生活"],[3,"服饰"],[4,"美食"],[5,"母婴"],[6,"数码"],[7,"家装"],[8,"健康"],[9,"宠物"],[10,"时尚"],[11,"配饰"],[12,"家电"],[13,"测评"],[14,"旅行"],[15,"运动"],[16,"摄影"],[17,"情感"],[18,"汽车"],[19,"搞笑"],[20,"教育"],[21,"财经"],[22,"萌娃"],[23,"文化"],[24,"影视"],[25,"娱乐"],[26,"游戏"],[27,"海外"],[28,"才艺"],[29,"三农"],[30,"二次元"],[31,"高颜值"]]);function h(e){return 0===e?"无":m.get(e)??"无"}var _;(function(e){e[e["live"]=1]="live",e[e["marketing"]=2]="marketing",e[e["common_business"]=3]="common_business"})(_||(_={}))},58302:function(e,t,a){var o=a(97434),l=a(77944),s=a(52140);const i=e=>{const t=(0,o.computed)((()=>l.Z.getters["global/scrollbarSetting"])),a=(0,o.computed)((()=>void 0!==e.pagename?!0!==t.value.find((t=>t.key===e.pagename))?.value:e.disable??!1)),i=(0,o.computed)((()=>{const t=(e.fixedBlockHeightRefs??[]).map((e=>(0,o.unref)(e))).reduce(((e,t)=>(0,o.unref)(e)+(0,o.unref)(t)),0);return a.value?"max-content":`calc(100vh - ${(0,o.unref)(t)+56+36}px)`})),n=(0,o.computed)((()=>(a.value,"flex-auto"))),r=(0,o.computed)((()=>({height:i.value,overflowInBody:!a.value}))),c=(0,o.ref)(0),d=(0,o.computed)((()=>a.value?{}:{height:Math.max(c.value-(0,o.unref)((0,o.unref)(e.compensation)),e.tableMinHeight??0)})),u=a.value?()=>{}:e=>{c.value!==e&&(c.value=e,(0,s.S)())},p=a.value?()=>{}:t=>{0===c.value?setTimeout((()=>{u(t.height)}),e.delay??1200):u(t.height)};return{cardHeight:i,tableProps:d,onRectUpdate:p,rectHeight:c,cardFlexClass:n,cardProps:r}};t["Z"]=i},23812:function(e,t,a){a.d(t,{GQ:function(){return n},YE:function(){return s},cY:function(){return r},pK:function(){return i}});var o=a(97434),l=a(44928);const s=(e,t)=>({tabs:(0,o.reactive)([...e]),checkedTab:(0,o.ref)(t??(e.length<1?"":e[0].value))}),i=(e,t)=>{const a=(0,o.isRef)(e)?e:(0,o.ref)(e),l=(0,o.isRef)(t)?(0,o.unref)(t):t,s=a.value.length<1?"":a.value[0].value,i=(0,o.ref)(l??s);return{tabs:a,checkedTab:i}},n=(e,t,a)=>{const l=(0,o.reactive)([...t]),s=(0,o.ref)(a??(t.length<1?"":`${t[0].value}`)),i=t=>{e.root.$router.push({path:e.root.$route.path,query:{tab:`${t.value}`}})};return(0,o.onBeforeMount)((()=>{const o=e.root.$route.query.tab;s.value="string"===typeof o?o:a??(t.length<1?"":`${t[0].value}`)})),{tabs:l,checkedTab:s,onTabChange:i}},r=(e,t)=>{const a=(0,o.reactive)([...e]),s=(0,o.ref)(t??(e.length<1?"":`${e[0].value}`)),i=(0,l.t)(),n=e=>{const t=i.currentRoute,a={...t.params,tab:e.value};i.push({name:t.name,params:a})};return s.value=i.currentRoute.params.tab||t||s.value,{tabs:a,checkedTab:s,onTabChange:n}}},52140:function(e,t,a){a.d(t,{S:function(){return o},n:function(){return l}});const o=()=>{const e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},l=()=>{const{width:e,height:t}=document.body.getBoundingClientRect();return{width:e,height:t}}},9914:function(e,t,a){a.d(t,{CB:function(){return C},Rx:function(){return f},Z$:function(){return k},cv:function(){return w},gD:function(){return S},mU:function(){return y},r5:function(){return b},y8:function(){return D}});var o=a(97434),l=a(99575),s=a(92410),i=a(64892),n=a(72040),r=a(61282),c=a(59760),d=a(45781),u=a(43773),p=a(24522),m=a(48606);const h=(0,u.R)({component:p.Z,width:"700px",footer:!1}),{formatPriceFormYuan:_,formatEmpty:g,tranNumber:v}=d.Z,f=e=>{const t=(0,o.inject)("searchParams"),a=t=>{void 0!==t.project_id&&void 0!==t.start_date&&e(t)};(0,o.watch)((()=>t.value),(e=>{void 0!==e&&a(e)}),{deep:!0}),a(t.value)},b=e=>{const t=(0,o.ref)([]),a=(0,o.ref)(),s=(0,o.ref)([]),c=(0,o.reactive)({total:0,page_num:0}),d=(e,t=!1)=>null===e||void 0===e?"--":(0,r.dN)(e,"",t),u=e=>{const o={...e};return o.start_date=e.start_date,o.end_date=e.end_date,(0,l.ki)(o).then((e=>{t.value=e.data.data.categories,a.value=e.data.data.project}))},p=e=>(0,l.GX)({...e,num:20}).then((t=>{t.data.data.items=t.data.data.items.map((e=>(e.stock_num=null===e.stock_num?"--":`${d(e.stock_num,!0)}`,e.watch_ucnt=null===e.watch_ucnt?"--":`${d(e.watch_ucnt,!0)}`,e.total_sale_count=null===e.total_sale_count?"--":`${d(e.total_sale_count,!0)}`,e.last_week_sale_count=null===e.last_week_sale_count?"--":`${d(e.last_week_sale_count,!0)}`,e.shop_sale_count=null===e.shop_sale_count?"--":`${d(e.shop_sale_count,!0)}`,e.sale_count=null===e.sale_count?"--":`${d(e.sale_count,!0)}`,e.market_price=null===e.market_price?"--":`${d(e.market_price/100)}`,e.shop_gmv=null===e.shop_gmv?"--":`${d(e.shop_gmv/100)}`,e.shop_price=`${d(e.shop_price)}`,e.discount_price=`${d(e.discount_price/100)}`,e.gmv=`${d(e.gmv/100)}`,e.last_week_gmv=`${d(e.last_week_gmv/100)}`,e.pay_rate=null===e.pay_rate?"--":`${e.pay_rate}%`,e.click_rate=null===e.click_rate?"--":`${e.click_rate}%`,e))),c.total=t.data.data.total,c.page_num=e.page_num,_(t.data.data.items)})),m=(0,o.ref)([]),_=t=>{const a=[];if(t.length>0&&t.length<20){const e=new Array(20-t.length).fill(1).map((()=>({empty:!0})));t.push(...e)}const l=new Array(t.length+1).fill(1).map(((a,o)=>{const l={label:`key_${o}`,align:"center",minWidth:164,formatter(a,l,s,r){const c=this.$createElement,d=l.label;if("key_0"===d)return c("span",{class:"firstcolumn"},[a[d]]);if(0===r){if(void 0===a[d])return"";const e=1*t[o-1].click_rate?.replace("%",""),l=c("img",{class:"hot-img",attrs:{src:i}}),s=c("img",{class:"hot-img",attrs:{src:n}});return c("div",{class:"goods-descript"},[c("img",{class:"first-row-img",attrs:{src:a[d]},on:{click:()=>{h.show(a[d])}}}),e>=15?l:e>=12?s:""])}return 18===r?!0===a[d]?"":c("a",{on:{click:()=>{e&&e(t[o-1])}}},["查看"]):1===r?c("span",{class:"goods_code"},[a[d]]):2===r?c("span",{class:"goods_name",attrs:{title:a[d]}},[a[d]]):a[d]}};return 0===o&&(delete l.minWidth,l.width=130,l.fixed="left"),l})),r=[["商品主图","image_url"],["商品编码","item_id"],["商品名称","title"],["商品类目","second_cname"],["吊牌价 (元)","market_price"],["平均销售价 (元)","shop_price"],["讲解次数","talk_times"],["直播销量","sale_count"],["直播销售额 (元)","gmv"],["店铺销量","shop_sale_count"],["店铺销售额 (元)","shop_gmv"],["曝光人数","watch_ucnt"],["点击率","click_rate"],["转化率","pay_rate"],["上周销量","last_week_sale_count"],["上周销售额 (元)","last_week_gmv"],["累计销量","total_sale_count"],["今日店铺库存","stock_num"],["销售趋势","empty"]];r.forEach(((e,l)=>{const s={};s["key_0"]=e[0];const i=e[1];17===l&&(s["key_0"]=(0,o.h)("div",void 0,["今日店铺库存",(0,o.h)("el-tooltip",{class:"item",attrs:{effect:"light",content:"截止到今日凌晨库存",placement:"top-start"}},[(0,o.h)("tg-icon",{attrs:{name:"ico-question"}})])])),t.forEach(((e,t)=>{s[`key_${t+1}`]=null===e[i]?"--":e[i]})),a.push(s)})),m.value=l,s.value=a};return _([]),(0,o.reactive)({project:a,category_report:t,category_report_query:u,project_report:s,query_project:p,columns:m,pagination:c})},y=()=>{const e=(0,o.ref)(!1),t=(0,o.ref)(!1),a=(0,o.ref)({data:[],series:[]}),s=(0,o.ref)(""),i=()=>{t.value=!1},n=o=>{s.value="类目近7天销售趋势",a.value={data:[],series:[]},t.value=!0,e.value=!0,(0,l.f)(o).then((t=>{const o=t.data.data,l=o.map((e=>e.date));a.value={data:l,series:[{smooth:!0,showSymbol:!0,type:"line",name:"销量",data:o.map((e=>e.sale_count))},{smooth:!0,showSymbol:!0,type:"line",name:"点击率",yAxisIndex:1,data:o.map((e=>e.click_rate))},{smooth:!0,showSymbol:!0,type:"line",name:"转化率",data:o.map((e=>e.pay_rate))}]},e.value=!1}))},r=o=>{s.value="单品近7天销售趋势",a.value={data:[],series:[]},t.value=!0,e.value=!0,(0,l.j1)(o).then((t=>{const o=t.data.data,l=o.map((e=>e.date));a.value={data:l,series:[{smooth:!0,showSymbol:!0,type:"line",name:"销量",data:o.map((e=>e.sale_count))},{smooth:!0,showSymbol:!0,type:"line",name:"点击率",yAxisIndex:1,data:o.map((e=>e.click_rate))},{smooth:!0,showSymbol:!0,type:"line",name:"转化率",data:o.map((e=>e.pay_rate))}]},e.value=!1}))};return(0,o.reactive)({loading:e,visible:t,charts:a,queryCategory:n,onClose:i,queryGoods:r,title:s})},w=e=>{const t=(0,o.inject)("hasNewProject"),a=(0,o.reactive)({loading:!1,gmvPieData:[],salePieData:[]}),s=async o=>{a.loading=!0;try{const{data:{data:{gmv_pie_chart:e,sale_count_pie_chart:s}}}=await(1===t.value?(0,l.nM)(o):(0,l.p8)(o));a.gmvPieData=e.map((e=>({name:e.cat_name,value:(e.gmv/100).toFixed(2)}))),a.salePieData=s.map((e=>({name:e.cat_name,value:e.sale_count})))}catch(s){e.root.$message.error("查询失败")}finally{a.loading=!1}};return{...(0,o.toRefs)(a),getData:s}},x=e=>e.toFixed(2)-0,k=e=>{const t=(0,o.reactive)({loading:!1,gmvPieData:[],salePieData:[],priceGoodsColumn:[{label:"价格带",prop:"name",align:"center",headerAlign:"center"},{label:"销量",prop:"value",align:"center",headerAlign:"center"},{label:"占比",prop:"ratio",align:"center",width:90,headerAlign:"center"}],priceGoodsGmvColumn:[{label:"价格带",prop:"name",align:"center",headerAlign:"center"},{label:"销售额",prop:"value",align:"center",headerAlign:"center"},{label:"占比",prop:"ratio",align:"center",width:90,headerAlign:"center"}]}),a=async a=>{t.loading=!0;try{const{data:{data:{pie_chart:e}}}=await(0,l.OZ)(a),o=e.reduce(((e,t)=>t.gmv+e),0),s=e.reduce(((e,t)=>t.sale_count+e),0);t.gmvPieData=e.map(((t,a)=>{const l={name:"",value:x(t.gmv/100),ratio:o>0?(t.gmv/o*100).toFixed(2)+"%":"0"};return a<=0&&0===t.min_price?l.name=x(t.max_price/100)+"以下":a!==e.length-1||t.max_price?l.name="￥"+x(t.min_price/100)+"-￥"+x(t.max_price/100):l.name=x(t.min_price/100)+"以上",l})),t.salePieData=e.map(((t,a)=>{const o={name:"",value:t.sale_count,ratio:s>0?(t.sale_count/s*100).toFixed(2)+"%":"0"};return a<=0&&0===t.min_price?o.name=x(t.max_price/100)+"以下":a!==e.length-1||t.max_price?o.name="￥"+x(t.min_price/100)+"-￥"+x(t.max_price/100):o.name=x(t.min_price/100)+"以上",o}))}catch(o){e.root.$message.error("查询失败")}finally{t.loading=!1}};return{...(0,o.toRefs)(t),getData:a}},S=e=>{const t=(0,o.reactive)({loading:!1,saleData:[],total:0,hotGoodsColumn:[{label:"商品信息",width:268,align:"left",fixed:!0,headerAlign:"left",formatter:e=>(0,o.h)("div",{class:"goods-info"},[(0,o.h)("img",{attrs:{src:e.image_url||c}}),(0,o.h)("div",{class:"info-row"},[(0,o.h)("div",{class:"goods-title"},e.title),(0,o.h)("div",{class:"goods-price"},[(0,o.h)("span",void 0,"直播价："),(0,o.h)("span",void 0,_((e.discount_price/100).toFixed(2),2,!1))])])])},{label:"商品编号",width:204,align:"center",headerAlign:"center",formatter:e=>g(e.item_id)},{label:"类目",minWidth:174,align:"left",headerAlign:"left",formatter:e=>g(e.second_cname)},{label:"讲解次数",width:122,sortable:"custom",prop:"talk_times",align:"right",headerAlign:"right",formatter:e=>g(e.talk_times)},{label:"曝光人数",width:122,align:"right",sortable:"custom",prop:"watch_ucnt",headerAlign:"right",formatter:e=>v(e.watch_ucnt)},{label:"点击人数",minWidth:122,align:"right",sortable:"custom",prop:"click_ucnt",headerAlign:"right",formatter:e=>v(e.click_ucnt)},{label:"点击率",minWidth:126,align:"right",sortable:"custom",prop:"click_rate",headerAlign:"right",formatter:e=>g(e.click_rate,"%")},{label:"订单数",minWidth:122,sortable:"custom",prop:"order_cnt",align:"right",headerAlign:"right",formatter:e=>v(e.order_cnt)},{label:"销量",minWidth:105,align:"right",sortable:"custom",prop:"sale_count",headerAlign:"right",formatter:e=>v(e.sale_count)},{label:"销售额 (元)",minWidth:126,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:e=>_((e.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:144,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:e=>g(e.gmv_part,"%")},{label:"成交转化率",minWidth:144,align:"right",sortable:"custom",prop:"pay_rate",headerAlign:"right",formatter:e=>g(e.pay_rate,"%")},{label:"实际销售额 (元)",minWidth:144,sortable:"custom",prop:"gmv",align:"right",headerAlign:"right",formatter:e=>_((e.gmv/100).toFixed(2),2,!1)}]}),a=async a=>{t.loading=!0;try{const e=await(0,l.GX)(a);t.saleData=e.data.data.items||[],t.total=e.data.data.total||0}catch(o){e.root.$message.error("查询失败")}finally{t.loading=!1}};return{...(0,o.toRefs)(t),getData:a}},C=e=>{const t=(0,o.reactive)({loading:!1,saleData:[],total:0,hotGoodsColumn:[{label:"商品信息",width:268,align:"left",fixed:!0,headerAlign:"left",formatter:e=>(0,o.h)("div",{class:"goods-info"},[(0,o.h)("img",{attrs:{src:e.image_url||c},style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+e.item_id)}}}),(0,o.h)("div",{class:"info-row"},[(0,o.h)("div",{class:"goods-title",style:{cursor:"pointer"},on:{click:function(){window.open("https://haohuo.jinritemai.com/views/product/item2?id="+e.item_id)}}},e.title),(0,o.h)("div",{class:"goods-price"},[(0,o.h)("span",void 0,"直播价："),(0,o.h)("span",void 0,_((e.discount_price/100).toFixed(2),2,!1))])])])},{label:"类目",minWidth:134,align:"left",headerAlign:"left",formatter:e=>g(e.second_cname)},{label:"销售额 (元)",minWidth:126,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:e=>_((e.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:124,align:"right",sortable:"custom",prop:"gmv",headerAlign:"right",formatter:e=>g(e.gmv_part,"%")},{label:"销量",minWidth:105,align:"right",sortable:"custom",prop:"sale_count",headerAlign:"right",formatter:e=>v(e.sale_count)},{label:"平均售价 (元)",minWidth:135,align:"right",sortable:"custom",prop:"shop_sale_price_avg",headerAlign:"right",formatter:e=>_((e.shop_sale_price_avg/100).toFixed(2),2,!1)},{label:"平均折扣率 ",minWidth:135,align:"right",sortable:"custom",prop:"shop_sale_price_avg_rate",headerAlign:"right",formatter:e=>g(e.shop_sale_price_avg_rate,"%")},{label:"讲解次数",width:102,sortable:"custom",prop:"talk_times",align:"right",headerAlign:"right",formatter:e=>g(e.talk_times)},{label:"发货前退款金额 (元)",minWidth:164,align:"right",sortable:"custom",prop:"shop_refund_status21_gmv",headerAlign:"right",formatter:e=>_((e.shop_refund_status21_gmv/100).toFixed(2),2,!1)},{label:"发货前退款比例",minWidth:164,align:"right",sortable:"custom",prop:"shop_refund_status21_gmv_rate",headerAlign:"right",formatter:e=>g(e.shop_refund_status21_gmv_rate,"%")},{label:"总退款金额 (元)",minWidth:134,align:"right",sortable:"custom",prop:"shop_refund_gmv",headerAlign:"right",formatter:e=>_((e.shop_refund_gmv/100).toFixed(2),2,!1)},{label:"总退款比例",minWidth:124,align:"right",sortable:"custom",prop:"shop_refund_gmv_rate",headerAlign:"right",formatter:e=>g(e.shop_refund_gmv_rate,"%")}]}),a=async e=>{t.loading=!0;const a=await(0,s.WW)(e);t.loading=!1,a.data.success&&(t.saleData=a.data.data.items||[],t.total=a.data.data.total||0)},l=(0,o.ref)([]),i=(0,o.ref)([]),n=async e=>{const t=await(0,s.jL)({...e,is_from_project:e.is_from_project||!1});t.data.success?l.value=t.data.data.map((e=>({label:e.cat_name,value:e.id}))):m.Message.error(t.data.message)},r=async e=>{const t=await(0,s.jL)({...e,is_from_project:e.is_from_project||!1});t.data.success?i.value=t.data.data.map((e=>({label:e.cat_name,value:e.id}))):m.Message.error(t.data.message)};return{...(0,o.toRefs)(t),getData:a,getCategory_3:r,getCategory_2:n,category_2:l,category_3:i}},D=e=>{const t=(0,o.reactive)({loading:!1,saleData:[],hotGoodsColumn:[{label:"爆款商品",minWidth:128,align:"left",headerAlign:"left",prop:"title"},{label:"销售额 (元)",minWidth:98,align:"right",headerAlign:"right",formatter:e=>_((e.gmv/100).toFixed(2),2,!1)},{label:"销售额占比",minWidth:94,align:"right",headerAlign:"right",formatter:e=>e.gmv_part+"%"},{label:"销量",minWidth:79,align:"right",headerAlign:"right",formatter:e=>_(e.sale_count,2,!1)},{label:"销量占比",minWidth:80,align:"center",headerAlign:"center",formatter:e=>e.sale_count_part+"%"}]}),a=async a=>{t.loading=!0;try{const{data:{data:e}}=await(0,l.tG)(a);t.saleData=[],e.top3&&t.saleData.push({...e.top3,title:"前3款爆款商品"}),e.top10&&t.saleData.push({...e.top10,title:"前10款爆款商品"}),e.top20&&t.saleData.push({...e.top20,title:"前20款爆款商品"}),e.top30&&t.saleData.push({...e.top30,title:"前30款爆款商品"})}catch(o){e.root.$message.error("查询失败")}finally{t.loading=!1}};return{...(0,o.toRefs)(t),getData:a}}},43773:function(e,t,a){a.d(t,{R:function(){return p},y:function(){return m}});var o=a(36568),l=a.n(o),s=a(97434),i=a(64923),n=a(77944);let r=1;const c=()=>{const e=document.createElement("div");return e.id="dialog_"+r++,document.body.appendChild(e),e},d=new Function,u=(e,t)=>{let a=e;return void 0===a&&(a={}),Object.keys(t).forEach((e=>{const o=a[e]||d,l=t[e];a[e]=(...e)=>{if(!1!==l(...e))return o(...e)}})),a},p=(e={})=>{const t=(0,s.ref)(),a=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),o=(0,s.ref)(!0),r=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};r(e);const d=(0,s.ref)(u(e.on,{close(){a.visible=!1},updateDialog(e={}){r(e)}})),p=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:n.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,s.provide)(t,e.provide[t])}))},render(t){if(o.value&&a.visible)return t("el-dialog",l()([{class:`customer-dialog el-dialog-center-rewrite tg-body-container  ${e.class}`},{props:a},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:d.value},{attrs:{isDialog:!0}}]),[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:d.value}),a.footer&&t("fragments",{slot:"footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{attrs:{type:"primary"},on:{click:p}},[a.okText])])])}});const m=(...e)=>{a.visible||(a.visible=!0,(0,s.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},h=e=>(r(e),v),_=()=>{a.visible=!1},g=(e,t,a=!1)=>(!0===a?d.value[e]=t:u(d.value,{[e]:t}),v);(0,s.onUnmounted)((()=>{o.value=!1,a.visible=!1}));const v=(0,s.reactive)({show:m,update:h,on:g,close:_,config:e,data:e.data});return v},m=(e={})=>{const t=(0,s.ref)(),a=(0,s.reactive)({visible:!1,title:void 0,width:void 0,footer:!0,okText:"提交",cancelText:"取消",disabledOK:!0}),o=(0,s.ref)(!0),r=e=>{Object.keys(e).forEach((t=>{a.hasOwnProperty.call(a,t)&&(a[t]=e[t])}))};r(e);const d=(0,s.ref)(u(e.on,{close(){a.visible=!1},updateDialog(e={}){r(e)}})),p=()=>{const e=t.value.$refs&&t.value.$refs.dialogRef||{};e.dialogSubmit?e.dialogSubmit():e.onSaveBtnClick?e.onSaveBtnClick():console.log("子组件没有dialogSubmit或onSaveBtnClick")};t.value=new i["default"]({el:c(),store:n.Z,setup(){void 0!==e.provide&&Object.keys(e.provide).forEach((t=>{(0,s.provide)(t,e.provide[t])}))},render(t){if(!o.value)return;if(!a.visible)return;const{width:s,...i}=a;return t("el-drawer",l()([{class:`tg-drawer-rewrite ${e.class}`},{props:{...i,size:s}},{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,wrapperClosable:!1}},{on:d.value},{attrs:{isDialog:!0}}]),[t("div",{class:"tg-drawer-content"},[a.visible&&t(e.component,{ref:"dialogRef",props:{...e.props,isDialog:!0},on:d.value})]),a.footer&&t("div",{class:"tg-drawer-footer"},[t("tg-button",{on:{click:()=>a.visible=!1}},[a.cancelText]),a.disabledOK&&t("tg-button",{class:"mgl-12",attrs:{type:"primary"},on:{click:p}},[a.okText])])])}});const m=(...e)=>{a.visible||(a.visible=!0,(0,s.nextTick)((()=>{const a=t.value.$refs&&t.value.$refs.dialogRef;a?a.dialogShow?a.dialogShow(...e):a.show&&a.show(...e):console.log("未找到子组件请检查代码")})))},h=e=>(r(e),v),_=()=>{a.visible=!1},g=(e,t,a=!1)=>(!0===a?d.value[e]=t:u(d.value,{[e]:t}),v);(0,s.onUnmounted)((()=>{o.value=!1,a.visible=!1}));const v=(0,s.reactive)({show:m,update:h,on:g,close:_,config:e});return v}}}]);