"use strict";(self["webpackChunkgoumee_star_temp"]=self["webpackChunkgoumee_star_temp"]||[]).push([[5028],{45028:function(e,t,i){i.d(t,{Z:function(){return b}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tg-live-display-dialog-add-page tg-dialog-vcenter"},[i("el-drawer",{staticClass:"tg-dialog-classic",attrs:{title:e.title,visible:e.visible,wrapperClosable:!1,"close-on-press-escape":!1},on:{close:e.handleCloseAction}},[i("div",{staticClass:"ta-live-display-content"},[i("el-form",{ref:"formRef",attrs:{"label-position":"top",model:e.numOfSessionsForm,rules:e.formRules,size:"small","label-width":"106px"}},[i("head-lines",{staticStyle:{"margin-bottom":"17px","margin-left":"-10px"},attrs:{title:"场次信息"}}),i("el-form-item",{staticClass:"one-item",attrs:{label:"直播标题",prop:"live_title"}},[i("el-input",{attrs:{placeholder:"请输入直播标题",maxlength:"20",clearable:""},model:{value:e.numOfSessionsForm.live_title,callback:function(t){e.$set(e.numOfSessionsForm,"live_title","string"===typeof t?t.trim():t)},expression:"numOfSessionsForm.live_title"}})],1),i("div",{staticClass:"four-item"},[i("el-form-item",{staticClass:"date-picker-item",attrs:{label:"直播时间",prop:"live_start_time"}},[i("el-date-picker",{staticStyle:{width:"472px"},attrs:{clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy.MM.dd HH:mm","value-format":"yyyy-MM-dd HH:mm","popper-class":"live-time-layer"},on:{change:e.onLiveTimeChange},model:{value:e.numOfSessionsForm.startTimeAndEndTime,callback:function(t){e.$set(e.numOfSessionsForm,"startTimeAndEndTime",t)},expression:"numOfSessionsForm.startTimeAndEndTime"}})],1)],1),i("el-form-item",{staticClass:"one-item",attrs:{label:"直播间",prop:"studio_id",rules:e.studioRequired?{required:!0,message:"请选择直播间",trigger:["blur","change"]}:void 0}},[i("el-select",{attrs:{remote:"","reserve-keyword":"",clearable:!e.studioRequired,disabled:""===e.project_id,filterable:"",placeholder:"请选择直播间","remote-method":e.queryStudio},on:{change:e.studioChanged},model:{value:e.numOfSessionsForm.studio_name,callback:function(t){e.$set(e.numOfSessionsForm,"studio_name",t)},expression:"numOfSessionsForm.studio_name"}},e._l(e.studioList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.studio_name,value:e.studio_name}})})),1)],1),i("section",{staticClass:"schedule-list three-item",staticStyle:{"margin-top":"29px"}},[i("head-lines",{staticStyle:{"margin-left":"-10px"},attrs:{title:"主播排班信息"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("tg-button",{attrs:{type:"primary",size:"mini",disabled:!!e.numOfSessionsForm.kol_schedule_infos.length||!e.numOfSessionsForm.live_title||!e.numOfSessionsForm.live_start_time||!e.numOfSessionsForm.studio_id&&e.studioRequired||e.isNotOneDay||e.isAutoObtain},on:{click:e.onAddkolSchedule}},[e._v(" 添加排班 ")]),i("tg-button",{staticClass:"mgl-12",attrs:{type:"default",size:"mini",disabled:!e.numOfSessionsForm.kol_schedule_infos.length||e.isAutoObtain},on:{click:e.onDeleteKolSchedule}},[e._v(" 清除排班 ")])],1),e.numOfSessionsForm.kol_schedule_infos.length?i("div",{staticStyle:{display:"flex",width:"100%"}},[i("div",{staticStyle:{"margin-right":"9px",position:"relative","margin-top":"18px",width:"2px"}},[i("div",{staticStyle:{margin:"8px 0",height:"calc(100% - 22px)",background:"rgba(164, 178, 194, 0.3)"}}),i("div",{staticStyle:{position:"absolute",top:"0",left:"-2px",width:"6px",height:"6px","-moz-border-radius":"3px","-webkit-border-radius":"3px","border-radius":"3px",background:"rgba(164, 178, 194, 0.3)"}}),i("div",{staticStyle:{position:"absolute",bottom:"7px",left:"-2px",width:"6px",height:"6px","-moz-border-radius":"3px","-webkit-border-radius":"3px","border-radius":"3px",background:"rgba(164, 178, 194, 0.3)"}})]),i("div",{staticStyle:{width:"100%"}},[e._l(e.numOfSessionsForm.kol_schedule_infos,(function(t,s){return i("div",{key:s,staticStyle:{position:"relative"}},[s>0&&!e.isAutoObtain?i("i",{staticClass:"delete-btn-time el-icon-error",on:{click:function(t){return e.deleteKolTime(s)}}}):e._e(),i("div",{staticStyle:{padding:"18px 18px 0 18px",background:"#f8fafc",color:"#666","margin-top":"18px","border-radius":"4px",width:"100%"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"直播时间"}},[i("div",[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"datetime",disabled:0===s||e.isAutoObtain,clearable:!1,format:"yyyy.MM.dd HH:mm","value-format":"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"选择日期时间"},on:{change:function(t){return e.kolWorkTime(s)}},model:{value:t.start_time,callback:function(i){e.$set(t,"start_time",i)},expression:"item.start_time"}}),i("span",[e._v(" ~ "+e._s(t.end_time||"待设置"))])],1)]),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"排班人员",rules:{required:!0,message:"请选择排版人员"}}},[i("div",[i("el-select",{attrs:{clearable:"",multiple:"","reserve-keyword":"",disabled:e.isAutoObtain,filterable:"",value:t.kol_ids,placeholder:"请输入并选择排班人员"},on:{change:function(t){return e.onSelectKolUserChanged(t,s)}}},e._l(e.anchorKolList,(function(e){return i("el-option",{key:e.kol_id,attrs:{label:e.kol_name+"("+e.real_name+")",value:e.kol_id}})})),1)],1)])],1)])})),i("div",{staticClass:"add-timeline",attrs:{disabled:e.isAutoObtain},on:{click:function(){return e.addKolTimeLine(!0)}}},[i("i",{staticClass:"el-icon-circle-plus"}),e._v("添加时间点 ")])],2)]):e._e()],1),i("section",{staticClass:"schedule-list three-item",staticStyle:{"margin-top":"29px"}},[i("head-lines",{staticStyle:{"margin-left":"-10px"},attrs:{title:"运营排班信息"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("tg-button",{attrs:{type:"primary",size:"mini",disabled:!!e.numOfSessionsForm.operator_schedule_infos.length||!e.numOfSessionsForm.live_title||!e.numOfSessionsForm.live_start_time||!e.numOfSessionsForm.studio_id&&e.studioRequired||e.isNotOneDay},on:{click:e.onAddOperatorSchedule}},[e._v(" 添加排班 ")]),i("tg-button",{staticClass:"mgl-12",attrs:{type:"default",size:"mini",disabled:!e.numOfSessionsForm.operator_schedule_infos.length},on:{click:e.onDeleteOperatorSchedule}},[e._v(" 清除排班 ")])],1),e.numOfSessionsForm.operator_schedule_infos.length?i("div",{staticStyle:{display:"flex",width:"100%"}},[i("div",{staticStyle:{"margin-right":"9px",position:"relative","margin-top":"18px",width:"2px"}},[i("div",{staticStyle:{margin:"8px 0",height:"calc(100% - 22px)",background:"rgba(164, 178, 194, 0.3)"}}),i("div",{staticStyle:{position:"absolute",top:"0",left:"-2px",width:"6px",height:"6px","-moz-border-radius":"3px","-webkit-border-radius":"3px","border-radius":"3px",background:"rgba(164, 178, 194, 0.3)"}}),i("div",{staticStyle:{position:"absolute",bottom:"7px",left:"-2px",width:"6px",height:"6px","-moz-border-radius":"3px","-webkit-border-radius":"3px","border-radius":"3px",background:"rgba(164, 178, 194, 0.3)"}})]),i("div",{staticStyle:{width:"100%"}},[e._l(e.numOfSessionsForm.operator_schedule_infos,(function(t,s){return i("div",{key:s,staticStyle:{position:"relative"}},[s>0?i("i",{staticClass:"delete-btn-time el-icon-error",on:{click:function(t){return e.deleteOperateTime(s)}}}):e._e(),i("div",{staticStyle:{padding:"18px 18px 0 18px",background:"#f8fafc",color:"#666","margin-top":"18px","border-radius":"4px",width:"100%"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"直播时间"}},[i("div",[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"datetime",disabled:0===s,clearable:!1,format:"yyyy.MM.dd HH:mm","value-format":"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"选择日期时间"},on:{change:function(t){return e.kolOperateTime(s)}},model:{value:t.start_time,callback:function(i){e.$set(t,"start_time",i)},expression:"item.start_time"}}),i("span",[e._v(" ~ "+e._s(t.end_time||"待设置"))])],1)]),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"排班人员",rules:{required:!0,message:"请选择排版人员"}}},[i("div",[i("el-select",{attrs:{clearable:"",multiple:"","reserve-keyword":"",filterable:"",value:t.operator_ids,placeholder:"请输入并选择排班人员"},on:{change:function(t){return e.onSelectOperateUserChanged(t,s)}}},e._l(e.oprateList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1)])],1)])})),i("div",{staticClass:"add-timeline",on:{click:e.addOperateTimeLine}},[i("i",{staticClass:"el-icon-circle-plus"}),e._v("添加时间点 ")])],2)]):e._e()],1)],1),i("div",{staticClass:"live-display-add-footer"},[i("tg-button",{attrs:{size:"small"},on:{click:e.handleCloseAction}},[e._v("取消")]),i("tg-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSaveHandler}},[e._v("保存")])],1)],1)]),i("tg-mask-loading",{attrs:{visible:e.saveLoading,content:"  正在保存，请稍候..."}})],1)},a=[],o=i(97434),l=i(3293),r=i(64236),n=i(47583),d=i(50935),u=i(6933),_=i.n(u),m=i(82741),c=i(53451),p=i.n(c);const{debounce:v}=p();var f=(0,o.defineComponent)({props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增场次"},start_date_disabled:{type:Boolean,default:!1},defaultDisplay:{type:Object},project_id:{type:Number,default:-1},business_type:{type:Number},studioInfo:{type:Object}},setup(e,t){const i=(0,o.ref)(!1),s=(0,o.ref)(void 0),a=(0,o.ref)({id:void 0,project_id:e.project_id,live_title:"",live_start_time:"",live_end_time:"",studio_id:Number(e.studioInfo?.studio_id),studio_name:e.studioInfo?.studio_name,kol_schedule_infos:[],operator_schedule_infos:[],startTimeAndEndTime:[]});(0,o.watch)([()=>e.visible,()=>e.defaultDisplay],(async()=>{if(e.visible&&(a.value.studio_id=e.studioInfo?Number(e.studioInfo?.studio_id):Number(e.defaultDisplay?.studio_id),a.value.studio_name=e.studioInfo?e.studioInfo?.studio_name:e.defaultDisplay?.studio_name,e.defaultDisplay)){u.value=e.defaultDisplay?.business_type;const{id:t=0,project_id:i=0,live_title:s="",live_start_time:o="",live_end_time:n=""}=e.defaultDisplay,[{data:d}]=await(0,r.Dc)(300,(0,l.D2)(t));if(d.success){const e={},t={};d.data.operator_schedule_list.forEach((e=>{const i=_()(e.start_time).valueOf();t[i]?t[i].operator_ids.push(e.user_id):(t[i]={},t[i].start_time=e.start_time,t[i].end_time=e.end_time,t[i].operator_ids=[e.user_id],t[i].pickerOptions={disabledDate(t){return _()(t).format("YYYY-MM-DD")<_()(e.start_time).format("YYYY-MM-DD")||_()(t).format("YYYY-MM-DD")>_()(e.end_time).format("YYYY-MM-DD")}})})),d.data.kol_schedule_list.forEach((t=>{const i=_()(t.start_time).valueOf();e[i]?e[i].kol_ids.push(t.kol_id):(e[i]={},e[i].start_time=t.start_time,e[i].end_time=t.end_time,e[i].kol_ids=[t.kol_id],e[i].pickerOptions={disabledDate(e){return _()(e).format("YYYY-MM-DD")<_()(t.start_time).format("YYYY-MM-DD")||_()(e).format("YYYY-MM-DD")>_()(t.end_time).format("YYYY-MM-DD")}})})),a.value.operator_schedule_infos=Object.values(t),a.value.kol_schedule_infos=Object.values(e)}a.value.project_id=i,a.value.id=t,a.value.live_title=s,a.value.live_start_time=o,a.value.live_end_time=n,a.value.startTimeAndEndTime=[o,n]}}));const u=(0,o.ref)(void 0),c=(0,o.ref)([]),p=(0,o.ref)({project_id:{required:!0,message:"请输入项目编号",trigger:["change","blur"]},live_start_time:{required:!0,message:"请选择直播日期",trigger:"blur"},live_title:{required:!0,message:"请输入直播标题",trigger:"blur"}});async function f(e,t){const{data:i}=await(0,l.lj)(e,t);i.success&&(c.value=i.data)}const h=()=>{b(),t.emit("closeAction")},g=(0,o.reactive)({check_kol_schedule_infos:[],anchorKolList:[],oprateList:[]}),k=e=>{const t=c.value.filter((t=>e===t.studio_name));t.length?a.value.studio_id=t[0].id:a.value.studio_id=void 0},b=()=>{a.value={id:void 0,project_id:e.project_id,live_title:"",live_start_time:"",live_end_time:"",studio_id:Number(e.studioInfo?.studio_id),studio_name:e.studioInfo?.studio_name,kol_schedule_infos:[],operator_schedule_infos:[],startTimeAndEndTime:[]},s.value?.clearValidate()},{loadScheduleData:y,ScheduleData:Y,...S}=(0,d.g)(),D=e=>{""!==e?f(e,u.value):c.value=[]},O=(0,o.ref)([]),x=async()=>{const{data:e}=await(0,l.Sx)({});e.success?(O.value=e.data,g.anchorKolList=e.data.filter((e=>e.kol_id<0))):g.anchorKolList=[];const t=await(0,n.uZ)({roles:"1001",business_type:u.value});t.data.success?g.oprateList=t.data.data:g.oprateList=[]},w=()=>{const e=[{duration:0,start_time:"",end_time:"",name:"",id:0}],t=(0,r.Tw)(e.map((e=>[e.start_time,e.end_time])).flat()).map((e=>new Date(e).getTime())).sort();t.shift(),t.forEach(((e,i)=>{i<t.length-1&&T()}))},M=()=>{const e=[{duration:0,start_time:"",end_time:"",name:"",id:-1}],t=(0,r.Tw)(e.map((e=>[e.start_time,e.end_time])).flat()).map((e=>new Date(e).getTime())).sort();t.shift(),t.forEach(((e,i)=>{i<t.length-1&&$()}))},C=async()=>{await x(),w(),M()};C();const T=(e=!1)=>{if(W.value&&e)return;const i=a.value.kol_schedule_infos.length,s=a.value.kol_schedule_infos[i-1],o=a.value.kol_schedule_infos.length-1,l=a.value.kol_schedule_infos[o].end_time,r=a.value.kol_schedule_infos[o].start_time;s.start_time?0!==a.value.kol_schedule_infos[o].kol_ids.length?a.value.kol_schedule_infos?.push({end_time:"",start_time:_()(r).format("YYYY-MM-DD")+" 00:00",kol_ids:[],pickerOptions:{disabledDate(e){return _()(e).format("YYYY-MM-DD")<_()(r).format("YYYY-MM-DD")||_()(e).format("YYYY-MM-DD")>_()(l).format("YYYY-MM-DD")}}}):t.root.$message.error({showClose:!0,duration:6e3,message:"未选择排班人员"}):t.root.$message.error({showClose:!0,duration:6e3,message:"请先选择时间"})},F=e=>{const t=a.value.kol_schedule_infos[e],i=a.value.kol_schedule_infos[e-1];1!==e||t.start_time?(i.end_time=t.start_time,e===a.value.kol_schedule_infos.length-1&&(t.end_time=a.value.live_end_time)):i.end_time=a.value.live_end_time},A=e=>{const t=a.value.operator_schedule_infos[e],i=a.value.operator_schedule_infos[e-1];1!==e||t.start_time?(i.end_time=t.start_time,e===a.value.operator_schedule_infos.length-1&&(t.end_time=a.value.live_end_time)):i.end_time=a.value.live_end_time},$=()=>{const e=a.value.operator_schedule_infos.length,i=a.value.operator_schedule_infos[e-1],s=a.value.operator_schedule_infos.length-1,o=a.value.operator_schedule_infos[s].end_time,l=a.value.operator_schedule_infos[s].start_time;i.start_time?0!==a.value.operator_schedule_infos[s].operator_ids.length?a.value.operator_schedule_infos?.push({end_time:"",start_time:_()(l).format("YYYY-MM-DD")+" 00:00",operator_ids:[],pickerOptions:{disabledDate(e){return _()(e).format("YYYY-MM-DD")<_()(l).format("YYYY-MM-DD")||_()(e).format("YYYY-MM-DD")>_()(o).format("YYYY-MM-DD")}}}):t.root.$message.error({showClose:!0,duration:6e3,message:"未选择排班人员"}):t.root.$message.error({showClose:!0,duration:6e3,message:"请先选择时间"})},L=e=>{a.value.kol_schedule_infos.splice(e,1);const t=a.value.kol_schedule_infos.length;a.value.kol_schedule_infos.forEach(((e,i)=>{e.end_time=i===t-1?a.value.live_end_time:a.value.kol_schedule_infos[i+1].start_time}))},j=e=>{a.value.operator_schedule_infos.splice(e,1);const t=a.value.operator_schedule_infos.length;a.value.operator_schedule_infos.forEach(((e,i)=>{e.end_time=i===t-1?a.value.live_end_time:a.value.operator_schedule_infos[i+1].start_time}))},E=(e,t)=>{const i=a.value.kol_schedule_infos;i[t].kol_ids=e},H=(e,t)=>{a.value.operator_schedule_infos[t].operator_ids=e},q=()=>{a.value.live_start_time?a.value.kol_schedule_infos?.push({end_time:a.value.live_end_time,start_time:a.value.live_start_time,kol_ids:[],pickerOptions:{}}):t.root.$message.error({showClose:!0,duration:6e3,message:"请先选择直播开始时间和结束时间"})},K=()=>{a.value.kol_schedule_infos=[]},z=()=>{a.value.live_start_time?a.value.operator_schedule_infos?.push({end_time:a.value.live_end_time,start_time:a.value.live_start_time,operator_ids:[],pickerOptions:{}}):t.root.$message.error({showClose:!0,duration:6e3,message:"请先选择直播开始时间和结束时间"})},I=()=>{a.value.operator_schedule_infos=[]},R=v((async(e,i)=>{const s=await(0,m.I)(t,"此次排班改动较大，是否进行重新排班？");return s?(K(),I(),Promise.resolve(s)):(a.value.live_start_time=e,a.value.live_end_time=i,a.value.startTimeAndEndTime=[e,i],Promise.resolve(!1))})),N=async(e,t,i,s)=>{if(t===s[1]?.start_time)s?.shift();else{if(t<s[0].start_time){const o={end_time:s[0].start_time,start_time:e[0],pickerOptions:{disabledDate(e){return e.getTime()<_()(t,"YYYY-MM-DD").valueOf()||e.getTime()>_()(i,"YYYY-MM-DD").valueOf()}}};return s[0].kol_ids?o.kol_ids=[...s[0].kol_ids]:o.operator_ids=[...s[0].operator_ids],s?.unshift(o),a.value.live_start_time=e[0],Promise.resolve(!1)}if(e[0]>s[0].start_time&&e[0]<s[1]?.start_time)return s[0].start_time=e[0],Promise.resolve(!1);if(s[s.length-1]?.end_time<e[1]){const a={end_time:e[1],start_time:s[s.length-1]?.end_time,pickerOptions:{disabledDate(e){return e.getTime()<_()(t,"YYYY-MM-DD").valueOf()||e.getTime()>_()(i,"YYYY-MM-DD").valueOf()}}};return s[0].kol_ids?a.kol_ids=[...s[s.length-1].kol_ids]:a.operator_ids=[...s[s.length-1].operator_ids],s?.push(a),Promise.resolve(!1)}if(s[s.length-1]?.start_time===e[1])return s.pop(),Promise.resolve(!1);if(e[1]<s[s.length-1]?.end_time&&e[1]>s[s.length-1]?.start_time)1===s.length?(s[0].start_time=e[0],s[0].end_time=e[1]):s[s.length-1].end_time=e[1];else if(1===s.length)return s[0].start_time=e[0],s[0].end_time=e[1],Promise.resolve(!1)}},P=async e=>{const t=a.value.kol_schedule_infos.length,i=a.value.operator_schedule_infos.length,s=a.value.live_start_time,o=a.value.live_end_time;if(null===e)return a.value.live_start_time="",a.value.live_end_time="",K(),void I();if(a.value.live_start_time=e[0],a.value.live_end_time=e[1],0===t&&0===i)return;const l=a.value.live_start_time,r=a.value.live_end_time;return 1===a.value.kol_schedule_infos.length&&e[0]>a.value.kol_schedule_infos[0].end_time||(B.value||e[0]>a.value.kol_schedule_infos[1]?.start_time||e[1]<a.value.kol_schedule_infos[t-1]?.start_time)&&e[1]!==a.value.kol_schedule_infos[t-1]?.start_time?R(s,o):(0!==t&&await N(e,l,r,a.value.kol_schedule_infos),void(0!==i&&await N(e,l,r,a.value.operator_schedule_infos)))},U={disabledDate(t){return!e.defaultDisplay?.id&&t.getTime()<Date.now()-864e5}},B=(0,o.computed)((()=>{const e=a.value.live_start_time,t=a.value.live_end_time;return _()(t).date()-_()(e).date()>=2})),Z=async()=>{const e=await new Promise((e=>s.value?.validate((t=>e(t)))));if(!e||!a.value.studio_id&&V.value)return;const o=a.value.live_start_time,n=a.value.live_end_time;if(B.value)return void t.root.$message.error({showClose:!0,duration:6e3,message:"保存失败，日期最多跨一天"});const{live_end_time:d,live_start_time:u,live_title:m,project_id:c,studio_id:p,id:v,kol_schedule_infos:f,operator_schedule_infos:h}=a.value;if(0!==f.length){const e=f.find((e=>_()(e.start_time).valueOf()<_()(o).valueOf()||e.start_time===e.end_time||e.start_time>n)),i=f.find((e=>0===e.kol_ids.length));if(e)return void t.root.$message.error({showClose:!0,duration:6e3,message:"主播排班日期错误"});if(i)return void t.root.$message.error({showClose:!0,duration:6e3,message:"未选择排班人员"})}if(0!==h.length){const e=h.find((e=>_()(e.start_time).valueOf()<_()(o).valueOf()||e.start_time===e.end_time||e.start_time>n));if(e)return void t.root.$message.error({showClose:!0,duration:6e3,message:"运营排班日期错误"});const i=h.find((e=>0===e.operator_ids.length));if(i)return void t.root.$message.error({showClose:!0,duration:6e3,message:"未选择排班人员"})}const g={id:v?.toString(),project_id:c.toString(),live_title:m,live_start_time:u,live_end_time:d,studio_id:p?.toString(),kol_schedule_infos:f.map((({start_time:e,end_time:t,kol_ids:i})=>({start_time:e,end_time:t,kol_ids:i}))),operator_schedule_infos:h.map((({start_time:e,end_time:t,operator_ids:i})=>({start_time:e,end_time:t,operator_ids:i})))};i.value=!0;const[{data:k}]=await(0,r.Dc)(300,(0,l.MB)(g));i.value=!1,k.success?(t.emit("succeed"),t.root.$message.success(k.message)):t.root.$message.error(k.message??"保存失败")},W=(0,o.computed)((()=>!e.defaultDisplay?.allow_update_kol_schedule&&!!e.defaultDisplay?.compass_shop_live_room_id)),V=(0,o.computed)((()=>e.defaultDisplay?3!==e.defaultDisplay.business_type:3!==e.business_type));return{onSelectKolUserChanged:E,onSelectOperateUserChanged:H,deleteKolTime:L,deleteOperateTime:j,addKolTimeLine:T,addOperateTimeLine:$,...(0,o.toRefs)(g),formRef:s,isNotOneDay:B,formRules:p,studioList:c,resetForm:b,handleCloseAction:h,studioChanged:k,saveLoading:i,queryStudio:D,onAddkolSchedule:q,onDeleteKolSchedule:K,onAddOperatorSchedule:z,onDeleteOperatorSchedule:I,onLiveTimeChange:P,numOfSessionsForm:a,handleSaveHandler:Z,pickerOptions:U,kolWorkTime:F,kolOperateTime:A,isAutoObtain:W,studioRequired:V}}}),h=f,g=i(1001),k=(0,g.Z)(h,s,a,!1,null,null,null),b=k.exports},50935:function(e,t,i){i.d(t,{g:function(){return l}});var s=i(3293),a=i(64236),o=i(97434);const l=()=>{const e=(0,o.ref)({kolSchedules:[],operatorSchedules:[]}),t=(0,o.ref)(!1),i=async t=>{const[{data:i}]=await(0,a.Dc)(300,(0,s.D2)(t));i.success?(e.value.kolSchedules=i.data.kol_schedule_list,e.value.operatorSchedules=i.data.operator_schedule_list):(e.value.kolSchedules=[],e.value.operatorSchedules=[])};return{loading:t,loadScheduleData:i,ScheduleData:e}}}}]);